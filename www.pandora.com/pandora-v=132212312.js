(function() { var f;function g(b){function c(c){var e=b;if(c)for(var h=0;h<c.length;h++)e=e.replace("$"+(h+1),c[h]);return e}c.toString=function(){k.error("Attempt to treat enum as string:",b);return""};return c}
var m=m?m:{},aa=g("Pandora Plus - Listen to Pandora with No Ads, Higher Quality Audio, and More"),ba=g("Pandora Radio - Listen to Free Internet Radio, Find New Music"),ca=g("Could not create your account at this time. Please try again later."),da=g("Invalid email."),ea=g("An account already exists with that email address."),fa=g("Your password should be at least 6 characters."),ha=g("Your password may contain only letters, numbers, and punctuation."),ia=g("The provided password was incorrect. Please re-enter your password."),
ja=g("Please enter a valid birth year."),ka=g("Please enter a valid birth day."),la=g("Please provide month and day of your birth."),ma=g("We're sorry, you must be at least 13 years old to register."),na=g("Invalid ZIP code"),oa=g("Invalid postal code"),qa=g("You must agree to the terms of service to continue."),ra=g("Please specify your gender."),sa=g("Is this correct?"),va=g("This is the email you'll use to log in:"),wa=g("Yes"),xa=g("No"),ya=g("Please enter an email address"),za=g("Invalid Email"),
Aa=g("Please enter a password."),Ba=g("Please enter an email address and password"),Ca=g("Your password may contain only letters, numbers, and punctuation."),Da=g("Your password should be at least 6 characters."),Ea=g("The two passwords provided were different, please try again"),Fa=g("Your password has been changed"),Ga=g("Reset password"),Ha=g(""),Ja=g("To reset your password, please sign out."),Ka=g("Sign Out"),La=g("Cancel"),Ma=g("Your Pandora account has been deleted"),Na=g("MALE"),Oa=g("FEMALE"),
Pa=g("Create Station"),Qa=g("Enter an artist, song, or genre to create a station"),Ra=g("Top Hit"),Sa=g("Songs"),Ta=g("Artists"),Ua=g("Composers"),Va=g("Genres"),Wa=g("Brand Stations"),Xa=g("Stations"),Ya=g("Artist Stations"),Za=g("Your PIN must be at least 2 characters long."),$a=g("Your PIN has been emailed to you."),ab=g("Your credit card was removed from storage."),cb=g("Settings have not yet been saved."),db=g("Settings have been saved."),eb={},hb=g("Congratulations! Your Pandora Plus upgrade has been extended. Your new expiration date is $1"),
ib=g("Congratulations, you have been upgraded to Pandora Plus."),jb=g("Your gift code was entered incorrectly"),kb=g("Your email was entered incorrectly"),lb=g("Your password was entered incorrectly"),mb=g("Welcome to your Pandora Plus Free Trial!"),ob=g("Your free trial is already in progress."),pb=g("You are already using Pandora Plus."),qb=g("Your account is not eligible for a trial."),rb=g("You must register before starting a trial of Pandora Plus."),sb=g("Your account has already had a trial."),
ub=g("Invalid sponsor $1"),vb=g("Too many trials underway - try again tomorrow."),wb=g("Unknown reason."),xb=g("We've encountered an error.  Sorry, it's our fault.  Please click 'reload' to continue listening."),yb=g("Unfortunately our music licenses force us to limit the number of tracks you may skip each hour. If you want to hear something else, try creating another station starting with a different artist or track."),zb=g("Unfortunately our music licenses force us to limit the number of tracks you may skip each hour. If you want to hear something else, try creating another station starting with a different artist or track."),
Ab=g("Unfortunately our music licenses force us to limit the number of tracks you may skip each hour. If you want to hear something else, try creating another station starting with a different artist or track."),Db=g("Unfortunately our music licenses force us to limit the number of tracks you may skip each hour. If you want to hear something else, try creating another station starting with a different artist or track."),Eb=g("Sorry about that.  When this track is over, we'll never play it again on this station."),
Fb=g("ERROR: Your browser cannot play audio - please upgrade to Flash 10 or higher"),Gb=g("ERROR: Your Explicit Content Filter could not be saved because the PIN you entered is invalid."),Hb=g("Sorry, I couldn't send the email: $1"),Ib=g("You must enter one or more valid email addresses"),Jb=g("You may not include email addresses or HTML content in your message"),Kb=g("Error: unable to move track to another station"),Lb=g("Error while redeeming gift code: "),Mb=g("Error while registering: "),Nb=g("Sorry, I had a problem while saving your credit card and was unable to upgrade your account."),
Ob=g("Sorry, we are unable to upgrade your account at this time. Please confirm that the data you provided is accurate and try again. If you experience multiple declines please contact your credit card company."),Pb=g("A payment is already in progress. Please retry in a few minutes."),Qb=g("Sorry, we are unable to upgrade your account at this time. We are working on the problem now. Please try again later."),Rb=g("An error prevented this operation: $1"),Sb=g("You must upgrade to Pandora Plus to use the Pandora desktop application"),
Tb=g("I'm sorry, you may only create up to 10 stations.  Register now and create up to 100 stations."),Ub=g("Your station limit has been reached. Remove a station from your list to add a new one."),Vb=g("Want Thumbprint Radio? We need to know you a little bit better. Keep creating stations and thumbing up songs you love, and we\u2019ll let you know when it\u2019s ready!"),Wb=g("Sorry, we couldn't create this station. Please try again."),Xb=g("We cannot accept your comment at this time. Please try again later."),
Yb=g("We cannot report the comment at this time. Please try again later."),Zb=g("We're having unexpected technical difficulties. Our engineers are scrambling to fix things. Please try again later."),$b=g("We're sorry, but we can't find any more music to play on your station right now. Try switching stations."),ac=g("This exclusive station is no longer available. Please select a different station."),bc=g("This exclusive station has finished playing."),cc=g("Pandora Plus's high quality audio requires an internet connection speed of 192 kbps. Your audio has been changed to normal quality. (You can change this back using 'Audio Quality' on the Pandora Plus menu)"),
dc=g("Your internet connection is slow, causing the music to pause during playback. Pandora requires at least 64 kbps to stream."),ec=g("This feature is temporarily unavailable"),fc=g("Please log in or register before creating a station"),gc=g("We're sorry, we could not play music on this station.  Please try another station."),hc=g("We're sorry, this Facebook account is being used by another Pandora account. For assistance, please visit our <a href='http://help.pandora.com/customer/portal/articles/765766' target='_blank'>help page</a> or <a href='http://help.pandora.com/customer/portal/emails/new' target='_blank'>email us</a>"),
ic=g("Sorry, we could not start the free trial via PayPal. Please try again, or select another payment option."),jc=g("Sorry, we could not complete the payment via PayPal. No charges have been made. Please try again, or select another payment option."),kc=g("Sorry, the payment was declined by PayPal. Please correct the issue with PayPal and try again, or select another payment option."),lc=g("The requested track does not exist on this station."),mc=g("Your advertiser account owns this station, and it is already in your station list."),
nc=g("Sorry, a problem occurred with your reward. Please try again."),oc=g("Sorry, we could not redeem the gift with the PayPal information provided. Please try again, or select another payment option."),pc=g("You are unable to delete this station from the station list. As the station owner, you must delete the station directly from the station management system where the station was created."),qc=g("Sorry, this artist audio message is no longer available."),rc=g("Private Profile"),sc=g("Public Profile"),
tc=g("This is your space to write something about yourself"),uc=g("Ok, we'll put it on the shelf for a while."),vc=g("<strong>Thanks for the feedback.</strong><br>We appreciate your input, and it will help us improve artist audio messages in the future."),wc=g("<strong>Thanks for the feedback.</strong><br>In Settings > Artist Messages, you can turn off artist audio messages on a specific station, or turn them off for all your stations."),xc=g('Successfully emailed "$1"'),yc=g("Thanks for sharing. You just posted to $1"),
zc=g('We deleted your station "$1".'),Ac=g("You like this station"),Bc=g("Like this station"),Cc=g("Shared Station"),Dc=g("Would you like to make this station your own station?"),Ec=g("When you like a track while listening to a shared station, you become the owner of the station. Once you own the station, changes made by the original creator of the station will no longer apply."),Fc=g("When you rename a shared station, you become the owner of the station. Once you own the station, changes made by the original creator of the station will no longer apply."),
Gc=g("Make this my station"),Hc=g("Keep this as a shared station"),Ic=g("You like this "),Jc=g("Like this "),Kc=g("Are you sure?"),Lc=g("Pandora"),Mc=g("Undo like"),Nc=g("yes"),Oc=g("no"),Pc=g("We have updated the Pandora site. Click 'reload' to use the latest version."),Qc=g("Please take a moment to <a href='#' class='toastItemReload'>click here</a> and reload your station."),Rc=g("Type in artist, track, or composer"),Sc=g("Add variety to this station"),Tc=g("Type in the name of another artist, track or composer and we'll add music with similar musical qualities to this station."),
Uc=g("I'm sorry I can't find \"$1\" in the Music Genome Project."),Vc=g("Lyrics"),Wc=g("Lyrics not available"),Xc=g("About"),Yc=g("Similar Artists"),Zc=g("Similar Composers"),$c=g("About This Track"),ad=g("More Tracks"),bd=g("You must agree to the Pandora Plus terms."),cd=g("Enter a valid security code."),dd=g("Select a subscription frequency"),ed=g("Enter a valid card number."),fd=g("Your card has expired."),gd=g("Enter name as it appears on card."),hd=g("We're sorry, we couldn't authorize the card."),
id=g("Connecting..."),jd=g("Thank you! Your Pandora Plus payment is complete. Enjoy the music!"),kd=g("Thank you! Your Pandora for Business payment is complete. Enjoy the music!"),ld=g("Thank you! Your $0.99 payment is complete. Enjoy the music!"),md=g("Could not convert to Pandora for Business."),nd=g("You need to be a subscriber to convert to Pandora for Business."),od=g("You have already converted to Pandora for Business once."),pd=g("Please provide some information about your business to continue.");m.v={};m.v.Kn=g("ANONYMOUS");m.v.Nn=g("CANCELLED");m.v.lg=g("COMPLIMENTARY");m.v.EB=g("FREE");m.v.ku=g("EXPIRED_SUBSCRIBER");m.v.Fu=g("REGISTERED");m.v.Mu=g("SUSPENDED");m.v.td=g("SUBSCRIBER");m.v.Tu=g("VENDOR_BILLED_COMPLIMENTARY");m.v.Vu=g("VENDOR_BILLED_SUBSCRIBER");m.v.Bu=g("PAY_TO_PLAY");m.v.Th=g("BUSINESS");m.sa={};m.sa.wB=g("COMPLIMENTARY_PERIOD_EXPIRED");m.sa.Uu=g("VENDOR_BILLED_COMPLIMENTARY_PERIOD_EXPIRED");m.sa.KB=g("INITIAL_SETTLEMENT_DECLINED");m.sa.ao=g("RENEWAL_SETTLEMENT_DECLINED");m.sa.K0=g("SUBSCRIPTION_EXPIRED_WITHOUT_RENEWAL");m.sa.ho=g("VENDOR_BILLED_SUBSCRIPTION_TIMED_OUT");m.sa.tC=g("SPONSORED_COMPLIMENTARY_PERIOD_EXPIRED");m.sa.DV=g("GIFT_PERIOD_EXPIRED");m.sa.iC=g("MULTI_DAY_PASS_EXPIRED");m.sa.tB=g("BUSINESS_EXPIRED");m.d={};m.d.BR=g("ADDRESS_IMPORT_SERVICE_DISABLED");m.d.CR=g("ADDRESS_IMPORT_SERVICE_UNKNOWN");m.d.Se=g("AUTH_INVALID_USERNAME_PASSWORD");m.d.QR=g("AUTH_MISSING_USERNAME_PASSWORD");m.d.qB=g("AUTH_INVALID_TOKEN");m.d.su=g("INVALID_PASSWORD_RESET_TOKEN");m.d.SR=g("AUTH_WEB_LOGIN_NOT_ALLOWED");m.d.LR=g("AUTH_EXCHANGE_ACCESS_TOKEN_DISABLED");m.d.NR=g("AUTH_EXCHANGE_ACCESS_TOKEN_LID_MISMATCHED");m.d.MR=g("AUTH_EXCHANGE_ACCESS_TOKEN_FAILED");m.d.PR=g("AUTH_EXCHANGE_LOGIN_FAILED");m.d.OR=g("AUTH_EXCHANGE_LOGIN_DISABLED");
m.d.KR=g("AUTH_ADMIN_LOGIN_NOT_ALLOWED");m.d.KS=g("CREDIT_CARD_NO_RECORD_FOUND");m.d.tT=g("EMAIL_MALFORMED_ADDRESS");m.d.uT=g("EMAIL_NO_SUBJECT");m.d.sT=g("EMAIL_CONTENT_TOO_LONG");m.d.FT=g("EXPLICIT_PIN_MALFORMED");m.d.CT=g("EXPLICIT_CONTENT_FILTER_NOT_ENABLED");m.d.GT=g("EXPLICIT_PIN_NOT_SET");m.d.DT=g("EXPLICIT_PIN_ALREADY_SET");m.d.ET=g("EXPLICIT_PIN_INCORRECT");m.d.uu=g("LISTENER_ACCOUNT_IN_USE");m.d.vu=g("LISTENER_DUPLICATE_USERNAME");m.d.wu=g("LISTENER_MALFORMED_USERNAME");m.d.$Z=g("LISTENER_MISSING_EMAIL");
m.d.yu=g("LISTENER_SUSPENDED");m.d.c_=g("LOGIN_ACCOUNT_MISMATCHED");m.d.yC=g("STATION_DOES_NOT_EXIST");m.d.D0=g("STATION_ALREADY_EXISTS");m.d.x0=g("SEED_INVALID");m.d.wC=g("STATION_CODE_INVALID");m.d.E0=g("STATION_HAS_NO_MORE_CONTENT");m.d.k0=g("QUICKMIX_NOT_PLAYABLE");m.d.j0=g("QUICKMIX_NEEDS_MORE_STATIONS");m.d.IR=g("ARTIST_MUSICID_INVALID");m.d.z0=g("SONG_MUSICID_INVALID");m.d.y0=g("SONG_IDENTITY_INVALID");m.d.Zn=g("LISTENER_INVALID_PASSWORD");m.d.wk=g("LISTENER_NOT_AUTHORIZED");m.d.P2=g("VENDOR_NOT_AUTHORIZED");
m.d.$n=g("LISTENER_PASSWORD_TOO_SHORT");m.d.a_=g("LISTENER_NOT_FOUND");m.d.Cu=g("PLAYLIST_END");m.d.xB=g("CREDIT_CARD_DECLINED_AUTHORIZATION");m.d.yB=g("CREDIT_CARD_DECLINED_PAYMENT");m.d.MS=g("CREDIT_CARD_NUMBER_NOT_SET");m.d.PS=g("CREDIT_CARD_NUMBER_TOO_SHORT");m.d.NS=g("CREDIT_CARD_NUMBER_TOO_LONG");m.d.LS=g("CREDIT_CARD_NUMBER_BAD_CHECKSUM");m.d.GS=g("CREDIT_CARD_EXPIRATION_DATE_IN_THE_PAST");m.d.FS=g("CREDIT_CARD_COMPANY_NOT_SET");m.d.JS=g("CREDIT_CARD_NAME_NOT_SET");m.d.TS=g("CREDIT_CARD_ZIPCODE_NOT_SET");
m.d.RS=g("CREDIT_CARD_SECURITY_CODE_MALFORMED");m.d.HS=g("CREDIT_CARD_EXPMONTH_OUT_OF_RANGE");m.d.IS=g("CREDIT_CARD_EXPYEAR_OUT_OF_RANGE");m.d.SS=g("CREDIT_CARD_VOID_FAILED");m.d.QS=g("CREDIT_CARD_PAYMENT_VOIDED");m.d.T_=g("PREVIEW_INVALID_CODE");m.d.S_=g("PREVIEW_EXPIRED_CODE");m.d.kC=g("OUT_OF_SYNC");m.d.i_=g("MAX_RESULTS_OUT_OF_RANGE");m.d.N2=g("VENDOR_ALIAS_IS_BLANK");m.d.O2=g("VENDOR_ALIAS_IS_INVALID");m.d.M2=g("VENDOR_ALIAS_HASH_IS_INVALID");m.d.L2=g("VENDOR_ALIAS_ALREADY_IN_USE");m.d.RR=g("AUTH_TOKEN_TYPE_NOT_ALLOWED");
m.d.ZV=g("INVALID_VENDOR");m.d.ER=g("ANONYMOUS_VENDOR_ALIAS_NOT_ALLOWED");m.d.xu=g("LISTENER_STATE_NOT_ALLOWED");m.d.cC=g("MAINTENANCE_MODE");m.d.nC=g("READONLY_MODE");m.d.JB=g("INCOMPATIBLE_VERSION");m.d.YZ=g("LISTENER_BANNED_FROM_POSTING");m.d.yS=g("COMMENT_IS_EMPTY");m.d.zS=g("COMMENT_IS_EMPTY_AFTER_CLEAN");m.d.AS=g("COMMENT_IS_SPAM");m.d.BS=g("COMMENT_IS_TOO_LONG");m.d.wT=g("EXCESSIVE_NOTE_POSTING");m.d.xT=g("EXCESSIVE_NOTE_REPORTING");m.d.xS=g("COMMENT_DELETED");m.d.G_=g("PARAMETER_TYPE_MISMATCH");
m.d.F_=g("PARAMETER_MISSING");m.d.H_=g("PARAMETER_VALUE_INVALID");m.d.eT=g("DUPLICATE_ARTIST_BOOKMARK");m.d.hT=g("DUPLICATE_SONG_BOOKMARK");m.d.fT=g("DUPLICATE_FRIEND_BOOKMARK");m.d.gT=g("DUPLICATE_SEED_BOOKMARK");m.d.yT=g("EXCESSIVE_USER_QUICK_BOOKMARKING");m.d.b_=g("LISTENER_NOT_LOGGED_IN");m.d.l0=g("REMOVING_TOO_MANY_SEEDS");m.d.dT=g("DEVICE_NOT_FOUND");m.d.aT=g("DEVICE_CODE_INVALID");m.d.cT=g("DEVICE_DUPLICATE_DEVICECODE");m.d.B0=g("STATE_TRANSITION_NOT_ALLOWED");m.d.U_=g("PRIVATE_PROFILE");
m.d.f3=g("WEB_ACTIVATION_CODE_INVALID");m.d.$S=g("DEVICE_ALREADY_ASSOCIATED_TO_ACCOUNT");m.d.EC=g("USER_ALREADY_USED_TRIAL");m.d.YV=g("INVALID_MOBILE_CLIENT_VERSION");m.d.WV=g("INVALID_MOBILE_CLIENT_APPLICATION_TYPE");m.d.XV=g("INVALID_MOBILE_CLIENT_HANDSET");m.d.xR=g("ACCOUNT_ALREADY_ACTIVATED");m.d.WZ=g("LICENSING_RESTRICTIONS");m.d.Ln=g("BIRTH_YEAR_INVALID");m.d.Mn=g("BIRTH_YEAR_TOO_YOUNG");m.d.ko=g("ZIP_CODE_INVALID");m.d.Qn=g("GENDER_INVALID");m.d.DS=g("COUNTRY_CODE_INVALID");m.d.AR=g("ADDRESS_BOOK_IMPORTER_ERROR");
m.d.zR=g("ADDRESS_BOOK_AUTHENTICATION_ERROR");m.d.rT=g("EMAIL_CONTENT_INVALID");m.d.qT=g("EMAIL_ADDRESS_INVALID");m.d.A_=g("NO_VALID_EMAIL_ADDRESSES");m.d.GR=g("API_CALL_NOT_ALLOWED");m.d.I_=g("PASSWORD_NOT_ALLOWED_FOR_SHARED_DEVICE");m.d.VV=g("INVALID_AD_TOKEN");m.d.bT=g("DEVICE_DISABLED");m.d.DR=g("AD_COOKIE_NOT_FOUND");m.d.SB=g("INVALID_SPONSOR");m.d.BB=g("DAILY_TRIAL_LIMIT_REACHED");m.d.VU=g("FEATURE_TEMPORARILY_UNAVAILABLE");m.d.RB=g("INVALID_FACEBOOK_ACCOUNT_ASSOCIATION");m.d.L0=g("SUBSCRIPTION_NOT_RENEWABLE");
m.d.zk=g("SUBSCRIPTION_DISABLED");m.d.Rn=g("GIFT_CODE_INVALID");m.d.Sn=g("GIFT_CODE_REDEEMED");m.d.AV=g("GIFT_CODE_REDEEMED_BY_LISTENER");m.d.FB=g("GIFT_CODE_REDEMPTION_ATTEMPTS_EXCEEDED");m.d.GB=g("GIFT_REQUIRES_PAYMENT_INFO");m.d.BV=g("GIFT_DUPLICATE");m.d.CV=g("GIFT_DURATION_INVALID");m.d.ou=g("GIFT_INELIGIBLE");m.d.EV=g("GIFT_SERVICE_UNAVAILABLE");m.d.QV=g("INTEGRATION_PARTNER_UNAVAILABLE");m.d.pC=g("SERVICE_UNAVAILABLE");m.d.vT=g("EXCESSIVE_ACTIVITY");m.d.ZS=g("DAILY_SKIP_LIMIT_REACHED");
m.d.fu=g("CONTENT_HAS_EXPIRED");m.d.J_=g("PAYPAL_INVALID_TOKEN");m.d.K_=g("PAYPAL_PAYMENT_ALREADY_PAID");m.d.Q_=g("PAYPAL_PAYMENT_NOT_CONFIRMED");m.d.O_=g("PAYPAL_PAYMENT_INVALID_STATE");m.d.N_=g("PAYPAL_PAYMENT_FAILED_TRY_LATER");m.d.M_=g("PAYPAL_PAYMENT_FAILED");m.d.L_=g("PAYPAL_PAYMENT_DECLINED");m.d.P_=g("PAYPAL_PAYMENT_NOT_COMPLETED");m.d.HR=g("API_UNSUPPORTED_FUNCTIONALITY");m.d.e2=g("TOO_MANY_STATION_IDS");m.d.mC=g("PAYMENT_IN_PROGRESS");m.d.J2=g("VALUE_EXCHANGE_BAD_OFFER_NAME");m.d.pS=g("BAD_A_LA_CARTE_RECEIPT");
m.d.qS=g("BAD_A_LA_CARTE_SKU");m.d.FV=g("GIFT_SUBSCRIBER_CANT_CONVERT_TO_BUSINESS");m.d.aC=g("LISTENER_ALREADY_CONVERTED_TO_BUSINESS_ONCE");m.d.sS=g("BUSINESS_SUBSCRIPTIONS_UNAVAILABLE");m.d.uB=g("BUSINESS_INFORMATION_MISSING");m.d.iV=g("FRIEND_LIMIT_EXCEEDED");m.d.p_=g("MIP_NO_ARTIST_PERMISSIONS");m.d.o_=g("MIP_NOT_OWNER");m.d.n_=g("MIP_INVALID_INPUT");m.d.m_=g("MIP_FEATURE_DISABLED");m.d.q_=g("MIP_NO_AVAILABLE_INVENTORY");m.d.l_=g("MIP_CTA_URL_INVALID");m.d.k_=g("MIP_CTA_BLACKLISTED");m.d.zC=g("THUMBPRINT_RADIO_NOT_ELIGIBLE");
m.d.F0=g("STOPPED_AS_SUSPICIOUS");m.d.ZZ=g("LISTENER_INCORRECT_PASSWORD");m.d.bV=g("FLEX_REPLAY_TRACK_NOT_FOUND");m.d.aV=g("FLEX_REPLAY_RIGHT_UNAVAILABLE");m.d.dV=g("FLEX_SKIP_RIGHT_UNAVAILABLE");m.d.XU=g("FLEX_DOWNLOAD_RIGHT_UNAVAILABLE");m.d.ZU=g("FLEX_ON_DEMAND_RIGHT_UNAVAILABLE");m.d.$U=g("FLEX_REPLAY_LISTENER_INELIGIBLE");m.d.cV=g("FLEX_REPLAY_TRACK_TYPE_UNSUPPORTED");m.d.K2=g("VALUE_EXCHANGE_EXCEPTION");m.d.YU=g("FLEX_INSUFFICIENT_REWARD_REPLAYS");m.Gc={};m.Gc.g2=g("TRANSFORM_CONFIRM");m.Gc.f2=g("TRANSFORM_AUTOMATIC");m.Gc.Ve=g("TRANSFORM_NOT_ALLOWED");m.Ue={};m.Ue.$P=g("song");m.Ue.Nc=g("album");m.Ue.FE=g("artist");m.Ue.h=g("station");m.Ue.D3=g("genrestation");m.de={};m.de.Ou=g("TIMEOUT_CREDIT");m.de.r_=g("MONTHLY_LISTENING");m.de.eo=g("SPONSORED_LISTENING");m.zb={};m.zb.nB=g("AUDIO_IMPRESSION");m.zb.pB=g("AUDIO_TILE_IMPRESSION");m.zb.hV=g("FOLLOW_ON_IMPRESSION");m.zb.rC=g("SKIP");m.zb.oB=g("AUDIO_TILE_CLICK");m.zb.gV=g("FOLLOW_ON_CLICK");m.zb.xC=g("STATION_CREATE");m.zb.JR=g("AUDIO_IMPRESSION_UNIQUE");function qd(b){var c=typeof b;if("object"==c)if(b){if(b instanceof Array||!(b instanceof Object)&&"[object Array]"==Object.prototype.toString.call(b)||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if(!(b instanceof Object||"[object Function]"!=Object.prototype.toString.call(b)&&("undefined"==typeof b.call||"undefined"==typeof b.propertyIsEnumerable||b.propertyIsEnumerable("call"))))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof b.call)return"object";return c}function rd(b){return"string"==typeof b}function sd(b){return"number"==typeof b}function td(b){b=qd(b);return"object"==b||"array"==b||"function"==b}Math.floor(2147483648*Math.random()).toString(36);var ud=Date.now||function(){return+new Date};function vd(b,c){function d(){}d.prototype=c.prototype;b.uQ=c.prototype;b.prototype=new d;b.prototype.constructor=b};m=m?m:{};function wd(){};function xd(b){this.body=b}vd(xd,wd);function yd(b){this.vb=b}vd(yd,wd);function n(b){return b.vb[0]}function zd(b){this.message=b;this.hg=Rb([b])}vd(zd,wd);function Ad(b){zd.call(this,b)}vd(Ad,zd);function Bd(b){zd.call(this,b)}vd(Bd,Ad);function Cd(b,c,d){zd.call(this,b);this.url=c;this.xml=d}vd(Cd,Bd);function Dd(b,c){zd.call(this,b);this.code=c}vd(Dd,Ad);function Ed(){return Math.floor(Fd()/1E3)}function Fd(){return(new Date).getTime()}function Gd(b,c,d,e){if(d)return"/img/no_photo_180_fb.png";b=null==b?null:b.lH?b.Fa:b.fbId?b.fbId:b.fbid?b.fbid:b.attr?b.attr("fbid"):null;return null!=b&&0<b&&!e?"http://graph.facebook.com/v2.2/"+b+"/picture?type="+(c?"square":"large"):"/img/no_listener_image.png"}function Hd(b){return b.replace(/<\/?[^>]+(>|$)|\"/g,"")}function Id(b){return b.substring(0,b.indexOf("'s Thumbprint Radio"))}
function Jd(){if(window._migrateUserToHttps){var b;b=80!=window.location.port?"https://"+window.location.hostname+":"+Kd()+window.location.pathname+window.location.search:"https://"+window.location.hostname+window.location.pathname+window.location.search;k.debug("Redirect location: "+b);window.location=b}}function Ld(){return"https:"==window.location.protocol};function Md(b){var c="",d,e,h,l,p,q,t=0;b=b.replace(/\r\n/g,"\n");e="";for(h=0;h<b.length;h++)l=b.charCodeAt(h),128>l?e+=String.fromCharCode(l):(127<l&&2048>l?e+=String.fromCharCode(l>>6|192):(e+=String.fromCharCode(l>>12|224),e+=String.fromCharCode(l>>6&63|128)),e+=String.fromCharCode(l&63|128));for(b=e;t<b.length;)d=b.charCodeAt(t++),e=b.charCodeAt(t++),h=b.charCodeAt(t++),l=d>>2,d=(d&3)<<4|e>>4,p=(e&15)<<2|h>>6,q=h&63,isNaN(e)?p=q=64:isNaN(h)&&(q=64),c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_ ".charAt(l)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_ ".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_ ".charAt(p)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_ ".charAt(q),c=c.replace(/\s+$/,"");return c};var Nd=[0,0,192,224,240,248,252],Od=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,5,5,5,5],Pd=[0,12416,925824,63447168,4194836608,2181570688];function Qd(){}
function Rd(){return[[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,
3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,
1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,
1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,
2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,
4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971E4,1235738493,
2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,
935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,
70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,
1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,
1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,
3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,
1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,
3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,
3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,
3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,
4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,
3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,
3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,
3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409E3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,
2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,
266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,
29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]]}function Sd(){var b=Rd();null==b&&(b=Rd());var c=b[0],d=b[1],e=b[2],h=b[3],b=b[4],l=new Qd;Ud(l,c,d,e,h,b);for(var p=Vd(Wd("Ba-qrf5@t%pf/;u^")),q=0,t=0;18>t;++t){for(var y=0,E=0;4>E;++E)y=y<<8|p[q],q+=1,q>=p.length&&(q=0);c[t]^=y}p=[0,0];for(t=0;18>t;t+=2)l.Sp(p,0),c[t]=p[0],c[t+1]=p[1];for(t=0;4>t;t++)for(c=[d,e,h,b][t],q=0;256>q;q+=2)l.Sp(p,0),c[q]=p[0],c[q+1]=p[1];return l}
function Xd(b){var c=new Qd;Ud(c,b[0],b[1],b[2],b[3],b[4]);return c}
function Ud(b,c,d,e,h,l){b.Sp=function(b,q){var t=b[q],y=b[q+1],E,I;for(I=0;16>I;++I){var N=t^=c[I],U,pa;pa=N&255;N>>=8;E=N&255;N>>=8;U=N&255;N>>=8;N=d[N&255]+e[U];N^=h[E];N+=l[pa];y^=N;E=t;t=y;y=E}E=t;t=y;y=E^c[16];t^=c[17];b[q]=t;b[q+1]=y};b.TF=function(b,q){var t=b[q],y=b[q+1],E,I;for(I=17;1<I;--I){var N=t^=c[I],U,pa;pa=N&255;N>>=8;E=N&255;N>>=8;U=N&255;N>>=8;N=d[N&255]+e[U];N^=h[E];N+=l[pa];y^=N;E=t;t=y;y=E}E=t;t=y;y=E^c[1];t^=c[0];b[q]=t;b[q+1]=y}}
Qd.prototype.encrypt=function(b){b=Wd(b);b=Vd(b);b=Yd(b);for(var c=0;c<b.length;c+=2)this.Sp(b,c);b=Zd(b);for(var c="",d=0;d<b.length;d++)var e=b[d].toString(16),c=1==e.length?c+("0"+e):c+e;return c};Qd.prototype.decrypt=function(b){b=String(b);b=$d(this,b);b=ae(b);return be(b)};function $d(b,c){for(var d=[],e=0;e<c.length;e+=2)d.push(parseInt(c.substr(e,2),16));d=Yd(d);for(e=0;e<d.length;e+=2)b.TF(d,e);return Zd(d)}function Wd(b){for(var c=[],d=0;d<b.length;d++)c.push(b.charCodeAt(d));return c}
function be(b){for(var c=[],d=0;d<b.length;d++)c.push(String.fromCharCode(b[d]));return c.join("")}
function Vd(b){for(var c=[],d=0;d<b.length;){var e=b[d];d++;if(55296<=e&&56319>=e){if(d==b.length){k.error("source exhausted");break}var h=b[d];(56320>h||57343<e)&&k.error("unpaired high surrogate");e=(e-55296<<10)+(h-56320)+65536;d++}else 56320<=e&&57343>=e&&k.error("UTF-16 surrogate values are illegal in UTF-32");h=0;128>e?h=1:2048>e?h=2:65536>e?h=3:1114112>e?h=4:(h=3,e=65533);if(null==Nd[h]){k.error("invalid bytesToWrite: "+h);break}var l=c.length;switch(h){case 4:c[l+3]=(e|128)&191,e>>=6;case 3:c[l+
2]=(e|128)&191,e>>=6;case 2:c[l+1]=(e|128)&191,e>>=6;case 1:c[l]=e|Nd[h]}}return c}
function ae(b){for(var c=[],d=0;d<b.length;){var e=0,h=Od[b[d]];if(d+h>b.length)return k.error("source exhausted"),c;if(!ce(b.slice(d,d+h+1)))return k.error("not legal UTF-8"),c;switch(h){case 5:e+=b[d],d++,e<<=6;case 4:e+=b[d],d++,e<<=6;case 3:e+=b[d],d++,e<<=6;case 2:e+=b[d],d++,e<<=6;case 1:e+=b[d],d++,e<<=6;case 0:e+=b[d],d++}e-=Pd[h];65535>=e?55296<=e&&57343>=e?(k.error("UTF-16 surrogate values are illegal in UTF-32"),c.push(65533)):c.push(e):1114111<e?(k.error("ch > UNI_MAX_UTF16"),c.push(65533)):
(e-=65536,c.push((e>>10)+55296),c.push((e&1023)+56320))}for(;c.length&&8>=c[c.length-1];)c.pop();return c}
function ce(b){var c;switch(b.length){default:return!1;case 4:if(128>(c=b[3])||191<c)return!1;case 3:if(128>(c=b[2])||191<c)return!1;case 2:if(191<(c=b[1]))return!1;switch(b[0]){case 224:if(160>c)return!1;break;case 237:if(159<c)return!1;break;case 240:if(144>c)return!1;break;case 244:if(143<c)return!1;break;default:if(128>c)return!1}case 1:if(128<=b[0]&&194>b[0])return!1}return 244<b[0]?!1:!0}
function Yd(b){var c=[],d=b.length,e=0==d%4?d:d-d%4,h;for(h=0;h<e;h+=4)c[c.length]=b[h]<<24|b[h+1]<<16|b[h+2]<<8|b[h+3];if(h<d){for(var l=e=0;4>l;l++)h+l<d&&(e|=b[h+l]<<8*(3-l));c[c.length]=e}return c}function Zd(b){for(var c=[],d=0,e=0;e<b.length;e++){var h=b[e];c[d]=h>>24&255;d++;c[d]=h>>16&255;d++;c[d]=h>>8&255;d++;c[d]=h&255;d++}return c};function r(b,c){null!=b&&null!=c||k.error("neither caller nor method may be null");var d=trackJs.watch(function(){return c.apply(b,arguments)});d._caller=b;return d}function de(b,c,d){return setTimeout(r(b,c),d)}function ee(b){null!=b&&0<b.length&&(b=b.replace(/^.*\/xml\//,"/json/"));return b}
function fe(b){if(!_.isFunction(b))return k.error("Attempting to create a single call function but no backing function was provided."),$.noop;var c=!1;return function(){c?k.warn("A function that should only be called once is being called again."):(c=!0,b.apply(null,arguments))}}function ge(b,c,d){var e=null;2<arguments.length&&(e=_.rest(arguments,2));var h=fe(b);c&&setTimeout(function(){h.apply(null,e)},c);return h}
function he(b){null!=b&&0<b.length&&(b=b.replace(/\?dc=.*?$/,""),b=b.replace("/music/artist",""),b=b.replace("/music/composer",""),b=b.replace("/music/album",""),b=b.replace("/music/song",""));return b}function ie(b){return _.without(b.split("/"),"")}function je(){return(new Date).getTime()+""+Math.floor(1E4*Math.random())}function ke(b,c){for(var d=0;b&&d<b.length;d++)if(b[d]==c)return!0;return!1}function le(b){return null!=b&&""!=b+""}function me(b){return null==b||0==b.length}
function ne(b){return 100*Math.random()<b}function oe(b,c,d){var e=new Date;e.setTime(e.getTime()+864E5*d);b=b+"="+c+"; path=/; "+("expires="+e.toGMTString()+"; ");null!=document.domain&&(document.domain.match(/pandora.com$/)?b+="domain=.pandora.com;":document.domain.match(/savagebeast.com$/)&&(b+="domain=.savagebeast.com;"),"https:"==window.location.protocol&&(b+=" secure;"));document.cookie=b}function pe(b){return null==b?!1:"true"==b.toLowerCase()}
function qe(b,c,d,e){var h="Unknown";b.message?h=b.message:rd(b)&&(h=String(b));re({msg:h,url:c,num:d,ua:navigator.userAgent,browser:se(),site_version:window._pandoraVersion,flash_ver:te()},e)}
function ue(b,c){var d,e=(new Date).format("yyyy-mm-dd HH:MM:ss",!0),h=null;d||(d=ve?ve.get("currentUser"):null);ve&&ve.get("sequenceNumber")&&(h=ve.get("sequenceNumber"),ve.set({sequenceNumber:h+1}));s("mobile_view_mode",{page_view:b,view_mode:c,vendor_id:u,device_id:we,device_code:we,device_os:se(),client_timestamp:e,sequence_number:h},d)}
function xe(b,c,d,e){var h,l=(new Date).format("yyyy-mm-dd HH:MM:ss",!0);h||(h=ve?ve.get("currentUser"):null);s("onboarding_server_action",{page_view:b,view_mode:c,vendor_id:u,device_id:we,device_code:we,device_os:se(),client_timestamp:l,action:d,action_failure_reason:e},h)}
function ye(b,c,d){var e=v.i&&v.i.Ef();d&&trackJs.console.warn("message: "+d);d=c&&c.jPlayer&&c.jPlayer.error&&c.jPlayer.error.message||c;var h=c&&c.jPlayer&&c.jPlayer.error&&c.jPlayer.error.formatType||"",l=c&&c.jPlayer&&c.jPlayer.flash&&c.jPlayer.flash.active||"";c=c&&c.jPlayer&&c.jPlayer.version&&c.jPlayer.version.flash||"";trackJs.console.warn("adToken: "+e);trackJs.console.warn("trackToken: "+(b&&b.Za()));trackJs.console.warn("stationId: "+(b&&b.r&&b.r().e()));trackJs.console.warn("message: "+
d);trackJs.console.warn("format: "+h);trackJs.console.warn("using flash: "+l);l&&trackJs.console.warn("flash ver: "+c);trackJs.track("Error during playback detected.")}function te(){var b="unknown";try{if(swfobject)var c=swfobject.getFlashPlayerVersion(),b=c.major+"."+c.minor+"."+c.release}catch(d){}return b}function se(){return BrowserDetect.browser+" "+BrowserDetect.version+" ("+BrowserDetect.OS+")"}
function ze(b){if(!me(window.location.hostname)){$.cookie(b,null,{path:"/",domain:window.location.hostname});var c=window.location.hostname.indexOf(".");0>c&&(c=0);$.cookie(b,null,{path:"/",domain:window.location.hostname.substring(c)})}$.cookie(b,null,{path:"/"})}function Ae(){return"Explorer"==BrowserDetect.browser&&8>=BrowserDetect.version}function Be(){return"Explorer"==BrowserDetect.browser&&7>=BrowserDetect.version}function Ce(){return"Firefox"==BrowserDetect.browser}
function De(b,c){for(var d="",e=0;e<b.length;e++)d+=String.fromCharCode(b.charCodeAt(e)^c[e%c.length]);return d}window.emptySelection=function(){$.textSelect("clear")};var k={enabled:!1,debug:function(){},info:function(){},warn:function(b){null!=window.console&&null!=window.console.warn&&window.console.warn.apply(window.console,arguments)},error:function(b){null!=window.console&&null!=window.console.error&&window.console.error.apply(window.console,arguments)}};"Explorer"==BrowserDetect.browser&&10>BrowserDetect.version&&null!=window.console&&(null!=window.console.warn&&(k.warn=window.console.warn),null!=window.console.error&&(k.error=window.console.error));var w=0,Ee=w++,Fe=w++,Ge=w++,He=w++,Ie=w++,Je=w++,Ke=w++,Le=w++,Me=w++,Ne=w++,Oe=w++,Pe=w++,Qe=w++,Re=w++,Se=w++,Te=w++,Ue=w++,Ve=w++,We=w++,Xe=w++,Ye=w++,Ze=w++,$e=w++,af=w++,bf=w++,cf=w++,df=w++,ef=w++,ff=w++,gf=w++,hf=w++,jf=w++,kf=w++,lf=w++,mf=w++,nf=w++,of=w++,pf=w++,qf=w++,rf=w++,sf=w++,tf=w++,uf=w++,vf=w++,wf=w++,xf=w++,yf=w++,zf=w++,Af=w++,Bf=w++,Cf=w++,Df=w++,Ef=w++,Ff=w++,Gf=w++,Hf=w++,If=w++,Jf=w++,Kf=w++,Lf=w++,Mf=w++,Nf=w++,Of=w++,Pf=w++,Qf=w++,Rf=w++,Sf=w++,Tf=w++,Uf=w++,Vf=w++,Wf=
w++,Xf=w++,Yf=w++,Zf=w++,$f=w++,ag=w++,bg=w++,cg=w++,dg=w++,eg=w++,fg=w++,gg=w++,hg=w++,ig=w++,jg=w++,kg=w++,lg=w++,mg=w++,ng=w++,og=w++,pg=w++,qg=w++,rg=w++,sg=w++,tg=w++,ug=w++,vg=w++,wg=w++,xg=w++,yg=w++,zg=w++,Ag=w++,Bg=w++,Cg=w++,Dg=w++,Eg=w++,Fg=w++,Gg=w++,Hg=w++,Ig=w++,Jg=w++,Kg=w++,Lg=w++,Mg=w++,Ng=w++,Og=w++,Pg=w++,Qg=w++,Rg=w++,Sg=w++,Tg=w++,Ug=w++,Vg=w++,Wg=w++,Xg=w++,Yg=w++,Zg=w++,$g=w++,ah=w++,bh=w++,ch=w++,dh=w++,eh=w++,fh=w++,gh=w++,hh=w++,ih=w++,jh=w++,kh=w++,lh=w++,mh=w++,nh=w++,
oh=w++,ph=w++,qh=w++,rh=w++,sh=w++,th=w++,uh=w++,vh=w++,wh=w++,xh=w++,yh=w++,zh=w++,Ah=w++,Bh=w++,Ch=w++,Dh=w++,Eh=w++,Fh=w++,Gh=w++,Hh=w++,Ih=w++,Jh=w++,Kh=w++,Lh=w++,Mh=w++,Nh=w++,Oh=w++,Ph=w++,Qh=w++,Rh=w++,Sh=w++,Th=w++,Uh=w++,Vh=w++,Wh=w++,Xh=w++,Yh=w++,Zh=w++,$h=w++,ai=w++,bi=w++,ci=w++,di=w++,ei=w++,fi=w++,gi=w++,hi=w++,ii=w++,ji=w++,ki=w++,li=w++,mi=w++,ni=w++,oi=w++,pi=w++,qi=w++,ri=w++,si=w++,ti=w++,ui=w++,vi=w++,wi=w++,xi=w++,yi=w++,zi=w++,Ai=w++,Bi=w++,Ci=w++,Di=w++,Ei=w++,Fi=w++,Gi=w++,
Hi=w++,Ii=w++,Ji=w++,Ki=w++,Li=w++,Mi=w++,Ni=w++,Oi=w++,Pi=w++,Qi=w++,Ri=w++,Si=w++,Ti=w++,Ui=w++,Vi=w++,Wi=w++,Xi=w++,Yi=w++,Zi=w++,$i=w++,aj=w++,bj=w++,cj=w++,dj=w++,ej=w++,fj=w++,gj=w++,hj=w++,ij=w++,jj=w++,kj=w++,lj=w++,mj=w++,nj=w++,oj=w++,pj=w++,qj=w++,rj=w++,sj=w++,tj=w++,uj=w++,vj=w++,wj=w++,xj=w++,yj=w++,zj=w++,Aj=w++,Bj=w++,Cj=w++,Dj=w++,Ej=w++,Fj=w++,Gj=w++,Hj=w++,Ij=w++,Jj=w++,Kj=w++,Lj=w++,Mj=w++,Nj=w++,Oj=w++,Pj=w++,Qj=w++,Rj=w++,Sj=w++,Uj=w++,Vj=w++,Wj=w++,Xj=w++,Yj=w++,Zj=w++,ak=w++,
bk=w++,ck=w++,dk=w++,ek=w++,fk=w++,gk=w++,hk=w++,ik=w++,jk=w++,kk=w++,lk=w++,mk=w++,nk=w++,ok=w++,pk=w++,qk=w++,rk=w++,sk=w++,tk=w++,uk=w++,vk=w++,wk=w++,xk=w++,yk=w++,zk=w++,Ak=w++,Bk=w++,Ck=w++,Dk=w++,Ek=w++,Fk=w++,Gk=w++,Hk=w++,Ik=w++,Jk=w++,Kk=w++,Lk=w++,Mk=w++,Nk=w++,Ok=w++,Pk=w++,Qk=w++,Rk=w++,Sk=w++,Tk=w++,Uk=w++,Vk=w++,Wk=w++,Xk=w++,Yk=w++,Zk=w++,$k=w++,al=w++,bl=w++,cl=w++,dl=w++,el=w++,fl=w++,gl=w++,hl=w++,il=w++,jl=w++,kl=w++,ll=w++,ml=w++,nl=w++,ol=w++,pl=w++,ql=w++,rl=w++,sl=[];
$.each({aW:Ee,$V:Fe,X1:Ge,H2:He,I2:Ie,b0:Je,c0:Ke,d0:Le,xV:Me,X_:Ne,Z_:Oe,Q1:Pe,P1:Qe,I1:Re,S1:Se,x1:Te,O1:Ue,n2:Ve,p2:We,q2:Xe,m2:Ye,o0:Ze,UR:$e,w0:af,VR:bf,t2:cf,s2:df,o2:ef,Y0:ff,Z0:gf,R0:hf,b1:jf,TR:kf,k1:lf,i2:mf,e1:nf,SU:of,TU:pf,RU:qf,k2:rf,D1:sf,C1:tf,g1:uf,a1:vf,T2:wf,U1:xf,u_:yf,v_:zf,t_:Af,v0:Bf,nV:Cf,e_:Df,y2:Ef,z2:Ff,IV:Gf,JV:Hf,HV:If,h1:Jf,i1:Kf,B2:Lf,C2:Mf,D2:Nf,s_:Of,i0:Pf,jT:Qf,vV:Rf,x2:Sf,A2:Tf,uS:Uf,w2:Vf,a0:Wf,N0:Xf,j2:Yf,M0:Zf,LV:$f,yV:ag,bW:bg,JT:cg,iS:dg,hS:eg,rV:fg,sV:gg,aS:hg,
cW:ig,J1:jg,tV:kg,UU:lg,u0:mg,b2:ng,a2:og,g_:pg,h_:qg,NV:rg,MV:sg,D_:tg,E_:ug,kY:vg,US:wg,kV:xg,jV:yg,lV:zg,pV:Ag,mV:Bg,oV:Cg,R_:Dg,u2:Eg,v2:Fg,F2:Gg,m1:Hg,f1:Ig,Y1:Jg,YS:Kg,q0:Lg,g0:Mg,zW:Ng,AW:Og,SW:Pg,f0:Qg,p0:Rg,n0:Sg,wS:Tg,vS:Ug,oS:Vg,W1:Wg,x_:Xg,gS:Yg,iT:Zg,VZ:$g,jU:ah,iY:bh,mS:ch,OT:dh,iU:eh,hU:fh,nU:gh,KT:hh,YT:ih,uU:jh,vU:kh,ZT:lh,xU:mh,GU:nh,WT:oh,HU:ph,MT:qh,AU:rh,KU:sh,aU:th,QU:uh,VT:vh,tU:wh,LU:xh,zU:yh,MU:zh,NU:Ah,OU:Bh,lU:Ch,rU:Dh,mU:Eh,gU:Fh,wU:Gh,fU:Hh,yU:Ih,RT:Jh,QT:Kh,PU:Lh,eU:Mh,
pU:Nh,qU:Oh,IU:Ph,kU:Qh,JU:Rh,dS:Sh,DU:Th,TT:Uh,cU:Vh,BU:Wh,CU:Xh,ST:Yh,sU:Zh,EU:$h,UT:ai,LT:bi,NT:ci,XT:di,EZ:ei,iX:fi,DZ:gi,FZ:hi,BZ:ii,AZ:ji,QW:ki,PW:li,TX:mi,yZ:ni,vZ:oi,BY:pi,FY:qi,pW:ri,MX:si,NX:ti,cY:ui,jY:vi,UZ:wi,xW:xi,uY:yi,AY:zi,xY:Ai,WX:Bi,VX:Ci,XX:Di,WW:Ei,eX:Fi,sX:Gi,BW:Hi,FW:Ii,DW:Ji,EW:Ki,OW:Li,kX:Mi,qY:Ni,rY:Oi,UX:Pi,zZ:Qi,IX:Ri,vX:Si,TW:Ti,hW:Ui,gW:Vi,wY:Wi,TZ:Xi,UW:Yi,CZ:Zi,lZ:$i,QX:aj,tY:bj,sY:cj,TB:dj,fY:ej,KY:fj,dY:gj,yY:hj,DY:ij,HX:jj,BX:kj,zX:lj,hY:mj,HY:nj,GY:oj,ZW:pj,$W:qj,
cX:rj,YW:sj,nW:tj,KX:uj,KZ:vj,UB:wj,oX:xj,LZ:yj,nX:zj,vY:Aj,OZ:Bj,PZ:Cj,QZ:Dj,PX:Ej,$X:Fj,NZ:Gj,oY:Hj,jX:Ij,JZ:Jj,kW:Kj,IZ:Lj,HW:Mj,MW:Nj,fX:Oj,XW:Pj,oW:Qj,bU:Rj,$T:Sj,PT:Uj,bY:Vj,VB:Wj,dW:Xj,nY:Yj,KW:Zj,GZ:ak,JX:bk,RX:ck,eY:dk,yW:ek,LX:fk,VW:gk,zY:hk,qZ:ik,rZ:jk,uW:kk,vW:lk,qX:mk,rX:nk,mZ:ok,nZ:pk,oZ:qk,pZ:rk,sW:sk,tW:tk,GX:uk,gX:vk,hX:wk,CY:xk,EY:yk,aY:zk,sZ:Ak,tZ:Bk,wW:Ck,SZ:Dk,nS:Ek,SX:Fk,Y_:Gk,oU:Hk,G2:Ik,lT:Jk,mT:Kk,h0:Lk,GV:Mk,t0:Nk,s0:Ok,jS:Pk,kS:Qk,lS:Rk,Y2:Sk,X2:Tk,Z2:Uk,U2:Vk,V2:Wk,W2:Xk,
a3:Yk,FR:Zk,RW:$k,FX:al,YX:bl,EX:cl,eW:dl,qW:el,rW:fl,h2:gl,uZ:hl,FU:il,S2:jl,R2:kl,Q2:ll,F1:ml,E1:nl,GW:ol,tX:pl,dU:ql,KV:rl},function(b,c){sl[c]=b});function tl(b){switch(b){case hi:return"128";case ii:return"129";case ji:return"130";case pi:return"133";case Zi:return"168";case dj:return"173";case nj:return"183";case oj:return"184";case uj:return"188"}k.error("AppEvent.getPersistable could not map event ",b,sl[b]);return"0"};function ul(b,c,d,e,h,l){this.error=b;this.message=c;this.er=d;this.gL=e;this.Bl=h;this.Jg=l}function x(b,c,d,e,h){z.b(Sh,new ul(b,b.hg,c,d,e,h))};var vl,wl,xl=[];function yl(b){xl.push(b);return b}
var zl=yl({key:"AnonAuthToken",G:!1}),Al=yl({key:"psn",G:!1}),Bl=yl({key:"lastUserId",G:!1}),Cl=yl({key:"storedUserIds",G:!1}),Dl=yl({key:"hasLoggedIn",G:!1}),El=yl({key:"Volume",G:!1}),Fl=yl({key:"Muted",G:!1}),Gl=yl({key:"Username",G:!0}),Hl=yl({key:"Password",G:!0,Ni:!0}),Il=yl({key:"KeepLoggedIn",G:!0}),Jl=yl({key:"isAnonymous",G:!0}),Kl=yl({key:"PlayTimeMapSeconds",G:!0}),Ll=yl({key:"LastPlayTimeSeconds",G:!0}),Ml=yl({key:"DeltaListeningTimeSeconds",G:!0}),Nl=yl({key:"ListeningTimestamp",G:!0}),
Ol=yl({key:"LastPlayedStationId",G:!0}),Pl=yl({key:"StationSortOrderAlpha",G:!0}),Ql=yl({key:"SkipResetTimestamps",G:!0}),Rl=yl({key:"StationSkipCounts",G:!0}),Sl=yl({key:"DailySkipCount",G:!0}),Tl=yl({key:"CurrentTrack",G:!0}),Ul=yl({key:"CurrentTrackOnDemandAAM",G:!0}),Vl=yl({key:"ElapsedTime",G:!0}),Wl=yl({key:"ElapsedTimeOnDemandAAM",G:!0}),Xl=yl({key:"ContextualHelpIntents",G:!0}),Yl=yl({key:"DisplayedTips",G:!0}),Zl=yl({key:"CurrentSkinPath",G:!0}),$l=yl({key:"AlbumArtSize",G:!0}),am=yl({key:"DeclinedRenewalOffer",
G:!0}),bm=yl({key:"lowQualityAudio",G:!0}),cm=yl({key:"shuffleType",G:!0}),dm=yl({key:"shuffleStations",G:!0}),em=yl({key:"shareOnTwitter",G:!0}),fm=yl({key:"shareOnFacebook",G:!0}),gm=yl({key:"SeenFbConnected",G:!0}),hm=yl({key:"deviceId",G:!0}),im=yl({key:"LiveStreamListeningStart",G:!0}),jm=yl({key:"LiveStreamListeningSeconds",G:!0}),km=yl({key:"flaggedMsgs",G:!0}),lm=yl({key:"TimeoutDialogImpressions",G:!0}),mm=yl({key:"SessionStartDialogLastShown",G:!0});
function nm(){for(var b=om(Cl)||[],c=0;c<b.length;c++){var d=pm("U"+b[c],Xl),e=qm(d);if(null!=e&&rd(e)){var h={};_.each((""+e).split(","),function(b){le(b)&&(null==h[b]?h[b]=1:h[b]++)});rm(d,h)}}}function sm(){k.info("post message to iframe");var b=window.localStorage.getItem("jStorage"),c=window.frames.lsDataAccess,b=JSON.stringify(b);if("Explorer"==BrowserDetect.browser&&9<BrowserDetect.version){var d=new MessageChannel;c.postMessage(b,"*",[d.port2])}else c.postMessage(b,"*")}
function om(b){return qm(tm(b),b.Ni)}function um(b,c,d){rm(tm(b),c,d,b.Ni)}function vm(b){wm(tm(b),b.Ni)}function tm(b,c){if(b.G){if(wl)return pm("U"+wl,b,c);k.warn("PersistenceManager.currentUserId is null for key "+b.key);return"zorro"}return b.key}function pm(b,c,d){return null==d?b+"."+c.key:b+"."+c.key+"."+d}function xm(b,c){return c||!Be()?vl.encrypt(b):b}
function qm(b,c){var d;if(d="ttls"!=b)d=(qm("ttls")||{})[b],d=null!=d&&d<(new Date).getTime();if(d)return wm(b,c),null;d=$.jStorage.get(xm(b,c));try{return null==d||0==d.length?d:JSON.parse(c||!Be()?vl.decrypt(d):d)}catch(e){return trackJs.track(e),k.error("Could not parse encrypted value: ",d),null}}function rm(b,c,d,e){null!=c?($.jStorage.set(xm(b,e),xm(JSON.stringify(c),e)),null!=d&&(c=qm("ttls")||{},c[b]=d+(new Date).getTime(),rm("ttls",c))):wm(b,e)}
function wm(b,c){$.jStorage.deleteKey(xm(b,c));var d=qm("ttls")||{};null!=d[b]&&(delete d[b],rm("ttls",d))}function ym(){$.jStorage.flush();k.info("PersistenceManager wipe is complete")}function zm(){var b=qm("ttls")||{},c=[];$.each(b,function(b,e){e<(new Date).getTime()&&c.push(b)});$.each(c,function(b,c){wm(c)})}function Am(){var b=om(Il);return null==b||!0===b}
function Bm(b){um(zl,b);if(wl){um(Jl,null!=b);b=[];for(var c=om(Cl)||[],d=0;d<c.length;d++)if(c[d]!=wl&&qm(pm("U"+c[d],Jl)))for(var e=c[d],h=0;h<xl.length;h++)xl[h].G&&wm(pm("U"+e,xl[h]));else b.push(c[d]);c.length!=b.length&&um(Cl,b)}}function Cm(){var b=om(Jl);return null==b?!1:!0===b}function Dm(){if(!wl)return 0;var b=om(Kl);null==b&&(b={});var c=0,d;for(d in b){var e=b[d];if(null==e||isNaN(Number(e)))return 0;c+=Number(e)}return c}
function Em(b){var c=om(Ll);null==c&&(c={});c[b]=Math.floor((new Date).getTime()/1E3);um(Ll,c)}function Fm(){if(!wl)return 0;var b=om(Ml);return null==b||isNaN(Number(b))?0:Number(b)}function Gm(){if(!wl)return 0;var b=om(Nl);return null==b||isNaN(Number(b))?0:Number(b)}function Hm(){var b=om(em);return null==b||!0===b}function Im(){var b=om(fm);return null==b||!0===b}function Jm(){var b=om(El);return null==b||isNaN(Number(b))?80:Number(b)}function Km(){return!0===om(Fl)}
function Lm(b){if(!wl)return null;var c=om(Ql);return c&&c[b]?c[b]:null}function Mm(b){if(!wl)return 0;var c=om(Rl);return c&&c[b]?c[b]:0}function Nm(b,c){var d=wl?om(Rl):null;null==d&&(d={});d[b]=c;um(Rl,d)}function Om(){if(!wl)return null;var b=om(Sl);if(null!=b&&b.date==Pm())return b.skips;Qm(0);return 0}function Rm(b,c,d,e,h){0>=d||!wl||(0==e&&(e=600),b=b+","+d,d=1E3*(e-d),e=Vl,h&&(e=Wl),rm(tm(e,c),b,d))}
function Sm(b,c,d){var e=Vl;d&&(e=Wl);c=qm(tm(e,c));return null==c||(c=c.split(","),2!=c.length||c[0]!=b||(b=parseInt(c[1],10),isNaN(b)))?null:b}function Qm(b){um(Sl,{date:Pm(),skips:b},864E5)}function Tm(){if(!wl)return{};var b=om(Xl);return null!=b&&td(b)?b:{}}function Um(b){b=Tm()[tl(b)];return null!=b?b:0}function Vm(b){var c=Wm();c.push(b);um(Yl,c.join(","))}function Wm(){if(!wl)return[];var b=om(Yl);return null==b?[]:(""+b).split(",")}
function Xm(){if(!wl)return 215;var b=om($l);if(null==b||isNaN(Number(b)))return 215;b=Math.max(b,134);b=Math.min(b,450);return Number(b)}function Ym(){if(!wl)return"all";var b=om(cm);return null==b?"all":""+b}function Zm(){if(!wl)return"";var b=om(dm);return null==b?"":""+b}function Pm(){var b=new Date;return""+b.getDate()+(b.getMonth()+1)+b.getFullYear()}function $m(b){b.Ni=!0;var c=om(b);b.Ni=null;return c}
function an(){if(Be()){var b=$m(Bl);if(null!=b){var c=wl;wl=b;var d=$m(Gl),e=om(Hl)||"";null!=d&&null!=e&&0<d.length&&0<e.length&&($.jStorage.flush(),um(Bl,b),um(Gl,d),um(Hl,e),k.info("+++ ie 7 updated +++"));wl=c}}b=om(Bl);return null!=b?(c=wl,wl=b,d=om(Gl),(d=null!=d&&0<d.length)?um(Bl,b):wl=c,d):!1}function bn(b){um(Bl,b);if(wl=b){for(var c=om(Cl)||[],d=0;d<c.length;d++)if(b==c[d])return;c.push(b);um(Cl,c)}}
function cn(){if(!wl)return null;var b=om(hm);b&&""!=b||(b=hex_md5(wl+"-"+BrowserDetect.browser+"-"+BrowserDetect.OS+"-"+(new Date).getTime()),um(hm,b));return b}function dn(b){um(im,b)}function en(b){um(jm,b)}function fn(b){var c=gn();c.push(b);um(km,c.join(","))}function hn(b){return _.contains(gn(),b)}function gn(){var b=[],c=om(km);c&&(b=c.split(","));return b}function jn(){var b=(om(lm)||0)+1;um(lm,b)};var z={};z.IC=[ef,dg,eg,qi,Ek];z.dr=!1;z.Es=!1;z.Bo={};z.Ao={};z.zo={};z.c=function(b,c){z.Oo(b,c,z.Bo)};z.yh=function(b,c){z.Oo(b,c,z.Ao)};z.ib=function(b,c){z.Oo(b,c,z.zo)};z.Oo=function(b,c,d){var e=d[b]||[];e.push(c);d[b]=e;c=c._caller;null!=c&&(d=c._eventTypes||[],d.push(b),c._eventTypes=d)};
z.pa=function(b,c){if(void 0!==c)for(var d=[z.Ao,z.Bo,z.zo],e=0;e<d.length;e++){var h=d[e][c];if(h)for(var l=0;l<h.length;l++)h[l]._caller==b&&h.splice(l--,1)}else for(var d=b._eventTypes,e=0;d&&e<d.length;e++)z.pa(b,d[e])};z.Zy=function(b){if(td(b)){var c=$.extend({},b);_.each(["password","username"],function(b){c[b]&&(c[b]="*****")});return c}return b};z.iD=function(b,c,d){try{b(c,d)}catch(e){trackJs.track(e),qe(e)}};
z.b=function(b,c){if(-1===z.IC.indexOf(b)){var d=BrowserDetect.browser;void 0!==c?"Chrome"==d||"Firefox"==d?k.info("%cEVENT:","color:blue",sl[b],z.Zy(c)):k.info("EVENT:",sl[b],z.Zy(c)):"Chrome"==d||"Firefox"==d?k.info("%cEVENT:","color:blue",sl[b]):k.info("EVENT:",sl[b])}for(var d=[],e=[z.Ao,z.Bo,z.zo],h=0;h<e.length;h++){var l=e[h][b];if(l)for(var p=0;p<l.length;p++)d.push(l[p])}for(h=0;h<d.length;h++)z.iD(d[h],c,b)};z.Ik={li:10,iw:"/js/libs/jquery.jplayer-2.3.9",al:"html, flash"};z.pe=function(){return z.Ik};
z.zQ=function(){$.ajax({type:"GET",url:kn()+"ssl-test.jsonp",dataType:"jsonp",jsonpCallback:"callback",timeout:5E3}).fail(function(b,c,d){"parsererror"!=c&&s("ssl_error",{ua:navigator.userAgent,site_version:window._pandoraVersion,browser:se(),textStatus:c,errorThrown:d})})};z.pP=function(){z.ba=0;setInterval(function(){$.get("/appstamp.txt",{cachebuster:""+(new Date).getTime()},function(b){b=parseInt($.trim(b),10);if(b>z.ba){var c=z.ba;z.ba=b;0<c&&setTimeout(function(){z.b(ck)},6E4)}})},3E5)};
z.nP=function(){function b(){ln="AT-"+(new Date).getTime()+"-"+Math.floor(1E3*Math.random());"undefined"!=typeof $.cookie&&null!=$.cookie&&$.cookie("atn",ln);z.paused=!1}setInterval(function(){null==ln||"undefined"==typeof $.cookie||null==$.cookie||$.cookie("atn")==ln||z.paused||(z.paused=!0,z.b(gi,!0))},1E3);z.c(ei,b);z.c(Ve,b);z.c(Pi,b)};
z.nr=function(){var b=mn(),c=$(this).attr("href"),c=c.replace("#!","#");-1!=c.indexOf("#")?c=c.substr(c.indexOf("#")+1):0==c.indexOf(b)&&(c=c.substr(b.length-1));return c};z.ES="/profile/ /stations/edit/ /station/ /music/song/ /music/album/ /music/artist/ /music/composer/ /music/ /everywhere/".split(" ");z.qP=function(){$('a[href^="#"][rel!="external"]:not([target])').address(z.nr);$('a[href^="/"][rel!="external"]:not([target])').address(z.nr);$('a[href^="'+mn()+'"][rel!="external"]:not([target])').address(z.nr)};
z.EE=function(){return null!=$.cookie&&null!=$.jPlayer};
z.start=function(){k.info("Starting Pandora");nn();z.zQ();z.dr||(z.Jy=setTimeout(function(){s("not_loaded",{ua:navigator.userAgent,site_version:window._pandoraVersion,browser:se()});z.b(eg,"splash");$("#splash .cantload.normal").fadeIn();on()},4E4),z.c(Ee,function(){clearTimeout(z.Jy);clearTimeout(z.Iy)}));z.nP();z.pP();z.qP();pn("persistence");vl=Xd(qn());zm();$.jStorage.storageAvailable()||k.error("No persistence mechanism available");k.info("PersistenceManager initialized using "+$.jStorage.currentBackend());
wl=null;nm();z.c(ri,ym);pn("persistence-done");rn()&&ze("lsc");Ld()||sm();new sn;new tn;pn("start-done")};window._trackJs||(window.onerror=function(b,c,d){qe(b,c,d);return!0});window.flashLoaded=function(){z.Es&&(z.Iy=setTimeout(function(){clearTimeout(z.Jy);s("not_loaded",{ua:navigator.userAgent,site_version:window._pandoraVersion,browser:se()});z.b(eg,"splash");$("#splash .cantload.flash").fadeIn();on()},1E4))};window.flashEnabled=function(){z.Es=!1;clearTimeout(z.Iy)};
$(function(){$.ajaxPrefilter(function(b,c,d){c.url&&""!=c.url||(d.abort(),trackJs.track(Error("Attempt to make an AJAX request without a URL.")))});setTimeout(function(){z.EE()||$("#depedencyNotLoaded").fadeIn()},5E3);var b=/(webkit)[ \/]([\w.]+)/.exec(navigator.userAgent.toLowerCase());if(b)var c=parseFloat(b[2]);b=pe(A._data.forceFlash);if("Explorer"==BrowserDetect.browser&&7>BrowserDetect.version||"Opera"==BrowserDetect.browser&&10.5>BrowserDetect.version||"Mozilla"==BrowserDetect.browser&&2>BrowserDetect.version||
0<c&&528.16>c)$("#oldbrowser").fadeIn();else{var d=0<swfobject.getFlashPlayerVersion().N3||0<deconceptFlashVersionMajor,e=swfobject.hasFlashPlayerVersion("10")||9<deconceptFlashVersionMajor||9==deconceptFlashVersionMajor&&115<=deconceptFlashVersionRelease,h=Modernizr.audio&&""!=Modernizr.audio.m4a&&"no"!=Modernizr.audio.m4a&&""!=Modernizr.audio.mp3&&"no"!=Modernizr.audio.mp3,l=h||e;if(window._isInAudioJplayerHTML5Experiment||window._isInAudioMediaElementExperiment){if(0<window._listenerIdFromCookie){var p=
"no",q="no";Modernizr.audio&&(p=Modernizr.audio.m4a,q=Modernizr.audio.mp3);s("browser_has_audio",{has_html5_audio:h,has_flash:e,has_m4a:p,has_mp3:q,browser:se(),user_agent:navigator.userAgent,listener_id:window._listenerIdFromCookie,vendor_id:u,device_code:we},null)}z.Ik.iw="/js/libs/jquery.jplayer-2.9.2";if(h&&!b){z.Ik.al="html";z.start();return}}if(b=(b=b||0<c||"Windows"==BrowserDetect.OS&&"Firefox"==BrowserDetect.browser||"Mac"==BrowserDetect.OS&&"Firefox"==BrowserDetect.browser&&37<=BrowserDetect.version)&&
!pe(A._data.disableForceFlash))d&&e?(z.Ik.al="flash",z.Es=!0):l=!1;l?z.start():d?($("#splash").hide(),$("#topnav").hide(),$("#flash_upgrade").show(),swfobject.showExpressInstall({data:"/js/libs/swfobject-2.2/expressInstall.swf",width:""+$(document).width(),height:"240"},{},"flash_upgrade",function(b){b.success?window.location.reload():$("#noaudio").fadeIn()})):0<c?$("#noaudio_webkit").fadeIn():$("#noaudio").fadeIn()}});function un(b){this._isCreator=b.isCreator;this._stationId=b.stationId;this._stationIdToken=b.stationIdToken;this._originalCreatorId=b.originalCreatorId;this._originalStationId=b.originalStationId;this._stationName=b.stationName;this._stationArt=b.stationArt;this._fbShareArt=b.fbShareArt;this._transformType=b.transformType;this._isQuickMix=b.isQuickMix;this._quickMixStationIds=b.quickMixStationIds;this._quickMixType=b.quickMixType;this._chronologicalSequence=b.chronologicalSequence;this._isThumbprintStation=
b.isThumbprint||!1;this._thumbCount=b.thumbCount||"";this._originalStationShareName=this._stationShareName=b.stationShareName||"";this._initialSeed=b.initialSeed;this._originalSeed=b.originalSeed;this._adGenre=b.adGenre;this._genre=b.genre;this._genreSponsorship=b.genreSponsorship;this._antiTarget=b.antiTarget;this._comedy=b.isComedy;this._isNew=b.isNew;this._isOnDemandStation=b.isOnDemandStation;this._canShuffleStation=b.canShuffleStation;this._advertisingKey=vn(b);this._advertiserStation=b.advertiserStation;
this._canAutoshare=!!b.canAutoshare;this._description=b.description;this._recommendedStation=b.recommendedStation;this._promotedStationCampaignId=b.promotedStationCampaignId;this._promotedStationAdId=b.promotedStationAdId;this._promotedTrackingUrls=b.promotedTrackingUrls;this._promotedImpressionUrls=b.promotedImpressionUrls;this._promotedSponsorText=b.promotedSponsorText;this._promotedStationCorrelationId=b.adServerCorrelationId;this._impressionTracked=b.impressionTracked;this._stationNameWithTwitterHandle=
b.stationNameWithTwitterHandle;this._enableArtistAudioMessages=b.enableArtistAudioMessages;this._processSkips=b.processSkips||!1;this._hasLiveStream=b.hasLiveStream;this._artistMessageArtistUid=b.artistMessageArtistUid;this._artistMessageId=b.artistMessageId}f=un.prototype;
f.update=function(b){this._stationId=b.stationId;this._stationIdToken=b.stationIdToken;this._stationName=b.stationName;this._isQuickMix=b.isQuickMix;this._isCreator=b.isCreator;this._initialSeed=b.initialSeed;this._adGenre=b.adGenre;this._genre=b.genre;this._genreSponsorship=b.genreSponsorship;this._antiTarget=b.antiTarget;this._quickMixStationIds=b.quickMixStationIds;this._quickMixType=b.quickMixType;this._artistMessageArtistUid=b.artistMessageArtistUid;this._artistMessageId=b.artistMessageId};
function wn(b){return b._promotedStationAdId}function xn(b){return b._promotedStationCorrelationId}f.Db=function(){return this._promotedStationCampaignId};f.Ub=function(){return this._recommendedStation};f.Z=function(){return"true"===this._isCreator||!0===this._isCreator};f.e=function(){return this._stationId};f.Jd=function(){return this._stationIdToken};f.Zg=function(){return this._originalCreatorId};f.Qi=function(){return this._originalStationId};f.re=function(){return this._transformType};
f.ca=function(){return this._stationName};f.Ym=function(b){this._stationName=b};f.D=function(){return"true"===this._isQuickMix||!0===this._isQuickMix};f.Ia=function(){return"true"===this._isThumbprintStation||!0===this._isThumbprintStation};f.rq=function(){return this._thumbCount};function yn(b){return b.Ia()?b._stationShareName:b._stationName}f.qe=function(){return this._quickMixStationIds};f.Xm=function(b){this._quickMixStationIds=b};f.Wl=function(){return this._quickMixType};f.wa=function(){return this._initialSeed};
function zn(b){return b._originalSeed}f.Df=function(){return this._adGenre};f.Gf=function(){return this._genre};f.Rl=function(){return this._genreSponsorship};f.Ml=function(){return this._antiTarget};f.hr=function(){return"true"===this._comedy||!0===this._comedy};f.Ra=function(){return"true"===this._isOnDemandStation||!0===this._isOnDemandStation};function An(b){return"true"===b._canShuffleStation||!0===b._canShuffleStation}f.La=function(){return this._advertisingKey};f.rc=function(){return this._advertiserStation};
f.mm=function(){return this._enableArtistAudioMessages};function Bn(b){return"true"===b._isNew||!0===b._isNew}function vn(b){var c=b.advertisingKey;/\*$/.test(b.stationName)&&(c=b.originalStationId);return c}f.Cb=function(){return!1};f.Pl=function(){return this._description};function Cn(b){return b.isCustomContentStation?new Dn(b):new un(b)}f.kp=function(){return this._canAutoshare};f.Ws=function(){return this._processSkips};f.cm=function(){return this._hasLiveStream};
f.bj=function(){return null!=this._artistMessageArtistUid&&null!=this._artistMessageId};f.oq=function(){return this._artistMessageArtistUid};f.pq=function(){return this._artistMessageId};f.Ps=function(b){this._artistMessageArtistUid=b};f.Qs=function(b){this._artistMessageId=b};function Dn(b,c){un.call(this,b);this._isQuickMix=!1;this._isOnDemandStation=!0;this._advertisingKey=vn(b);this._adIntervalMinutes=b.adIntervalMinutes;this._delayedInStationAd=b.delayedInStationAd;this._tracks=c;this._expiration=new Date;this._expiration.setTime(b.expirationTimeMillis)}vd(Dn,un);
Dn.prototype.update=function(b){this._stationId=b.stationId;this._stationIdToken=b.stationIdToken;this._stationName=b.stationName;this._isCreator=b.isCreator;this._initialSeed=b.initialSeed;this._adGenre=b.adGenre;this._genre=b.genre;this._genreSponsorship=b.genreSponsorship;this._antiTarget=b.antiTarget;this._quickMixType=b.quickMixType};function En(b,c){b._tracks=c}Dn.prototype.Cb=function(){return!0};function Fn(b,c){this.ie=-1;this.Ca=b.songTitle;this.Wh=b.artistSummary;this.xo=b.composerName;this.eb=b.albumTitle;this.Qo=b.stationId||"";this.ec=b.musicId;this.Cv=b.musicIdToken;this.MC=b.albumIdToken;this.Ye=b.artistMusicId;this.Lc=b.rating;this.Dv=b.narrative;this.Jo=b.lyricSnippet;this.Zh=b.lyricId;this.zv=b.lyricChecksum;this.QC=ee(b.artistExplorerUrl);ee(b.songExplorerUrl);this.cv=he(b.artistDetailURL);this.$u=he(b.albumDetailURL);this.Kv=he(b.songDetailURL);this.bi=b.songDetailToken;this.Qk=
b.shareLandingURL;this.jD=b.isFeatured;this.Ev=null;this.hE=b.userSeed;this.dv=b.audioSkipUrl;this.so=b.amazonUrl;this.qo=b.albumAmazonDigitalAsin;this.Go=b.itunesUrl;this.Tk=!1;this.Hk=b.audioIntroductoryMessage;this.Jc=b.nonMusicTrack;this.dE=b.trackToken;this.cE=b.trackLength;this.So=b.trackType;this.aE=null!=b.streaming;this.Rb=b.programDescriptor;this.gb=b.categoryDescriptor;this.nD=Gn(b.firstThumbed&&b.firstThumbed.timestamp);this.sv=b.firstThumbed?b.firstThumbed.station:null;this.FD=Gn(b.lastThumbed&&
b.lastThumbed.timestamp);this.yv=b.lastThumbed?b.lastThumbed.station:null;this.ID=b.numThumbs;this.Pb=b.artRadio||"/img/no_album_art.png";this.Pb||(this.Pb="/img/no_album_art.png");this.LC=document.createElement("img");this.LC.src=this.Pb;this.hv=b.compilation;this.Do=this.di=this.Sk=!1;this.ro=b.allowStartStationFromTrack;this.bv=b.allowTiredOfTrack;this.OC=b.allowSkipTrackWithoutLimit;this.av=b.allowFeedback;this.je=b.templatePath;this.Hc=b.artistTwitterHandle;this.VC=c;this.wo=b.audioEncoding;
"aacplus"==this.wo&&(this.wo="m4a");this.Xh=b.fileGain;this.Xh=""==this.Xh||isNaN(Number(this.Xh))?null:Number(this.Xh)}function Gn(b){if(!b)return null;var c=new Date;c.setTime(b);return c}f=Fn.prototype;f.W=function(){return this.Wh};f.ub=function(){return this.Pb};f.e=function(){return this.Qo};f.o=function(){return this.ec};f.Za=function(){return this.dE};f.Vg=function(){return this.cv};f.Ll=function(){return this.$u};f.$g=function(){return this.Kv};f.hh=function(){return this.jD};f.Px=function(){return this.hE};
f.Ny=function(){return null!=this.Go||null!=this.so||null!=this.qo};f.Sj=function(b){this.Tk=b};f.hb=function(){return this.Tk};f.Vc=function(){return this.cE};f.ye=function(){return this.aE};f.Vl=function(){return!1};f.Nl=function(){return this.VC};f.Sc=function(){return this.wo};f.oc=function(){return this.Xh};f.Jx=function(){return""};function Hn(b){this.Ga=b.gain;this.uf=b.clickthrough;this.qc=b.impression;this.tracker=b.tracker;this.rn=b.tile_tracker_urls;this.vf=b.companion;this.ol=b.companion_web?b.companion_web:b.banner_html;this.lb=b.type;this.cg=!0;this.ec="V1";this.Pb=b.image;this.ie=-1;this.eb=this.Ca="ad";this.Kv=this.$u=this.cv=this.Wh=""}vd(Hn,Fn);f=Hn.prototype;f.pH=function(){return this.qc};f.MH=function(){return this.tracker};f.LH=function(){return this.rn};
f.ub=function(){var b=this.Pb;if(null==b||""==b)b="/img/ads/generictile.png";if(b&&"/img/ads/generictile.png"!=b&&-1==b.indexOf("mediaserverPublicRedirect.jsp")&&-1==b.indexOf("_500x500")){var c=b.match(/(?:\.([^.]+))?$/);c[1]&&(b=b.substr(0,b.lastIndexOf("."))+"_500x500."+c[1])}return b};f.pm=function(){return this.cg};f.Rs=function(b){this.cg=b};function In(b,c){Fn.call(this,b,c);this.ec=b.musicId;this.Pb=b.tileImageURL;this.ie=b.trackNumber;this.Ca=b.trackName;this.Wh=b.categoryName;this.eb=b.programName;this.je=b.templatePath;this.gb=b.categoryDescriptor;this.Rb=b.programDescriptor}vd(In,Fn);f=In.prototype;f.Vg=function(){return this.Yl()};f.Ll=function(){return this.Yl()};f.$g=function(){return this.Yl()};f.Yl=function(){return"/station/"+this.Qo};f.Vl=function(){return!0};function Jn(b){Fn.call(this,b,null);this.ec=b.musicId;this.je=b.templatePath;this.gb=b.categoryDescriptor;this.Rb=b.programDescriptor;this.vD=b.hlsLiveStreamPath;this.vv=b.hdsLiveStreamPath;this.XD=b.shortLink;this.Hv=Ed()}vd(Jn,Fn);f=Jn.prototype;f.Yl=function(){return"/station/"+this.Qo};f.Vl=function(){return!0};f.ye=function(){return!1};f.Ny=function(){return!1};f.Jx=function(){return this.XD};var Kn={},Kn={StationKeyType:{AMG_ARTIST:"ar",MUSIC_ID:"mi",QUICKMIX:"qm",SHARED:"sh",MUSIC_ID_AC:"mc",GIFTED:"sg",AUTOPLAY_FACEBOOK:"af",FACEBOOK_SUGGEST:"fa",FRIENDS_STATION:"fs",FRIENDS_BOOKMARK:"fb",ARTIST_SUGGEST:"as",GENRE_SUGGEST:"gs",FACEBOOK_SUGGEST_SEARCH_VIEW:"fv",EXTENDED_SEARCH:"es",RECOMMENDATION:"re"}};var Ln,Mn,Nn,On,Pn,Qn,Rn;Ln=function(b){var c="true"===A._data.cs_pwc_2016||!0===A._data.cs_pwc_2016;return Sn()?c:b&&b.mr&&!Mn()};
Nn=function(b,c){c=!0===c;if("true"===window.sessionStorage.getItem("redesign-client-reload"))return k.error("Unable to reload into 2016 redesign client. Staying on current client."),!1;oe("pwc-2016","true",365);window.sessionStorage.setItem("redesign-client-reload","true");if("true"!==window.sessionStorage.getItem("redesign-client-reload"))return k.error("Unable to reload into 2016 redesign client since reload flag is not getting set!."),!1;"ANONYMOUS"!==b.listenerState&&(window.sessionStorage.setItem("redesign-client-reload-uname",
b.Ka||""),window.sessionStorage.setItem("redesign-client-reload-authToken",b.kw||""),window.sessionStorage.setItem("redesign-client-reload-keep-logged-in",String(Am()||!1)));s("change_version_of_website",{action:"switch_to_new",vendor_id:u,device_id:we,browser:se(),submitted_feedback:"NULL"},b);c?window.location.replace(Tn()):window.location.reload(!0);return!0};Mn=function(){return"false"===$.cookie("pwc-2016")};
On=function(){var b=window.sessionStorage.getItem("classic-client-reload-uname");return b?{username:b}:null};Pn=function(){window.sessionStorage.removeItem("classic-client-reload-uname")};Qn=function(){ze("pwc-2016")};Rn=function(b,c){if(window.localStorage&&b){var d=b+"-highAudioQuality";c?localStorage.removeItem(d):localStorage.setItem(d,"true")}};var Un={},Vn=g([[-668617326,-1489172681,1065101486,-115379946,-278200290,-746248963,1417609708,-372646020,635342487,-1622802655,-2025352635,1957035642,-1656086821,2129644150,1488000962,243217342,478415738,367978584],[1242278845,1186421985,-632397609,1658687266,1720545937,1882393713,-1899091612,-724446641,575132671,868035971,712898834,-1176038968,241517787,977647203,-1969572901,-777943246,309332310,635037017,-1706926976,-833502787,1943558205,582565347,1072930735,992875E3,-1567149616,1328296287,-1268677942,
-1299425746,-1015376167,-1963962233,1952430114,-339479800,792775040,-513386591,-1108553382,-913014509,-784386903,1382684063,-174576567,1440883213,246053430,-1871242693,-2060622435,-198495282,-1135236240,-712731143,-1608903574,342755680,-591140101,1163271072,-1752422059,68052641,1419848668,-2031388476,830175929,-1055711368,-1134050495,-125498832,652979891,-1575244906,-229455478,-390523918,-1841832974,-985010095,-1283540245,-507787403,-1050321547,1661602118,-1360752569,1321570751,-1319781990,787241843,
-563004666,312882359,332303031,-1819448167,899084E3,1343197286,-151517417,1087987224,-1043039698,-1913774587,-478267742,1422393299,1258273231,558691768,-1419201209,-1211361247,1551738969,-1294303777,-2073783046,-1934602987,441086370,1609600394,-2023170203,-1840369693,79171738,-468159446,1489862931,251112137,-1833906311,-1340096814,1306775074,1803001376,485566159,394897300,-1471791706,-204675156,-769297654,756748830,1059850320,-483983093,1457084545,-2043038802,28560107,527405828,2102129511,-454287143,
1829087825,-2010418931,-62875593,1709314758,-1530312057,-1323659090,-1250613908,-1676497131,1747940074,-993473015,1140244836,1271928281,-1684332594,-1676639195,1084808976,-1329822157,-1756447878,-563098084,-536517811,1888250270,2103180335,-1131586608,-255008730,-1242231292,-2079175737,-1707837428,887679316,1692493219,805803421,-1918612472,-1441736639,2122803936,-1241381839,1207233130,-192786348,381955035,-778676894,930592272,1958048798,-703840039,979300739,-2028591859,-1854309299,27429221,-115991108,
1151985154,-1410535675,-1433355626,1986035133,1220500409,629410442,-777234778,1872446068,-983021869,-1999696533,844033984,-360512289,-1568781695,-1700044421,855753881,1357446935,1739886399,1526414210,-216598573,-1170056268,138285812,486192091,2025883817,1858614789,-1267912471,2051396862,439466712,690236786,1911551839,1842326680,2040604186,946204405,1637114275,-1034288591,1963225810,2071022781,2119671992,-1280888417,1071496875,-995680635,1154712361,-1575286703,-1119572330,-96800304,1030186681,-1501016443,
-741760832,-890863364,1103305260,153018157,-1633360315,480261324,-519194088,-1842697764,767760587,-996315376,-286808216,-2123113066,-1772804712,-1423619086,-1514152216,-1987164010,77450682,1472056436,255039908,1670419492,1877941830,916747140,1374697182,-1368359264,-628935364,-73502056,-102960770,1332735810,708950080,2110596706,941617040,393471574,-167600447,-1319556549,279336660,1843080801,-1912410626,-483949846,-1757595659,362071593,-1955346894,377528632,1062933032,-1943410382,1238598818,41501845,
294646501],[-1373445067,-1082964757,-67935922,-1255475590,367820427,102092148,822686134,110981783,1163094176,-290455049,244470097,-558809758,-1819250194,198365906,581955716,-204096907,-390626189,-513494702,-1915545596,447478324,-243041253,-183692085,1156992454,633653959,1503854155,211705894,-1767337844,1237341470,1821716439,616229538,1805501216,1920143533,159858151,-1474997189,275203014,-187830222,-83752785,-712296528,-1198429253,-216151758,-1306052491,-1799365258,560301979,-1504528354,1481021668,
-1272254306,1308571891,696540119,351516199,1590318464,-69346381,-667341645,-155911195,-36757467,834017617,-1638363747,631275061,-592916160,-1936247919,1892169876,456068549,613293728,123745130,-1886669809,219833870,219562230,-1557455082,940149007,-2097680150,1825346575,-1175272402,-1235114922,1493298357,1991847414,568022808,-499172627,-112555421,-1980348828,1932904320,-1611071253,-1403174184,-167469628,-1180963542,1072158552,-613816163,-862178509,942387775,-1333808767,-1692354748,1313787485,-309445736,
1253468242,2025637473,-1042767220,1910542E3,-1630870511,-1526897811,-1604020582,408618476,1418292627,-2129595381,-724048516,512920646,-103932119,1047722833,-1482947508,-1380367266,1252234489,311768274,-551478972,1650963674,-181098760,-732091586,1595446500,-869801098,-24744625,-1787921266,174263527,1194616635,-1081427855,1126977887,-1562922113,-817301E3,838279323,-1226337575,1578329600,-175920827,-1428918177,-387775629,-1511675097,-892929462,1223926025,-1306891909,1169799152,779858323,-1778126405,
-524649920,-830556626,860562629,39944574,1320653483,-1201945930,1833423065,-761183429,1965265963,968842471,1914845989,-1030813421,-1071841724,1343170533,89356747,2020375304,2088053082,1653904173,-240115984,-409773834,-1983585121,-403227385,-277879753,-221402817,-1332130200,-1376343015,9590136,105204472,-834262869,-1617412468,960387492,949404040,1779064565,-1170764813,-764047123,-808316935,388506490,-1918117517,-500393918,698426955,-3647844,400419754,-103405224,285376919,-1003759537,1870759243,102748823,
-764696686,1677138858,-1388921396,103162473,1460773365,-1435213501,1965305741,1477945421,1671352758,1830344388,1342111233,109704916,1503123218,-681455781,-1844371092,1568671475,-572370966,509671019,416553660,-596462389,-1615021443,-358086715,1879801394,-817794090,-480992098,317412454,1675412708,499273070,480193155,1039594257,-5695919,974820933,819292324,-988129868,-301784537,252324012,1159121330,-684572776,1417427832,1539978209,-225831486,-536937811,-689407043,-400506339,-82012221,-469210633,-727619600,
2040721404,-696644205,-396165370,1421671191,874554992,-1843850645,1418921527,1441287891,-1463495738,-64214062,1940985584,-408776692,-2145511048,-965469418,-86307231,-1255055416,1993466557,741626603,-1623004809,-1142704129,1046088575,1310623322,617875974,539979483,-1683047686,1651692925],[1924355171,-206760028,1446110878,1081851253,889757828,-2002062898,1258590303,791669728,162171282,-568416902,534510333,942129417,1984822584,1548365744,-1578565320,-192856013,-796459990,-1282886816,-22686926,1193290357,
-853161062,-1554925756,-1208703306,-300525376,1343651963,307711866,-1256737732,1947362037,1862333257,-626768519,-443842416,1874874196,-2075012790,-2067574092,1896622168,266926156,-1352760840,140855675,1428568313,822733805,331521396,661435715,-1935253866,-377241192,-1201873832,-1255998515,558919673,-1938803056,841625638,-1199858779,1241472079,993956477,-862027225,105704041,-1997401277,1323087596,259892920,717025180,-2038013597,-1085596849,-1797201689,-1929486858,1250756411,1133601648,-1125316543,764343866,
-17011992,2050131149,1375397533,882467377,358193559,1519201778,-594587035,723751261,-1403549626,194758789,-441519256,-481123605,1731397408,-48797160,2025543567,-1253954991,1760777991,1196884E3,-1974512863,-1233696075,114168684,-1376959417,-1366679570,-1183077587,-1783097594,1228800044,228444464,-150211475,580686072,-1354431679,314022336,-1738185464,-1936890857,1226645204,452145750,-215523871,138758488,840600910,1330737125,487022727,-1808721063,-315188039,1341738853,-2028822604,-1928965600,2064773845,
-1755236176,50946811,-1905726113,-496283022,73124843,-1823411935,1378738155,518746290,-869356552,582635223,816890812,1692371532,-175423502,1454619622,1047635712,1708615111,-2019228107,-1856632757,-2050130774,2080346111,2071570745,1764195786,1518099954,931686965,394043827,-1769529388,-1201030595,472291233,-711915043,1804013381,-911361387,-612162600,175600401,635625261,415663319,1683300784,1487656700,2127163181,297065239,-1374015767,-2065079900,371717891,-1943802771,-257383652,-1907120381,-1324148976,
1461964562,-1726091009,-1559979848,49220985,725472239,-745789135,-445361274,-199564465,273260092,-141202994,-1898505054,-1733239760,-1620159711,1122723770,658685164,-1913000112,-1432314969,-110537466,-1567300113,-602748603,259685610,-1642472042,-1412271052,-764527553,330588144,-813467161,-127929197,-1739556394,-1112009470,-1564079012,582365868,1027180270,1166169189,-1360307975,-226240437,-2142146557,-1809113998,-471396475,1066304573,1951719533,833754523,1451918181,601670718,931601240,1623627875,-779578814,
1376339650,-1835322746,-648024788,706773824,-1836191182,-1071063207,221618751,15583516,964275929,-1440104441,-2068153545,2117904843,1425017603,1634279292,1479817341,1997256584,-1318913600,1130465025,-1643800204,115734566,217519677,-1142882739,2131782563,1906691491,1883553078,1423678573,-826883353,1306697646,325892400,-364869035,2061199728,-930064422,1890745429,-39988065,1905545865,704051402,-539749121,973552762,1628223491,-163728653,-625666554,496550603,-1901145629,655605251,-1485567849,1099234599,
-184841722,1119219236,382492833,1489500752,221924532,1086418682],[-256481494,801110085,-119872799,509783513,-477712071,-835558330,528867490,-2023045500,-123770387,-1178470037,255132311,1566332711,-456057122,-881236788,-513511868,1094564244,1343657617,712344639,-445847980,813451752,-1413515874,417532772,498960643,-308531879,769650731,1861403677,1072729325,1548451633,-1301707574,-1330515990,-1676577970,1745587046,-597222330,797825474,-892389003,-1007232805,954071072,1109263954,-1614914822,-1259062557,
-1786789371,-5930123,1428709893,2129228981,836684532,1047799277,-1395475429,-72114665,-375593368,-1008834401,-390317511,-1020792698,-1275926380,332253257,-1478960433,696775528,2143627797,739108967,-1013964626,1805278187,286714636,1459279357,-516006855,377449538,342030324,1561884148,-2103087240,771459302,-803663482,139514954,-822472764,1069121035,841333120,1026806815,1499441365,1068602459,-1797920262,-571528245,1278583513,-818773995,2112796988,-144046283,1824430040,-505204782,1918073884,1766199580,
1754925400,713223085,1517335798,-903046961,1342917813,-453565134,830127918,-1693036242,1630506763,-1087226906,2056931367,-469650104,1198940782,-882892537,-333931753,-1801229127,13133446,-636336561,24306924,-1753618462,1161075520,1921432801,420725813,-1947081664,381375699,-419371469,-182159270,-1300283639,632701037,-1583614324,991186338,-2123665216,-7948842,511044531,1471476290,1182211882,1400335455,1649921741,668443243,1957524639,244183410,-92517850,-1885895304,-215591065,-1602133765,-1978449123,
572600933,1241616114,1382791416,1606939532,-88724270,1357874804,1045415649,139803957,734817238,114434326,636579560,-1256384725,-1905954686,-788381430,1804460125,581871470,191442317,-974667535,-1287023496,-1422204417,-1049768011,-1242139543,834672046,2013782783,1742830664,1455109779,-1323647487,1254242362,1423359967,-1172351986,-187761029,2140983554,-2101236972,1295161230,-477941790,509847978,-887375925,1200516205,-658453656,-1190667728,96224156,2038902535,1946423187,1592191677,-956250560,-495710990,
2106986918,683885619,-1793478912,-1397870406,-772970640,1918205058,1356446925,-1126242162,-1746702593,-868733192,1907826626,1861026577,397436354,951998886,1833378346,-1723810851,874800112,-1737343646,1508666377,333477819,1826433159,1983728277,1373086304,1981139135,2074745613,-2048724808,698437559,-1866716593,362904801,-1782855718,-1741141157,-1773245672,323091746,1690064669,-2056374979,-1836816376,-1111732351,298166591,-1694443349,-372771188,2900670,2042098408,-867889354,275585313,-2096698177,-1277127965,
-79026157,-999457889,2096427848,468404578,-20429582,-704742134,-225830798,-1595657218,1591443597,22617057,-615642893,696913403,-969360586,1509515652,-1555772127,968555219,-2096027108,412286088,-2056348324,335367958,-2122306889,2046519694,-1416956959,-1737723199,-245999303,858718077,-791186324,-587740658,1642500890,-175974298,741609689,567739491]]);
Un.Gm=g([-660494265,2176313116,1416121723,-839045805,-1381132614,3076489317,-1750824686,-1445620563,1800353587,106414398,-55703929,1879595236,878713105,3179226769,-472871663,699586219,-916098940,-77882640,1323584925,-856773873,-664499978,637393335,-1327613289,1726668591,2808002686,-294476294,1409764844,-877821011,2056906976,-651500219,-1241716425,648910553,1566661992,-224834686,-429337790,1627725132,-810378076,-1958601416,-633647431,-651335083,-136757049,-1715159933,-1417056647,2009531291,303411786,
202292237,-370113870,1803419292,2873522889,-1859646072,-1541233823,1046957386,794964064,2966019713,-1159437909,-385950441,-271129120,1762475667,855301808,463072772,-1096833063,2039996358,-48529371,467959268,764451222,-28803088,1653329889,-1523268064,655389626,-1946606739,1054903350,-194947497,1616727936,3840716642,198674121,-45434397,1525356784,2056092818,1822690470,-659734215,-899776830,2126957776,1430932950,-1169732143,-518826133,-880171331,-211358708,-2023333461,-664906879,2041131815,1515085202,
-483385565,-233710239,1862353104,-610192193,1013067784,-704845450,1860068494,3091911084,3119450164,299612349,3240767786,994040417,-850368446,1656681537,321177603,1491205056,956821095,1201043762,-1010568576,-995084615,1589798068,-1803244996,1609538643,-1044839665,-395547718,988061102,-1146338788,2347657914,-1173118286,825424519,3377836921,3886022750,1532589967,-268816798,1518035669,-403833827,-817012773,-969864230,212765583,1394175023,-1399513825,3379970447,2107464022,782642322,871032245,-460202943,
2682112307,1164455951,2306022311,-1231550135,24380903,1828150735,1152934902,-543783606,-91585648,875290618,-1828101296,-854654845,-1104584739,1419422153,-2058038501,4197682403,820561805,-312461517,1263006914,64258524,-1947973732,4222574493,906732075,476690067,1440359941,751401112,334548079,1597046497,-161663280,1822787204,-1230905565,782692251,315859216,-238511334,1378593311,-476395597,-1346284591,710300276,1364396870,311507069,364653411,836777756,2384582612,4235264591,2449487292,1124899333,631187694,
418743758,3873107894,-1181382411,1831622427,-109755364,323523197,-1335247390,124887960,3352741505,1008103971,-1011101729,1086588634,-2117572687,-350174254,611773780,-1249775550,291547320,-1130255089,-655258465,1888208838,91871292,700097208,1169704430,-1518381703,-449951094,1211520120,-959660108,3015658171,888110206,-186638233,1065846889,1484390204,517974799,2186627181,1661651296,-1412001646,3630597186,-238406889,-1660991278,-1880932477,638328291,-1982133493,-249044509,2107966463,29992993,811022951,
-1974044114,-461666609,-1200579874,-1315250886,1185116276,323805572,527636763,-500483594,-372024003,-1721528145,367692793,2965109502,-733867907,189843210,-1179202420,1621433870,-1593351101,559878802,1515439684,-359208402,-369904452,-1168161326,1162569174,753946012,99556623,-853885970,-395929680,2875064567,-336745025,3785102970,1707679501,1645587281,-2014855690,2097938744,1861518926,3365531406,934715964,-852402451,3689597016,3933564480,943938819,-2079630206,600685706,3377771497,-338959859,167434988,
-1728077981,382787553,1421238184,-1940336516,-357777760,-359938633,-750536467,1188304636,38263995,3948986193,584774019,1719979903,-1563043338,-989338565,2067172070,1551136012,1206475204,2681187148,-1830518459,-640702285,-1796077080,2295612680,1001060277,2193961019,-404328488,446138072,514850637,69467365,-396311030,1997779636,1751019254,1124598223,1180777079,-86062826,4282598120,-301611745,-725208289,-1681254079,364839967,-1011855731,1825585071,298327635,-1283222561,-1311737006,108856055,-1444578933,
1314656422,2030950498,-559801647,1007456447,-1336049088,-22536359,-2094065153,387517724,347999945,2269588877,-32732626,560468902,-264075480,-1043194417,1410374347,1761300923,1062923881,1434446356,127294998,1491247620,1853250316,999133711,-579788416,-586192950,939119733,-1853793073,-1021692741,-1888416014,-220582014,2343090016,1173638787,2136517820,451646459,151909683,-1056102474,-135388413,-131461424,1459818802,-2001734575,1115607068,-240343824,-581603511,221752402,588280411,-921217668,2618231172,
1389199953,2088687670,881388889,-989042165,1733563373,1667782717,1472075823,452301409,1180237858,-1530461817,1180234731,-2136600503,2987450999,-1096021544,425381193,1809964613,1861346093,-1197164522,-1048094536,1579775421,-730480671,-868566865,1168874199,2349917682,-1699906002,-1176995742,687066406,-1604879858,1971691214,1248746374,-434227533,-1609691996,1043122588,2397584272,-834619493,398112309,1945223810,2080414944,445365338,-1145536819,372166828,-1917358246,-710077900,2767245172,1103879931,1905766388,
3423083954,3358274879,4194228464,-1527749415,1255965834,-371290099,-1082969597,3049994580,157108079,662340189,1265263059,1668011067,-481884736,1710765868,1232781665,305252938,-80195530,615735632,1824127533,-877972583,942826142,465049070,1789555911,-1879432520,1678327592,-1757693291,-2095414891,1219662397,3724783702,381309764,1753740122,-1129259060,-859683293,-95404371,1904842092,1703805866,-90225019,3622866487,2402060604,-1515930247,410705037,-1964005706,-162531798,-2002415430,-485722690,-1547715385,
2726462587,-995184654,-2110929414,-1435254315,1110375827,3707025876,-278774202,607738417,-225446776,466849138,661665028,-1623651469,-1499884200,-1965012448,-579868709,3268953145,-806391621,1888265847,-2142439541,-710140766,2064722377,1608537823,632525034,290785349,363170827,2083860643,609551684,-745148976,-352032894,2117914225,631792652,-1767287330,1274503502,806681864,-492036562,497266354,-1237535332,-1634544639,-2053428156,529086784,-293488197,2135098761,-1356021012,262304738,1046245290,1988297319,
1691828198,-406478198,-1716035396,1628646192,-615375754,-607665672,3790886060,-728593129,1841024095,1746843240,-1020866887,2302010665,-260980333,1556521100,-95709717,200094813,377835361,843090564,1999855405,-872321307,1289869302,850477211,1703192522,1942852851,1457100782,-1829097321,-1582363235,301775772,1430088660,3352254470,-1296627143,1539899779,3989048382,2848677958,-769546492,176647396,2592676081,-2133600140,1768582397,-1182142479,-358223566,-1566651555,1732998016,195916383,1507153160,-1917579734,
4111634,-2028285938,2060329129,-428819835,1138047383,66941171,2710136E3,-1307363395,2031387624,737273789,1625363889,-1920526739,-90989064,-1327162914,201931177,3207880130,-1921330742,2424363103,-822995138,-1268099087,-1646672011,1419456093,1738765445,955776024,-1570114143,453308750,1162928134,-1889661420,1589221676,2227695182,1561995678,1195013569,3872805224,2108776840,-426133752,-1999599622,115625294,-886446823,2013727577,-1133202947,-637058752,1434163510,-2135206530,1112681764,-1868654977,2102889E3,
2138631127,-1215046581,139038471,-1971848184,-155455,785006883,-1237818916,-653696914,698697188,1511757714,690990227,-1111046925,-624439803,3920210200,-527579526,-520420569,391466338,1668124736,101896863,-1356528523,-1198123200,-1103215608,988899046,991349895,768045377,4124428921,239113763,-950572166,902494170,178892502,1818176704,598391055,1956912209,-626936489,1093583906,3505452946,4033786148,-1839816397,-201513415,3525196195,-1308260124,859020292,-878996736,-861824791,-2070269953,1055124755,-763608609,
-247120679,2235744095,-1662605666,358728125,-1970307577,530815132,1612461120,71344115,-1292718444,-2095339581,1748100077,1549536216,1653214857,656856995,-2101943244,-1222007353,3002295244,-1542349594,1146741764,188646794,135015929,1857961979,-1042920498,984177156,-1718950649,-1051555942,834248483,930519416,-171473304,731201812,3556284681,-1080136067,1103019065,901538749,2011766546,-1987012976,-887638115,-859878875,1046373694,994390513,833577225,41795647,860545703,-1972872592,-668191907,2104738195,
-265216903,-402055505,2362776736,-2050049626,1076541385,-1453439674,4203818537,1067458257,138862871,-762267512,-836204292,-487384847,2809824723,2049799098,-494323739,1837462581,-1976629766,-1583638929,938420607,1831532847,-1480335846,-1735575472,604010387,-1186170580,1302955830,-1605454480,1252282244,1898244038,330891886,665595157,-71717485,798272028,-1739032003,-1667384938,2117371861,-1474746580,2421164745,-522489099,1303676220,1934673900,-1318949773,118688351,1130973230,-700307659,-2057756659,273082460,
846003028,2107938573,-1370700956,3051084201,-193791840,1006642308,19949502,-930475241,1279008923,2092665779,1107004847,593858995,-594064827,-2043025608,-1748792551,-671131867,1031094131,672302424,-147028085,1897272260,1391983881,1248205622,1652641166,-1143137002,1795652157,1454471812,-2019348041,1804141881,-1345607787,1325328814,-354179855,-1009460787,1593670706,-1313661340,-1792780666,564648466,1901453377,1935848565,910715861,-1451336324,1172862241,-1827037870,611291550,1515721561,3353018398,1017710988,
1457149716,-1442093238,147364445,3907446828,-227498236,1908355546,995587886,-68612277,-2013518858,-817808015,1342089452,-273014590,-346824511,-1612994,-2058475288,542591014,-1971830338,-1796630176,-1545170844,912021419,-1091995956,1500222658,-1939959582,122371156,3569776105,4076660380,3962251101,1739124204,616450329,-2115265398,-38718351,-295590751,518219998,-1940536747,-764174336,374560197,581333134,1807008154,4226050524,3975859667,-581467815,526806814,761623905,1189298362,-1954716528,-430188675,
-1525734782,1262837027,-1688385429,-1781620317,3432301303,773242498,4018764681,2194958628,515511589,-2063747213,-730013373,-1054523385,484756414,-2142683091,290290521,1691836589,1794035273,-2082695065,922721320,1878749341,-1305513215,1852616082,127892,2699268385,-368902694,1080070758,2136578945,462411162,-1520238756,-1609084730,2023969044,139506436,-194669384,-12971330,702409552,-472950228,-1908143328,-1077985832,1688057226,-997553583,-1745798717,196114755,554134367,-2125202191,2871444998,-2127649646,
-66403193,-974461686,2105288958,761182035,1506525513,1790153750,959651354,591127819,2131345853,-322888082,-1503363837,113062829,-686307435,-528601753,646501387,-499239777,-1937812066,1000773826,-346043076,-380752411,1007674591,1430602838,4148396122,565139671,3852311073,398181959,-255434734,716828220,873312462,1923315311,-495825839,909551101,-1037646823,275479761,4019233708,193268365,-710477685,-835250760,-1220994910,1791569505,4236285125,-178655522,880984896,621717038,-111317326,-1305580433,-1822998318,
2080682536,-1190478566,-1919090231,1136016173,-521409108,2082575876,-2072414865,-1233955330,-1604955237,-1357030910,3893568590,-778020548,1521217351,2940154802,-1428467119,2026539754,1542736860,3819288606,518318201,1366018198,-843374102,-183255804,-1809418464,1797905089,494374247,-1775900094,596929468,-230871542,1846523,-284028413,-1774580693,447649291,334681480,-1368654162,1233373661,504048287,1734651128,2793038906,-128739999,2885388799,-661807186,744246375,744733413,-1714621237,3857683291,216506644,
-880199469,859368867,-417881250,-1231210446,1478989228,-708193271,2098837965,-972115330,-1317439242,2009906410,3341623989,1507828598,920347090,-1769789163,-867954189,3334228589,743761377,-583210684,47787561,491230641,670630064,-1750788404,3118382098,431486917,-1086006153,3200818831,1615284733,638728558,-1581322112,1888187443,1564832304,-318520085,-1471319122,-1982506963,-1779382278,-279856951,208552588,-886158851,-1054127395,1629264597,902944718,1588274806,545004424,490201106,1263876993,1228970266,
601487829,844423E3,-1188763182,-1079632624,-2044731633,-1143797743,191556422,-1833663692,459429406,1536464179,479813011,-1724672447,3860650814,1362014812,1413514054,-1601132546,496805369,1191975396,3031537019,-1469938605,911026636,1122267871,4070339594,1820083946,548214811,2104971925,-999654350,1775142240]);
var qn=g([[229897818,849839868,-332487530,-907383437,-1140707779,1654199944,1768821727,652357015,623000070,1470604882,-1700802255,325928445,1032404949,1187458971,1923722567,-1203655686,-1390756482,697642389],[-838202984,1582992320,-1714076669,679877749,189010644,1849391637,1294974997,-1459294,-1488742285,-1267499271,726168914,2094845591,754773706,-1978458060,-964803934,127750555,475421891,-1954094281,1930533718,1804524105,394085593,-2051681430,1657887374,-1897984338,-15890258,-495691821,-1572079538,
-1249123943,1045945831,-1502595007,1833385681,1320753672,-704191285,-1083120076,99601038,-2126564410,-844996408,-471190585,-95833021,-642258511,-13931089,204284672,363505287,350301540,2096251266,1373144888,630788670,-1816153472,-401154963,-97762171,1780264345,-463978616,-247249674,-1749504896,1661023437,907615021,-12831512,397335952,-1786395721,993476149,-1289892824,-1486484666,-1637501503,1675351685,956816708,-391449187,1892156646,-1927668726,534517972,-2067356029,1379383480,-1110405008,-1415767431,
-297252165,-827208828,1370363882,-977108484,1148411618,-424551702,2063167191,174620934,-1391584961,745393472,-333539626,-524786491,-2117597493,-1848292203,161065330,-1666287795,-629597872,-1515716318,279188318,837684612,1390580413,1470418347,-1721969561,1616928068,819446181,113011226,-1137116088,1893567469,1270822224,-1942858657,780944747,-764992437,-5230105,2052542001,-999992473,-1537640841,650047489,1734205268,824706066,-788513771,957925301,-374186585,1533109320,-1173745566,-826461704,2145721040,
-357151714,841612069,2114269302,1241753843,-1049389401,2142940283,-1838067471,-1324159491,1905776214,-157297790,-201054091,-540165134,-709698336,-1016771856,-1488430653,-594563498,1731530846,-1798530146,-1606210681,-120326099,-638304073,162704055,1158793164,-1080616086,1632271664,-953274094,1725021944,690842045,1739639665,-44622681,-1967781309,-641513874,-761373643,65745658,-1214426411,-1813964993,645427078,1338844898,-2050732116,1578591624,1083724660,590026151,374619257,-1119927069,919795828,-1845588850,
949741829,1681149992,2078866991,27836027,991084966,1816575850,588384585,-1794583888,-1101425630,1569299599,-958842176,1540325237,-888719722,1539346640,509413950,1355091328,969898415,249646189,-297327243,449063944,-701365741,1107499286,-1381919827,-680597934,-778804932,1098355179,921066823,-1666097852,1340413236,1635380422,2096582952,767918068,-2000835789,-1834546588,-1280335848,-278303333,-780249545,461588273,-667101715,-401949267,-1858128041,1434456423,-1750756032,-374815067,195467630,2099495900,
-1597721624,-1903156491,-1493112415,-78449633,246041414,252275050,75487554,924386488,-134584506,-1983745120,149251714,-2087652145,1622942259,505617848,587788700,1687633870,841560575,2549740,1514529746,-1765142328,-167150553,1778487572,444538353,4769090,154804769,-760448134,-718437660,1384148803,-823751116,1125707753,-464419398,-597630465,1284194762,-1132703057,-382861132,8794989,623742166,-728917168,102274724,-1816409486,-776347168,-75071976,-440781865,1682065087,2078723742],[-21733635,-306381912,
-744029967,-176378044,1429039436,-1164660022,-381547734,-1299991660,1607009042,-402998702,-754759649,-439166825,-710246648,1827069566,95384152,-641266701,1622567497,-1349685950,349194347,-65540781,-294482240,-809162226,1024527238,-2048819911,-1414777854,-1706213789,2015358012,1154205471,-727150729,1910149322,-220239283,1094825782,-684452274,1939354503,-277056907,-494300589,916538274,892016842,-742209427,-1484685128,-1017654794,847680589,932969587,142238672,1099215356,1985912574,-886341855,696524866,
2145491540,1058435670,1159229527,999079252,86553755,805114715,1787566030,-91209740,-829271227,1839351800,1401981608,-139328093,1934503773,-1434150918,1964025873,1804658669,-608913682,-921334185,-15173140,-2124493524,-1988743674,1137069043,-177302877,-2040222398,423375948,-481425272,-569706283,206961364,-1995276609,-271767082,703822755,-427391440,-185040687,2128784808,196339784,1762627017,2069139401,-1843691302,736819839,1542164659,-1512726270,1458966678,-385056603,1024786372,1010105275,824382034,
-2068651977,477383174,791412835,28915243,-1389343508,577668759,-673413218,1342015518,250058625,246215074,-216638913,414242972,-289953053,-1820650324,1832775439,111065849,-1237666466,1577571453,1826822183,243112583,372960343,-1937708138,2103358009,763214910,1800183795,-1992244437,-478430059,1210796593,1184941843,-1205185367,159027875,-1041734734,-1829498500,2107083548,1717162088,-1973878467,-979334533,-1793931378,85668082,1777533755,981628988,1650968752,695069126,-1039023194,49931267,-82940838,1189597009,
28043600,380817357,1018153443,-1258808613,1477041890,-1102691390,817007353,-85096175,1369063118,641924991,-1297538737,466052501,1236104331,1283110662,525901675,-595677004,1267730858,-1311074061,-1367762857,1162231097,-24262407,979403729,-1629480743,943319477,1346742362,1842491538,684231818,1644633962,-734924384,-418702453,-2017213300,-188901916,-2093017368,1433345104,-1469387383,202250897,636101491,926093488,-1073854191,-1275868552,-697868318,-679652007,-439843226,-969688977,260882203,137526431,-705670178,
-735332500,-898570095,-202874621,1951633522,1251469271,1358944081,1854037419,-952514179,-221850763,-615500027,-7901447,-1842188195,796332468,-1820356461,1042145500,300996451,985124197,685221834,-333293243,1437878022,-1378933693,307092097,-2052507185,-149857939,-1781671066,294895386,433559162,1422069771,-1738410930,-1239801250,1639309903,-723122509,1546543226,1627266706,-1531749319,1934841867,-334231859,-1926427978,-1592311471,717274623,404420987,1893525710,-1529537637,-917170529,936436263,-1450703610,
2047953531,70803453,1124273233,1284478630,1799480282,-905101325,438026463,-59942803,1430045468,-155909065,916399199,1391353235,385801221,-850529431,806123563,39169159,-1463583305,1078258570,1679455913,-249910367,-573522649,-71380760],[1982223603,-1914120326,1673119344,-168093710,1947706464,-934868568,2011192205,-161518924,1095646864,1078536813,1518513073,680733802,868705769,-1164672567,-907727792,-195111916,-723872473,-53086897,-797237490,-1310522730,135608533,-1864755069,505723833,340204661,126389924,
-779012581,-1414928074,-1999261634,1626444430,265750136,952664295,1814671453,136123214,-1148729170,-2102244111,-1744560770,166251269,2019206348,675536010,2033139586,1664460932,867947356,415015563,-1949352336,1934943806,1097729844,-215743455,1152939329,-1230477738,-1062002250,-1646094734,-745966900,-1113255229,-1045012556,1898513641,815662513,-1209695412,-1474435823,-759507396,-872643116,-108293793,-572780926,2022587303,-26207250,2045611257,-31016004,-1067849877,-1746594747,-1595407948,445118195,-2022755727,
-467239754,-2142137154,1647650691,-492521712,1924021825,-451120621,1007593429,1585867336,566249380,167652736,-997230851,-820510928,1987537237,-77322129,262455164,274897663,1452723459,253350837,1993954181,311086899,415511719,172713492,1598988379,933809783,-464840682,-1782212473,-2022230711,1837947820,1746531791,-206384375,1552574670,1930803788,-195613728,-254531863,2100839943,404263737,2076054570,-1257047081,1122290846,947256648,-357075167,1653644953,-1558596525,479604551,1668133562,472305059,-1332310297,
-931671832,-198191009,257794323,1840067446,1332484586,-1686394935,836568977,1059869891,124574933,-1157811146,759298928,-1853108948,1750828,-2054155681,926532184,349063367,737772888,-1935143471,2055341648,-5740653,1123272834,1403698003,427644913,2084653420,53827208,-556580955,-622974526,-718538160,777066131,10642179,-1473927485,42961280,733402084,-1298075695,-330803213,716645118,991501217,1804621255,295909446,699884413,-502219415,-303184296,-983523053,-1926299132,-1270671729,1764727330,-985542033,
1070783554,-449455124,950733955,1144604746,-213809266,2113881892,289964390,667808448,-205094838,1829894736,-237492343,1714574299,452117068,687998055,-344931971,473450841,-240555773,921904454,-1947709052,716848713,-923746189,1655336916,-1361111575,1374401370,1351735416,-503841965,-210662912,28550606,-1013775971,-1627755881,-1956449285,-1231132106,-1798511564,1839607845,1333480181,828920720,-550535857,-79200818,-2072427763,-92182117,-1007537560,-531634013,597078630,1019601208,427553351,1358839937,1295606149,
1253698240,1321359326,1827036120,-96297979,1961035071,-1449129387,1906218152,-1852074724,830126831,259976739,-480649884,562280542,-849465299,1526639975,1025967841,1384043246,2123956991,-206097982,373358100,-1299736234,-287411656,1139982495,780957194,982178842,1868585192,-342016983,-201343E3,1529621679,-1608908150,-1201917255,1653588554,-236943630,160438843,-1639974092,-1312483576,-359232666,1179000579,-1991728832,-168800292,-195944685,1440643255,-1784478805,1294228634,231058942],[346310866,-760785108,
-255773812,462402975,-1991838300,240492811,382342214,-535902431,-1506588573,227308918,-1235754389,1744325636,1494196796,-81336513,-1254187923,1131677180,618125740,-1255254505,-1029117223,1746489860,-400793256,-1790807970,447773130,897514369,1839734262,1931953313,2039336191,250787664,-2025426637,1326940614,-929563768,1936457968,750315571,807450175,1324985591,1730186793,574834892,446538401,-461826422,-1804212375,1272844656,-1597838884,609411969,-918395893,-1091983950,2034242906,-687308265,588920300,
1900791685,-1750628192,1141924258,2075806930,1916119262,-1924883801,-1793833298,-744070970,1751868198,-1068060208,-551272117,1934334331,-2122147844,420717243,-1740382679,635830970,-1464421974,-611800772,-1879975247,899221619,235128823,1385409654,76799203,816779713,-926092397,1649034526,1731428310,-1566667886,-544352885,848104315,2068987801,-1501879997,-971648040,597634660,1011756967,-816256336,509827742,2105236561,-2073381484,535587639,1442863916,-259688764,1154162298,-1329147873,1242116280,-674309101,
-2129691236,-1590254342,-1776959195,-185688384,149638103,30587288,283319883,-2086106302,1382586556,713320120,159643440,2087908061,1707758771,1408264143,-798412373,1313073328,-980735637,426682037,-1786021936,-1598979960,149656261,-1074946190,562266820,1071849995,203272844,928777036,-1746950025,-738917907,-1864172749,-1027921778,808351611,115564112,451258030,1391532245,974074225,1052258170,1500394287,7472814,-2133625261,864640902,-1996258910,-1513661669,1086557597,835755723,869467621,-663168492,1650292399,
-1193685367,-1423305959,-1082638598,604520037,-355064967,-317184772,789017940,-775204512,-449424947,685481445,1875371481,949742154,-1563315671,828175252,-1712992024,-2125014394,-94286895,139800385,-1914750551,-1591004111,1727600768,-70726198,157276910,983607038,1854715835,587547850,71192417,1202500605,313054625,1332967648,2096005486,1915131330,-91820094,-544224602,-292927581,-1335047682,-336867977,-625557152,2072714926,2079774434,769210250,-859846950,-38963052,-1473111984,-1396332027,-559123088,245192377,
1430587735,807115516,-1797967089,-605290717,-1832360828,735521680,-119714850,-2041009803,-225999952,-52361340,1532219385,-1753338216,1482882949,-729913722,526862483,1344697426,-1879713815,1420857364,178749626,348151218,1024138671,73407581,201150095,258443307,-1880539428,922289345,-1726210854,-569095356,-1212013925,593943551,1877108094,-1369467026,756404946,1671239417,-1038910312,1028722355,-1464597671,1588106857,-1194587045,-1745622080,408802864,-307788967,-1238595610,1953339802,-175053189,323314842,
-1729050542,488025824,846074955,-1859913371,1139433929,-909139537,-400097536,1669572363,348222980,713310757,181818277,-1736954573,-1728472916,-1450741757,-2092843115,-1230542315,-184772168,-1280578355,-1536881661,1341851270,-1756297125,-915020579]]);function Wn(){this.cw=!1;this.Kg={};this.Lg={};this.Hd=null;this.DD=this.Id=!1;this.TD=[];this.Wy=!1}
function Xn(b){var c=new Wn;c.jf=b.adCookieValue;c.Vk=b.adToken;c.uF=b.cmAdParams;c.kw=b.authToken;c.u=b.listenerState;c.sb=b.alertCode;c.Ka=b.username;c.s=b.listenerId;c.Wb=b.hasExplicitContentFilterEnabled;c.aw=b.allowExplicitContentManagement;c.Tq=b.hasExplicitPINSet;c.jg=b.webAuthToken;c.Y=b.webName;c.Jl=b.fullName;c.of=b.autoRenew;c.A=b.billingFrequency;c.ds=b.paymentMethod;c.od=b.subscriptionDaysLeft;c.At=b.subscriptionHasExpired;c.Uo=b.accountMessageKey;c.ih=b.isGiftee;c.Cf=b.gender;c.vR=b.zipcode;
c.ri=b.birthYear;c.kh=b.isProfilePrivate;c.Ip=b.disallowProfileNotes;c.Al=b.emailOptIn;c.Mr=b.notifyOnNote;c.Lr=b.notifyOnFollow;c.S3=b.proxyHostname;c.T3=b.proxyPort;c.PK=b.homepageUrl;c.zr=b.monthlyListeningCapHours;c.DE=b.antidote;c.pl=b.complimentarySponsor;c.OK=b.highQualityTrialAudio;c.XN=b.pingAndo;c.hk=b.timeoutCredits;c.Sa=b.isUserAUNZ;c.SL=b.monthlyPrice;c.le=b.annualPrice;c.ll=b.businessMonthlyPrice;c.kl=b.businessAnnualPrice;c.q3=b.isBusinessEligible;c.wQ=b.isSuspectedBusinessMoreLikely;
c.e4=b.isSuspectedBusinessLessLikely;c.Yb=b.canSubscribeToBusiness;c.KA=b.timeoutDialogBusinessOfferFreqImpressions;c.XO=b.sessionStartDialogFrequencyDays;c.uD=b.hasReceipts;c.xz=b.paymentBackedTrialDuration;c.gh=b.inPaymentBackedTrial;c.tj=b.isMultiDayPassSubscriber;c.rh=b.offerPaymentBackedTrial;c.TN=b.payToPlayPrice;c.dk=b.subscriptionName;c.Nw=b.currentSubscriptionName;c.lL=b.allowPromotedStations;c.hR=b.promotedStationsRecommendedFallback;c.Mh=b.svnTimeoutReward;c.fk=b.svnTimeoutCredit;c.Fn=
b.valueExchangeContext;c.Gn=b.valueExchangeRewards;c.nm=b.isEligibleForProgrammaticAds;c.DD=b.isThumbprintRadioAvailable||!1;c.TD=b.reasonsThumbprintRadioUnavailable||[];c.Wy=b.logTimeToMusicEnabled;c.mr=b.isWebClientAvailable||!1;Yn(c,b);c.wn=b.tsck;c.xn=b.tscs;c.Ci=b.customSkin;var d=b.twShareUserTokens;le(d)?(d=d.split("|"),c.$d=d[0],c.Rh=d[1]):(c.$d=null,c.Rh=null);c.d4=b.subscriberVendor;c.ck=b.subscriberVendorDisplayName;c.tQ=b.subscriberVendorHidePrice;c.vF=b.collectTrackLifetimeStats;c.es=
b.paypalDisabled;c.OL=b.mdid;c.lh=b.isStreamLimited;c.pE=b.adPodEligible;c.Rq=b.useChronos?b.useChronos:!1;c.Bg=b.dailySkipLimit;c.xt=b.stationSkipLimit;c.Ce=b.offerAnnualSub;c.hB=parseFloat(b.volumeNormalizationMultiplier)||1;c.gw=b.artistAnalyticsHomeURL;c.iL=b.isAdvertiser;c.Gt=b.timeToStartAudioAds;c.Et=b.timeBetweenAudioAds;c.qG=b.enableArtistAudioMessages;c.zf=b.enableArtistPromoEmails;c.HB=b.isGPTSampleEnabled;c.sB=b.isAsyncGPTEnabled;c.UK=parseInt(b.inactivityTimeoutSubscribed,10)||10800;
c.Fy=parseInt(b.inactivityTimeoutRegistered,10)||3600;c.TK=parseInt(b.inactivityTimeoutBusiness,10)||18E5;c.Gy=420;c.Om=b.propAdsExperiments;c.yL=b.kruxToken;c.Qq=!!b.hasBusinessInformation;c.vP=!!b.shouldLogVideoAdUrl;return c}
function Yn(b,c){b.Pg=c.fbDisconnected;b.Fa=c.fbId;b.mc=c.fbName;b.Fl=c.autoShareEnabled;b.Mg=c.autoShareFollows;b.Ng=c.autoShareLikes;b.Og=c.autoShareTrackPlay;b.fq=c.fbShowAutoShare;b.Qc=c.fbAccessToken;b.ox=c.facebookSettingChecksum;b.nx=c.fbReauthorize;b.Hd=null;b.Kg={};b.Lg={};b.Qg=null}function Zn(b,c){b.Jr=c.Jr;b.Fa=c.Fa;b.mc=c.mc;b.Kg=c.Kg;b.Lg=c.Lg;b.Hd=c.Hd;b.Qg=c.Qg}f=Wn.prototype;f.rH=function(){return this.u};function $n(){return v.i.kw}f.mm=function(){return this.qG};f.Ef=function(){return this.Vk};
function ao(b){b.Tq=!0}f.p=function(){return this.u==m.v.Kn()};f.ab=function(){return this.u==m.v.Nn()||this.u==m.v.td()||this.u==m.v.Th()||this.u==m.v.lg()&&this.gh};f.S=function(){return this.u==m.v.Th()};function bo(b){return b.u==m.v.Fu()||b.u==m.v.Bu()}function co(b){var c=!0;if(b.u==m.v.td()||b.rH==m.v.Th()){if(30<b.od||b.of&&b.sb!=m.sa.ao())c=!1}else eo(b)?c=!1:b.gh&&(c=!1);return c}function fo(b){return!(b.u==m.v.Kn()||b.u==m.v.Mu()||b.u==m.v.EB()||b.u==m.v.lg()&&!b.gh&&!b.ih)}
function go(b){if(b.lh){var c=ho(A._data.streamNagTimeout);return!isNaN(c)&&c<b.Gy?1E3*c:1E3*b.Gy}c=ho(A._data.timeout);!isNaN(c)&&c<b.Fy||(c=b.UK,b.J()?c=b.Fy:b.S()&&(c=b.TK));return 1E3*c}function io(b){return b.s}f.Eb=function(){return this.vR};function jo(b){var c="";0<b.Cf.length&&(b=b.Cf.charAt(0),"M"==b||"F"==b)&&(c=b);return c}function ko(b,c){c!=b.Pg&&(b.Id=!0);b.Pg=c}f.lH=function(){return this.Fa};
function lo(b,c){null!=c&&c!=b.Fa&&(b.Id=!0);b.Fa=c;null==c&&(b.Id=!1,b.mc=null,b.Hd=null,b.Kg={},b.Lg={},b.Pg=!0,b.Qc=null,b.Qg=null)}function mo(b,c,d){c!=b.Qc&&(b.Id=!0);b.Qc=c;b.AG=d?d+"":null}function no(b,c){b.Qg=c;c.publish_actions&&(b.Qg.publish_stream=1)}function oo(b,c){c!=b.mc&&(b.Id=!0);b.mc=c}function po(b){return b.mc}
function qo(b,c){null==c&&(c=[]);for(var d={},e=[],h=[],l=0;l<c.length;l++){var p=c[l];d[p.name]=p.id;e.push(p.name)}e.sort();p={};for(l=0;l<e.length;l++){var q=e[l],t=d[q];p[t+"f"]=q;h.push(t)}b.Kg=p;b.Hd=h}f.mq=function(b){var c=this.Kg[b+"f"];null==c&&(c=this.Lg[b+"f"]);return c};function ro(b){return b.Sa}function so(b){return b.SL.toString()}f.sy=function(){return this.uD};f.Oy=function(){return("V1"===this.dk||"ANNUAL48"===this.dk)&&!("V1"===this.Nw||"ANNUAL48"===this.Nw)};f.mr=function(){return!!this.mr};
function to(b){return b.J()||null!=b.pl&&0<b.pl.length&&!b.OK||!0==om(bm)?"aacplus":"mp3-hifi"}function uo(b){return vo(b)&&b.sb==m.sa.tB()}f.Ya=function(){return this.A};f.J=function(){return this.u!=m.v.td()&&this.u!=m.v.Th()&&this.u!=m.v.Nn()&&this.u!=m.v.Vu()&&!(this.u==m.v.lg()||this.u==m.v.Tu())};function wo(b,c,d){if(!b.ab()){var e;wl?(e=om(Kl),null==e&&(e={}),e=e[c],e=null==e||isNaN(Number(e))?0:Number(e)):e=0;e+=d;var h=om(Kl);null==h&&(h={});h[c]=e;um(Kl,h);c=Fm();um(Ml,c+d);xo(b)}}
function xo(b){!b.p()||yo(b)||b.cw||(b.cw=!0,z.b(qh))}function yo(b){if(b.ab())return!0;b=600;var c=ho(A._data.playtime);isNaN(c)||(b=Math.min(b,c));return Dm()<b}function eo(b){return b.u==m.v.Vu()||b.u==m.v.Tu()}function zo(b){return b.vF}function vo(b){return b.u==m.v.ku()||b.u==m.v.Fu()&&b.At}f.ue=function(){return!0===this.pE};function Ao(){var b=v.i;return b.hB?b.hB:1}f.jr=function(){return!0};f.ve=function(){return this.sB};function Bo(b,c){this.ff=b;this.Kc=c}function Co(b){var c=new Bo;c.ff=b.attr("data-like-type");c.Kc=b.attr("data-like-objectid");c.df=b.attr("data-like-id");return c}function Do(b){var c=new Bo;c.df=b.id;c.l3=b.listenerId;c.ff=b.likeType;c.Kc=b.objectId;c.n3=b.stationName;c.m3=b.stationImgUrl;c.k3=b.contextType;c.i3=b.contextId;c.j3=b.contextName;return c}Bo.prototype.Hf=function(){return this.ff};function Eo(b){this.Ga=b.gain;this.uf=b.clickthrough_web?b.clickthrough_web:b.clickthrough;this.qc=b.impression;this.tracker=b.tracker;this.rn=b.tile_tracker_urls;this.vf=b.companion;this.ol=b.companion_web?b.companion_web:b.banner_html;this.RL=b.minutesToNext;this.Pw=b.delayedInStationAd?"true"==(b.delayedInStationAd+"").toLowerCase():!1;this.lb=b.type;this.cg=!0;this.Lm=Fo(b.adToken);this.ec="0";this.Pb=b.image;this.ie=-1;this.eb=this.Ca="audioad";this.Wh="";this.So="AudioAd";this.qE=b.adRequestMetaData;
this.xD=b.isInStationAd;this.Yh=b.lineId;this.Ic=b.creativeId}vd(Eo,Hn);Eo.prototype.oL=function(){return this.xD};Eo.prototype.pm=function(){return this.cg};function Go(b,c){Fn.call(this,b,c);this.RC=b.artistMessageButtonText;this.SC=b.artistMessageButtonUrl;this.Qb=b.artistMessageId;this.he=b.artistUid;this.uv=!1;this.AD=b.artistMessageIsOnDemand;this.TC=b.artistMessageDeepLink;this.CD=b.artistMessageIsSharable;this.eD=b.artistMessageDeliveryType}vd(Go,Fn);Go.prototype.we=function(){return this.AD};function Ho(b,c){Fn.call(this,b,c);this.qo=this.so=this.Go=null}vd(Ho,Fn);function Io(b,c,d,e){this.h=b;this.Zb=c;this.description=d;this.context=e}Io.prototype.r=function(){return this.h};Io.prototype.o=function(){return this.Zb};Io.prototype.Pl=function(){return this.description};Io.prototype.getContext=function(){return this.context};function A(){}function Jo(){return!(me(Ko())&&me(Lo())&&isNaN(ho(A._data.tip))&&$.isEmptyObject(Mo()))}var No=!1;
function Oo(){if(!No){No=!0;var b=Ko();if(b&&0<b.length){var c=Po(),d=Qo();z.b(Ji,{stationCode:b,stationName:A._data.sn,source:A._data.site||"",artistMessageArtistUid:""==c?null:c,artistMessageId:""==d?null:d})}(b=Lo())&&0<b.length&&(b="/search/"+escape(b),(c=Ro())&&0<c.length&&(b+="/"+escape(c)),$.address.value(b));b=ho(A._data.tip);isNaN(b)||z.b(Mi,b);b=Mo();_.each(b,function(b,c){z.b(lg,[c,b])})}}function ho(b){return null!=b&&0<b.length?parseInt(b,10):NaN}
function So(b,c){b=ho(b);return isNaN(b)||!b||b>c?c:b}function Mo(){var b={};_.each(A._data,function(c,d){0==d.indexOf("ext_")&&(b[d]=c)});return b}function Ko(){var b=A._data.sc;return"sh"!=b?b:null}function Lo(){return A._data.search}function Ro(){var b=A._data.searchfilter;return null!=b?(b=b.toLowerCase(),"track"==b?"song":b):null}function To(){return A._data.tc||""}function Uo(){return A._data.accountBirthYear}function Sn(){return A._data.csat}
function Vo(){return"175"==A._data.dc||0==A._data.autoplay||null!=Ko()&&0<Ko().length}function mn(){return"http://"+A._data.host+("80"!=A._data.port?":"+A._data.port:"")+"/"}function Tn(){return"https://"+A._data.host+("80"!=Kd()?":"+Kd():"")+"/"}function kn(){var b=A._data.shost,c=Kd();return null==b||null==c||A._data.nossl?mn():"https://"+b+":"+c+"/"}function Kd(){return A._data.sport}function Wo(){return A._data.facebookShareAppId}
function Xo(){var b=A._data.facebookTrackShareBaseUrl;return b?b:kn()}function Yo(){return A._data.createStationHintPath}function Zo(){var b="true"==A._data.tdlFullLyrics;setTimeout(function(){A._data.tdlFullLyrics=null},2500);return b}function $o(){var b="true"==A._data.tdlFullTraits;setTimeout(function(){A._data.tdlFullTraits=null},2500);return b}function ap(){return!0==A._data.paypalShowOrderConfirmScreen}
function bp(){var b=A._data.companionAd;-1!=document.location.search.indexOf("onlyFirstForced")&&(A._data.companionAd=null);return b}function cp(){return A._data.audioAd}function dp(){return A._data.videoAd}function ep(){return null==A._data.maxAdInitiatedRefreshDelaySeconds?60:A._data.maxAdInitiatedRefreshDelaySeconds}function fp(){return A._data.useHttpsForceCodeUrls}function gp(){return A._data.adTestMode}function rn(){return!0===A._data.lsiCookieDisabled||"true"===A._data.lsiCookieDisabled}
function hp(){return So(A._data.timeToStartAudioAds,420)}function ip(){return So(A._data.timeBetweenAudioAds,900)}function jp(){try{return pe(A._data.canDisplayLyrics)}catch(b){return!0}}function kp(){return me(A._data.countryCode)?"US":A._data.countryCode}function lp(){return"US"===kp()}function mp(){return me(A._data.postalCodeValidationRegex)?"^d{5}$":A._data.postalCodeValidationRegex}
function op(){return me(A._data.postalCodeValidationErrorMessage)?"You must have a valid 5 digit U.S. zip code.":A._data.postalCodeValidationErrorMessage}function pp(){return A._data.rt}function Qo(){var b=A._data.am;return b&&2==b.split(":").length?b.split(":")[1]:""}function Po(){var b=A._data.am;return b&&2==b.split(":").length?b.split(":")[0]:""}function qp(b){return A._data[b]}window.TunerVars=A;var rp=!1,sp=!1;function tp(b){z.b(lg,b)}window.Pandora_onExternalEvent=tp;window.Pandora.sendTunerCommand=function(b,c,d){tp([b,c,d])};function up(){if(rp&&sp){var b=Pandora.getSecretary();if(null!=b&&Pandora.eiWorking)b.onTunerReady();else k.error("ExternalEventService: could not communicate with secretary (onTunerReady)")}}
function vp(b,c,d){var e=Pandora.getSecretary();null!=e&&Pandora.eiWorking?e.sendToLocalConnection(b,c,d):k.error("ExternalEventService: could not communicate with secretary ("+b+":"+c+")")}Pandora.waitForSecretary(function(b){b?(rp=!0,up()):k.warn("ExternalEventService: can't communicate with secretary")});z.c(Ee,function(){sp=!0;up()});$(window).bind("unload",function(){var b=Pandora.getSecretary();null!=b&&null!=b.shutdown&&b.shutdown()});function wp(b,c,d){this.position=b;this.size=c;this.Wm=d}var xp=/^pod:(\d+)\/(\d+)\/(\d+)$/;function Fo(b){var c=null;if(b=xp.exec(b))if(c=new wp(Number(b[1]),Number(b[2]),Number(b[3])),c.position>c.size||1>c.position)c=null;return c}wp.prototype.Ef=function(){return"pod:"+this.position+"/"+this.size+"/"+this.Wm};wp.prototype.toString=function(){return"[AdPodLocation: "+this.Ef()+"]"};var yp={},yp={SLOT_SIZE_AUTOPLAY_VIDEO:"442x188",SLOT_SIZE_USER_INITIATED_VIDEO:"2000x7",AUDIO_AD_SIZE:"2000x12",AUDIO_IN_STATION_AD_SIZE:"2000x14",PRELOAD_SECONDS:10,PRELOAD_PERCENTAGE:97};var B={};
(function(b){function c(b){k.debug("AdUrlBuilder : "+b)}function d(b,c){return null!=b&&b!=B.O&&(b==B.ge||b==q||b==t||b==y||b==l||b==p||b==E||b==I||b==B.Yn||b==N||b==pa)&&null!=c&&c!==B.O}function e(b,c,d,e){var h=B.O;if(null!=b)for(var l in b){var p=b[l];if(B.kr(l,p))if(c&&(l=encodeURIComponent(l)),p=p.toString(),e&&-1<p.indexOf(B.ee))for(var q=p.split(B.ee),t=0;t<q.length;t++)null!=q[t]&&q[t]!==B.O&&(p=q[t],h+=d+l+U+p);else h+=d+l+U+p}return h}function h(b,c,d){var e={};b=b.split(B.Ti());for(var h=
0;h<b.length;h++){var l=b[h].split(U);if(1<l.length){var p=l[0],l=l[1];c&&(p=decodeURIComponent(p),l=decodeURIComponent(l));if(d(p,l)){var q=e[p];q?(_.isArray(q)||(e[p]=[q]),e[p].push(l)):e[p]=l}}}return e}var l="mdid",p="ppid",q="sz",t="ord",y="c",E="ref",I="dc_ref",N="ss_req",U="=",pa="iu";B.O="";B.Au="pand";B.ge="tile";B.Yn="ip";B.hC="msa";B.mg="d_imp";B.ee=",";B.bo=";";B.vk="http://";B.IB="https://";B.init=function(b){B.Ba=!1;B.Sw=b};B.jr=function(){return B.Ba};B.XQ=function(b){b&&(B.Ba=b.jr())};
B.Ti=function(){return B.Ba?"&":B.bo};B.Ri=function(){return B.Ba?"adx":"pfadx"};B.Fx=function(){return B.Ba?"adx":"adj"};B.oH=function(){return B.Ba?"adx":"adi"};B.$G=function(b){var c=B.O,c=c=B.O;B.Ba?(c=/^.+?iu=(\/\d+\/.+?\/.+?)&.*/,c=c.exec(b),c=c[1]):(c=/^.+?click\.net\/.+?(\/.+?\/.+?);.*/,c=c.exec(b),c="/"+B.Sw+c[1]);return c};B.kr=function(b,c){return null!=b&&b!=B.O&&b!=B.ge&&b!=q&&b!=t&&b!=y&&b!=l&&b!=p&&b!=E&&b!=I&&b!=B.Yn&&b!=N&&b!=pa&&"t"!=b&&b!=B.mg&&null!=c&&c!==B.O};B.Ly=function(b,
c){var d=c;if(B.Ba){var e=B.Ti();0==b.indexOf(e)&&(b=b.substring(1));for(d+=e+"t"+U+encodeURIComponent(b);-1<d.indexOf("%2C");)d=d.replace("%2C",B.ee)}else d+=b;return d};B.zG=function(b){var c=!1;B.Ba?(c=/&t=(.*?)&/.exec(b),b=decodeURIComponent(c[1]),c=!0):b=b.replace(/^.+?click\.net\/.+?(\/.+?\/.+?);/,B.O);return h(b,c,B.kr)};B.yG=function(b){b=b.replace(B.Ba?/^.+?click\.net\/.+?\/.+?\/\?/:/^.+?click\.net\/.+?\/.+?\/.+?;/,B.O);return h(b,!1,d)};B.$E=function(b){b=b.split(B.Ba?"|":B.ee);for(var c=
[],d=0;d<b.length;d++){var e=b[d].split("x");c.push([parseInt(e[0],10),parseInt(e[1],10)])}return c};B.Ex=function(b,c){var d=Ld()&&window._migrateUserToHttps?B.IB:B.vk,d=B.Ba?d+String.fromCharCode(112)+"ubads.g.doublec"+String.fromCharCode(108)+"ick.net/gampad/":d+String.fromCharCode(97)+"d.doublec"+String.fromCharCode(108)+"ick.net/",d=d+b;return d=B.Ba?d+("?"+pa+U+"/"+B.Sw+"/"+c):d+("/"+c)};B.Bc=function(b,c){var d=B.Ti(),e=b.split(d),h;for(h in c)for(var l=0;l<e.length;l++)0==e[l].indexOf(h+U)&&
(e[l]=h+U+c[h]);return e.join(d)};B.Ox=function(){return B.Ba?p:l};B.ow=function(b,d,h,l,p,N,pa,Bb,tb){var Td=C.Vv,bb=B.Ti();null==l&&(l={});l.sz=N;tb=B.zx(l,B.Ba,bb,Td,tb,!B.Ba);null!=p&&(tb+=e(p,B.Ba,bb,!B.Ba));p=C.wH();p=p+"."+C.IH();p+="/";p+=C.PH();p+=".";p+=d;p+=h;b=B.Ex(b,p);c("Base Ad URL : "+b);b=B.Ly(tb,b);c("Base Ad URL with Targeting Parameters : "+b);b+=bb+(B.Ba?E:I)+U+B.Au;d=B.Ox();null!=l[d]&&l[d]!=B.O&&(b+=bb+d+U+l[d]);B.Ba&&null!=l[B.mg]&&!0===l[B.mg]&&(b+=bb+B.mg+U+"1");Bb&&null!=
l[B.ge]&&l[B.ge]!=B.O&&(b+=bb+B.ge+U+l[B.ge]);l=b;Bb=bb+q+U;if(B.Ba)for(;-1<N.indexOf(B.ee);)N=N.replace(B.ee,"|");b=l+(Bb+N)+(bb+(B.Ba?y:t)+U+pa);c("Final Ad URL : "+b);return b};B.zx=function(b,c,d,h,l,p){var q=B.O;if(null!=b){if(h)for(h=h.split(B.bo),l=0;l<h.length;l++){var t=h[l].split(U);if(1<t.length){q=t[0];t=c?encodeURIComponent(t[1]):t[1];if(q in b)var y=b[q],y=null!=y&&void 0!=y&&y!==B.O?y+B.ee+t:t;else y=t;b[q]=y}}else b.d1=l;q=e(b,c,d,p)}return q};b.AdUrlBuilder=B;b.AdUrlBuilder_getBaseAdUrl=
B.Ex;b.AdUrlBuilder_getAdUnit=B.$G;b.AdUrlBuilder_isTargetingKeyValue=B.kr;b.AdUrlBuilder_getUrlSeparator=B.Ti;b.AdUrlBuilder_isSimpleUrlEnabled=B.jr;b.AdUrlBuilder_getJsCreativeRequestType=B.Fx;b.AdUrlBuilder_getIFrameCreativeRequestType=B.oH;b.AdUrlBuilder_insertUrlTargetingParameters=B.Ly;b.AdUrlBuilder_extractUrlTargetingParameters=B.zG;b.AdUrlBuilder_extractUrlNonTargetingParameters=B.yG;b.AdUrlBuilder_buildSlotSizesArray=B.$E})(this);var C={};
(function(b){function c(b,c,d,e,h,l){k.debug("Chronos enabled - Ad response");k.debug("Chronos Response - "+JSON.stringify(l));l=l.adList;if(void 0==l||null==l)k.debug("Chronos Web Ad is null or empty"),zp("Ad was blocked",c,"Chronos Web Ad is null or empty",d,C.vd.i),b(null);else if(0===l.length)k.debug("Chronos says it's not time for an ad."),b(null);else{k.debug("Chronos says it's time to play "+l.length+" ads");var p=!1,q=[];_.each(l,function(b){k.debug("Chronos - commence parsing of Ad response");var h=
b.success;if(h&&"false"!==h)if(h=b.adType,"AUDIO_AD"===h||"VIDEO_AD"===h){p="AUDIO_AD"===h;var h={},l=b.content,t=b.adType;"AUDIO_AD"===t&&(h=C.Cj(l,d,c));k.debug("Chronos - commence parsing of ad: "+t);void 0!=b[nb]&&(h[nb]=b[nb]);h.adRequestMetaData=b.adRequestMetaData;k.debug("Chronos adRequestMetaData - "+b.adRequestMetaData);k.debug("Chronos adToken - "+b[nb]);h.isInStationAd=e;b={parsedContent:h,content:l,response:b};k.debug("Chronos Got Ad - pushing onto array ",b);q.push(b)}else k.info("Unknown adType...ignoring: "+
h);else k.info("Success is false, don't process current ad")});0===q.length?b(null):"VIDEO"===h&&p?(k.info("Audio Ad was received but the callback does not know how to handle it. Handing it off to AudioAdManager directly for inclusion into queue."),z.b(Rk,{ads:q,callback:_.bind(b,null,q)})):b(q)}}function d(b,c,d,h,l,p,q,t,y,E){if(b=e(b,c,d,l,p,q,t,y,E))c=null!=cp()||"true"==gp()||"true"==A._data.audioAdTestMode,d=null!=dp()||"true"==gp()||"true"==A._data.videoAdTestMode,_.extend(b,{chronosOptions:h,
testMode:c&&d?"all":c?"audio":d?"video":""}),z.b(Mk,b)}function e(b,c,d,e,h,l,p,q,t){h={subzone:c,options:d,slotSize:e,adToken:h,stationId:l,successCallback:p,errorCallback:q};if(t){b=t.split(Bb,2);if(2!=b.length)return q({message:"audioAd tunerVar form is: ?audioAd=AdId:CreativeId"}),null;h[bb]="/util/dartCreative.jsp?ad="+b[0]+"&c="+b[1];h.secondsUntilAd=ta;fp()&&(h[bb]=Tn()+h[bb])}else d[B.Ox()]=C.OA,h[bb]=E(b,c,d,e,!0);return h}function h(b){b&&(q(b.jf),C.p=b.p(),C.Vk=b.Ef(),C.Vv=b.uF,C.OA=b.OL,
C.ue=b.ue(),C.Fn=b.Fn||B.O,C.nm=b.nm,C.ve=b.ve(),C.Om=b.Om,B.XQ(b))}function l(){C.Zk=1}function p(b){k.debug("AdService : "+b)}function q(b){var c=new Date;c.setTime(c.getTime()+2592E6);c="v3ad="+b+"; "+("expires="+c.toGMTString()+"; ");c+="path=/; ";null!=document.domain&&document.domain.match(/pandora.com$/)&&(c+="domain=.pandora.com;");"https:"==window.location.protocol&&(c+=" secure;");document.cookie=c;b=b.split(Bb);C.Tw=String(b[0])==T;C.bp=b[1];C.Qx=b[2];C.zip=b[3];C.Ei=b[4];C.Cy=b[5];C.Fw=
b[6];C.fz=String(b[7])==T;C.mx=b[8];C.Xw=b[9];14<=b.length&&(C.bz=b[10],C.state=b[11],C.county=b[12],C.gx=b[13]);17<=b.length&&(C.Ov=b[14],C.By=b[15],C.uy=b[16]);18<=b.length&&(C.ax=b[17]);19<=b.length&&(C.Ey=b[18])}function t(b,c){if(b.D()){var d={};if(c)for(var e=0;e<c.length;e++){var h=c[e];d[h.e()]=h}e=b.qe()||[];for(h=0;h<e.length;h++){var l=d[e[h]];if(l){if(l.Ml())break;if(N(l)||t(l,c))return!0}}}return!1}function y(b){if(null!=b)for(var c=0;c<b.length;c++){var d=b[c].Df();if("toddler"==d)return 1;
if("kids"==d)return 2;if("tween"==d)return 3}return-1}function E(b,c,d,e,h){if(C.dp&&"comedy"==C.au)return null;var l=C.Kl(),p=C.au;C.ue&&h&&(p=tb+p,l=Td);return B.ow(b,c,p,d,null,e,l,!0,I().toString())}function I(){var b=C.bp,c=0;if("number"===typeof b)c=b;else try{c=parseInt(b,10)}catch(d){c=0}return 13<=c&&18>c?1:18<=c&&21>c?2:21<=c&&25>c?3:25<=c&&30>c?4:30<=c&&35>c?5:35<=c&&40>c?6:40<=c&&45>c?7:45<=c&&50>c?8:50<=c&&55>c?9:55<=c&&60>c?10:60<=c&&65>c?11:65<=c&&80>c?12:0}function N(b){if(b=b.Gf())for(var c=
0;c<b.length;c++)if("comedy"==b[c].toLowerCase())return!0;return!1}function U(b){var c={};b.each(function(){var b=$(this).find("> name")[0];if(b){var b=$(b).text(),d=$(this).find("value string");1==d.length?c[b]=$(d[0]).text():1<d.length&&(c[b]=d.map(function(){return $.trim($(this).text())}))}});return c}function pa(b,c,d){var e=b,h=e.indexOf("?>");-1<h&&(e=e.substr(h+3));e=e.replace(/<\!\[CDATA\[|\]\]>/g,B.O);(e=U($("member",e)))&&0!=_.size(e)?(fb(b,e),gb("_selectorParse",e)):(p("selector XML parse error"),
e=Ia(b,c,d));return e}function Ia(b,c,d){var e=b,h=e.indexOf("?>");-1<h&&(e=e.substr(h+3));for(var h={},l=$.trim(e.replace(/<\!\[CDATA\[|\]\]>/g,B.O)),e="type audio creative_token gain company_name image dimmed tracker companion impression clickthrough minutesToNext gain movie uif aspectRatio logoimage richmedia_companion followon_companion banner_image banner_html delayedInStationAd tile_tracker_urls".split(" "),q=["clickthrough","tracking","tracker"],l=$.trim($(l).text()).split(/\s+/),t=0,y=l.length;t<
y;t++){var E=l[t],I=l[t+1];if(_.contains(e,I)||ua(q,I))h[E]=B.O;else if("tile_tracker_urls"==E){var N=$($.trim(I).split(B.vk)).filter(function(b){return!!b});if(1<N.length)h[E]=$.map(N,function(b){return B.vk+b}),t++;else{h[E]=[I];for(t+=2;t<y&&0==l[t].indexOf(B.vk);)h[E].push(l[t++]);t-=1}}else h[E]=I,t++}h&&0!=_.size(h)?(fb(b,h),gb("_bruteForceParse",h)):(p("brute force XML parse error"),zp(b,d,"AdService : XML parse failed",c,C.vd.i));return h}function fb(b,c){var d=/\x3c!-- *[0-9]+ *: *([0-9]+) *--\x3e/.exec(b);
d&&2==d.length&&(c.creativeId=d[1])}function gb(b,c){try{s("web_audio_ad_parse",{ua:navigator.userAgent,site_version:window._pandoraVersion,browser:se(),method:b,creative_id:c&&c.creativeId?c.creativeId:null,ad_type:c&&c.type?c.type:null}),Ap(null)}catch(d){trackJs.track(d)}}function ua(b,c){for(var d=!1,e=0;e<b.length;e++){if(d)return;d=c&&0==c.indexOf(b[e])}return d}var ta="0",T="1",nb="adToken",Bb=":",tb="__POD__",Td="__CACHEBUST__",bb="adUrl";C.Uh="REQUESTFAILED";C.init=function(b,c){C.Tw=!0;
C.Rk=b;C.vd=c;C.bp=ta;C.Qx=ta;C.zip=B.O;C.Ei=B.O;C.Cy=ta;C.Fw=ta;C.exp=ta;C.mx=ta;C.Ax=null;C.fz=!1;C.dp=!1;C.au=B.O;C.Xw=ta;C.LN=A._data.organization||B.Au;C.mt=A._data.pub||"default";C.wR=A._data.zone||"prod";C.p=!1;C.bz=ta;C.state="CA";C.county=ta;C.gx=ta;C.Ov=ta;C.By=ta;C.uy=ta;C.ax=ta;C.Ey=ta;C.OA=B.O;C.Fn=B.O;C.ue=!1;C.nm=!1;C.ve=!1;C.Om="";C.Zk=1;B.init(A._data.dfpNetworkCode||"4204");var d=$.cookie("v3ad");d&&q(d);null!=document.cookie&&document.cookie.match(/v2pub=(\w+)/)&&(C.mt=RegExp.$1);
z.c(He,h);z.c(Ie,h);z.c(He,l)};C.VK=function(){C.Zk++};C.$O=function(){C.exp="1"};C.Gf=function(){return C.Ax};C.G3=function(){return C.p};C.H3=function(){return C.ve};C.wH=function(){return C.LN};C.IH=function(){return C.mt};C.PH=function(){return C.wR};C.Kl=function(){return(new Date).getTime()+B.O+Math.floor(1E6*Math.random())};C.Oe=function(c){if(!C.Tw)return null;null==c&&(c={});var d;C.Vk?d=C.Vk:(d=C.Kl(),14<d.length&&(d=d.substring(0,14)));c.l=d;c.ag=C.bp;c.gnd=C.Qx;c.zip=C.zip;c.hours=C.Cy;
c[B.ge]=c[B.ge]||1;c.comped=C.Fw;c.exp=C.exp;c.fb=C.mx;c.dma=C.Xw;c.clean=C.fz||C.dp?T:ta;c[B.hC]=C.bz;c.st=C.state;c.co=C.county;c.et=C.gx;c.pin=!_.isUndefined(b.external)&&_.isFunction(external.msIsSiteMode)&&external.msIsSiteMode()?T:ta;c.aa=C.Ov;c.hisp=C.By;c.hhi=C.uy;c.dse=C.ax;c.iat=C.Ey;c.abx=C.Om;c.vxc=C.Fn;c.prg=C.nm?T:ta;c.async=C.ve?T:ta;C.Ei=C.Ei.replace(/^\W*/,B.O).replace(/\W*$/,B.O);if(0<C.Ei.length){d=C.Ei.split(B.ee);for(var e=0;e<d.length;e++){var h=d[e];h==B.Yn&&(h="ios");c[h]=
"1"}}return c};C.fg=function(c,d,e){null==c&&(c={});c.fam=y(e);if(null!=d){e=N(d)?!0:t(d,e);c.station=d.La();d.La()&&(c.stationId=d.e());var h=d.wa();c.artist=null==h?B.O:h.musicId;if(C.p)c.gcat="none";else if(!c.gcat){var l=d.Rl();c.gcat=l?l:"none"}h=d.Df();C.Ax=h;c.genre=h?h:l;C.dp=d.Ml();C.au=e?"comedy":B.O;c=zn(d)?zn(d).key:B.O;b.gStationSeed=c;b.gStationArtistId=zn(d)&&"artist"==zn(d).type?c:null;c=B.O;zn(d)&&(zn(d).artistName?c=zn(d).artistName:zn(d).stationName&&(c=zn(d).stationName));b.gStationArtistName=
c;b.gStationSongName=zn(d)&&zn(d).songName?zn(d).songName:B.O;c=B.O;zn(d)&&(zn(d).artistDetailUrl?c=zn(d).artistDetailUrl:zn(d).songDetailUrl&&(c=zn(d).songDetailUrl));b.gStationSeedUrl=c;b.gGenreSponsorship=d.Rl()}};C.za=function(b){if(!b)return!1;var c=b.La(),d=!!b.Ra(),e=!!b.rc();return!b.Z()&&le(c)||d||e};C.qH=function(b){var c=D.Nx(),d={};C.fg(d,b,c);d=C.Oe(d);return B.zx(d,!1,B.bo,C.Vv,I().toString(),!1)};C.bA=function(b,c,d){C.pv=E(B.Fx(),b,c,d,!1)};C.Wg=function(){return C.pv};C.hA=function(b){C.jE=
b};C.OH=function(){return C.jE};C.AQ=function(b){return E("adx","radio",b,"2000x2,300x250,300x600",!1)};C.Os=function(b){C.fD=b};C.Cx=function(){var b=C.fD;C.Os(null);return b};C.ZO=function(b){C.ov=b};C.aH=function(){var b=C.ov;C.ov=null;return b};C.EO=function(b,c,d,h,l,q){(b=e(b,F.ci,c,F.$e,d,h,l,function(b){p("AudioAd fetch failed: "+b.message);q(C.Uh)},F.tv))&&z.b(Lk,b)};C.Rm=function(b,c,d,e,h,l){z.b(Nk,{creativeId:b,secondsPlayed:c,adLength:d,isHouseAd:e,successCallback:h,errorCallback:l})};
C.Vf=function(b,c,d,e,h,l,q){var t=E(b,c,d,e,h);null!=t&&(p("Fetch Ad Url (requestAd) : "+t),Bp(t,function(b){l(b,t)},function(b){zp(b.name+" : "+e,e,"proxy get failure",c,C.vd.i);q(b)}))};C.DO=function(b,c,d,e,h,l){var q=B.ow(B.Ri(),b,"",c,d,e,C.Kl(),!1,I().toString());null!=q&&(p("Fetch Ad Url (requestAdForZone) : "+q),Bp(q,function(b){h(b,q)},function(c){zp(q,e,c.name,b,C.vd.i);l(c)}))};C.rx=function(b,c,d,e){b="/sponsorship/?feature=p1TrialSponsor&sponsor="+b;c&&(b+="&st=true");Bp(b,function(b){b=
C.Cj(b,"p1trial","sponsorship");d(b)},e)};C.wb=function(b,c,d){var e=C.Rk.V(),h=-1;e&&(h=e.n.e());z.b(Ok,{adData:b,stationId:h,onImpressionSuccess:c,onImpressionFailure:d})};C.Cj=function(b,c,d){var e={};b&&(b=$.trim(b));if(null==b||0==b.length)return p("Ad content is null or empty - Ad blocked?"),zp($.trim(b),d,"Ad content is null or empty - Ad blocked?",c,C.vd.i),e;e=null;try{e=$.parseXML(b)}catch(h){return pa(b,c,d)}if(0<$(e).find("parsererror").length)return k.debug("AdService : ","Failed to parse",
b),pa(b,c,d);e=U($(e).find("member"));fb(b,e);gb("$.parseXML",e);return e};C.cP=function(){var b=B.Bc(C.Wg(),{tile:2,sz:"2000x24"});C.pv=b};C.Yz=function(b){var e=b.currentStationData,h=b.options,l=b[nb],p=b.callback,q=b.forcedAudioAd,t=b.lastDisplayAdTime,y=b.requestType,E=b.subZone,I=b.currentSize,N=b.isInStationAd,U=b.currentStationTrack,T=b.currentStationTrackType,pa=b.isUserInitiated;b=b.handlerType;var ua=Ed(),ta=0,Ia=0;U&&((e=Sm(U.o(),e.e()))&&(ta=e),U.Vc()&&(Ia=U.Vc()));e=Ia-ta;0>e&&(e=yp.PRELOAD_SECONDS);
t={secondsUntilAd:pa?0:e,secondsPlayed:null==ta?0:ta,currentStationId:U?U.r().e():B.O,trackToken:U&&U.Za()?U.Za():B.O,trackType:T?T:B.O,userInitTrackEnd:pa,secondsSinceDisplayAd:ua-t};k.debug("chronos elapsed time - "+ta);k.debug("chronos total track length - "+Ia);k.debug("chronos secondsUntilAd - "+e);k.debug("chronos - trackType - "+T);k.debug("chronos - trackToken - "+t.trackToken);(U=C.Rk.V())?(T=B.O,(pa=C.Rk.t)&&(T=pa.r().n.e()),U=U.n,T=U.D()?T:U.e(),N=_.bind(c,null,p,I,E,N,b),d(y,E,h,t,I,l,
T,N,function(b){k.debug("GetAdList fetch failed: "+b.message);p(C.Uh)},q)):(k.error("Missing next station data! Skipping call to Chronos service."),p(C.Uh))};C.Da=function(){var b=C.Rk.V(),c=C.vd.i&&C.vd.i.Rq&&!0!=b.Db()&&!0!=b.Ra()&&!0!=b.Ub();k.debug("Can use chronos - "+c+" \n isChronosEnabled: "+(C.vd.i&&C.vd.i.Rq)+" \n isPromotedStation: "+b.Db()+" \n isOnDemandStation: "+b.Ra()+" \n isAdvertiserStation: "+b.rc()+" \n isRecommendedStation: "+b.Ub());return c};var Cb={};Cb.getGenre=C.Gf;b.Patron=
Cb;b.AdService=C;b.AdService_getDisplayAdUrl=C.Wg;b.AdService_getVxDisplayAdUrl=C.OH;b.AdService_getAndClearDisplayAdContent=C.Cx;b.AdService_getAndClearDisplayAdCompanionUrls=C.aH;b.AdService_generateCorrelationId=C.Kl})(this);function zp(b,c,d,e,h){if(null!=b)try{var l={};512<b.length&&(b=b.replace(/\s/g,""),b=b.substr(0,512));l.adUrl=b+" : "+se();l.adType=c;l.reason=d;l.client=e;Cp(l,h);Dp(l)}catch(p){k.warn("Exception in BrokenAdManager",p),trackJs.track(p)}}
function Ep(b,c,d,e,h,l,p,q){if(null!=b)try{var t={},y=b,E=b.indexOf(";u=");0<E&&(y=b.substr(0,E));512<y.length&&(y=y.replace(/\s/g,""),y=y.substr(0,512));t.adUrl=y+" : "+se();t.adType=c;t.reason=d;t.client="radio";t.requestUrl=e;t.creativeId=h;t.lineId=l;t.browserInfo=p;t.hiveRecord=null!=e?"1":"0";Cp(t,q);Dp(t);"1"==t.hiveRecord&&s("web_broken_ad_error",t,q)}catch(I){k.warn("Exception in BrokenAdManager recordWebBrokenAd",I),trackJs.track(I)}}
function Cp(b,c){c&&b&&(b.lid=c.s,b.asyncGPT=c.ve()?"1":"0")}function Dp(b){k.debug("brokenAdManager :/radio/services/brokenAd.jsp",b);$.ajax({cache:!1,type:"POST",data:b,error:Fp,success:Gp,timeout:1E4,url:"/radio/services/brokenAd.jsp"})}function Fp(b,c){k.warn("BrokenAdManager.error: "+c)}function Gp(b,c){"success"!=c&&k.warn("BrokenAdManager: unexpected status: "+c)};function Hp(b,c,d){d=new flensed.flXHR({instancePooling:!0,noCacheHeader:!1,xmlResponseText:!1,onerror:d,onreadystatechange:function(b){if(4==b.readyState)try{c(b.responseText)}catch(d){trackJs.track(d),k.debug("FlashProxy : Error in handler",d)}}});d.setRequestHeader=Ip;d.open("GET",b);d.send()}function Ip(b,c){k.debug("FlashProxy defeating header "+b+" with value "+c)};function Bp(b,c,d){Hp(b,c,d)}function Jp(b,c,d){try{k.debug("CrossDomainProxy :  fallback image pingUrl called : "+b);var e=new Image(1,1);e.onload=function(){e.onerror=e.onload=null;c&&c()};e.onerror=function(){e.onerror=e.onload=null;d&&d(null)};e.src=b}catch(h){trackJs.track(h),zp(b,"impression","fallback image ping failed","ads",v.i)}};var Kp={},Lp=!1,Mp=0,Np=!1,u=100,we="1880";setInterval(function(){Mp=0},1E3);setInterval(function(){Np=!1},6E4);var Op={};$(window).bind("beforeunload",function(){Ap(null)});function re(b,c){Pp();s("script_error",b,c);null!==b.msg&&""!==b.msg&&trackJs.track(Error(b.msg))}var Qp=null;function on(){pn("page_failed");$.cookie("errorCookieInfo","start")}
function nn(){"start"==$.cookie("errorCookieInfo")&&(ne(5)?(z.c(Ug,function(){$.cookie("errorCookieInfo",null)}),Qp=""+(new Date).getTime()+"."+(1E3*Math.random()|0),$.cookie("errorCookieInfo","log")):$.cookie("errorCookieInfo",null));pn("start")}function pn(b){"log"==$.cookie("errorCookieInfo")&&s("cant_load_site",{ua:se(),flash_ver:te(),checkpoint:b,site_version:window._pandoraVersion,ticket:Qp})}
function s(b,c,d){var e=Rp()+"/v2";Op[e]||(Op[e]=setTimeout(function(){Ap(e)},A._data.statsInterval));try{if(null!=b&&""!=b){var h={type:b};null!=c&&$.each(c,function(b,c){null!==b&&""!==b&&null!==c&&""!==c&&(h[b]=c)});d&&d.s&&(h.listener_id=d.s);Sp(e,h)}}catch(l){trackJs.track(l),k.error("StatsCollectorUtil.logEvent error: "+l)}}function Tp(b,c){try{c&&c.s&&0==c.s%10&&s("promo_box",b,c)}catch(d){trackJs.track(d),k.error("StatsCollectorUtil.logEvent error listenerId % 10 failed: "+d)}}
function Up(b){try{null!=b&&0!=b.length&&$.each(b,function(b,c){s(c,null,null)})}catch(c){trackJs.track(c),k.error("StatsCollectorUtil.logMultipleEvents error: "+c)}}
function Sp(b,c){try{if(Lp&&(!Np||"script_error"!=c.type)){var d;a:{for(var e=ud(),h=Vp(b),l=h.length-1;0<=l;l--){var p=h[l].url,q=h[l].data,t=h[l]&&h[l].time&&300>e-h[l].time?!0:!1;if(!t&&!h[l].pending)h.splice(l,1);else if(null!=p&&p==b&&null!=q&&_.isEqual(q,c)&&t){d=!0;break a}}var y=A._data.statsHost;d=c&&c.url&&y&&-1<c.url.indexOf(y)?!0:!1}if(d)k.debug("duplicate request, skipping: "+b,c);else{var E=Vp(b);E.push({time:ud(),data:c,pending:!0});E.length>=A._data.statsBatchSize&&(k.debug("Triggered with "+
E.length+" events."),Ap(b))}}}catch(I){trackJs.track(I),k.warn("Error sending stats collector log: "+I)}}function Rp(){var b=A._data.statsHost,c="https:"==location.protocol?A._data.statsSslPort:A._data.statsPort;Lp=b?!0:!1;return location.protocol+"//"+b+(null!=c?":"+c:"")}function Wp(b,c){var d="type"+b.count;b.count=++b.count;_.each(c,function(c,h){var l=d;"type"!==h&&(l+="."+h);b.data[l]=c})}
function Ap(b){_.each(Kp,function(c,d){if(!b||d===b){Op[d]&&(clearTimeout(Op[d]),Op[d]=null);var e=ud();if(0>=c.length)k.debug("No events in '"+d+"' queue.");else{k.debug("Flushing '"+d+"' queue "+(e-c[0].time)+"ms after 1st event added to queue");for(var h,l;;){l=[];h={data:{},count:0};for(var p=0;p<c.length&&h.count<A._data.statsBatchSize;p++)c[p]&&c[p].time&&300>e-c[p].time||l.unshift(p),c[p].pending&&(c[p].pending=!1,Wp(h,c[p].data));for(p=0;p<l.length;p++)c[l[p]].pending||c.splice(p,1);if(0===
h.count)break;k.debug("Sending "+h.count+" events to "+d,h);$.ajax({cache:!1,type:"GET",data:h.data,dataType:"jsonp",crossDomain:!0,error:Xp,success:Yp,url:d})}}}})}function Vp(b){Kp[b]||(Kp[b]=[]);return Kp[b]}function Xp(b,c){k.warn("StatsCollectorUtil.jsonpError: "+c);Pp()}function Pp(){!Np&&50<++Mp&&(k.info("StatsCollector failing too much... stopping logging for a minute."),Np=!0)}
function Yp(b,c){k.debug("StatsCollectorUtil.jsonpSuccess: success");"success"!=c&&k.warn("StatsCollectorUtil.jsonpSuccess: unexpected status: "+c)};var ln;function Zp(b){this.Nk=b.offerName;this.Yh=b.lineId;this.Ic=b.creativeId;this.To=b.truexInstanceId}Zp.prototype.Xg=function(){return null};Zp.prototype.Zm=function(){return!1};Zp.prototype.nA=function(){return!1};function $p(b){Zp.call(this,b);this.Nk=b.offerName;this.Yh=b.lineId;this.Ic=b.creativeId;this.VD=parseInt(b.secondsRemaining,10);this.WD=parseInt(b.secondsTotalDuration,10);this.hD=b.displayTextByBrand;this.gD=b.displayText;this.XC=b.brandName;this.JD=b.offerButtonLabel;this.KD=b.offerButtonUrl;this.qv=b.displayTextEndRewardLine1;this.rv=b.displayTextEndRewardLine2;this.HD=b.leadInBannerUrl;this.GD=b.leadInAudioUrl}vd($p,Zp);
function aq(b){var c="";b.qv&&(c+=b.qv);b.rv&&(c&&(c+=" "),c+=b.rv);return c}$p.prototype.Xg=function(){return this.HD};$p.prototype.Zm=function(){return!0};$p.prototype.nA=function(){return!0};function bq(b){return cq(["account/sign-in","account/register","account/help","account/welcome","password_reset"],b)||"/"==b?b:!1}function dq(b){var c="account/info account/privacy account/notices account/upgrade account/audioQuality account/desktopApp /payment".split(" ");return"/one"===b||cq(c,b)?b:!1}function cq(b,c){return b.some(function(b){return 0<=c.indexOf(b)})};function eq(b,c,d,e,h){this.url=b;this.method=c;this.vp=e;this.rE=d;this.timeout=12E4;this.Zz=!0;this.xi=this.gR=!1;this.KO=r(this,this.JO);this.OO=h}var fq=null,gq=0,hq=0,iq=null,jq=null;
eq.prototype.apply=function(b){var c=this.url;if(!this.gR){var d=fq+"P",c=c+(0<=c.indexOf("?")?"&":"?"),c=c+("rid="+d.substr(6));null!=iq&&0>c.indexOf("lid=")&&(c+=0<=c.indexOf("?")?"&":"?",c+="lid="+iq);d=this.method.substr(this.method.indexOf(".")+1);c+="&method="+d;this.xi&&0>c.indexOf("commerce=true")&&(c+=0<=c.indexOf("?")?"&":"?",c+="commerce=true");if(this.rE)for(d=1;d<b.length;d++)c=c+"&arg"+d+"="+escape(b[d]);1024<c.length&&(c=c.substr(0,1024))}if(this.Zz){d=this.method;0!=d.indexOf("misc.")&&
(b=[gq+(Ed()-hq)].concat(b));var e=[];e.push('<?xml version="1.0"?><methodCall><methodName>');e.push(d);e.push("</methodName><params>");for(d=0;d<b.length;d++)e.push("<param>"),kq(b[d],e),e.push("</param>");e.push("</params></methodCall>");b=e.join("");b=jq.encrypt(b)}else b="";this.vp.send(c,b,this.timeout,this.KO)};eq.prototype.JO=function(b){var c=b;b instanceof xd&&(c=lq(b.body));this.OO(c)};eq.prototype.setTimeout=function(b){this.timeout=b};
function kq(b,c){c.push("<value>");if(td(b))if(b.constructor==Array){c.push("<array><data>");for(var d=0;d<b.length;d++)kq(b[d],c);c.push("</data></array>")}else{c.push("<struct>");for(d in b)null!=b[d]&&(c.push("<member>"),c.push("<name>"),c.push(d),c.push("</name>"),kq(b[d],c),c.push("</member>"));c.push("</struct>")}else sd(b)?(c.push("<int>"),c.push(b),c.push("</int>")):"boolean"==typeof b?(c.push("<boolean>"),c.push(b?"1":"0"),c.push("</boolean>")):rd(b)?(c.push("<string>"),rd(b)&&c.push(b.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split("'").join("&apos;").split('"').join("&quot;")),
c.push("</string>")):k.error("unknown type: value: "+b+", current output: "+c.join(""));c.push("</value>")}
function lq(b){if("methodResponse"!=b.nodeName)return mq("invalid top node: "+b.nodeName);var c=b.firstChild;if(null==c)return mq("no child in methodResponse");if("fault"==c.nodeName){b=nq(c.firstChild);if(null==b)return mq("invalid fault data");c=b.faultString.split("|");return 4!=c.length?new Dd(b.faultString,b.faultCode):new Dd(c[3],c[2])}if("params"==c.nodeName){b=[];for(var d=0;d<c.childNodes.length;d++){var e=c.childNodes[d];if(3!=e.nodeType){if("param"!=e.nodeName)return mq("not a param node");
e=nq(e.firstChild);if(null==e)return mq("invalid item");b.push(e)}}return new yd(b)}return mq("invalid response data: "+c.nodeName)}function mq(b){k.error("XmlRpc parse error: "+b);return new Dd(b,0)}
function nq(b){if("value"!=b.nodeName)return k.error("not a value node");if(0==b.childNodes.length)return"";var c=b.firstChild;if(3==c.nodeType)return b.normalize&&(b.normalize(),c=b.firstChild),c.nodeValue;if("struct"==c.nodeName){for(var d={},e=0;e<c.childNodes.length;e++){var h=c.childNodes[e];if(3!=h.nodeType){if("member"!=h.nodeName)return k.error("not a member node");for(var h=h.childNodes,l,p=0;p<h.length;p++){var q=h[p];if(3!=q.nodeType)if("name"==q.nodeName)l=h[p].firstChild.nodeValue;else if("value"==
q.nodeName){if(b=nq(h[p]),null==b)return null}else return k.error("unknown node: "+h[p].nodeName)}d[l]=b}}return d}if("array"==c.nodeName){b=c.firstChild;if("data"!=b.nodeName)return k.error("not a data node");d=[];for(e=0;e<b.childNodes.length;e++)if(3!=b.childNodes[e].nodeType){c=nq(b.childNodes[e]);if(null==c)return null;d.push(c)}return d}return"int"==c.nodeName||"i4"==c.nodeName?Number(c.firstChild.nodeValue):"boolean"==c.nodeName?"1"==c.firstChild.nodeValue?!0:!1:"string"==c.nodeName?0==c.childNodes.length?
"":c.firstChild.nodeValue:k.error("unknown node: "+c.nodeName)};var G=Un.Gm(),H=911312399,J="Ed",oq=[11,42,27,20,25,41,40,4,10,24,22,44,58,38,29,53,26,32,36,13,46,56,18,15,45,47,-1,3,21,8,23,48,6,14,30,2,54,57,50,19,51,33,7,12,39,9,28,35,31,37,59,16,0,17,34,52,1,49,5,55,43],K="LT",pq=[30,58,14,25,20,45,27,33,0,32,43,6,41,26,40,8,17,9,50,3,38,19,46,49,12,10,54,48,59,36,52,55,18,37,15,7,47,-1,44,51,39,53,16,1,5,34,28,57,29,21,56,22,2,11,42,4,35,24,23,31,13],L="CP",qq=[30,34,47,2,32,45,0,12,46,21,39,-1,6,49,4,8,36,52,15,20,9,56,50,18,23,40,33,3,29,19,51,53,11,22,
1,58,5,41,57,17,44,54,35,13,7,48,55,28,27,10,25,16,31,42,38,59,14,43,37,26,24],M=236273669,rq=[40,46,56,34,27,42,4,59,12,13,35,18,7,11,54,24,32,44,-1,47,39,15,9,48,57,28,52,41,19,45,22,6,1,30,38,37,5,3,21,29,10,49,8,25,51,0,20,17,16,58,26,2,36,53,43,55,14,33,23,31,50],sq=[20,11,5,3,45,47,38,13,41,26,28,23,46,43,31,44,22,53,57,56,32,34,30,4,49,37,54,24,9,1,25,29,0,27,-1,58,10,14,50,15,21,19,17,59,35,2,8,6,42,39,40,52,18,33,48,12,55,36,7,16,51];function tq(){this.Wf=!1}f=tq.prototype;f.send=function(b,c,d,e){z.b(dg,b);this.Wf&&k.error("request pending");this.Wf=!0;this.Wa=e;this.QF=b;this.LF=c;-1!=b.indexOf("/jsonp")?$.ajax({cache:!1,contentType:"text/plain",type:"GET",data:{req:c},dataType:"jsonp",processData:!0,crossDomain:!0,error:r(this,this.Py),success:r(this,this.xL),timeout:d,url:b}):$.ajax({cache:!1,contentType:"text/xml",type:"POST",data:c,dataType:"xml",processData:!1,error:r(this,this.Bm),success:r(this,this.pz),timeout:d,url:b})};
f.Py=function(b,c){k.warn("jsonpError: ",c);this.Eg(new Bd(c))};f.xL=function(b,c){if("success"==c){var d=$.parseXML(b.rpcResult);this.pz(d)}else k.warn("jsonp unexpected status: "+c),this.Py(0,c)};f.Eg=function(b){this.Wf=!1;this.Wa(b)};f.pz=function(b){this.Eg(new xd(b.lastChild))};f.Bm=function(b,c,d){k.info("HTTP error",c,d);"timeout"==d?this.Eg(new Cd("load failed",this.QF,this.LF)):this.Eg(new Bd("load failed"))};function uq(b){this.xd=null==b?[]:b;this.xd.constructor!=Array&&k.error("call method must have an Array for its args parameter")}uq.prototype.kq=function(){return this.xd};function O(b){this.xd=null==b?[]:b;this.xd.constructor!=Array&&k.error("call method must have an Array for its args parameter")}O.prototype.kq=function(){for(var b=[],c=0;c<this.xd.length;c++)b.push(this.xd[c]);v.i&&$n()?b.unshift($n()):qe("User not logged in while in AuthorizedRequestArguments. Args="+this.xd.join(","));return b};
function vq(b,c,d,e,h,l){this.method=b;this.xd=c;this.AA=d;this.lx=e;this.context=h;this.sL=l;this.qw=0;this.vi=!1}vq.prototype.getContext=function(){return this.context};vq.prototype.cancel=function(){this.vi=!0};var v={Iu:"radio/xmlrpc/v35",Hu:"radio/jsonp/v35",VENDOR:"html5tuner",sd:"HTML5",wi:"",Gu:{misc:"message logTunerDiagnostics logRadioEventMessage sync getCookies setCookie".split(" "),listener:"isUsernameUnique getUsername getArtistBookmarks getSongBookmarks emailPassword addTrackingCode getListenerResult addTiredSong setExplicitContentFilter setExplicitPIN verifyExplicitPIN emailExplicitPINRescue getProfileInfo getExtendedProfileInfo setProfileInfoExtended getProfileInfoWithStations getCountNewFeedPosts publishSongShare publishArtistMessageShare publishStationShare getSVNAds checkSVNAdComplete exerciseTimeoutCredit clearVendorBilledTrialExpiredAlertCode clearVendorBilledSubscriberTimedOutAlertCode acknowledgeSubscriptionExpiration getShowCpa canListen setAwareOfProfile setPrivacySettings setFacebookShareUserTokens setTwitterShareUserTokens like unlike getLikeInfo getFollowInfo search banListener unbanListener deleteListener accountMessageDismissed deleteCreditCard getAvailableFeatures setP1CustomSkin proxyAdRequest getAdList registerImpression registerVideoAdImpression trackPlay getArtistRepInfo startValueExchange insertArtistMessageMetric flagArtistMessage flagArtistMessageWithReason setUserArtistMessageSettings passwordHelp".split(" "),
music:"search searchCancelled shareSong shareArtistMessage getSeedSuggestions getRelatedSongInfoForFacebookShare searchTextForArtists getSearchRecommendations".split(" "),playlist:["getFirstFragment","narrative","getFragment"],station:"createStation createStationHexedCode createPromotedStation createMixStation addSeed deleteSeed deleteSeedByMusicId addThumbUp addFeedback deleteFeedback transformShared getStations setStationName removeStation dismissPromotedStation getStation getQuickMix setQuickMix shareStation setStationNameAndDescription getCustomContentStation getPromotedStations forcePromotedStation setStationSettings verifyHybridStationChecksum trackSkip".split(" "),
friends:"getServices activity find findByAddress add invite findFans hideFeedItem hideActivityItem hideAllFeedItems reportFeedSpam follow unfollow".split(" "),facebook:["getFriends","addFacebookFriends","disconnect","setAutoSharePreferences"]},vC:{vendor:["getVendor"],listener:"createListener register activateAccount changeAccount resetPassword validateResetToken purchaseSubscription updateBillingInformation updateBusinessInformation migrateToBusiness startPaypalPayment completePaypalPayment getPaypalCheckoutDetails getReceipts authenticateListener logout getCreditCard unsubscribe setPrivacySettings startComplimentaryTrial redeemGiftCode createP1Gift loadGift emailGift startCCBackedTrial startPaypalBackedTrial completePaypalBackedTrial redeemCCBackedGift startRedeemPaypalBackedGift completeRedeemPaypalBackedGift".split(" "),
station:["setStationSettings"],facebook:["getSigPlus","getFacebookInfo","connectListener"]},init:function(){v.vp=new tq;v.f={};v.Ma=[];v.Wf=!1;v.Wz=Xd(Vn());null==jq&&(jq=Xd(Un.Gm()),delete Un.Gm);null==fq&&(fq=Fd());v.i=null;v.jG=r(v,v.Eg);v.om()?v.ap(v.Gu,v.Ix(),!0,!0):v.ap(v.Gu,v.HH(),!0,!0);v.ap(v.vC,v.Ix(),!1,!0);v.f.listener.purchaseSubscription.setTimeout(18E4);v.f.listener.updateBillingInformation.setTimeout(18E4);v.f.listener.startCCBackedTrial.setTimeout(18E4);v.f.listener.redeemCCBackedGift.setTimeout(18E4);
v.f.listener.purchaseSubscription.xi=!0;v.f.listener.updateBillingInformation.xi=!0;v.f.listener.startCCBackedTrial.xi=!0;v.f.listener.redeemCCBackedGift.xi=!0;v.f.station.getStations.setTimeout(3E5);v.f.listener.getSVNAds.setTimeout(5E3);v.f.listener.getAdList.setTimeout(8E3);v.wi=wq},om:function(){return"https:"==window.location.protocol},Ol:function(){return mn()},Hx:function(){var b=A._data.shost,c=Kd();return null==b||null==c||A._data.nossl?v.Ol():"https://"+b+":"+c+"/"},HH:function(){return v.om()?
v.Ol()+v.Hu:v.Ol()+v.Iu},Ix:function(){return v.om()?v.Hx()+v.Iu:v.Hx()+v.Hu},ap:function(b,c,d,e){for(var h in b)for(var l=b[h],p=0;p<l.length;p++){null==v.f[h]&&(v.f[h]={});var q=l[p];v.f[h][q]=new eq(c,h+"."+q,d,v.vp,v.jG);e||(v.f[h][q].Zz=!1)}},j:function(b,c,d,e,h){b=v.rs(b,c,d,e,h,!1,!1);v.hq();return b},rs:function(b,c,d,e,h,l,p){k.debug("RPC dispatching request",b.method);null==b&&k.error("dispatchRequest called with null rpc");var q=c.kq();if(null!=q)for(var t=0;t<q.length;t++)null==q[t]?
k.error("dispatchRequest called with null, method: "+b.method+" - argument at position: "+t):"object"==typeof q[t]&&q[t].constructor!=Array&&(k.error("dispatchRequest called with non Array object, method: "+b.method+" - argument at position: "+t),k.error("maybe you forgot to use '.getValue()'?"));b=new vq(b,c,d,e,h,p);l?v.Ma.unshift(b):v.Ma.push(b);return b},iF:function(){for(var b=0;b<v.Ma.length;b++)v.Ma[b].cancel()},hq:function(){if(!v.Wf&&0!=v.Ma.length){var b=v.Ma[0];b.qw++;b.vi?(v.Ma.shift(),
v.hq()):(v.Wf=!0,b.method.apply(b.xd.kq()))}},Eg:function(b){var c=!1;try{z.b(eg,"rpc response");if(b instanceof Dd)switch(b.code){case m.d.pC():v.Ma.shift();z.b(Ih);return;case m.d.yu():v.Ma.shift();z.b(Qh);return;case m.d.nC():v.Ma.shift();z.b(Sg);return;case m.d.cC():v.Ma.shift();return;case m.d.JB():v.Ma.shift();z.b(fh);return;case m.d.kC():v.Ma.shift();z.b(gh);return;case 12:window.location=v.Ol()+"restricted";return}c=!0;if(v.Ma[0].sL)if(k.debug("received a response to a re-auth"),v.Ma.shift(),
b instanceof zd){k.debug("got an error performing a re-auth");var d=v.Ma.shift();d.vi||v.Vp(d,b);c=!1}else{k.debug("re-auth response is valid, new authtoken value: "+n(b));var e=Xn(n(b));b=!1;Cm()&&(v.i=e,b=!0);v.Pa(e);b&&v.nn(null,null)}else if(b instanceof Dd&&b.code==m.d.qB()&&null!=v.i){k.debug("got an authorization error: "+b.code+", "+(v.i&&$n()?$n():""));var h=v.Ma[0];if(3>h.qw)if(k.debug("putting a re-auth event onto the queue"),Cm())v.rs(v.f.listener.getListenerResult,new uq([om(zl),v.VENDOR,
v.sd]),null,r(this,function(b){b instanceof zd&&k.error("got error from authenticateAnonymous: "+b.code)}),{},!0,!0);else{var l=om(Gl),p=om(Hl)||"";rn()&&ze("lsc");var q=new uq([v.wi,l,p,v.VENDOR,"","",v.sd,!1,Am()]);v.rs(v.f.listener.authenticateListener,q,null,null,{Ka:l,P3:p},!0,!0)}else k.debug("failed to run the request after 3 attempts"),v.Ma.shift(),h.vi||v.Vp(h,b)}else h=v.Ma.shift(),b instanceof Dd&&m.d.uu(),h.vi||v.Vp(h,b)}finally{v.Wf=!1,c&&v.hq()}},Vp:function(b,c){c instanceof Ad?null!=
b.lx&&b.lx.call(v,c,b.getContext()):null!=b.AA&&b.AA.call(v,c,b.getContext())},uc:function(){return null!=v.i},FK:function(){return null!=om(zl)},lm:function(){Bm(null)},fr:function(){um(Gl,null);vm(Hl)},nn:function(b,c){b=null!=b?b.toLowerCase():null;null!=b&&v.i.Ka!=b?k.error("Returned username does not match sent username: "+v.i.Ka+" != "+b):v.i.p()?Bm($n()):(um(Gl,b),null!=c&&um(Il,c),vm(Hl),!0!==om(Dl)&&um(Dl,!0),v.lm(),$.cookie("v2lo",null),$.cookie("lua",b))},Pa:function(b){var c=v.i;v.i=b;
iq=null!=b?b.s:null;bn(null!=b?b.s:null);v.PO(b);null!=c&&null!=b&&c.s==b.s?(Zn(b,c),z.b(Ie,b)):(z.b(He,b),null!=b&&(xo(b),v.cH(function(b){z.b(Vg,b)})))},PO:function(b){k.info("Saving at cookie",b);oe("at",null==b?"":escape(b.jg),30)},fh:function(){return!0===om(Dl)&&(!v.i||v.i.p())}};v.xQ=function(b,c){v.j(v.f.misc.sync,new uq([v.wi]),function(d){var e=v.JQ(n(d));null==e?c(new zd("Invalid sync value from server: "+n(d))):b(e)},c,{})};v.JQ=function(b){b=$d(v.Wz,b);for(var c=0;4>c;c++)b.shift();b=be(ae(b));b=Number(b);return isNaN(b)?null:b};v.OE=function(b,c){v.j(v.f.listener.getListenerResult,new uq([b,v.VENDOR,v.sd]),v.kz,c,{})};v.Jw=function(b){var c=A._data.af,c=new uq([v.wi,v.VENDOR,"","",v.sd,!0,null!=c?c:""]);v.j(v.f.listener.createListener,c,v.kz,b,{newUser:!0})};
v.kz=function(b,c){z.b(Tg);var d=Xn(n(b));d.Jr=c.newUser;v.Pa(d);v.nn(null,null)};v.gF=function(b,c,d){v.j(v.f.listener.canListen,new uq([b,""]),function(b){c(n(b))},d,{})};v.yd=function(b,c,d,e){null!=b&&null!=c||k.error("null arguments");rn()&&ze("lsc");var h=new uq([v.wi,b,c,v.VENDOR,"","",v.sd,!0,d]);return v.j(v.f.listener.authenticateListener,h,function(b,c){v.lw(b,c);z.b(pg)},e,{username:b,password:c,keepLoggedIn:d})};
v.oO=function(b,c,d,e,h,l,p,q,t,y,E){v.j(v.f.listener.register,new O(p&&l?[b,c,d,e,h,l,p,q,v.VENDOR,"",v.sd,t]:[b,c,d,e,h,q,v.VENDOR,"",v.sd,t]),function(b,c){v.lw(b,c);y&&0<y.length?window.location=y:z.b(mg,n(b))},E,{username:b,password:c,keepLoggedIn:t})};v.lw=function(b,c){z.b(Tg);var d=Xn(n(b));v.Pa(d);var e=v.om(),h=(new Date).format("yyyy-mm-dd HH:MM:ss",!0);s("https_migration",{is_scheme_https:e,vendor_id:u,device_id:we,device_code:we,client_timestamp:h},d);v.nn(c.username,c.keepLoggedIn)};
v.logout=function(b){return v.j(v.f.listener.logout,new O([]),b,b,{})};v.SN=function(b,c,d,e,h,l){e=new uq([b,c,d,e]);v.j(v.f.listener.passwordHelp,e,h,l,{email:b,birthYear:c,zipCode:d})};v.KH=function(b,c){v.j(v.f.station.getStations,new O([]),function(c){var e=[],h=(new Date).getTime(),l=0;$.each(n(c),function(){v.Xe(this,h-l++);var b=xq(this);e.push(b)});b(e)},c,{})};v.AH=function(b){var c=yq,d=zq;v.j(v.f.station.getPromotedStations,new O([b]),function(b){b=v.Fv(n(b));c(b)},d,{})};
v.XG=function(){var b=yq,c=zq;v.j(v.f.station.forcePromotedStation,new O([Aq]),function(c){c=v.Fv(n(c));b(c)},c,{})};v.Fv=function(b){var c=[],d=(new Date).getTime(),e=0;$.each(b,function(){v.Xe(this,d-e++);var b=xq(this);c.push(b)});return c};
v.Xe=function(b,c){c||(c=(new Date).getTime());b.chronologicalSequence=c;var d=b.initialSeed;null!=d&&(null!=d.song?b.originalSeed={type:"song",key:d.song.musicId,songName:d.song.songTitle,artistName:d.song.artistSummary,songDetailUrl:d.song.songDetailUrl,isComedy:d.song.isComedy}:null!=d.nonGenomeStation?b.originalSeed={type:"nonGenomeStation",stationId:d.nonGenomeStation.stationId,stationName:d.nonGenomeStation.stationName,seedNames:d.nonGenomeStation.seeds,key:d.nonGenomeStation.musicId,isComedy:d.nonGenomeStation.isComedy,
redirect:d.nonGenomeStation.isRedirect}:null!=d.artist&&(b.originalSeed={type:"artist",key:d.artist.musicId,artistName:d.artist.artistName,likelyMatch:d.artist.likelyMatch,isComposer:d.artist.isComposer,artistDetailUrl:d.artist.artistDetailUrl,isComedy:d.artist.isComedy}));1==b.isQuickMix&&(0==b.isCreator&&(b.transformType=m.Gc.Ve()),b.stationName&&b.stationName.replace&&(b.stationName=b.stationName.replace("QuickMix","Shuffle")))};
v.iP=function(b,c,d,e,h){v.j(v.f.station.setStationNameAndDescription,new O([b,c,d]),function(b){e(n(b))},h,{})};v.Ym=function(b,c,d,e){return v.j(v.f.station.setStationName,new O([b,c]),function(){d(b)},e,{})};v.gP=function(b,c,d,e,h,l,p){for(var q=[],t=0;t<c.length;t++)q.push(""+c[t]);v.j(v.f.station.setQuickMix,new O([b,q,"",d,e,h]),function(b){b=n(b);v.Xe(b);l(b)},p,{})};v.BH=function(b,c){v.j(v.f.station.getQuickMix,new O([]),function(c){c=n(c);v.Xe(c);b(c)},c,{})};
v.dz=function(b,c,d){v.j(v.f.music.search,new O([b]),function(b){c(n(b))},d,{})};v.fO=function(b,c,d){var e=b.indexOf("@");-1<e&&(b=b.substring(0,e));v.j(v.f.listener.search,new O([b]),function(b){c(n(b))},d,{})};v.nH=function(b,c,d,e,h,l,p,q){Em(b.e());var t=String(Fm()),y=String(Gm()),E=to(v.i);c=[b.e(),To(),E,t,y,e||"",h||"",A._data.testArtistMessage||"",c,d,l];d=v.f.playlist.getFragment;b.bj()&&(c.push(b.oq()),c.push(b.pq()));return v.j(d,new O(c),function(b){p(n(b))},q,{})};
v.gH=function(b,c,d){Em(b.e());v.j(v.f.station.getCustomContentStation,new O([b.e()]),function(b){c(n(b))},d,{})};v.yi=function(b,c,d,e,h){var l=Bq;d||(d="");c||(c="");b=c&&0<c.length||e&&0<e.length?new O([b,c,d,e]):new O([b,d]);v.j(v.f.station.createStation,b,function(b){b=n(b);v.Xe(b);h(b)},l,{})};v.Kw=function(b,c,d){var e=null,h=Cq,l=Bq;e||(e="");b=new O([b,e]);v.j(v.f.station.createStationHexedCode,b,function(b){b=n(b);v.Xe(b);b.artistMessageArtistUid=c;b.artistMessageId=d;h(b)},l,{})};
v.HF=function(b,c,d,e,h){b=new O([b,c,d]);v.j(v.f.station.createPromotedStation,b,function(b){b=n(b);v.Xe(b);e(b)},h,{})};v.vE=function(b,c,d,e,h){v.j(v.f.station.addFeedback,new O([b,c,d,"",!0,!1,13]),e,h,{})};v.gi=function(b,c,d,e,h){return v.j(v.f.station.addFeedback,new O([b.If(c),c.Za(),d]),function(){b.qm(c)&&(c.k.Lc=d?1:-1);e(c)},h,{})};v.wl=function(b,c,d,e,h){return v.j(v.f.station.deleteFeedback,new O([b.If(c),c.Za(),d]),function(){b.qm(c)&&(c.k.Lc=0);e(c)},h,{})};
v.Yv=function(b,c,d,e){v.j(v.f.station.addSeed,new O([b,c]),d,e,{})};v.wE=function(b,c,d){v.j(v.f.listener.addTiredSong,new O([b]),c,d,{})};v.xl=function(b,c,d){return v.j(v.f.station.removeStation,new O([b]),c,d,{})};v.iG=function(b,c,d,e,h){v.j(v.f.station.dismissPromotedStation,new O([b,c,d]),e,h,{})};v.pG=function(b,c,d){b=b.redirect?new uq([b.username,b.redirect]):new uq([b.username]);v.j(v.f.listener.emailPassword,b,c,d,{})};
v.J3=function(b,c){return v.j(v.f.listener.getSongBookmarks,new O([]),b,c,{})};v.E3=function(b,c){return v.j(v.f.listener.getArtistBookmarks,new O([]),b,c,{})};v.FH=function(b,c){v.j(v.f.music.getSearchRecommendations,new O([]),function(c){b(n(c))},c,{})};v.UQ=function(b,c,d){v.j(v.f.listener.changeAccount,new O([b.oldusername,b.oldpassword,b.newusername,b.newpassword,b.emailOptIn,b.gender,b.birthYear,b.zipCode]),function(d){c({ldata:n(d),newpass:b.newpassword})},d,{})};
v.$Q=function(b,c,d){var e=[b.isProfilePrivate,b.disallowComments,b.optOut,b.noNotifyOnNote,!1,b.noNotifyOnFollow];null!=b.artistPromoEmailsEnabled&&e.push(b.artistPromoEmailsEnabled);v.j(v.f.listener.setPrivacySettings,new O(e),function(b){c(n(b))},d,{})};v.gG=function(b,c){v.j(v.f.facebook.disconnect,new O([]),function(c){b(n(c))},c,{})};v.bP=function(b,c,d,e,h,l,p){v.j(v.f.facebook.setAutoSharePreferences,new O([b,c,d,e,h]),function(b){l(n(b))},p,{})};
v.WQ=function(b,c,d,e){v.j(v.f.listener.setExplicitContentFilter,new O([b]),function(){d(c)},e,{})};v.aP=function(b,c,d){v.j(v.f.listener.setExplicitPIN,new O([b.pin,b.rescueEmail]),c,d,{})};v.kR=function(b,c,d){v.j(v.f.listener.verifyExplicitPIN,new O([b.pin]),function(b){c(n(b))},d,{})};v.Qp=function(b,c){return v.j(v.f.listener.emailExplicitPINRescue,new O(null),function(c){b(c)},c,{})};v.JH=function(b,c,d,e){v.j(v.f.playlist.narrative,new O([b,c]),function(b){d(n(b))},e,{})};
v.GH=function(b,c,d,e){v.j(v.f.music.getSeedSuggestions,new O([b,c,10]),function(b){d(n(b))},e,{})};v.jO=function(b,c,d,e){v.j(v.f.listener.publishSongShare,new O([b,c]),function(b){d(n(b))},e,{})};v.iO=function(b,c,d,e,h){v.j(v.f.listener.publishArtistMessageShare,new O([b,c,d]),function(b){e(n(b))},h,{})};v.kO=function(b,c,d,e,h,l){null==d&&(d="");v.j(v.f.listener.publishStationShare,new O([""+b,c,d,e]),function(b){h(n(b))},l,{})};
v.yH=function(b,c,d,e){v.j(v.f.listener.getExtendedProfileInfo,new O([b,c]),function(b){d(n(b))},e,{})};v.fP=function(b,c,d,e,h,l,p,q,t){v.j(v.f.listener.setProfileInfoExtended,new O([b,c,d,e,h,l,p]),function(b){q(n(b))},t,{})};v.eP=function(b,c,d){v.j(v.f.listener.setP1CustomSkin,new O([b]),function(b){c(n(b))},d,{})};v.dH=function(b,c,d,e){v.j(v.f.listener.getCountNewFeedPosts,new O([b,c]),function(b){d(n(b))},e,{})};
v.zH=function(b,c,d){v.j(v.f.listener.getProfileInfoWithStations,new O([b]),function(b){c(n(b))},d,{})};v.DH=function(b,c,d){v.j(v.f.music.getRelatedSongInfoForFacebookShare,new O([b,3]),function(b){c(n(b))},d,{})};v.lP=function(b,c,d,e){v.j(v.f.listener.setTwitterShareUserTokens,new O([b,c]),function(b){d(n(b))},e,{})};v.GL=function(b,c,d,e,h,l,p){v.j(v.f.listener.like,new O([b,c,d,e,h]),function(b){l(n(b))},p,{})};
v.SQ=function(b,c,d,e){v.j(v.f.listener.unlike,new O([b,c]),function(b){d(n(b))},e,{})};v.RQ=function(b,c,d){v.j(v.f.listener.unlike,new O([b]),function(b){c(n(b))},d,{})};v.mH=function(b,c,d){v.j(v.f.listener.getFollowInfo,new O([b]),function(b){c(n(b))},d,{})};v.nq=function(b,c,d,e){if(v.uc())return v.j(v.f.listener.getLikeInfo,new O([b,c]),function(b){d(n(b))},e,{})};
v.Us=function(b,c,d,e,h,l,p){b=[b,c,d,e];_.isString(h)&&!_.isEmpty(h)&&b.push(h);return v.j(v.f.station.shareStation,new O(b),l,p,{})};v.Ts=function(b,c,d,e,h){return v.j(v.f.music.shareSong,new O([b,d,c]),e,h,{})};v.tP=function(b,c,d,e,h,l){v.j(v.f.music.shareArtistMessage,new O([b,c,e,d]),h,l,{})};v.xE=function(b,c){v.j(v.f.listener.addTrackingCode,new O([b]),c,c,{})};v.eL=function(b,c,d,e,h){v.j(v.f.listener.insertArtistMessageMetric,new O([b,c,d,e,document.referrer,h]),null,null,{})};
v.OG=function(b,c,d,e){v.j(v.f.listener.flagArtistMessage,new O([c,b,d]),e,e,{})};v.PG=function(b,c,d,e){v.j(v.f.listener.flagArtistMessageWithReason,new O([b,c,d]),e,e,{})};v.eH=function(b,c){v.j(v.f.listener.getCreditCard,new O(null),function(c){b(n(c))},c,{})};v.Lj=function(b,c,d,e,h,l,p,q,t,y,E,I,N,U){return v.j(v.f.listener.purchaseSubscription,new O([b,c,d,e,h,l,p,q,t,y,E,I]),function(b){N(n(b))},U,{})};
v.jk=function(b,c,d,e,h,l,p,q,t,y,E,I,N,U){return v.j(v.f.listener.updateBillingInformation,new O(b?[c,d,e,h,l,p,q,t,y,E,I]:[c,y,I]),function(b){N(n(b))},U,{})};v.VQ=function(b,c,d,e,h,l,p,q){v.j(v.f.listener.updateBusinessInformation,new O(d?[b,c,e,h,l]:[b,c]),function(b){p(n(b))},q,{})};v.QL=function(b,c,d,e){v.j(v.f.listener.migrateToBusiness,new O([b,c]),function(b){d(n(b))},e,{})};
v.dQ=function(b,c,d,e,h,l,p,q,t,y,E){v.j(v.f.listener.startCCBackedTrial,new O([b,c,d,e,h,l,p,q,t]),function(b){y(n(b))},E,{})};v.gQ=function(b,c,d,e,h){v.j(v.f.listener.startPaypalPayment,new O([b,c,d]),function(b){e(n(b))},h,{})};v.fQ=function(b,c,d,e){v.j(v.f.listener.startPaypalBackedTrial,new O([b,c]),function(b){d(n(b))},e,{})};v.yF=function(b,c,d){v.j(v.f.listener.completePaypalBackedTrial,new O([b]),function(b){c(n(b))},d,{})};
v.zF=function(b,c,d,e,h,l){v.j(v.f.listener.completePaypalPayment,new O([b,c,d,e]),function(b){h(n(b))},l,{})};v.xH=function(b,c,d){v.j(v.f.listener.getPaypalCheckoutDetails,new O([b]),function(b){c(n(b))},d,{})};v.CH=function(b,c){v.j(v.f.listener.getReceipts,new O([]),function(c){b(n(c))},c,{})};v.GF=function(b,c,d,e,h,l,p,q,t,y,E,I,N,U,pa,Ia,fb){v.j(v.f.listener.createP1Gift,new O([b,c,d,e,h,l,p,q,t,y,E,I,N,U,pa]),function(b){Ia(n(b))},fb,{})};
v.IL=function(b,c,d,e){v.j(v.f.listener.loadGift,new O([b,c]),function(b){d(n(b))},e,{})};v.oG=function(b,c,d,e){v.j(v.f.listener.emailGift,new O([b,c]),function(b){d(n(b))},e,{})};v.TQ=function(b,c){v.j(v.f.listener.unsubscribe,new O([]),function(c){b(n(c))},c,{})};v.IK=function(b,c,d,e){v.j(v.f.friends.hideFeedItem,new O([b,c]),function(b){d(n(b))},e,{})};v.GK=function(b,c,d){v.j(v.f.friends.hideActivityItem,new O([b]),function(b){c(n(b))},d,{})};
v.HK=function(b,c,d){v.j(v.f.friends.hideAllFeedItems,new O([b]),function(b){c(n(b))},d,{})};v.BO=function(b,c,d){v.j(v.f.friends.reportFeedSpam,new O([b]),function(b){c(n(b))},d,{})};v.TG=function(b,c,d){v.j(v.f.friends.follow,new O([b]),function(b){c(n(b))},d,{})};v.Mt=function(b,c,d){return v.j(v.f.friends.unfollow,new O([b]),function(b){c(n(b))},d,{})};v.WE=function(b,c,d){v.j(v.f.listener.banListener,new O([""+b]),c,d,{})};
v.MQ=function(b,c,d){v.j(v.f.listener.unbanListener,new O([""+b]),c,d,{})};v.UF=function(b,c,d,e,h){v.j(v.f.listener.deleteListener,new O([b,c,d]),e,h,{})};v.ZF=function(b,c,d){v.j(v.f.station.deleteSeed,new O([""+b]),c,d,{})};v.$F=function(b,c,d,e){v.j(v.f.station.deleteSeedByMusicId,new O([""+b,c]),d,e,{})};v.pF=function(b,c,d,e,h,l){v.j(v.f.listener.checkSVNAdComplete,new O([b,c,d,e]),h,l,{})};v.IG=function(b,c){v.j(v.f.listener.getSVNAds,new O([]),b,c,{})};
v.tG=function(b,c){v.j(v.f.listener.exerciseTimeoutCredit,new O([]),b,c,{})};v.jQ=function(b,c,d,e,h,l,p,q,t,y,E,I,N){v.j(v.f.listener.startValueExchange,new O([b,c,d,e,h,l,p,q,t,y,E]),I,N,{})};v.nO=function(b,c,d){v.j(v.f.listener.redeemGiftCode,new O([b]),function(b){c(n(b))},d,{})};v.eQ=function(b,c,d,e){v.j(v.f.listener.startComplimentaryTrial,new O([b,c,v.VENDOR,v.sd]),function(b){v.Pa(Xn(n(b)));d()},e,{})};v.mE=function(b){v.j(v.f.listener.accountMessageDismissed,new O([b]),null,null,{})};
v.EF=function(b,c,d,e,h,l){v.j(v.f.facebook.connectListener,new O([b,c,d,e]),h,l,{})};v.kH=function(b,c){v.j(v.f.facebook.getFacebookInfo,new O(null),function(c){b(n(c))},c,{})};v.uK=function(b,c,d){v.j(v.f.listener.trackPlay,new O([b,c]),function(b){d(n(b))},null,{})};v.WF=function(b){v.j(v.f.listener.deleteCreditCard,new O(null),b(),null,{})};v.vn=function(b,c,d){return v.j(v.f.station.transformShared,new O([""+b]),function(b){c(n(b))},d,{})};
v.GO=function(b,c,d){v.j(v.f.listener.resetPassword,new O([A._data.pt,b,v.VENDOR,v.sd]),function(b){b=Xn(n(b));v.nn(b.Ka,null);v.Pa(b);c()},d,{password:b})};v.jR=function(b,c,d){v.j(v.f.listener.validateResetToken,new uq([b]),function(b){c(n(b))},d,{})};v.cH=function(b){v.j(v.f.listener.getAvailableFeatures,new O([]),function(c){b(n(c))},null,{})};v.oE=function(b){v.j(v.f.listener.acknowledgeSubscriptionExpiration,new O([]),null,b,{})};
v.s3=function(b){return v.j(v.f.listener.clearVendorBilledTrialExpiredAlertCode,new O([]),null,b,{})};v.rF=function(b){v.j(v.f.listener.clearVendorBilledSubscriberTimedOutAlertCode,new O([]),null,b,{})};v.hO=function(b,c,d,e,h){b=Md(b);v.j(v.f.listener.proxyAdRequest,new O([b,!0,c,d]),function(b){e(n(b))},h,{})};
v.ZG=function(b,c,d,e,h,l,p,q,t,y,E,I){b=Md(b);k.debug("targetUrl - "+b);k.debug("nextStationId - "+c);k.debug("secondsUntil - "+d);k.debug("trackType - "+l);k.debug("currentTrackStationId - "+e);v.j(v.f.listener.getAdList,new O([b,c,d,e,h,l+"",p,q,t,!0,y]),function(b){E(n(b))},I,{})};
v.Rm=function(b,c,d,e,h,l){b=b||"";c=c||0;d=d||0;e=!!e;k.debug("Chronos - dispatching video register event");k.debug("creativeId - "+b);k.debug("secondsPlayed - "+c);k.debug("adLength - "+d);k.debug("isHouseAd - "+e);return v.j(v.f.listener.registerVideoAdImpression,new O([b,c,d,e]),function(b){h(n(b))},l,{})};v.wb=function(b,c,d,e,h,l,p){b=Md(b);return v.j(v.f.listener.registerImpression,new O([b,c,d,e,h]),function(b){l(n(b))},p,{})};
v.jP=function(b,c,d,e){v.j(v.f.station.setStationSettings,new O([b,c]),function(b){d(n(b))},e,{})};v.mP=function(b,c,d,e){v.j(v.f.listener.setUserArtistMessageSettings,new O([b,c]),function(b){d(n(b))},e,{})};v.mO=function(b,c,d,e,h,l,p,q,t,y,E,I){v.j(v.f.listener.redeemCCBackedGift,new O([b,c,d,e,h,l,p,q,t,y]),function(b){E(n(b))},I,{})};v.hQ=function(b,c,d,e,h){v.j(v.f.listener.startRedeemPaypalBackedGift,new O([b,c,d]),function(b){e(n(b))},h,{})};
v.AF=function(b,c,d,e){v.j(v.f.listener.completeRedeemPaypalBackedGift,new O([b,c]),function(b){d(n(b))},e,{})};v.lR=function(b,c,d,e){v.j(v.f.station.verifyHybridStationChecksum,new O([b,c]),function(b){d(n(b))},e,{})};for(L=qq[22];-1!=L;)switch(L){case 39:G[99]=-1282901791;L=qq[0];break;case 16:G[13]=714982793;L=qq[40];break;case 11:L=qq[48];break;case 1:G[152]=791667E3;L=qq[11];break;case 57:G[505]=-444537175;L=qq[1];break;case 33:G[698]=3897845298;L=qq[36];break;case 35:G[192]=1267985868;L=qq[10];break;case 22:G[380]=-1894642054;L=qq[42];break;case 13:G[528]=563589190;L=qq[13];break;case 14:L=qq[23];break;case 48:L=qq[5];break;case 46:G[777]=-2005848005;L=qq[43];break;case 40:G[693]=1689332099;L=qq[47];break;
case 28:L=qq[7];break;case 18:G[24]=-1059857244;L=qq[18];break;case 19:L=qq[19];break;case 32:G[98]=-2125661920;L=qq[44];break;case 47:G[1015]=-539412187;L=qq[21];break;case 0:L=qq[54];break;case 25:L=qq[33];break;case 29:G[825]=1211874530;L=qq[57];break;case 44:G[697]=-2050076713;L=qq[30];break;case 3:G[475]=1435906359;L=qq[50];break;case 31:G[584]=-1651054317;L=qq[37];break;case 37:L=qq[38];break;case 41:G[643]=-222883560;L=qq[20];break;case 8:G[738]=-1388127382;L=qq[9];break;case 21:G[821]=3640054195;
L=qq[16];break;case 10:G[266]=-1760014917;L=qq[14];break;case 49:G[611]=1746934941;L=qq[53];break;case 17:G[217]=-721530141;L=qq[29];break;case 54:G[160]=1910390267;L=qq[60];break;case 12:L=qq[52];break;case 50:G[263]=-966535934;L=qq[8];break;case 23:L=qq[51];break;case 42:G[733]=-1009081047;L=qq[6];break;case 43:G[401]=1478358082;L=qq[26];break;case 27:G[306]=2086596478;L=qq[35];break;case 55:G[81]=1774074969;L=qq[34];break;case 15:G[391]=-1015258452;L=qq[55];break;case 52:G[937]=-1839895297;L=qq[3];
break;case 24:G[972]=-461819453;L=qq[2];break;case 34:G[416]=1078657027;L=qq[45];break;case 20:L=qq[31];break;case 56:G[860]=2023719060;L=qq[32];break;case 45:G[73]=1831180899;L=qq[12];break;case 5:G[786]=2111075113;L=qq[56];break;case 38:G[974]=895355799;L=qq[15];break;case 26:L=qq[28];break;case 30:L=qq[59];break;case 36:G[178]=-1489317857;L=qq[17];break;case 9:L=qq[58];break;case 58:G[106]=1775366455;L=qq[24];break;case 2:L=qq[27];break;case 59:G[137]=2120164615;L=qq[39];break;case 6:G[183]=-349538053;
L=qq[49];break;case 53:L=qq[4];break;case 51:G[415]=1569800660;L=qq[46];break;case 7:G[607]=-1284163114;L=qq[25];break;case 4:G[698]=563511300,L=qq[41]};function Dq(b){me(b.username)?(bn(null),z.b(eh)):(rn()&&ze("lsc"),v.yd(b.username,b.password,b.keepLoggedIn,function(c){c instanceof zd&&(c.code==m.d.Se()?z.b(eh):x(c,si,b))}))}function Eq(){console.log("in handle Log out Resuest");v.iF();A._data.pt=null;um(Gl,null);vm(Hl);bn(null);$.cookie("v2i",null);$.cookie("v2u",null);$.cookie("v2p",null);$.cookie("v2s",null);ze("lsc");Qn()}
function Fq(b){v.logout(function(){var c="/";b&&b.landing&&(c=b.landing);$.address.value(c);setTimeout(function(){window.location.reload(!0)},1)})}function Gq(b){v.oO(b.username,b.password,b.emailOptIn,b.gender,b.birthYear,b.birthMonth,b.birthDay,b.zipCode,b.keepLoggedIn,b.returnTarget,function(c){x(c,ui,b,jh,c)})}function Hq(b){var c=b.errorCallback;v.jR(b.resetToken,b.successCallback,function(b){c(b)})}
function Iq(b){v.GO(b,function(){z.b(Oe)},function(b){b.code==m.d.Zn()?z.b(mh,Ca()):b.code==m.d.$n()?z.b(mh,Da()):b.code==m.d.su()?z.b(mh):z.b(ti)})}function Jq(){v.Jw(function(b){k.error("Could not create new user:",b.message)})}function Kq(b){v.yH(b.query,b.queryType,function(b){z.b(Je,b)},function(c){x(c,Fi,b)})}function Lq(b){v.fP(b.webName,b.fullName,b.isProfilePrivate,b.homeTown,b.school,b.employer,b.bio,function(b){z.b(Ke,b)},function(c){x(c,Hj,b)})}
function Mq(b){v.dH(b.webname,b.lastFeedId,function(b){b&&b.count&&(b=parseInt(b.count,10),0<b&&z.b(Me,b))},function(){k.info("error while fetching new feedpost count for webname="+b.webname+", lastfeedid="+b.webname)})}function Nq(b){v.zH(b,function(b){b&&b.webName&&z.b(Le,b)},function(c){x(c,Gi,b)})}function Oq(b){var c=b.username;v.pG(b,function(){z.b(Ne,c)},function(b){z.b(lh,b)})}
function Pq(b){if(v.fh())z.b(vh);else{var c=b.stationCode,d=b.source,e=b.stationName||null,h=b.artistMessageArtistUid;b=b.artistMessageId;var l;if(2<c.length)a:{for(var p=0;p<Qq.length;p++)if(l=Qq[p],l.e()==c.substring(2))break a;l=null}else l=null;null!=l?Rq({stationCode:"fs"+l.e(),adId:wn(l.n),correlationId:xn(l.n),trackingUrls:l.n._promotedTrackingUrls}):null!=h&&null!=b?v.Kw(c,h,b):v.yi(c,e,null,d,Cq)}}
function Rq(b){v.fh()?z.b(vh):v.HF(b.stationCode,b.adId,b.correlationId,function(c,d){b.trackingUrls&&$.each(b.trackingUrls,function(){var b=this;""!=b&&Jp(b,function(){},function(){k.debug("Promoted station tracking url failure: "+b)})});Sq(c,d)},function(b){setTimeout(function(){z.b(Lg)},100);Bq(b)})}function Sq(b,c){setTimeout(function(){z.b(Qg,{stationId:b.originalStationId})},250);Cq(b,c)}function Tq(b){v.fh()?z.b(vh):v.yi(b,null,null,null,Uq)}
function Uq(b,c){setTimeout(function(){z.b(Rg)},250);Cq(b,c)}function Vq(b){var c=b.stationCode,d=b.trackToken,e=b.source;v.fh()?(b.retry_method=Vq,z.b(vh,b)):v.yi(c,null,null,e,function(b){Cq(b,d)})}function Wq(b){v.fh()?(b.retry_method=Wq,z.b(vh,b)):v.yi(b.stationCode,b.stationName,b.searchText,null,Cq)}
function Xq(b){if(v.fh())b.retry_method=Xq,z.b(vh,b);else{var c=b.stationCode,d=b.stationName,e=b.source,h=b.artistMessageArtistUid;b=b.artistMessageId;null!=h&&null!=b?v.Kw(c,h,b):v.yi(c,d,null,e,Cq)}}
function Cq(b,c){k.info("Successfully created station with station and trackToken:",b,c);var d=A._data.fb_ref,e=v.i;if(b.isNew){if(d&&0<d.length){var h={listener_id:e.s,station_id:b.stationId,social_network_id:"facebook",device_os:"web"},l=d.split("_");3<=l.length&&(h.shared_listener_token=l[2]);0==d.indexOf("trackplay__")&&4==l.length&&(h.shared_station_id=l[3]);s("social_autoshare_station_created",h,e)}(d=b.artistMessageId)&&0<d.length&&z.b(uk,{artistMessageId:d,artistUid:b.artistMessageArtistUid,
metric:m.zb.xC(),isOnDemand:!0,shareUrlType:qp("sut")})}D.uE(b);c?z.b(oi,{stationId:b.stationId,trackToken:c}):z.b(ni,{stationId:b.stationId})}function Bq(b){z.b(vh,b)}function Yq(b){var c=b.searchText,d=b.searchFilter;v.dz(c,function(b){b.searchText=c;b.searchFilter=d;z.b(ff,b)},function(c){x(c,Ni,b)})}function Zq(b){var c=b.searchText,d=b.searchFilter;v.fO(c,function(b){b.searchText=c;b.searchFilter=d;z.b(gf,b)},function(c){x(c,Ni,b)})}
function $q(b){v.dz(b,function(c){c.searchText=b;z.b(vf,c)},function(c){x(c,cj,b)})}function ar(b){v.xl(b,function(){D.pO(b)},function(c){x(c,Li,b)})}function br(b){v.iG(b.stationId,b.adId,b.correlationId,function(){setTimeout(function(){z.b(Qg,b)},250)},function(c){x(c,Pg,b)})}
function cr(b){v.FH(function(c){k.info("*** Got search suggestions: "+c);b||!v.i||v.i.p()||!(2<=c.length)||c[0]&&0!=c[0].length||c[1]&&0!=c[1].length?z.b(jf,c):(k.info("Trying one more time to get search suggestions."),setTimeout(function(){cr(!0)},1500))},function(b){"QUICKMIX_NOT_PLAYABLE"!=b.code&&k.warn("Could not get search suggestions.",b);z.b(jf,[])})}function dr(b){v.iP(b[0],b[1],b[2],function(b){z.b(Ue,b)},function(c){x(c,Ti,b)})}
function er(b){v.Ym(b[0],b[1],function(c){z.b(Ue,{stationId:c,stationName:b[1]})},function(c){k.error("Could not update station: ",c);x(c,ej,b)})}function fr(b){v.WQ(b.contentFilterEnabled,b,function(b){v.UQ(b,function(b){z.b(kf,b);v.Pa(Xn(b.ldata))},function(d){x(d,yi,b,Lh,d)})},function(c){k.error("Failed to update explicit content filter.",c);x(c,yi,b)})}function gr(b){v.$Q(b,function(b){z.b(lf,b);v.Pa(Xn(b))},function(c){k.error("Failed to update privacy settings.",c);x(c,zi,b)})}
function hr(){v.gG(function(){z.b(Bg)},function(b){k.error("Failed to disconnect from Facebook.",b);x(b,qj,!1)})}function ir(b){v.bP(b.autoShareEnabled,b.autoShareTrackPlay,b.autoShareLikes,b.autoShareFollows,b.userInitiated,function(b){z.b(Ag,b)},function(b){k.error("Failed to update Facebook auto-share settings.",b);x(b,Ai,!1)})}function jr(b){v.aP(b,function(b){z.b(of,b)},function(c){k.error("Failed to update explicit PIN.",c);x(c,Wi,b)})}
function kr(b){v.kR(b,function(b){z.b(pf,b)},function(c){k.error("Failed to verfiy explicit PIN.",c.message);x(c,Xi,b)})}function lr(){v.Qp(function(){z.b(qf)},function(b){k.error("Failed to email explicit PIN.",b);x(b,Yi,null)})}function mr(b){var c=b[0],d=b[1];v.vE(c,d,b[2],function(){z.b(mf,[c,d])},function(c){k.error("Failed to add thumb up track.",c);x(c,Ui,b)})}function nr(b){var c=b[0],d=b[1];v.Yv(c,d,function(){z.b(nf,[c,d])},function(c){k.error("Failed to add seed.",c);x(c,Vi,b)})}
function or(b){v.wE(b.Za(),function(){z.b(rf,b)},function(c){k.error("Failed to add tired track.",c);z.b(rf,b)})}function pr(b){v.JH(b.track.e(),b.track.o(),function(c){z.b(sf,{narrative:c,track:b.track,allowActions:b.allowActions})},function(c){k.error("Failed to add tired track.",c);x(c,$i,b.track)})}function qr(b){v.GH(b.stationId,b.musicId,function(b){z.b(uf,b)},function(b){k.error("Failed to get seed suggestions.",b)})}
function rr(b){v.Yv(b.r().e(),b.o(),function(){z.b(wf,b)},function(c){x(c,dj,b)})}function sr(b){v.DH(b,function(c){c.stationId=b;z.b(Bf,c)},function(c){k.warn("Error loading related track info for facebook share: "+c.message);z.b(Bf,{stationId:b})})}function tr(b){var c=b&&b.twitterShareUserKey?b.twitterShareUserKey:"",d=b&&b.twitterShareUserSecret?b.twitterShareUserSecret:"";v.lP(c,d,function(){v.i.$d=c;v.i.Rh=d;z.b(Fg,b)},function(b){v.i.$d=null;v.i.Rh=null;z.b(sh,b.message)})}
function ur(b){var c=b.shareName||null;b.doEmail&&v.Us(b.stationToken,b.emails.split(" ").join(""),0==b.userMessage.length?b.defaultMessage:b.userMessage,To(),c,function(){z.b(Hg,{email:!0})},function(c){x(c,nj,b,rh)});b.doProfile&&v.kO(b.stationId,b.stationName,b.stationInitialSeed,0==b.userMessage.length?b.defaultMessage:b.userMessage,function(){z.b(Hg,{profile:!0})},function(c){x(c,nj,b,rh)})}
function vr(b){if(b.doEmail){var c=b.musicId,d=b.emails,e=0==b.userMessage.length?b.defaultMessage:b.userMessage,h=b.artistMessageArtistUid;h?v.tP(c,h,d.split(" ").join(""),e,function(){z.b(Hg,{email:!0})},function(c){x(c,oj,b,rh)}):v.Ts(c,d.split(" ").join(""),e,function(){z.b(Hg,{email:!0})},function(c){x(c,oj,b,rh)})}b.doProfile&&(c=b.musicId,d=0==b.userMessage.length?b.defaultMessage:b.userMessage,(h=b.artistMessageArtistUid)?v.iO(c,h,d,function(){z.b(Hg,{profile:!0})},function(c){x(c,oj,b,rh)}):
v.jO(c,d,function(){z.b(Hg,{profile:!0})},function(c){x(c,oj,b,rh)}))}function wr(b){v.GL(b.type,b.objectId,b.context,b.contextId,String(b.contextName),function(b){b.objectId&&z.b(Df,b)},function(c){x(c,uj,b)})}function xr(b){v.SQ(b.Hf(),b.Kc,function(b){z.b(Ff,b)},function(c){x(c,yj,b)})}function yr(b){v.RQ(b,function(b){z.b(Ef,b)},function(c){x(c,vj,b)})}function zr(b){v.nq(b.Hf(),b.Kc,function(c){b.df=c.likeId;z.b(Hf,b)},function(c){x(c,wj,b)})}
function Ar(b){v.mH(b,function(b){z.b(Gf,b)},function(c){x(c,xj,b)})}function Br(b){null!=v.i&&fo(v.i)?v.eH(function(c){z.b(If,{cdata:c,ctx:b})},function(c){c&&"CREDIT_CARD_NO_RECORD_FOUND"==c.code?z.b(If,{cdata:null,ctx:b}):(k.error("Failed to get card information.",c),x(c,zj,b))}):z.b(If,{cdata:null,ctx:b})}
function Cr(b){v.Lj(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],function(b){v.Pa(Xn(b));z.b(Pf,b)},function(c){k.error("Failed to purchase subscription.",c);x(c,Fj,b,Dh,c)})}function Dr(b){v.jk(!0,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],function(b){v.Pa(Xn(b));z.b(Lf,b)},function(c){k.error("Failed to set billing information.",c);x(c,Bj,b,zh,c)})}
function Er(b){v.jk(!1,b[1],null,null,null,null,null,null,null,b[0],null,b[2],function(b){v.Pa(Xn(b));z.b(Mf,b)},function(c){k.error("Failed to set billing information.",c);x(c,Cj,b,Ah,c)})}function Fr(b){v.VQ(b[0],b[1],2<b.length,b[2],b[3],b[4],function(b){v.Pa(Xn(b));z.b(Nf,b)},function(c){k.error("Failed to update business information.",c);x(c,Dj,b,Bh,c)})}
function Gr(b){v.QL(b[0],b[1],function(b){v.Pa(Xn(b));z.b(Of,b)},function(c){k.error("Failed to update business information.",c);x(c,Ej,b,Ch,c)})}function Hr(b){v.gQ(b[0],b[1],b[2],function(b){k.info("returned startPaypalPayment.");z.b(jk,b)},function(c){k.error("Failed startPaypalPayment.",c);x(c,ik,b,Th,c)})}function Ir(b){v.xH(b[0],function(b){k.info("returned getPaypalCheckoutDetails.");z.b(nk,b)},function(c){k.error("Failed getPaypalCheckoutDetails.",c);x(c,mk,b,Vh,c)})}
function Jr(b){v.CH(function(b){k.info("returned getReceipts.");z.b(rl,b)},function(c){k.error("Failed getReceipts.",c);x(c,pl,b,ql,c)})}function Kr(b){v.zF(b[0],b[1],b[2],b[3],function(b){k.info("returned completePaypalPayment.");v.Pa(Xn(b));z.b(lk,b)},function(c){k.error("Failed completePaypalPayment.",c);x(c,lk,b,Uh,c)})}function Lr(b){v.fQ(b[0],b[1],function(b){k.info("returned startPaypalBackedTrial.");z.b(rk,b)},function(c){k.error("Failed startPaypalBackedTrial.",c);x(c,qk,b,Xh,c)})}
function Mr(b){v.yF(b[0],function(b){k.info("returned completePaypalBackedTrial.");v.Pa(Xn(b));z.b(tk,b)},function(c){k.error("Failed startPaypalBackedTrial.",c);x(c,sk,b,Yh,c)})}function Nr(b){v.dQ(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],function(b){v.Pa(Xn(b));z.b(pk,b)},function(c){k.error("Failed to start credit-card backed trial.",c);x(c,ok,b,Wh,c)})}
function Or(b){v.GF(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],function(b){v.Pa(Xn(b));b.p1gift=!0;z.b(Jf,b)},function(c){x(c,ek,b)})}function Pr(b){var c=b[0];v.IL(c,b[1],function(b){z.b(rg,b)},function(b){x(b,fk,c)})}function Qr(b){var c=b[0];v.oG(c,b[1],function(b){z.b(sg,b)},function(b){x(b,gk,c)})}function Rr(){v.TQ(function(b){z.b(Tf,Xn(b))},function(b){k.error("Failed to unsubscribe",b);x(b,Gj,null,xh)})}
function Sr(b){var c=b.feedId,d=b.deleteCompletely;b.isActivityDelete?v.GK(c,function(b){z.b(fg,Xn(b))},function(c){k.error("Failed to unsubscribe",c);x(c,kj,b,Fh)}):v.IK(c,d,function(b){z.b(fg,Xn(b))},function(c){k.error("Failed to unsubscribe",c);x(c,kj,b,Fh)})}function Tr(b){v.BO(b,function(b){z.b(gg,Xn(b))},function(c){k.error("Failed to unsubscribe",c);x(c,mj,b,Gh)})}function Ur(b){v.HK(b,function(b){z.b(hg,Xn(b))},function(c){k.error("Failed to unsubscribe",c);x(c,lj,b,Hh)})}
function Vr(b){v.TG(b.webName,function(){z.b(Rf,b)},function(c){x(c,Ij,b)})}function Wr(b){v.Mt(b.webName,function(){z.b(Sf,b)},function(c){x(c,Jj,b)})}function Xr(b){v.WE(b,function(){z.b(Uf,b)},function(c){x(c,Kj,b)})}function Yr(b){v.MQ(b,function(){z.b(Vf,b)},function(c){x(c,Lj,b)})}function Zr(b){v.UF(b.password,b.email,b.accountType,function(){z.b(Zg)},function(b){x(b,Mj,null,di)})}
function $r(b){var c=b.stationID,d=b.seedID,e=b.musicID;e?v.$F(c,e,function(){z.b(Ig,[c,e])},function(c){x(c,Nj,b)}):v.ZF(d,function(){z.b(Ig,[c,d])},function(c){x(c,Nj,b)})}function as(b){v.nO(b,function(b){v.Pa(Xn(b));z.b($f,b)},function(c){k.error("Failed to redeem gift code: ",c.message);x(c,Vj,b,wh,c)})}
function bs(b){v.pF(b.svnName,b.activityBenefit,b.hoursEarned,b.probablyCompleted,function(c){z.b(Zf,{success:n(c),activity:b})},function(b){k.error("Failed to check SVN complete: ",b.message);x(b,Qj,[],Uj)})}function cs(){rp?v.IG(function(b){b=n(b);b=null!=b&&0<b.length?b.pop():null;z.b(Xf,b)},function(b){k.error("Failed to fetch SVN ads: ",b.message);z.b(Xf,null);x(b,Oj,[],Rj)}):setTimeout(function(){z.b(Xf,null)},500)}
function ds(){v.tG(function(b){z.b(Yf,parseInt(n(b),10))},function(b){k.error("Failed to exercise timeout credit: ",b.message);x(b,Pj,[],Sj)})}function es(b){v.jQ(b.offerName,b.brandName,b.lineId,b.creativeId,b.offerButtonLabel,b.offerButtonUrl,b.leadInBannerUrl,b.leadInAudioUrl,b.signature?b.signature:"",b.vxOffer?b.vxOffer:"",b.truexInstanceId?""+b.truexInstanceId:"",function(b){z.b(jl,n(b))},function(b){k.error("Failed to start value exchange: ",b.message);x(b,hl,[],il)})}
function fs(b){v.eQ(b.sponsor||"",b.referrer||"unknown",function(){z.b(ag,b)},function(c){k.error("Failed to start complimentary trial",c);var d=v.i,e="";switch(c.code){case m.d.xu():e=d&&null!=d.pl?ob():d&&!d.J()?pb():qb();break;case m.d.wk():e=rb();break;case m.d.EC():e=sb();break;case m.d.SB():e=ub([b.sponsor||""]);break;case m.d.BB():e=vb();break;default:e=wb()}c.hg=e;x(c,Wj,b)})}function gs(b){v.eP(b,function(){},function(){})}function hs(b){v.mE(b)}
function is(b){v.EF(b.id,b.name,b.accessToken,b.accessTokenExpiration,function(){z.b(zg);b.callback&&b.callback()},function(b){z.b(th,b)})}function js(b){if(null!=b&&!(b.Do||b instanceof Hn||b.Jc)){var c="";null!=v.i&&(c=v.i.ox||"");v.uK(b.Za(),c,function(c){b.Do=!0;c&&c.updateFacebookInfo&&(k.info("trackPlay response: need to do sync"),v.kH(function(b){z.b(Cg,b)},function(){}))})}}function ks(){v.WF(function(){z.b(Qf)})}
function ls(b){var c=b.stationId,d=b.context;v.vn(c,function(b){z.b(Jg,{oldStationId:c,station:b,context:d})},function(b){x(b,ak,c)})}function ms(){v.oE(function(b){x(b,dl,null)})}function ns(){v.rF(function(b){x(b,el,null)})}function os(b){0<b?(um(El,b),um(Fl,!1)):um(Fl,!0)}
function ps(b){var c=b.adUrl,d=b.adToken||"",e=b.stationId,h=b.errorCallback,l=b.successCallback,p=b.chronosOptions.secondsUntilAd,q=b.chronosOptions.currentStationId,t=b.chronosOptions.trackToken,y=b.chronosOptions.trackType,E=b.chronosOptions.secondsPlayed,I=b.chronosOptions.userInitTrackEnd,N=b.chronosOptions.secondsSinceDisplayAd||0,U=b.testMode;k.debug("Attempting chronos call..");k.debug("Chronos variables \n url: "+c+" \n adToken: "+d+" \n nextStationId: "+e+" \n secondsUntilAd: "+p+" \n currentStationId: "+
q+" \n trackToken: "+t+" \n secondsPlayed: "+E+" \n userInitTrackEnd: "+I+" \n secondsSinceDisplayAd: "+N+"\n trackType: "+y);if(null!=c){var pa=JSON.stringify({url:c,nextStationId:e,secondsUntilAd:p,currentStationId:q,trackToken:t,trackType:y,secondsPlayed:E,userInitTrackEnd:I,secondsSinceDisplayAd:N,videoAdReady:!0,testMode:U}),Ia=v.i,fb="track_complete";I&&(fb=q!=e?"station_change":"track_skip");var gb={ad_unit_id:null,event_type:"request",event_sub_type:fb,event_description:null,correlation_id:null,
line_id:null,creative_id:null,request_string:pa,listener_id:Ia.s,vendor_id:u,device_id:we,accessory_id:null,app_version:z.ba,device_os:se(),device_model:null,client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0),is_pandora_link:!1,bluetooth_device_name:null,ad_id:null};s("chronos_lifecycle",gb,Ia);k.debug("Fetch Ad Url : "+c);v.ZG(c,e,p,q,t,y,E,I,N,U,function(b){k.debug("Chronos call successful");k.debug("Response - "+JSON.stringify(b));var e={};e.adList=b;e.url=c;e.adToken=d;l(e)},function(c){c instanceof
Cd?(k.info("Chronos call timed out"),gb={ad_unit_id:null,event_type:"timeout",event_sub_type:null,event_description:v.f.listener.getAdList.timeout,correlation_id:null,line_id:null,creative_id:null,request_string:pa,listener_id:Ia.s,vendor_id:u,device_id:we,accessory_id:null,app_version:z.ba,device_os:se(),device_model:null,client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0),is_pandora_link:!1,bluetooth_device_name:null,ad_id:null},s("chronos_lifecycle",gb,Ia)):k.info("Chronos call failed");
c={name:"getAdListError: "+c.message,message:c.hg,description:c.hg};zp(c.name+" : "+b.slotSize,b.slotSize,"getAdList get failure",b.subzone);h(c)})}else k.debug("AdService : ","Ad url is null")}function qs(b){var c=b.errorCallback,d=b.successCallback;v.Rm(b.creativeId,b.secondsPlayed,b.adLength,b.isHouseAd,function(b){d(b)},function(b){c(b)})}
function rs(b){var c=b.adUrl,d=b.adToken||"",e=b.stationId,h=b.errorCallback,l=b.successCallback;null!=c?(k.debug("Fetch Ad Url : "+c),v.hO(c,d,e,function(d){"true"!=d.success?(d={name:"serverProxyError",message:"ServerProxy failed to proxy the ad request",description:"ServerProxy failed to proxy the ad request"},zp(d.name+" : "+b.slotSize,b.slotSize,"server proxy get failure",b.subzone),h(d)):l(d.content,c,d.adToken,d.adRequestMetaData)},function(c){c={name:"serverProxyError: "+c.message,message:c.hg,
description:c.hg};zp(c.name+" : "+b.slotSize,b.slotSize,"server proxy get failure",b.subzone);h(c)})):k.debug("AdService : ","Ad url is null")}
function ss(b){var c=b.adData,d=b.onImpressionSuccess,e=b.onImpressionFailure||$.noop,h=b.stationId||0,l=c.Lm?c.Lm.Ef():"",p=c.qE;b=[];b.push(["impression",c.pH?c.qc:c.impression]);b.push(["tracking",c.tracker]);if(v.i.ue()){var q=c.LH?c.rn:c.tile_tracker_urls;q&&(q="string"===typeof q||q instanceof String?[q]:q,$.merge(b,$.map(q,function(b){return[["tile_tracker",b]]})))}c.qc=null;c.rn=null;$.each(b,function(b,q){try{var E=q[0],I=q[1];me(I)?k.info("empty "+E+" URL"):c.type&&"CPA_PROVIDER"==c.type?
Jp(I,d,e):v.wb(I,E,p,l,h,function(b){"true"!=b.success?e({name:"serverProxyError",message:"ServerProxy failed to proxy "+E+" url",description:"ServerProxy failed to proxy "+E+" url"},E):d(E)},function(b){e({name:"serverProxyError on "+E+" url: "+b.message,message:b.userMessage,description:b.userMessage},E)})}catch(N){e(N,E)}})}function ts(b){var c=b.artistMessageId,d=b.artistUid,e=b.metric,h=b.isOnDemand||!1;b=b.shareUrlType;null==b&&(b="");v.eL(c,d,e,h,b)}
function us(b){v.OG(b.artistMessageId,b.artistUid,b.stationId,function(){z.b(Yg,b)})}function vs(b){v.PG(b.artistUid,b.artistMessageId,b.flagReason,function(){z.b(Yg,b)})}function ws(b){v.jP(b[0],b[1],function(b){z.b(Wg,b)},function(c){x(c,xk,b)})}function xs(b){v.mP(b[0],b[1],function(b){var d=b.listenerData;void 0!=d&&(z.b(lf,d),v.Pa(Xn(d)));z.b(Xg,b)},function(c){k.error("Failed to update artist audio message settings.",c);x(c,yk,b)})}
function ys(b){v.hQ(b[0],b[1],b[2],function(b){k.info("returned startRedeemPaypalBackedGift.");z.b(Bk,b)},function(c){k.error("Failed startRedeemPaypalBackedGift.",c);x(c,Ak,b,$h,c)})}function zs(b){v.AF(b[0],b[1],function(b){k.info("returned completeRedeemPaypalBackedGift.");z.b($f,b)},function(c){k.error("Failed completeRedeemPaypalBackedGift.",c);x(c,Ck,b,ai,c)})}
function As(b){v.mO(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],function(b){v.Pa(Xn(b));z.b($f,b)},function(c){var d=Nb();if(c.code==m.d.Rn()||c.code==m.d.Sn()||c.code==m.d.FB()||c.code==m.d.ou())d=c.message;k.error("Failed to redeem credit-card backed gift.",c);x(c,zk,b,Zh,d)})}function Bs(b){var c=b[0];v.SN(c,b[1],b[2],b[3],function(b){k.debug("callback fired for success");z.b(Gk,[b,c])},function(b){z.b(Hk,b)})};function Cs(b,c){this.wd=b;this.wd["class"]="Track";this.h=c;this.k="ArtistMessage"==this.wd.trackType?new Go(b,Ds(b.audioURL),Ds(b.audioReceiptURL)):"LiveStream"==this.wd.trackType?new Jn(b):"IntroductoryMessage"===this.wd.trackType&&c.Ia()?new Ho(b,Ds(b.audioURL),Ds(b.audioReceiptURL)):new Fn(b,Ds(b.audioURL),Ds(b.audioReceiptURL));this.Tb=b.audioTokenId;this.Is=b.isSeed;this.Wt=b.userSeed;this.NA=b.trackToken;this.$z=this.Na=this.tb=!1;this.qj=null;this.ye()&&(z.pe().li=2)}f=Cs.prototype;
f.load=function(){null==this.g&&(this.g=Es(this));this.g instanceof Fs||this.g.pL?this.g.load(this.Nl(),this.Sc(),this.cL):this.k instanceof Jn&&this.g.load(this)};f.Pe=function(b,c){null!=this.g&&this.g.Pe(b,c)};f.play=function(){this.Na=!0;null==this.g&&this.load();this.Pe(this.oc());this.g.play()};f.stop=function(){null!=this.g&&(this.g.stop(),this.g=null)};f.Ah=function(){this.Na?this.g.Ah():this.play()};f.pause=function(b){this.g&&this.g.pause(b)};
f.suspend=function(){null!=this.g&&(this.g.kf(r(this,function(){this.g&&this.g.kf(null);this.h&&!this.h.active&&this.h.Kh()})),this.g.suspend())};f.Be=function(b){if(this.k&&!this.k.di&&this.k.Sk&&this.g){var c=this.Vc()||this.g.totalTime||0,d=this.g.Ff(),c=c-d;(this.h.jh()||"thumbed_down"===b||"skipped"===b)&&"discarded"!==b&&Gs(this,b,d);z.b(We,{reason:b,audio_token:this.Tb,elapsed_seconds:d,remaining_seconds:0<=c?c:0,track:this});this.k.di=!0}};
function Hs(b){b.k.di&&b.$z&&b.h.jh()&&Gs(b,"completed",b.g.Ff());b.k&&!b.k.di&&b.k.Sk&&b.g&&(z.b(We,{reason:"completed",audio_token:b.Tb,elapsed_seconds:b.g.totalTime?b.g.totalTime:0,remaining_seconds:0,track:b}),b.k.di=!0)}function Is(b){b.k&&!b.k.Sk&&(z.b(Xe,{is_prefetch:!1,audio_token:b.Tb}),b.k.Sk=!0)}f.r=function(){return this.h};f.o=function(){return this.k.o()};f.Px=function(){return this.Wt};f.Za=function(){return this.NA};f.Vc=function(){return this.k.Vc()};
f.jL=function(){return this.k instanceof Go};function Js(b){return b.k instanceof Jn}f.ye=function(){return this.k.ye()};f.oc=function(){return this.k instanceof Fn?this.k.oc():0};f.Nl=function(){return this.k.Nl()};f.Sc=function(){return this.k instanceof Fn?this.k.Sc():null};f.My=function(){return!1};function Ds(b){if(null!=b){var c=b.substr(b.length-48,48);b=b.substr(0,b.length-48);b+=v.Wz.decrypt(c)}return b}
function Gs(b,c,d){if("undefined"!==typeof b.k.dv){d|=0;var e=Ds(b.k.dv);c=Ks(c);$.ajax({type:"GET",url:e+("&reason="+c+"&sec="+d),dataType:"jsonp",success:r(b,function(){this.$z=!0})})}}function Ks(b){if("completed"===b)return 0;if("skipped"===b)return 1;if("station_changed"===b)return 2;if("thumbed_down"===b)return 3;if("error"===b)return 4;if("discarded"===b)return 5;if("expired"===b)return 6;k.warn("Unidentified skip reason: "+b);return 7}
function Ls(b,c){Js(b)&&(s("live_tracking",{station_id:b.r().e(),track_token:b.Za(),track_start:(new Date(1E3*c)).format("yyyy-mm-dd HH:MM:ss",!0),event_type:"start",platform:"web",vendor_id:u,device_code:we,app_version:z.ba,device_os:se(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},v.i),dn({trackToken:b.Za(),stationId:b.r().e(),start:c}),en({trackToken:b.Za(),stationId:b.r().e(),seconds:1}),b.qj=setInterval(r(b,function(){en({trackToken:this.Za(),stationId:this.r().e(),seconds:Ed()-
c})}),1E4))}function Ms(b,c,d,e,h){Js(b)&&(s("live_tracking",{station_id:b.r().e(),track_token:b.Za(),track_start:(new Date(1E3*c)).format("yyyy-mm-dd HH:MM:ss",!0),track_end:(new Date(1E3*d)).format("yyyy-mm-dd HH:MM:ss",!0),elapsed_seconds:e,event_type:"end",platform:"web",vendor_id:u,device_code:we,app_version:z.ba,device_os:se(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0),bitrate:h},v.i),null!=b.qj&&(clearInterval(b.qj),b.qj=null),vm(im),vm(jm))};function Ns(b){this.url=b;this.k={}}Ns.prototype=Object.create(Cs.prototype);Ns.prototype.Sc=function(){return"m4a"};Ns.prototype.ye=function(){return!0};function P(b){this.qh=b.isNew;this.Ud=!1;this.Fe=this.ms=null;this.Dc=!1;this.I=[];this.active=!1;this.Je=this.Rg=this.paused=!0;this.Oc=this.Ib=this.Ee=!1;this.dn=!0;this.qr=null;this.stationData=this.n=new un(b);this.Up=null;this.Bf=Os;this.yx=this.Dp=0;this.H=this.t=null;this.ls=0;this.Zd={};this.Sy=this.jn=null;this.Re=!1;this.Dw=b.checksum;Ps[this.e()]=this;this.js();z.c(Pk,r(this,this.eM));z.yh(Vk,r(this,this.PD));this.Qm(Ee,"app_start",this.yc);this.Qm(jg,"station_changed",this.yc);this.Qm(Re,
"station_created",this.yc);this.Qm(Uk,"video_ad",this.yc)}var xq,Os,Qs;
(function(b){function c(b,c,d){var q=F.Pi(c);c&&!F.mf||q||!F.oh()?(b.os(q),d()):(b.Re=!0,setTimeout(function(){b.Re&&(b.Re=!1,d())},e),k.debug("Station: Waiting for ad to load before playing next track."))}function d(b,c,d){var q=!c||F.mf,t=F.vH(),y=[];for(0<t&&k.debug("Chronos - we're about to cycle through "+t+" ads.");0<t;){var E=F.Pi(c);y.unshift(E);t--}_.each(y,function(c){null!==c&&(q&&!c&&F.oh()?(b.Re=!0,setTimeout(function(){b.Re&&(b.Re=!1,d())},e),k.debug("Chronos - Station: Waiting for ad to load before playing next track.")):
(k.debug("Chronos - pushing audio ad onto playlist (1)... "),b.os(c)))});d()}var e=3E3;P.prototype.Qm=function(b,c,d){z.c(b,r(this,_.bind(function(b){d(b)},this,c)))};P.prototype.js=function(){var b=wl?qm(tm(Tl,this.e())):null,c=wl?qm(tm(Ul,this.e())):null;if(null!=b||null!=c)"AudioAdTrack"!=b["class"]||this.La()?this.La()||(c&&this.$o(c,!0),b&&this.$o(b,!1)):(b=new Rs(b,this),this.I.push(b),F.vs())};P.prototype.$o=function(b,c,d){c=Sm(b.musicId,this.e(),c);null==c&&(c=0);b=new Cs(b,this);b.cL=c;
b.k.Do=!0;d?this.I.splice(d,0,b):this.I.push(b);this.zn(b.oc())};P.prototype.update=function(b){this.qh=b.isNew;this.n.update(b)};Os=1E3;Qs=!1;P.prototype.fH=function(){return this.active?this.t:null};P.prototype.jh=function(){return this.active&&!this.paused};P.prototype.suspend=function(){k.info("Station.suspend",this.ca());this.active=!1;null!=this.t&&this.t.suspend()};P.prototype.nL=function(){return null!=this.t};P.prototype.start=function(b,c){_.isUndefined(c)&&(c=!0);this.Ib?(k.warn("Tried to start a station that is pending a restart. (Call restart() instead.)"),
this.qf(!0,!1)):this.Zj(b,c)};P.prototype.Tz=function(){this.Zj(null,!1)};P.prototype.Zj=function(b,c){_.isUndefined(c)&&(c=!0);k.info("Station.start",this.ca(),this);this.active=!0;this.paused=!1;b?(this.Ib=this.Ee=this.Oc=!1,this.I=[],this.paused=!1,this.t&&(this.Be("skipped"),z.b(cf,this.t.k)),this.xc(r(this,function(){this.oa(c)}),b)):this.bj()?(this.I=[],this.xc(r(this,function(){this.oa(c)}))):null==this.t||this.Ib?(this.Ib=!1,0==this.I.length?this.xc(r(this,function(){this.oa(c)})):this.oa(c)):
this.lk()};P.prototype.Fz=function(){this.active&&(0==this.I.length?this.xc():this.gB(r(this,function(){this.I=[];this.xc()}),null))};P.prototype.Ez=function(){this.active&&F.oh()};P.prototype.oa=function(b,c){_.isUndefined(b)&&(b=!0);c=c||"Normal";0==this.I.length&&(this.Oc=!0);this.active&&(this.Dc=!0,this.qr=!this.t||this.t.k instanceof Hn||this.t.k.Jc?null:this.t.o(),this.H=this.t,this.Kh(),this.Ee?(this.Ee=this.Oc=!1,this.Ib=!0,this.Je?z.b(vg,this.e()):this.qf(!1,!1)):Ss({userInitiated:b},r(this,
function(d){d&&d.siteLocked?this.Fg(b,c):this.qx(b,r(this,function(){this.Fg(b,c)}))})))};P.prototype.yD=function(){if(!this.H)return!1;var b=this.H.k;return b instanceof Go||b instanceof Ho};P.prototype.sD=function(b,c){if(!this.Rg)return!1;this.Rg=!1;if(this.La()){var d;d=C.Da()?function(b){if(b){k.debug("Chronos - adding "+b.length+" in-station ads to beginning of playlist");for(var d=0;d<b.length;d++){var e=b[d];e.h=this;this.I.splice(d,0,e)}}c()}:function(b){b&&!b.k.Pw&&(b.h=this,this.I.splice(0,
0,b));c()};F.Sl(b,r(this,d))}else c();return!0};P.prototype.qx=function(b,e){this.sD(b,e)||(this.yD()?(k.info("Not loading audio ad, because a station audio message just played"),e()):C.Da()?d(this,b,e):c(this,b,e))};P.prototype.XP=function(){this.t.k instanceof Hn&&this.oa(!1)};P.prototype.Fg=function(b,c){if(this.active)if(0<this.I.length){var d=this.I.shift();d.k instanceof Eo&&(this.rc()&&F.WK(this.e()),this.yc("audio_ad"));if(d.k instanceof Go){if(null!=Ts){k.info("Discarding artist audio message because we are in a value exchange");
this.oa(!1);return}if(Qs){k.info("Discarding artist audio message because a video ad just played");this.oa(!1);return}if(this.H&&this.H.k instanceof Eo){k.info("Discarding artist audio message because an audio ad just played");this.oa(!1);return}this.yc("non_ad_interruption");D.QG()}Qs=!1;d instanceof Rs||this.qm(d)?(this.t=this.Zd[d.o()]=d,d=this.t.k,this.Sy=d.Za()?d.Za():null,this.lk(),this.paused||(Is(this.t),this.t.load(),this.t.play()),this.Dc=!1,d.Sj(b)):(k.info("Dumping Track - it doesn't belong on the current station"),
this.oa(!1))}else b&&(this.dn=!0),this.xc(r(this,function(){this.oa(b)}),null,c)};P.prototype.os=function(b){b&&(b.h=this,this.I.splice(0,0,b))};P.prototype.eM=function(){this.Re&&(this.Re=!1,k.debug("Chronos - pushing ad to playlist (2) ... "),this.os(F.Pi(!1)),this.Fg(!1),k.debug("Station: The ad we were waiting for was loaded."))};P.prototype.PD=function(){Qs=!0};P.prototype.Sr=function(b){if(b==m.d.Cu()){b=$.isEmptyObject(this.Zd);var c=this.Ra();this.Je&&b&&c?(this.Je=!1,this.xc(r(this,function(){this.oa(!1)}))):
!c||b||this.dn?this.qf(!1,b):this.Ee=!0}else b==m.d.wk()?z.b(Oh):b==m.d.Se()?z.b(ck):this.handleError()};P.prototype.qf=function(b,c,d){var e=r(this,function(){!c&&this.Ra()&&(this.Ib=!0);F.FO(this);var b=$.extend({},{stationStart:c,isOnDemand:this.Ra(),stationId:this.e()});z.b(Nh,b);z.b(gi);d&&d()});b?Us(new Vs({initiateEvent:af,eventArgs:{},responseEvent:bf,callback:e})):e()};P.prototype.Dm=function(c){this.I=_.reject(this.I,function(b){return b.tb?(b.stop(),!0):!1});null!=this.t&&this.t.tb&&(re({msg:c,
ua:navigator.userAgent,flash_ver:te(),browser:se(),site_version:b._pandoraVersion}),this.t.pause(),this.Kh());this.handleError()};P.prototype.th=function(b,c){this.Bf=Os;if(-1==b.k.ie){var d=this.ls++;b.k.ie=d}this.active&&D.th(b);this.hs(b,c);this.xr()};P.prototype.hs=function(b,c){if(b==this.t&&b!=this.VN){var d=b.wd;d.narrative=null;0==c?c=600:this.VN=b;if(b.k instanceof Go&&b.k.we()){if(wl){var e=1E3*c;rm(tm(Ul,this.e()),d,e)}}else wl&&(e=1E3*c,rm(tm(Tl,this.e()),d,e))}};P.prototype.handleError=
function(){null==this.Up&&(this.Up=setTimeout(r(this,this.LO),this.Bf),3E4>this.Bf&&(this.Bf*=1.5,3E4<this.Bf&&(this.Bf=3E4)))};P.prototype.LO=function(){this.Up=null;null==this.t&&this.oa(!1)};P.prototype.lk=function(b){if(this.active&&null!=this.t){var c=this.t.oc();null==c&&(c=this.Dp);this.t.Pe(c,b)}};P.prototype.play=function(){this.paused=!1;this.active&&(null!=this.t?(this.t.Ah(),this.yc("resume")):this.Ib&&this.start())};P.prototype.pause=function(b){this.paused=!0;this.active&&null!=this.t&&
this.t.pause(b)};P.prototype.yo=function(b){b?this.Be("error"):this.Be("skipped");this.Ws()&&!b?this.nv("Skip"):(this.paused=!1,this.oa(!b));z.b(cf,this.t?this.t.k:null)};P.prototype.Yj=function(b,c){b=!!b;if(this.active&&this.Ib)this.start();else if(this.active&&!this.Dc&&(this.ML(),this.yc("track_skipped"),b||this.rw())){this.SG();this.pause();var d=this.t&&this.t.k instanceof Go;b||d?this.yo(b):(d="skip",c&&(d="tired"),C.Da()&&this.rc()?F.Sl(!0,r(this,function(c){if(c){k.debug("Chronos - adding "+
c.length+" in-station ads to beginning of playlist after skip",this,this.I);for(var d=0;d<c.length;d++){var e=c[d];e.h=this;this.I.splice(d,0,e)}}this.yo(b)})):Ws(d,_.bind(this.yo,this,b)))}};P.prototype.rw=function(b){if(this.Ra())return!0;var c=this.t?this.t.k:null;if(c&&c.OC)return!0;if((null==v.i||0<=v.i.Bg)&&Om()>=(null!=v.i&&null!=v.i.Bg?v.i.Bg:24))return b||z.b(oh),!1;if(Xs(this))return b||z.b(nh),!1;Ys(this);b=Mm(this.e());Nm(this.e(),b+1);Qm(Om()+1);return!0};P.prototype.xc=function(b,c,
d){d=d||"Normal";this.Fe=b;if(this.Ud)if(c&&this.jn!==c)this.ms.cancel();else return;this.Ud=!0;this.jn=c?c:null;this.ms=v.nH(this,this.qh,0==this.ls,this.Sy,this.jn,d,r(this,function(b){this.jn=this.ms=null;var c=this,d=null;b.checksum&&this.aA(b.checksum);var e=b.tracks,h=!1,l=!1;$.each(e,r(this,function(b,e){var p=new Cs(e,c);0==b&&this.Ra()&&0<this.ls&&p.o()==this.qr?d=p:(c.I.push(p),c.zn(p.oc()));p.k instanceof Go&&(h=!0,p.k.we()&&(l=!0))}));if(c.bj())if(h){if(c.qF(),l){var p=wl?qm(tm(Tl,this.e())):
null;p&&this.$o(p,!1,1)}}else z.b(ci);null!=d&&(c.I.push(d),c.zn(d.oc()));this.Ud=!1;this.qh&&0<this.I.length&&(this.Qt(),this.qh=!1);this.Fe&&(this.Fe(),this.Fe=null);this.dn=this.Je=!1;Zs(e[0]);if(b.shouldLogDisplayAds){if(b.stationAdParams)var pa=this.PA(b.stationAdParams);if(b.listenerAdParams)var Ia=this.PA(b.listenerAdParams);b=$.extend({},pa,Ia);b=C.AQ(b);e=C.Wg();""!=b&&""!=e&&s("ad_urls_comparing",{server_ad_url:b,client_ad_url:e,ad_type:"display"},v.i)}}),r(this,function(b){k.warn("Station.loadPlaylist got ERROR on playlist",
b);this.Ud=!1;this.Sr(b instanceof Dd?b.code:null)}))};P.prototype.Qt=function(){var b=null,c=this.I[0];c.Is||(this.Ia()?k.info("no narrative for Thumbprint Station's introductory message"):null!=this.wa().song?b='"'+this.wa().song.songTitle+'"':null!=this.wa().nonGenomeStation?b='"'+this.wa().nonGenomeStation.stationName+'"':null!=this.wa().artist?b=this.wa().artist.artistName:k.error("Unknown initial seed type",this.wa()));null!=b&&0<b.length&&(c.k.Ev=b)};P.prototype.$k=function(){k.info("Station.audioPlayerLost");
this.Kh()};P.prototype.Kh=function(){null!=this.t&&(this.t.stop(),this.t=null)};P.prototype.zn=function(b){null!=b&&(this.Dp=(this.yx*this.Dp+b)/++this.yx)};P.prototype.HA=function(b){this.gi(b,!0)};P.prototype.Dt=function(b){this.yc("thumbs_down");this.gi(b,!1)};P.prototype.dG=function(b){this.wl(b,!0)};P.prototype.cG=function(b){this.wl(b,!1)};P.prototype.gi=function(b,c){var d=this.Zd[b],e=c?"thumbs_up":"thumbs_down";if(null!=d){var t=D.Uc(this.If(d));t&&t.La()&&t.re()==m.Gc.Ve()?this.ny(d):!this.Z()&&
!this.D()||this.D()&&!t.Z()?z.b(kg,{event:c?ii:ji,musicId:d.o(),stationId:this.If(d)}):(this.Vy(e,this.If(d)),v.gi(this,d,c,r(this,function(b){this.active&&z.b(df,{track:b.k,stationId:this.e()});-1==b.k.Lc&&this.ny(b)}),function(b){z.b(hh,b)}))}};P.prototype.wl=function(b,c){var d=this.Zd[b];if(null!=d){var e=D.Uc(this.If(d));e&&e.La()&&e.re()==m.Gc.Ve()||!this.Z()&&!this.D()||this.D()&&!e.Z()||v.wl(this,d,c,r(this,function(b){this.active&&z.b(df,{track:b.k,stationId:this.e()});0!=b.k.Lc&&k.error("ERROR: unThumb didn't result in 0 rating.")}),
function(b){z.b(ih,b)})}};P.prototype.ny=function(b){b==this.t&&this.active&&!this.Dc&&(this.rw(!0)?(this.Be("thumbed_down"),this.nv("ThumbDown")):z.b(ph))};P.prototype.nv=function(b){this.Hl();this.paused=!1;this.oa(!0,b)};P.prototype.destroy=function(){z.pa(this);this.Hl();this.Zd={};var b=$s[this.e()];b&&clearInterval(b);$s[this.e()]=null};P.prototype.Hl=function(b){b||(this.Kh(),$.each(this.I,function(b,c){c.Be("discarded");c.stop()}));this.I=[]};P.prototype.SG=function(){if(1<=this.I.length&&
this.I[0].k instanceof Go){var b=this.I[0].k.eD;"AFTER_TRACK"!=b&&"AFTER_OTHER_ARTIST_TRACK"!=b||this.I.splice(0,1)}};P.prototype.RG=function(){this.I=_.reject(this.I,function(b){return b.k instanceof Go})};P.prototype.gB=function(b,c){this.cm()&&v.lR(this.e(),this.lq(),r(this,function(d){d&&d.updateNeeded?(this.aA(d.checksum),b()):c&&c()}),c)};P.prototype.Vy=function(b,c){s("playback_interactions",{action:b,station_id:c,control_source:"web_playback_controls",user_initiated:!0,vendor_id:u,device_code:we,
app_version:z.ba,device_os:se(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},v.i)};P.prototype.yc=function(b){this.bl||(this.cl=Fd(),this.bl=b,k.debug("Start timer to track time to audio for "+this.bl+" at "+this.cl))};P.prototype.xr=function(){if(this.cl){var b=Fd()-this.cl,c=this.bl;k.info("Time to audio for "+c+" is "+b);v.i.Wy&&s("time_to_music_web",{action:c,time_to_music_msec:b,vendor_id:u,device_id:we,app_version:z.ba,browser:se(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",
!0)},v.i);this.bl=this.cl=null}};P.prototype.ML=function(){try{if(k.info("in log skip"),null!=this.t){var b=this.t.k;if(null!=b){var c=null==v.i||0<=v.i.Bg?Om()>=(null!=v.i&&null!=v.i.Bg?v.i.Bg:24):!1,d=Xs(this);s("tuner_skips",{song_uid:b.o(),user_seed:b.Px(),station_id:b.e(),a4:this.t&&this.t.g?this.t.g.elapsedTime:0,skip_successful:!c&&!d,out_of_station_skips:d,redesign:"true"},null);s("skip_limit",{station_id:b.e(),at_station_skip_limit:d,at_daily_skip_limit:c,vendor_id:u,device_code:we,app_version:z.ba,
device_os:se(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},v.i);this.Vy("skip",b.e());var e=Mm(b.e()),t=Om();6!=e&&24!=t||s("skip_limit_experiment",{station_id:b.e(),hourly_station_skip_count:e,daily_skip_count:t,vendor_id:u,device_id:we,app_version:z.ba,device_os:se(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},v.i)}}}catch(y){trackJs.track(y)}};P.prototype.Be=function(b){null!=this.t&&this.t.Be(b)};P.prototype.PA=function(b){b=b.split("&");for(var c={},d=0;d<
b.length;d++){var e=b[d].split("=");e[0]&&e[1]&&(c[e[0]]=e[1])}return c};P.prototype.e=function(){return this.n.e()};P.prototype.Jd=function(){return this.n.Jd()};P.prototype.If=function(b){return this.D()?b.k.e():this.e()};P.prototype.qm=function(b){b=this.If(b);return this.D()?ke(this.qe(),b):b==this.e()};P.prototype.Ul=function(){return this.Z()&&this.D()};P.prototype.Z=function(){return this.n.Z()};P.prototype.Wl=function(){return this.n.Wl()};P.prototype.D=function(){return this.n.D()};P.prototype.qe=
function(){return this.n.qe()};P.prototype.Xm=function(b){this.n.Xm(b)};P.prototype.Ia=function(){return this.n.Ia()};P.prototype.rq=function(){return this.n.rq()};P.prototype.ah=function(b){return this.Zd[b]};P.prototype.Df=function(){return this.n.Df()};P.prototype.Gf=function(){return this.n.Gf()};P.prototype.Rl=function(){return this.n.Rl()};P.prototype.Ml=function(){return this.n.Ml()};P.prototype.ca=function(){return this.n.ca()};P.prototype.wa=function(){return this.n.wa()};P.prototype.hr=
function(){return this.n.hr()};P.prototype.Ra=function(){return this.n.Ra()};P.prototype.re=function(){return this.n.re()};P.prototype.Qi=function(){return this.n.Qi()};P.prototype.Zg=function(){return this.n.Zg()};P.prototype.La=function(){return this.n.La()};P.prototype.oA=function(){return!this.La()};xq=function(b){return b.promotedStationCampaignId?new at(b):b.isCustomContentStation?new bt(b):new P(b)};P.prototype.Db=function(){return this.n.Db()};P.prototype.Ub=function(){return this.n.Ub()};
P.prototype.rc=function(){return this.n.rc()};P.prototype.kp=function(){return this.n.kp()};P.prototype.Ws=function(){return this.n.Ws()};P.prototype.cm=function(){return this.n.cm()};P.prototype.aA=function(b){this.Dw=b};P.prototype.lq=function(){return this.Dw};P.prototype.bj=function(){return this.n.bj()};P.prototype.pq=function(){return this.n.pq()};P.prototype.oq=function(){return this.n.oq()};P.prototype.qF=function(){this.n.Qs(null);this.n.Ps(null)};P.prototype.Qs=function(b){this.n.Qs(b)};
P.prototype.Ps=function(b){this.n.Ps(b)}})(this);var D={};
(function(b){function c(b){0<D.ea.length&&np();D.ea.push.apply(D.ea,b)}function d(b){var c=b.station;c&&c.stationId&&(b=_.find(D.ea,function(b){return b.e()===c.stationId}))&&b.update(c)}function e(){0==D.ea.length&&(D.Jk=null)}function h(b){var c=b.stationId,d=b.stationId,e=b.trackToken;b=b.source;0==c.indexOf("s")&&(d=c.substr(2));var h=D.Uc(d);null==h&&(h=bb(d));null==h?(0!=c.indexOf("s")&&(c="sh"+c),e?z.b(Ii,{stationCode:c,trackToken:e,source:b}):z.b(Hi,{stationCode:c,source:b})):(d=h.e(),e?z.b(oi,
{stationId:d,trackToken:e}):z.b(ni,{stationId:d}))}function l(b,c){var d=D.V();null!==d&&(d.e()===b?(c&&d.start(c),z.b(ei)):(z.b(jg),d.Be("station_changed"),d.suspend()))}function p(b,c,d,e){var h=D.V();if(C.Da()){if(!d&&h&&c&&c.e()===h.e()){k.warn("Ignoring station change to prevent a chronos ad.");e();return}}else if(h&&h.nL()){e();return}b?Ws("station",e):e()}function q(b){var c=b.stationId,d=b.trackToken,e=b.userInitiated||!1;l(c,d);var h=D.Uc(c);h?(b=D.V(),D.Jk=h,um(Ol,h.e()),z.b(ig),c=function(){h.start(d,
e);s("change_station",{station_id:h.e(),new_station:Bn(h.n)},v.i);z.b(jg)},C.Da()&&h.rc()&&!h.Rg&&h.e()!=b.e()?F.Sl(!0,c):p(e,b,d,c)):k.error("Could not find station with id",c)}function t(b){q({stationId:b.stationId,trackToken:null,userInitiated:b.userInitiated||!1})}function y(b){var c=D.V();c.e()==b&&c.Tz()}function E(b){var c=D.V();if(null!=c){var d=b.noSkip;c.Hl(d);d||c.Yj(b.appSkip)}}function I(b){var c=Td();if(c){Tj&&clearTimeout(Tj);var d=b.stationIdArray,e=b.isExplicitSave,h=b.shuffleType,
l=b.genre||"",d=_.filter(d,function(b){return(b=D.Uc(b))&&!b.D()&&!b.Ra()&&!b.rc()});c.Xm(d);Tj=setTimeout(function(){Tj=null;v.gP(c.Wl(),d,l,e,h,function(){Cb(null)},function(b){k.error("set quickmix failed: "+b.message);Cb(null)})},UB)}}function N(b){var c=D.V();null!=c&&c.lk(b)}function U(){var b=D.V();null!=b&&b.play()}function pa(){var b=D.V();null!=b&&(b.pause(),D.t=null)}function Ia(b){var c=D.V();null!=c&&c.pause(b)}function fb(b){b=b||{};var c=!!b.isTiredOfSongSkip,d=D.V();null!=d&&(d.cm()?
d.gB(function(){d.Hl();d.Yj(b.appSkip,c)},function(){d.Yj(b.appSkip,c)}):d.Yj(b.appSkip,c))}function gb(b){b=b||{};b=b.artistMessageId;var c=D.V();if(null!=c){var d=D.t;null!=d&&d.jL()&&d.k.Qb==b&&c.Yj(!0,!1)}}function ua(b){var c=D.V();null!=c&&c.HA(b)}function ta(b){var c=D.V();null!=c&&c.Dt(b)}function T(b){var c=D.V();null!=c&&c.dG(b)}function nb(b){var c=D.V();null!=c&&c.cG(b)}function Bb(b){var c=D.Uc(b[3]),d=D.Uc(b[0]),e=D.Uc(b[1]),h=c.D()?c:d,l=h.ah(b[2]);l&&(h&&h.Dt(l.o()),v.gi(e,l,!0,function(b){z.b(tf,
[h,e,b])},function(){z.b(Eh,l)}))}function tb(){var b=D.V();null!=b&&b.XP()}function Td(){return _.find(D.ea,function(b){return b.Ul()})||null}function bb(b){return _.find(D.ea,function(c){return c.Qi()===b})||null}function Cb(b){v.BH(function(c){c=new P(c);var d;a:{for(d=0;d<D.ea.length;d++)if(D.ea[d].Ul())break a;d=-1}0>d&&D.ea.push(c);null!=b&&b(c.n);z.b(Te,{quickMixStationIds:c.qe(),quickMixType:c.Wl(),isComedy:c.hr()})},function(b){k.info("Could not get QuickMix from server",b)})}function np(){D.Jk=
null;_.each(D.ea,function(b){b.destroy()});D.ea.length=0}var UB=3E3,Tj=null;D.Jk=null;D.ea=[];D.init=function(){z.c(Pe,r(D,c));z.c(He,r(D,np));z.c(Jg,r(D,d));z.ib(Se,r(D,e));z.c(mi,r(D,h));z.c(ni,r(D,t));z.c(oi,r(D,q));z.c(vg,r(D,y));z.c(fi,r(D,E));z.c(pi,r(D,I));z.c(qi,r(D,N));z.c(ei,r(D,U));z.c(bk,r(D,pa));z.c(gi,r(D,Ia));z.c(hi,r(D,fb));z.c(ii,r(D,ua));z.c(ji,r(D,ta));z.c(ki,r(D,T));z.c(li,r(D,nb));z.c(aj,r(D,Bb));z.c(ml,r(D,tb));z.c(Yg,r(D,gb))};D.reset=function(){z.pa(D);pa();np()};D.o3=function(b){b=
xq(b);D.ea.push(b);z.b(Re,b.n);1==D.ea.length&&Cb(function(b){z.b(Re,b)})};D.uE=function(b){var c=xq(b),d=D.Uc(c.e());d?d.update(b):(D.ea.push(c),z.b(Re,c.n),1==D.ea.length&&Cb(function(b){z.b(Re,b)}))};D.pO=function(b){for(var c=0;c<D.ea.length;c++){var d=D.ea[c];if(d.e()==b){d.destroy();D.ea.splice(c,1);d=[b];if(1==D.ea.length&&D.ea[0].Ul()){var e=D.ea[0];e.destroy();D.ea=[];d.push(e.e())}z.b(Se,d)}}};D.V=function(){return D.Jk};D.Nx=function(){return _.map(D.ea,function(b){return b.n})};D.Uc=function(b){return _.find(D.ea,
function(c){return c.e()===b})||null};D.th=function(b){b!=D.t&&(D.t=b,z.b(Ve,b.k))};D.QG=function(){_.each(D.ea,function(b){b.RG()})};b.StationManager=D})(this);function Fs(b,c){this.g=b;this.w=this.g.attr("id").substr(7);this.jp=this.seekPercent=null;this.g.bind($.jPlayer.event.playing,r(this,function(){}));this.g.bind($.jPlayer.event.stalled,r(this,function(b){ye(this.track,b,"stall detected");b.jPlayer.status.paused||(100==b.jPlayer.status.seekPercent?(qe("PLAYLOG004: JPlayer.event.stall detected. Skipping","","0",v.i),k.info("TRACK IS TRUNCATED - SKIPPING"),this.sh("stuck audio on fully loaded file")):(k.info("Attempting to recover from stuck audio at ",
this.Sd),this.kc(this.Sd)))}));this.g.bind($.jPlayer.event.timeupdate,r(this,function(b){!this.Ja&&this.be&&0<b.jPlayer.status.currentTime&&(k.info("*** AudioPlayer("+this.w+"): event(timeupdate) -> willPlay == true"),this.be=!1,this.xj());var c=b.jPlayer.status.duration;b.jPlayer.flash.active&&"mp3"==b.jPlayer.status.formatType&&100>b.jPlayer.status.seekPercent&&(c=this.kb);z.b(Ek,{currentTime:b.jPlayer.status.currentTime,duration:c});var h=Fd();this.Ij||this.seekPercent==b.jPlayer.status.seekPercent||
(this.sr=h);this.seekPercent=b.jPlayer.status.seekPercent;if(b.jPlayer.flash.active&&!b.jPlayer.status.paused&&95>this.seekPercent&&null!=this.sr&&25E3<h-this.sr)k.info("TRACK IS STUCK - SKIPPING"),qe("PLAYLOG003: Flash Player stall detected, partially loaded file, skipping","","0",v.i),this.sh("stuck audio on partially loaded file");else{if(b.jPlayer.flash.active&&!b.jPlayer.status.paused)if(b.jPlayer.status.currentTime==this.Sd){if(this.Lh++,1<=b.jPlayer.status.currentTime&&null!=this.zd&&(this.zd.yt=
!0),1<=b.jPlayer.status.currentTime&&null!=this.track&&null!=this.track.Tb&&(null==this.jp||this.jp!=this.track.Tb)&&(this.jp=this.track.Tb,z.b(Ye,{audio_token:this.track.Tb})),3==this.Lh){if(100==b.jPlayer.status.seekPercent){h=100*b.jPlayer.status.currentTime/c;if(99<=h&&30>=c){k.info("Track is stalled near the end. Continuing with next track. Elapsed percentage: "+h);this.Lh=0;this.iv();return}k.info("TRACK IS TRUNCATED - SKIPPING");trackJs.console.log(["Truncated track skipping. - duration: "+
c," - currentTime: "+b.jPlayer.status.currentTime," - elapsedPercentage: "+h+"% "," - format: "+b.jPlayer.status.formatType].join(""));qe("PLAYLOG001: Flash Player stall detected fully loaded file, skipping","","0",v.i);this.sh("stuck audio on fully loaded file");return}k.info("Attempting to recover from stuck audio at ",this.Sd);this.kc(this.Sd);this.Lh=0}}else this.Lh=0;this.Sd=b.jPlayer.status.currentTime;this.yj(b.jPlayer.status.currentTime,c,b.jPlayer.status.currentPercentAbsolute);this.seeking&&
b.jPlayer.status.currentTime>=this.Ea&&ct(this)}}));this.g.bind($.jPlayer.event.loadedmetadata,r(this,function(b){k.info("*** AudioPlayer("+this.w+"): event(loadedmetadata)");z.b($g);this.yj(b.jPlayer.status.currentTime,b.jPlayer.status.duration,b.jPlayer.status.currentPercentAbsolute);ct(this)}));this.g.bind($.jPlayer.event.canplaythrough,r(this,function(){k.info("*** AudioPlayer("+this.w+"): event(canplaythrough)",this.seeking,this.vh);ct(this)}));this.g.bind($.jPlayer.event.progress,r(this,function(b){this.seeking&&
0<this.totalTime&&(k.info("*** AudioPlayer("+this.w+"): event(progress)",this.seeking,this.totalTime),b.jPlayer.status.seekPercent>this.Ea/this.totalTime*100&&ct(this))}));this.g.bind($.jPlayer.event.seeked,r(this,function(){k.info("*** AudioPlayer("+this.w+"): event(seeked)");ct(this)}));this.g.bind($.jPlayer.event.ended,r(this,function(){k.info("*** AudioPlayer("+this.w+"): event(ended)");this.uj()}));this.g.bind($.jPlayer.event.error,r(this,function(b){k.info("*** AudioPlayer("+this.w+"): event(error)");
this.sh(b)}));this.g.bind($.jPlayer.event.flashreset,r(this,function(){k.warn("jPlayer detected a Flash reset")}));this.g.bind($.jPlayer.event.play,r(this,function(){this.nf&&this.nf()}));this.Od=!1;this.Hy&&this.Hy(b,c)}f=Fs.prototype;
f.Zf=function(b,c){k.info("*** AudioPlayer("+this.w+"): setInUse",b);this.Od=b;this.track=c;this.cd=b?(new Date).getTime():null;this.ha=this.nf=null;this.Ga=0;this.dd=null;this.tb=this.Hj=this.Jj=!1;this.Lh=this.Sd=0;this.zd=null;this.rj=!1;this.kb=0;null!=c&&(c.ye()||(this.zd=new dt),this.kb=c.Vc())};f.zm=function(){var b=this.track;this.stop();b&&b.r().$k()};
f.load=function(b,c,d){k.info("*** AudioPlayer("+this.w+"): load",b,c,d);var e={};c||(c="m4a");null!=d&&(b+="&lo="+d);this.jw=b;e[c]=b;this.seekPercent=0;this.sr=null;this.Ij=!0;this.totalTime=this.elapsedTime=0;this.g.jPlayer("setMedia",e);null!=d&&0<d?(this.Ea=d,this.g.jPlayer("pause",d),this.seeking=!0,this.ik=this.vh=!1,this.g.jPlayer("volume",0)):(this.Ea=null,this.ik=this.vh=this.seeking=!1);(window._isInAudioJplayerHTML5Experiment||window._isInAudioHoldoutGroup)&&s("audio_track_playback_event",
{event_type:"LOADING",test_group:window._isInAudioHoldoutGroup?"holdout":"jPlayerHtml5",player_type:this.Mi?"flash":"html5",listener_id:window._listenerIdFromCookie,audio_token_id:this.track.Tb,audio_type:c,current_time:0,percent_loaded:0,track_length:this.kb},null);return this};f.Pe=function(b,c){void 0!==b&&sd(b)&&!isNaN(b)&&(this.Ga=b);this.updateVolume(c)};f.updateVolume=function(b){this.seeking||(b=this.rf(b),this.Bn?this.Bn(b):this.Gg(b))};
f.Gg=function(b){this.g.jPlayer("volume",b/100);0<b&&(this.cd=(new Date).getTime(),this.Ja=!1,this.bc())};f.rf=function(b){null==b&&(b=Km()?0:Jm());this.dd=b;var c=Math.round(Math.pow(10,this.Ga/20)*b*Ao());k.info("VOLUME--\x3e gain:",this.Ga,", volume:",b,", old adjusted:",Math.round(Math.pow(10,this.Ga/20)*b),", new adjusted:",c);return Math.min(100,c)};f.suspend=function(){k.info("*** AudioPlayer("+this.w+"): suspend");this.Ja=!0;this.g.jPlayer("volume",0);this.play();this.Oa();this.ik=!1};
f.play=function(){k.info("*** AudioPlayer("+this.w+"): play",this.seeking,this.Ea);this.seeking?this.ik=this.vh=!0:(this.Ij=!1,this.bc(),null!=this.Ea?(this.kc(this.Ea),this.Ea=null):this.kc())};f.stop=function(){k.info("*** AudioPlayer("+this.w+"): stop");this.Oa();this.tb||this.g.jPlayer("clearMedia");this.Zf(!1)};f.Ah=function(){k.info("*** AudioPlayer("+this.w+"): resume",this.seeking);this.seeking?this.vh=!0:(this.track.r().yc("playback_resumed"),this.bc(),this.kc())};
f.pause=function(b){b=!!b;k.info("*** AudioPlayer("+this.w+"): pause",this.seeking);this.seeking?this.vh=!1:(this.Oa(),this.Dl&&!b?this.Dl():this.g.jPlayer("pause"))};f.Wv=function(b){this.nf=b};f.kf=function(b){this.ha=b};
f.yj=function(b,c,d){b=Math.floor(b);0==this.totalTime&&0<c&&(this.totalTime=Math.floor(c),this.Ur());if(b!=this.elapsedTime&&this.track){c=Math.floor(c);this.elapsedTime=b;if(this.track.r().active){z.b(ef,{elapsedTime:null!=this.Ea?Math.max(this.Ea,b):b,totalTime:c,percentPlayed:d});var e=this.track.k instanceof Go&&this.track.k.we();Rm(this.track.o(),this.track.r().e(),b,c,e);null!=this.zd&&this.zd.yw(b,d,this.seekPercent);!this.rj&&10<this.elapsedTime&&null!=this.track&&null!=this.track.r()&&null!=
v.i&&(s("volume_setting",{volume:this.dd,gain:this.track.oc(),multiplier:Ao(),station_genre:this.track.r().Df(),music_id:this.track.o()},v.i),this.rj=!0)}!this.Jj&&75<d&&1<z.pe().li&&(this.track.r().Fz(),this.Jj=!0);!(this.Hj||this.track instanceof Rs)&&(0<this.totalTime?this.totalTime-this.elapsedTime<=F.Eu:d>=F.Du)&&(this.track.r().Ez(),this.Hj=!0)}};
function ct(b){k.info("*** AudioPlayer("+b.w+"): onSeekComplete",b.seeking,b.Ja);b.seeking&&(b.ik&&(b.Ja=!1),b.seeking=!1,b.Ja||(b.vh&&b.play(),b.updateVolume()))}f.uj=function(){k.info("*** AudioPlayer("+this.w+"): onAudioEnded",this.track);this.track&&Hs(this.track);this.Oa();this.track&&this.track.r().oa(!1);this.ha&&this.ha()};
f.sh=function(b){var c=_.isObject(b)&&b.jPlayer&&b.jPlayer.error||{message:c};ye(this.track,b);0!==this.Ff()||!this.track||this.track instanceof Rs||c.type===$.jPlayer.error.URL||z.b(Rh,{url:this.track.NE});(window._isInAudioJplayerHTML5Experiment||window._isInAudioHoldoutGroup)&&s("audio_track_playback_event",{event_type:c.type,test_group:window._isInAudioHoldoutGroup?"holdout":"jPlayerHtml5",player_type:this.Mi?"flash":"html5",listener_id:window._listenerIdFromCookie,audio_token_id:this.track.Tb,
audio_format:this.track.Sc(),current_time:this.Sd,percent_loaded:this.seekPercent,track_length:this.kb},null);z.b(ah,c);k.info("*** AudioPlayer("+this.w+"): onAudioError",this.track);this.tb=!0;this.track&&(this.track.tb=!0,this.track.r().Dm("Attempting to pause audio player"));this.ha&&this.ha(c)};f.xj=function(){k.info("*** AudioPlayer("+this.w+"): onPlaying",this.track);this.track&&this.track.r().th(this.track,this.totalTime);this.track.r().xr()};
f.Ur=function(){k.info("*** AudioPlayer("+this.w+"): onTotalTimeUpdated",this.track,this.totalTime);this.track&&this.track.r().hs(this.track,this.totalTime)};f.bc=function(){null!=this.ma||this.Ja||(this.ma=Ed())};f.Oa=function(){if(null!=this.ma){var b=Ed()-this.ma;this.ma=null;null!=v.i&&this.track&&this.track.r()&&wo(v.i,this.track.r().e(),b)}};f.kc=function(b){k.info("*** AudioPlayer("+this.w+"): doPlay",b);this.be=!0;this.g.jPlayer("play",b)};
f.Ff=function(){var b=null!=this.elapsedTime?this.elapsedTime:0;null!=this.Ea&&(b=Math.max(this.Ea,b));return b};f.iv=function(){this.track&&this.track.pause();this.uj()};function et(b){this.pL=!0;this.g=b;this.w=this.g.getAttribute("id").substr(7);this.mp=!1;this.seekPercent=null;this.g.addEventListener("playing",r(this,function(){}));this.g.addEventListener("timeupdate",r(this,function(){var b=this.g.duration,d=this.g.currentTime;this.track&&(this.seekPercent=100*ft(this)/this.track.Vc());!this.Ja&&this.be&&0<d&&(k.info("*** MediaElement("+this.w+"): event(timeupdate) -> willPlay == true"),this.be=!1,this.xj());z.b(Ek,{currentTime:d,duration:b});this.Sd=d;this.yj(d,
b,d/b*100)}));this.g.addEventListener("loadeddata",r(this,function(){k.info("*** MediaElement("+this.w+"): event(loadeddata)");var b=this.g.duration,d=this.g.currentTime;z.b($g);this.yj(d,b,d/b*100)}));this.g.addEventListener("canplay",r(this,function(){k.info("*** MediaElement("+this.w+"): event(canplay)",ft(this));this.Ij=!1;this.mp=!0;this.play()}));this.g.addEventListener("progress",r(this,function(){this.Od&&k.info("*** MediaElement("+this.w+"): event(progress)",ft(this))}));this.g.addEventListener("seeked",
r(this,function(){k.info("*** MediaElement("+this.w+"): event(seeked)")}));this.g.addEventListener("ended",r(this,function(){k.info("*** MediaElement("+this.w+"): event(ended)");this.uj()}));this.g.addEventListener("error",r(this,function(b){var d=null;null!=b&&null!=b.target&&(d=b.target.error);k.info("*** MediaElement("+this.w+"): event(error)",b);this.sh(d)}));this.g.addEventListener("play",r(this,function(){k.info("*** MediaElement("+this.w+"): event(play)");this.nf&&this.nf()}));this.Od=!1}
f=et.prototype;f.Zf=function(b,c){k.info("*** MediaElement("+this.w+"): setInUse",b);this.Od=b;this.track=c;this.cd=b?(new Date).getTime():null;this.ha=this.nf=null;this.Ga=0;this.dd=null;this.tb=this.Hj=this.Jj=!1;this.Lh=this.Sd=0;this.zd=null;this.rj=!1;this.kb=0;null!=c&&(c.ye()||(this.zd=new dt),this.kb=c.Vc())};f.zm=function(){var b=this.track;this.stop();b&&b.r().$k()};
f.load=function(b,c,d){k.info("*** MediaElement("+this.w+"): load",b,c,d);c||(c="m4a");null!=d&&(b+="&lo="+d);this.jw=b;this.seekPercent=0;this.Ij=!0;this.totalTime=this.elapsedTime=0;this.mp=!1;this.g.setSrc(this.jw);this.g.load();null!=d&&0<d?(this.Ea=d,this.g.setVolume(0)):this.Ea=null;s("audio_track_playback_event",{event_type:"LOADING",test_group:"MediaElement",player_type:"native"==this.g.pluginType?"html5":"flash",listener_id:window._listenerIdFromCookie,audio_token_id:this.track.Tb,audio_format:c,
current_time:0,percent_loaded:0,track_length:this.kb},null);this.g.play();return this};f.Pe=function(b,c){void 0!==b&&sd(b)&&!isNaN(b)&&(this.Ga=b);this.updateVolume(c)};f.updateVolume=function(b){b=this.rf(b);this.Bn?this.Bn(b):this.Gg(b)};f.Gg=function(b){this.g.setVolume(b/100);0<b&&(this.cd=(new Date).getTime(),this.Ja=!1,this.bc())};
f.rf=function(b){null==b&&(b=Km()?0:Jm());this.dd=b;var c=Math.round(Math.pow(10,this.Ga/20)*b*Ao());k.info("VOLUME--\x3e gain:",this.Ga,", volume:",b,", old adjusted:",Math.round(Math.pow(10,this.Ga/20)*b),", new adjusted:",c);return Math.min(100,c)};f.suspend=function(){k.info("*** MediaElement("+this.w+"): suspend");this.Ja=!0;this.g.setVolume(0);this.play();this.Oa()};
f.play=function(){k.info("*** MediaElement("+this.w+"): play",this.seeking,this.Ea);this.mp&&(this.Ij=!1,this.bc(),null!=this.Ea?(this.kc(this.Ea),this.Ea=null):this.kc())};f.kc=function(b){k.info("*** MediaElement("+this.w+"): doPlay",b);this.be=!0;0<b&&this.g.setCurrentTime(b);this.g.play()};f.stop=function(){k.info("*** MediaElement("+this.w+"): stop");this.Oa();this.Zf(!1)};f.Ah=function(){this.track.r().yc("playback_resumed");this.bc();this.kc()};
f.pause=function(b){b=!!b;k.info("*** MediaElement("+this.w+"): pause");this.Oa();this.Dl&&!b?this.Dl():this.g.pause()};f.Wv=function(b){this.nf=b};f.kf=function(b){this.ha=b};
f.yj=function(b,c,d){b=Math.floor(b);0==this.totalTime&&0<c&&(this.totalTime=Math.floor(c),this.Ur());if(b!=this.elapsedTime&&this.track){c=Math.floor(c);this.elapsedTime=b;if(this.track.r().active){z.b(ef,{elapsedTime:null!=this.Ea?Math.max(this.Ea,b):b,totalTime:c,percentPlayed:d});var e=this.track.k instanceof Go&&this.track.k.we();Rm(this.track.o(),this.track.r().e(),b,c,e);null!=this.zd&&this.zd.yw(b,d,this.seekPercent);!this.rj&&10<this.elapsedTime&&null!=this.track&&null!=this.track.r()&&null!=
v.i&&(s("volume_setting",{volume:this.dd,gain:this.track.oc(),multiplier:Ao(),station_genre:this.track.r().Df(),music_id:this.track.o()},v.i),this.rj=!0)}!this.Jj&&75<d&&1<z.pe().li&&(this.track.r().Fz(),this.Jj=!0);!(this.Hj||this.track instanceof Rs)&&(0<this.totalTime?this.totalTime-this.elapsedTime<=F.Eu:d>=F.Du)&&(this.track.r().Ez(),this.Hj=!0)}};
f.uj=function(){k.info("*** MediaElement("+this.w+"): onAudioEnded",this.track);this.track&&Hs(this.track);this.Oa();this.track&&this.track.r().oa(!1);this.ha&&this.ha()};
f.sh=function(b){var c=gt(null!=b?b.code:0);k.info("*** MediaElement("+this.w+"): onAudioError",c);s("audio_track_playback_event",{event_type:c,test_group:"MediaElement",player_type:"native"==this.g.pluginType?"html5":"flash",listener_id:window._listenerIdFromCookie,audio_token_id:this.track.Tb,audio_format:this.track.Sc(),current_time:this.g.currentTime,percent_loaded:100*ft(this)/this.kb,track_length:this.kb},null);ye(this.track,null,c);0!==this.Ff()||!this.track||this.track instanceof Rs||z.b(Rh,
{url:this.track.NE});z.b(ah,b);this.tb=!0;this.track&&(this.track.tb=!0,this.track.r().Dm("Attempting to pause audio player"));this.ha&&this.ha(b)};f.xj=function(){k.info("*** MediaElement("+this.w+"): onPlaying",this.track);this.track&&this.track.r().th(this.track,this.totalTime);this.track.r().xr()};f.Ur=function(){k.info("*** MediaElement("+this.w+"): onTotalTimeUpdated",this.track,this.totalTime);this.track&&this.track.r().hs(this.track,this.totalTime)};
f.bc=function(){null!=this.ma||this.Ja||(this.ma=Ed())};f.Oa=function(){if(null!=this.ma){var b=Ed()-this.ma;this.ma=null;null!=v.i&&this.track&&this.track.r()&&wo(v.i,this.track.r().e(),b)}};f.Ff=function(){var b=null!=this.elapsedTime?this.elapsedTime:0;null!=this.Ea&&(b=Math.max(this.Ea,b));return b};function gt(b){switch(b){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"UNKNOWN"}}
function ft(b){var c=0;0<b.g.buffered.length&&(c=b.g.buffered.end(0));return c}f.iv=function(){this.track&&this.track.pause();this.uj()};AudioPlayerFadeExtension={Pn:1,DB:2};
_.extend(Fs.prototype,{oe:null,volume:0.8,Ed:!1,El:null,Mj:50,Xp:200,wx:50,vQ:Fs.prototype.xj,BA:Fs.prototype.kc,CA:Fs.prototype.stop,DA:Fs.prototype.suspend,enabled:!1,Mi:!1,Hy:function(b,c){if(this.enabled=qp("enableAudioFade"))this.Mj=qp("quickFadeLength"),this.Xp=qp("extendedFadeLength"),this.wx=qp("flashPlayFadeLength"),this.ix=qp("extendedFadeType"),this.Mi=c,this.oe=b.jPlayerFade(k.enabled),this.g.bind($.jPlayer.event.play,r(this,function(){this.Ed&&(this.g.jPlayer("volume",0),this.oe.updateVolume(0))}))},
Dl:function(){this.enabled?(this.Ed=!0,this.El=AudioPlayerFadeExtension.DB,this.oe.out(this.Xp,this.volume/100,0,function(){this.g.jPlayer("pause")}.bind(this),this.ix)):this.g.jPlayer("pause")},suspend:function(){this.enabled?(this.Ed=!0,this.El=AudioPlayerFadeExtension.Pn,this.oe.out(this.Mj,this.volume/100,0,function(){this.DA()}.bind(this))):this.DA()},kc:function(b){0<b&&(this.Ed=!0,this.El=AudioPlayerFadeExtension.Pn);window._isInAudioJplayerHTML5Experiment?this.BA(b):this.BA()},stop:function(){this.enabled?
(this.Ed=!1,this.oe.out(this.Mj,this.volume/100,0,function(){this.CA()}.bind(this))):this.CA()},xj:function(){if(this.enabled&&this.Ed){var b,c;this.El===AudioPlayerFadeExtension.Pn?(b=this.Mj,c="linear"):(b=this.Mi?this.wx:this.Xp,c=this.Mi?"linear":this.ix);this.Ed=!1;this.oe["in"](b,0,this.volume/100,null,c)}this.vQ()},Bn:function(b){this.enabled?(this.volume=b,this.Ed&&b?(this.oe["in"](this.Mj,0,this.volume/100,function(){this.Gg(this.volume)}.bind(this)),this.Ed=!1):(this.oe.updateVolume(b/100),
this.Gg(this.volume))):this.Gg(b)}});function ht(b){this.g=b;this.w=this.g.attr("id").substr(7);this.track=null;this.Ga=0;this.dd=null;this.cd=(new Date).getTime();this.ha=null;this.seeking=this.Ja=!1;this.elapsedTime=null;this.be=!1;this.Yf=null;this.zc=0;this.Od=!1;this.g.bind($.jPlayer.event.playing,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.w+"): event(playing)",b);it(this)}));this.g.bind($.jPlayer.event.stalled,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.w+"): event(stalled)",b)}));this.g.bind($.jPlayer.event.timeupdate,
r(this,function(b){b=b.jPlayer.status;if(this.track.r().active){this.be&&!this.Ja&&(this.be=!1,it(this));var d=Math.floor(b.currentTime);this.elapsedTime=d;z.b(ef,{isLive:!0,elapsedTime:d,totalTime:b.duration,percentPlayed:b.currentPercentAbsolute})}}));this.g.bind($.jPlayer.event.loadedmetadata,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.w+"): event(loadedmetadata)",b)}));this.g.bind($.jPlayer.event.canplaythrough,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.w+"): event(canplaythrough)",
b)}));this.g.bind($.jPlayer.event.progress,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.w+"): event(progress)",b)}));this.g.bind($.jPlayer.event.ended,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.w+"): event(ended)",b)}));this.g.bind($.jPlayer.event.error,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.w+"): event(error)");b=b.jPlayer.error;this.tb=!0;this.track&&(this.track.tb=!0,this.track.r().Dm("JPlayerLivePlayer ERROR:"+b));this.ha&&this.ha(b)}));this.g.bind($.jPlayer.event.flashreset,
r(this,function(b){k.info("*** JPlayerLivePlayer("+this.w+"): event(flashreset)",b)}));this.g.bind($.jPlayer.event.play,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.w+"): event(play)",b)}))}f=ht.prototype;f.jh=function(){return null!=this.g&&!this.g.paused};f.Zf=function(b,c){k.info("*** JPlayerLivePlayer("+this.w+"): setInUse",b);this.Od=b;this.track=c;this.cd=b?(new Date).getTime():0;this.ha=null};
f.load=function(b){this.track=b;var c=b.Vc();b.k instanceof Jn&&(c-=Ed()-b.k.Hv);c*=1E3;null!=this.g&&(this.g.jPlayer("setMedia",{m3u8a:b.k.vD}),b=Math.min(864E5,c),this.zc=c-b,this.Yf=setTimeout(r(this,this.zj),b))};f.play=function(){null!=this.g&&this.g.jPlayer("play");this.be=!0};f.pause=function(){null!=this.g&&this.g.jPlayer("pause");this.Oa()};f.Ah=function(){this.play()};f.suspend=function(){this.Ja=!0;this.g.jPlayer("volume",0);this.play();this.Oa();this.ik=!1};
f.stop=function(){null!=this.g&&this.g.jPlayer("pause");this.Oa()};f.kf=function(b){this.ha=b};function it(b){b.track&&b.track.r().active&&b.track.r().th(b.track,0)}f.zj=function(){if(0<this.zc){var b=Math.min(864E5,1E3*this.zc);this.zc-=b;setTimeout(r(this,this.zj),b)}else null!=this.Yf&&clearTimeout(this.Yf),this.track&&this.track.r().active&&(this.Oa(),this.track&&this.track.r().oa(!1),this.ha&&this.ha())};f.Pe=function(b,c){void 0!==b&&sd(b)&&!isNaN(b)&&(this.Ga=b);this.updateVolume(c)};
f.updateVolume=function(b){this.seeking||(b=this.rf(b),this.g.jPlayer("volume",b/100),0<b&&(this.cd=(new Date).getTime(),this.Ja=!1,this.bc()))};f.rf=function(b){null==b&&(b=Km()?0:Jm());this.dd=b;var c=Math.round(Math.pow(10,this.Ga/20)*b*Ao());k.info("VOLUME--\x3e gain:",this.Ga,", volume:",b,", old adjusted:",Math.round(Math.pow(10,this.Ga/20)*b),", new adjusted:",c);return Math.min(100,c)};f.bc=function(){null!=this.ma||this.Ja||(this.ma=Ed(),Ls(this.track,this.ma))};
f.Oa=function(){if(null!=this.ma){var b=Ed(),c=b-this.ma;Ms(this.track,this.ma,b,c,0);this.ma=null;null!=v.i&&this.track&&this.track.r()&&wo(v.i,this.track.r().e(),c)}};f.Ff=function(){return null!=this.elapsedTime?this.elapsedTime:0};f.zm=function(){this.stop();this.track&&this.track.r().$k()};function jt(b){this.g=b;this.ha=this.track=null;this.dd=this.Ga=0;this.cd=(new Date).getTime();this.Qd=this.Ja=!1;this.kb=0;this.Yf=this.elapsedTime=null;this.Me=!1;this.wz=0;this.qj=this.ma=null;this.zc=this.Tp=this.tn=this.un=this.hl=0;this.Od=!1}function kt(b){return b.g&&b.g.getState?b.g&&b.g.getState():""}f=jt.prototype;f.jh=function(){return"playing"==kt(this)};f.Zf=function(b,c){k.info("*** StrobePlayer: setInUse",b);this.Od=b;this.track=c;this.cd=b?(new Date).getTime():0;this.ha=null};
f.load=function(b){this.track=b;this.kb=b.Vc();b.k instanceof Jn&&(this.kb-=Ed()-b.k.Hv);var c=1E3*this.kb;this.Qd=!0;this.g.setMediaResourceURL(b.k.vv);b=Math.min(864E5,c);this.zc=c-b;this.Yf=setTimeout(r(this,this.zj),b)};f.reload=function(){this.Qd||(this.Qd=!0,this.g.setMediaResourceURL(this.track.k.vv))};f.handleError=function(b){this.Qd=!1;3<=this.Tp++?(this.track&&(this.track.tb=!0,this.track.r().Dm("StrobePlayer ERROR:"+b)),this.ha&&this.ha(b),this.Tp=0):setTimeout(r(this,this.reload),1E3)};
function lt(b){try{var c=b.g.getBitrateForDynamicStreamIndex(b.g.getCurrentDynamicStreamIndex()),d=Ed();b.un+=0==b.hl?1:d-b.hl;b.hl=d;b.tn+=c}catch(e){}}f.play=function(){this.Me=!0;if(!this.Qd&&null!=this.g&&this.g.play2)try{this.g.play2()}catch(b){}};f.pause=function(){this.Qd||(this.wz=this.dd,this.updateVolume(0),this.Me=!1,this.Oa())};f.Ah=function(){this.Me=!0;this.Qd||(this.updateVolume(this.wz),this.bc())};f.suspend=function(){this.Me=!1;this.Ja=!0;if(null!=this.g&&this.g.pause)try{this.g.pause()}catch(b){}this.Oa()};
f.stop=function(){this.Me=!1;if(!this.Qd){if(null!=this.g&&this.g.pause)try{this.g.pause()}catch(b){}this.Oa()}};f.kf=function(b){this.ha=b};f.zj=function(){if(0<this.zc){var b=Math.min(864E5,1E3*this.zc);this.zc-=b;setTimeout(r(this,this.zj),b)}else null!=this.Yf&&clearTimeout(this.Yf),this.track&&this.track.r().active&&(this.Oa(),this.track&&this.track.r().oa(!1),this.ha&&this.ha())};f.Pe=function(b,c){void 0!==b&&sd(b)&&!isNaN(b)&&(this.Ga=b);this.updateVolume(c)};
f.updateVolume=function(b){if(this.Me||this.Ja)b=this.rf(b),null!=this.g&&this.g.setVolume&&this.g.setVolume(b/100),0<b&&(this.cd=(new Date).getTime(),this.Ja&&(this.Me=!0,this.reload()),this.Ja=!1)};f.rf=function(b){null==b&&(b=Km()?0:Jm());this.dd=b;var c=Math.round(Math.pow(10,this.Ga/20)*b*Ao());k.info("VOLUME--\x3e gain:",this.Ga,", volume:",b,", old adjusted:",Math.round(Math.pow(10,this.Ga/20)*b),", new adjusted:",c);return Math.min(100,c)};
f.bc=function(){null!==this.ma||this.Ja||(this.ma=Ed(),Ls(this.track,this.ma))};f.Oa=function(){if(null!=this.ma){var b=Ed(),c=b-this.ma;Ms(this.track,this.ma,b,c,this.tn/this.un);this.hl=this.un=this.tn=0;this.ma=null;null!=v.i&&this.track&&this.track.r()&&wo(v.i,this.track.r().e(),c)}};f.Ff=function(){return null!=this.elapsedTime?this.elapsedTime:0};f.zm=function(){this.stop();this.track&&this.track.r().$k()};function dt(){this.yt=!1;this.Zt=this.Ry=0}dt.prototype.yw=function(b,c,d){0<b&&0==b%10&&99>d&&(b=d-c,c=5>b&&b<this.Ry,0.5>b||c||this.yt?(this.Zt++,3==this.Zt&&z.b(qg)):this.Zt=0,this.Ry=b,this.yt=!1)};var mt=!1,nt=[],ot=[],pt={},qt=!1,rt=null,st=0,tt=0;
function ut(){var b=om(im),c=om(jm);if(null!=b&&null!=c){var d=b.start,c=c.seconds;s("live_tracking",{station_id:b.stationId,track_token:b.trackToken,track_start:(new Date(1E3*d)).format("yyyy-mm-dd HH:MM:ss",!0),track_end:(new Date(1E3*(d+c))).format("yyyy-mm-dd HH:MM:ss",!0),elapsed_seconds:c,event_type:"end",platform:"web",vendor_id:u,device_code:we,app_version:z.ba,device_os:se(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},v.i)}vm(im);vm(jm)}
function vt(){var b=$.jPlayer.prototype.play;$.jPlayer.prototype.play=function(c){if(this.status.cQ){var e=this.status.media.mp3;null==e&&(e=this.status.media.m4a);if(!isNaN(c)&&-1==e.indexOf("&lo="+c))return}b.call(this,c)};var c=$.jPlayer.prototype.pause;$.jPlayer.prototype.pause=function(b){if(this.status.cQ){var e=this.status.media.mp3;null==e&&(e=this.status.media.m4a);if(!isNaN(b)&&-1==e.indexOf("&lo="+b))return}c.call(this,b)}}
function wt(b){window._isInAudioMediaElementExperiment?xt(b):(st++,$('<div id="jPlayer'+st+'"></div>').css({width:0,height:0}).appendTo("body").jPlayer({wmode:"window",swfPath:z.pe().iw,solution:z.pe().al,supplied:b,ready:function(c){setTimeout(r(this,function(){yt($(this),b,c)}),0)},error:function(b){qt||(qt=!0,b.jPlayer.error.type==$.jPlayer.error.NO_SOLUTION&&z.b(dh,b.jPlayer.error.message))}}))}
function xt(b){st++;var c="MediaElement"+st;$("<audio preload='auto' id='"+c+"'></audio>").css({width:0,height:0}).appendTo("body");var d="native";0>z.pe().al.indexOf("html")&&(d="shim");new MediaElement(c,{enablePluginDebug:!0,plugins:["flash"],type:"audio/"+b,pluginPath:"/js/libs/MediaElement-2.20.1/",flashName:"flashmediaelement.swf",defaultVideoWidth:1,defaultVideoHeight:1,pluginWidth:1,pluginHeight:1,pluginVars:"isvideo=true&autoplay=true&wmode=window",mode:d,timerRate:500,success:function(c){setTimeout(r(this,
function(){if("m4a"==b||"mp3"==b){var d=new et(c);"m4a"==b?ot.push(d):"mp3"==b&&nt.push(d);!mt&&0<ot.length&&0<nt.length&&(mt=!0,rt&&rt())}}),0)},error:function(){qt||(qt=!0,z.b(dh,"something wrong?..."))}})}
function zt(){st++;var b="strobePlayer"+st,c="strobeMediaPlayback"+st;$('<div id="'+c+'"></div>').css({width:0,height:0,position:"absolute"}).appendTo("body");swfobject.embedSWF("/include/3rd-party/strobe/StrobeMediaPlayback.swf",c,1,1,"10.1.0",{},{src:"about:blank",controlBarMode:"none",streamType:"liveOrRecorded",verbose:!1,autoPlay:!1,expandedBufferTime:30,minContinuousPlayback:30,javascriptCallbackFunction:"strobeCallback"},{allowFullScreen:"false"},{id:b,name:b,"class":"strobeMediaPlayer"})}
function yt(b,c,d){"m4a"==c||"mp3"==c?(b=new Fs(b,d.jPlayer.flash.used),"m4a"==c?ot.push(b):"mp3"==c&&nt.push(b),mt||(d.jPlayer.flash.used&&k.info("AudioPlayer initialized: Using Flash audio for "+c),d.jPlayer.html.used&&k.info("AudioPlayer initialized: Using native HTML5 audio for "+c),0<ot.length&&0<nt.length&&(mt=!0,rt&&rt()))):"m3u8"==c?(b.attr("id"),new ht(b)):"f4m"==c&&(pt[b.id]=new jt(b))}
function Es(b){var c=null,d=null,e;if(b&&Js(b))e=_.map(pt,function(b){return b});else{d=b&&b.Sc()?b.Sc():"mp3";if("m4a"!=d&&"mp3"!=d)return k.error("No AudioPlayer for type "+d),null;e="m4a"==d?ot:nt}var h=_.select(e,function(b){return!b.Od});0<h.length?c=h.shift():(c=_.min(e,function(b){return b.cd}),c.zm());b instanceof Ns?c.Zf(!0,null):c.Zf(!0,b);0==h&&e.length<z.pe().li&&(b&&Js(b)?zt():null!=d&&wt(d));return c}
function At(){k.info("jplayer successfully initialized, resetting consecutive error count to 0");tt=0}function Bt(b){k.warn("jPlayer error (count: "+tt+"): "+b.message);tt++;5<=tt&&(k.warn("too many consecutive jplayer errors.  re-initializing jplayer"),z.b(bh),tt=0)}function Ct(){z.b(gi)}
window.strobeCallback=function(b,c,d){pt[b]?(b=pt[b],"timeupdate"!=c&&k.info("*** StrobePlayer: state="+b.g.getState()+", handleCallbackEvent",c,d),"emptied"==c?"ready"==kt(b)&&(b.Qd=!1,b.Me&&(b.play(),b.updateVolume(),lt(b))):"play"==c?b.track&&b.track.r().active&&(b.bc(),b.track.r().th(b.track,0)):"timeupdate"==c&&b.track.r().active&&(b.Tp=0,b.elapsedTime=Math.floor(d.currentTime),z.b(ef,{isLive:!0,elapsedTime:b.elapsedTime,totalTime:b.kb,percentPlayed:d.currentTime/b.kb}))):((c=$("#"+b))&&0<c.length&&
yt(c[0],"f4m",null),c[0].addEventListener("switchingChange","onStrobeDynamicStreamSwitch"),c[0].addEventListener("mediaError","onStrobeMediaError"))};window.onStrobeDynamicStreamSwitch=function(){lt(pt)};window.onStrobeMediaError=function(b,c,d){pt.handleError(d)};var $s={},Ps={};function Ys(b){if(null!=Ps[b.e()]){Ps[b.e()]=null;var c=Lm(b.e()),d=Fd()-c;null==c||36E5<d?Dt(b.e()):setTimeout(function(){Dt(b.e())},36E5-d)}}function Xs(b){Ys(b);var c;(c=null==v.i)||(c=0<=v.i.xt);return c?Mm(b.e())>=(null!=v.i&&null!=v.i.xt?v.i.xt:6):!1}function Dt(b){Et(b);$s[b]=setInterval(function(){Et(b)},36E5)}function Et(b){var c=Fd(),d=wl?om(Ql):null;null==d&&(d={});d[b]=c;um(Ql,d);Nm(b,0)};function Zs(b){var c=b.listeningTimestamp;b=b.monthlyListening;um(Ml,0);um(Nl,c);z.b(yf,b);c=v.i;null!=c&&"REGISTERED"==c.u&&(b=Math.round(Number(b)/60/60),b>=c.zr?(um(Al,c.jg),z.b(Af,b)):310<=b&&z.b(zf,b))};var Ft,Gt=null,Ht=null;function It(b){Ft=!1;var c=D.V();null!=c&&(Ft=c.jh());z.b(gi);Jt();var c=new Ns(b.url),d=Es(c);d.Pe(b.gain);d.kf(function(c){b.reachedEnd=!0;null!=c&&(b.isError=!0);z.b(hf,b);Ft&&z.b(ei)});d.load(c.url,"m4a").play();Gt=d;Ht=b}function Jt(){null!=Gt&&(Gt.stop(),Gt=null,Ht.reachedEnd=!1,z.b(hf,Ht),Ft&&z.b(ei))}function Kt(b){null!=Gt&&Gt.updateVolume(b)};function Lt(){this.Fo=0;this.ai=null;this.lj=!1;z.c(He,r(this,function(b){clearTimeout(this.ai);this.cf=null;null!=b&&b.XN&&this.cr()}));z.c(ef,r(this,function(){this.lj=!0}));z.c(ei,r(this,function(){this.lj=!0}));z.c(gi,r(this,function(){this.lj=!1}));z.c(bk,r(this,function(){this.lj=!0}))}
Lt.prototype.cr=function(){var b=v.i;null!=b&&(clearTimeout(this.ai),this.cf=null,b=hex_md5(b.s).toUpperCase(),this.wb("https://lt500.tritondigital.com/lt?sid=9718&vid="+b,r(this,function(b){b=Mt(b);var d=b.valid;this.ed(!d,"newSession",null);d?(this.Fo=0,this.cf=b.guid,this.Eo=b.intervalSeconds,this.ai=de(this,this.No,1E3*b.intervalSeconds)):(this.Fo++,10>this.Fo&&de(this,this.cr,5E3))})))};
function Mt(b){var c;null!=b&&rd(b)&&0!=b.indexOf(",")?(c=b.split(","),b=parseInt(c[0],10),c=c[1]):c=b=null;var d=!(isNaN(b)||null==c||0==c.length);d&&c.indexOf("\n")==c.length-1&&(c=c.substring(0,c.length-1));return{intervalSeconds:b,guid:c,valid:d}}
Lt.prototype.No=function(){if(this.lj)if(null==this.cf)this.cr();else{var b=(new Date).getTime();this.wb("https://lt500.tritondigital.com/lt?guid="+escape(this.cf),r(this,function(c){c=Mt(c);c.valid?(this.ed(!1,"ping",this.cf),this.Eo=c.intervalSeconds):this.ed(!0,"ping",this.cf);this.ai=de(this,this.No,1E3*this.Eo-((new Date).getTime()-b))}));this.xv=(new Date).getTime()}else null!=this.xv&&18E4<(new Date).getTime()-this.xv&&(this.cf=null),this.ai=de(this,this.No,1E3*this.Eo)};
Lt.prototype.wb=function(b,c){var d="",e=v.i;null!=e&&(d=e.J()?1:0,d="&yob="+e.ri+"&gender="+jo(e)+"&zip="+e.Eb()+"&hasads="+d+"&devcat=WEB&devtype=WEB");b+=d+"&cb="+je();Hp(b,c,c)};Lt.prototype.ed=function(b,c,d){var e=v.i;null!=e&&5>e.s%100&&s("ando",{event:c,is_error:b,birth_year:e.ri,gender:jo(e),zip:e.Eb(),guid:d,vendor_id:"100",device_code:"1880",app_version:z.ba,device_os:se(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},e)};var Nt=0;function Vs(b){this.Ky=b.initiateEvent;this.sG=b.eventArgs;this.Vo=b.ackEvent;this.Pv=b.ackEventCallback;this.Gs=b.responseEvent;this.mw=b.bailOutEvent;this.UE=b.bailOutPeriod?b.bailOutPeriod:2E3;this.Wa=b.callback||$.noop;this.fL=++Nt;k.debug("UIActivityManager : creating instance: "+this.fL);this.Tx=!1}
function Us(b){b.Tx?k.error("UIActivityManager : handoff called more than once!"):(b.Tx=!0,b.Gs&&b.Ky?(b.qi=setTimeout(r(b,function(){this.Wa?(k.debug("UIActivityManager : bailing out.."),this.mw&&z.b(this.mw),this.Wa(),this.Wa=null):k.debug("UIActivityManager : bailout cancelled since the callback has already been handled.")}),b.UE),b.Vo&&z.c(b.Vo,r(b,function(){k.debug("UIActivityManager : ACK event ..");clearTimeout(this.qi);this.qi=null;z.pa(this,this.Vo);this.Pv&&this.Pv()})),z.c(b.Gs,r(b,function(){this.Wa?
(k.debug("UIActivityManager : RESPONSE event .."),this.qi&&(clearTimeout(this.qi),this.qi=null),z.pa(this,this.Gs),this.Wa.apply(null,arguments),this.Wa=null):k.debug("UIActivityManager : RESPONSE event cancelled, callback has been handled.")})),z.b(b.Ky,b.sG)):b.Wa())}function Ss(b,c){Us(new Vs({initiateEvent:Ze,eventArgs:b,responseEvent:$e,callback:c}))};var F={};
(function(b){function c(b){if(b.callback){var c=b.callback;if(b.ads){var d=D.V(),e=d.n;Ia(function(b){b?(p(e,b),d.qx(!0,c)):(k.debug("No AudioAdTracks to add to queue: "+b),c())},b.ads)}else c()}else k.error("AudioAdReadyForCache handler did not receive a callback for indicating when process completes! This could potentially block playback.")}function d(b){return 0>=F.rb.length?!1:C.Da()?!0:b&&!F.mf?(k.debug(0<"Have cached ad - "+F.rb.length),k.debug("isnt User init - "+!b),k.debug("is test mode - "+F.mf),
k.debug("Returning null - no ad will be played"),!1):!0}function e(b,c){var d=[];if(_.isArray(c))for(var e=0;e<c.length;e++){var h=c[e];h.lb==nb?ua(h.k):h.lb!=Bb&&h.lb!=tb||d.push(h)}0<d.length?b(d):b(null)}function h(b,c){if(null===c)b(null);else{var d=D.V().n,e=!1;d.Cb()?d._delayedInStationAd&&(e=!0):c.k.Pw&&(e=!0);e?(F.bf=c,F.ud=Ed()):F.vs();c.lb==nb?(ua(c.k),b(null)):c.lb==Bb||c.lb==tb?(e=d.Cb()&&d._adIntervalMinutes?d._adIntervalMinutes:c.k.RL,d=F.Tl(d.e()),1==d.wf&&(d.Sv=e),b(c)):b(null)}}function l(b){F.ug=
Ed();F.ud=0;F.ef=0;F.tg=0;F.sg=0;F.uo=0;F.Gk=0;F.Fk=!1;null!=b&&(b.Et&&(F.mo=b.Et,F.Ek=b.Et),b.Gt&&(F.lo=b.Gt,F.Dk=b.Gt))}function p(b,c){if(C.Da()?!F.Lo:1){var d=C.za(b);if(C.Da())if(null!=c){k.debug("Chronos - Fetch Audio Ad has returned a chronos related response, pushing it onto the _cachedAds array... ("+c.length+")");for(var e in c){var h=c[e];k.debug("pushing - ",h);F.rb.push(h)}}else k.debug("Chronos - Fetch Audio Ad has returned "+c);else F.rb.push(c);d?(d=!1,d=C.Da()?null!=c&&0<c.length&&
c[0].lb==nb:null==c||c.lb==nb,e=F.Tl(b.e()),1<e.wf&&d?(k.debug("Advertiser station: resetting ad index "+(C.Da()?"(Chronos)":"(non-chronos)")),e.wf=1,pa(!1,null,function(b){C.Da()?(k.debug("Advertiser station: Pushing "+b.length+" ads onto _cachedAds"),0<b.length&&F.rb.push(b[0])):(k.debug("Advertiser station: Pushing 1 ad onto _cachedAds"),F.rb.push(b));I()})):I()):(C.Da()||E(c),I())}else I()}function q(b){b&&b instanceof Eo||(F.We=[]);b&&(b instanceof Eo?(F.vo=!0,ua(b)):F.Lk&&(T("Playlist playback continued before Ad was received. Will ignore audio ad response until next opportunity."),
F.Lo=!0))}function t(b){b&&!b.hb()&&(F.tg=Ed(),ta())}function y(){ta();var b=D.V();b&&C.za(b.n)?F.ei(Cb):F.ei(bb)}function E(b){if(b){var c=b.k.Lm,d=Fo(F.We[0]);if(c&&(!d||d.Wm!=c.Wm||d.position<=c.position)){c=[];b=b.k.Lm;for(d=b.position;d<b.size;d++)c.push((new wp(d+1,b.size,b.Wm)).Ef());F.We=c;T("Generated "+c.length+" _adPodTokens: ",F.We)}}}function I(){z.b(Pk);F.Lk=!1;F.Lo=!1;C.Da()||F.oh()}function N(){if(!v.i||!v.i.J())return!1;var b=v.i.ue();if(!C.Da()&&b&&0!=F.We.length)return!0;var c=
Ed(),d=!1,e=D.V().n;C.Da()?(T("Chronos is enabled"),d=F.vg):C.za(e)?(b=F.rg[e.e()])&&c>F.ud+60*b.Sv&&(d=!0):(d=b?F.Dk:F.lo,b=b?F.Ek:F.mo,d=F.vg&&c>F.sg+F.oo&&c>F.ug+d&&c>F.ud+b&&c>F.tg+F.po&&c>F.ef+F.no);!F.mf||D.t instanceof Rs||(T("Test mode enabled"),d=!0);T("Ready for Audio ad: : now : "+c+" : since start : "+(c-F.ug)+" : since sv : "+(c-F.sg)+" : since lv : "+(c-F.tg)+" : since la : "+(c-F.ud)+" : since ld : "+(c-F.ef)+" : _userActive : "+F.vg+" : _cachedAds : "+F.rb.length+" : delayed ISA : "+
(null!=F.bf)+" : ready : "+d);return d}function U(b,c,d,e,h){if(null==c||0==c.length)T("Web audio ad is null or empty"),zp("Audio ad was blocked",F.$e,"Web audio ad is null or empty",F.ci),b(null);else if(c==C.Uh)b(null);else{F.AL=Ed();d=C.Cj(c,F.ci,F.$e);var l=d.moathearability;null!=l&&(F.gd=l);d.adToken=e;d.adRequestMetaData=h;d.isInStationAd=F.$e==Cb;c=F.Dx(d,c);T("Got AudioAdTrack: ",c);b(c)}}function pa(b,c,d){if(v.i&&v.i.J()){var e=v.i.s,e={segment:e.charAt(e.length-1)},h=!C.za(D.V().n),l=
v.i,l=v.uc()&&!l.p();h&&l&&(e.index=C.Zk);if(h=D.V()){C.za(h.n)&&(l=F.Tl(h.e()),e.isa=l.wf,k.debug("_sendAdRequest, isa="+e.isa));l=h.n;l.La()&&(e.playlist=l.La());C.fg(e,D.V().n,D.Nx());C.Oe(e);d=C.Da()?_.bind(Ia,null,d):_.bind(U,null,d);var p=B.Ri();C.Da()?(h=h.fH(),h||(h=D.t),C.Yz({currentStationData:l,options:e,adToken:c,callback:d,forcedAudioAd:F.tv,lastDisplayAdTime:F.ef,requestType:p,subZone:F.ci,currentSize:F.$e,isInStationAd:F.$e==Cb,currentStationTrack:h,currentStationTrackType:null==h?
"":h.k.So,isUserInitiated:b,handlerType:Td})):C.EO(p,e,c,h.n.e(),d,d)}else T("No station available for ad flow."),d(null)}else T("Attempt to send audio ad request when ads are disabled"),d(null)}function Ia(b,c){if(c===C.Uh)return b(null),!1;var d=[];_.each(c,function(b){var c=b.response;"AUDIO_AD"!==c.adType?k.error("Received Audio Ad of incorrect type: "+c.adType):d.push(F.Dx(b.parsedContent,b.content))});b(d);return 0<d.length}function fb(b,c){T("Impression of urlType '"+c+"' failed: "+b.message)}
function gb(b){T("Impression of urlType '"+b+"' succeeded.");"tracking"==b&&(C.Da()||F.oh())}function ua(b){F.FA&&(F.gp||(F.gp=0),F.gp+=1);C.za(D.V().n)||C.VK();C.wb(b,gb,fb)}function ta(){F.rb=[];F.bf=null;T("Flush")}function T(b){if(!k.enabled){var c=Array.prototype.slice.call(arguments,0);"Chrome"==BrowserDetect.browser||"Firefox"==BrowserDetect.browser?(c.unshift("color:green"),c.unshift("%cAudioAdManager : ")):c.unshift("AudioAdManager : ");"Explorer"!=BrowserDetect.browser&&k.debug.apply(k,
c)}}var nb="HOUSE",Bb="PLAYLIST",tb="DEVICE_AD",Td="AUDIO",bb=yp.AUDIO_AD_SIZE,Cb=yp.AUDIO_IN_STATION_AD_SIZE;F.init=function(){F.mf=!!cp()||"true"==gp()||"true"==A._data.audioAdTestMode;F.Eu=F.mf?1E4:yp.PRELOAD_SECONDS;F.Du=F.mf?0:yp.PRELOAD_PERCENTAGE;F.ug=Ed();F.lo=hp();F.Dk=hp();F.no=So(A._data.timeBetweenDisplayAndAudioAd,5);F.po=So(A._data.timeBetweenVideoAndAudioAd,60);F.mo=ip();F.Ek=ip();F.oo=120;F.ud=0;F.ef=0;F.tg=0;F.sg=0;F.vg=!0;F.ci="tuner";F.ei(bb);F.tv=cp()||"";F.rb=[];F.bf=null;F.We=
[];F.Lk=!1;F.rg={};F.vo=!1;F.Gk=0;F.KC="pandora5413215442154";F.JC=document.getElementById("playerBar");F.gd=null;F.lf=0;F.Kt=!1;F.Mc=!1;F.Wo=!1;F.Xo=!1;F.Yo=!1;F.vm=null;F.uo=0;F.Fk=!1;F.Lo=!1;z.c(He,r(F,l));z.c(ni,r(F,y));z.c(Ik,r(F,function(b){F.vg=b}));z.c(Zf,r(F,function(){F.sg=Ed();ta()}));z.c(Vk,r(F,t));z.c(Uk,r(F,t));z.c(Jk,r(F,function(){F.ef=Ed()}));z.yh(Ve,r(F,q));z.c(Rk,r(F,c));z.c(Ve,r(this,function(b){b&&b instanceof Eo&&null!=F.gd?F.Kt=!0:F.Sz()}));z.c(Ek,r(this,function(b){if(F.Kt&&
null!=F.gd){var c=Math.floor(b.currentTime);!F.Mc&&0==F.lf&&1>c?(F.lf=b.duration,F.vm=F.bL(),F.Mc=!0,F.Dd("AdAudioStart",Jm()/100)):F.Mc&&!F.Wo&&c==Math.floor(F.lf/4)?(F.Wo=!0,F.Dd("AdAudioFirstQuartile",Jm()/100)):F.Mc&&!F.Xo&&c==Math.floor(F.lf/2)?(F.Xo=!0,F.Dd("AdAudioMidpoint",Jm()/100)):F.Mc&&!F.Yo&&c==Math.floor(3*F.lf/4)&&(F.Yo=!0,F.Dd("AdAudioThirdQuartile",Jm()/100))}}));z.c(We,r(this,function(b){F.Mc&&null!=F.gd&&(0==b.remaining_seconds?F.Dd("AdAudioComplete",Jm()/100):F.Dd("AdStopped",
Jm()/100),F.Sz())}));z.c(ei,r(this,function(){F.Mc&&null!=F.gd&&F.Dd("AdPlaying",Jm()/100)}));z.c(gi,r(this,function(){F.Mc&&null!=F.gd&&F.Dd("AdPaused",Jm()/100)}));z.c(qi,r(this,function(b){F.Mc&&null!=F.gd&&F.Dd("AdVolumeChange",b/100)}))};F.Sz=function(){F.Kt=!1;F.Mc=!1;F.Wo=!1;F.Xo=!1;F.Yo=!1;F.gd=null;F.vm=null;F.lf=0};F.sH=function(){return{level1:F.Yg("Level1"),level2:F.Yg("Level2"),level3:F.Yg("Level3"),level4:F.Yg("Level4"),slicer1:F.Yg("Slicer1"),slicer2:F.Yg("Slicer2")}};F.Yg=function(b){try{var c=
F.gd.indexOf(b),d=F.gd.substring(c+b.length+1),c="&";"Slicer2"==b&&(c='"');return d.substring(0,d.indexOf(c))}catch(e){return""}};F.Dd=function(b,c){null!=F.vm&&F.vm.dispatchEvent({type:b,adVolume:c})};F.bL=function(){var b=F.JC,c=F.sH(),d=F.lf,e=F.KC,h=window.location.protocol,l="https:"===h?"z":"js",p=document.createElement("script"),q=[],c={adData:{ids:c,duration:d,url:""},dispatchEvent:function(b){this.sendEvent?(q&&(q.push(b),b=q,q=!1),this.sendEvent(b)):q.push(b)}},d="_moatApi"+Math.floor(1E8*
Math.random());window[d]=c;p.type="text/javascript";b&&b.insertBefore(p,b.childNodes[0]||null);p.src=h+"//"+l+".moatads.com/"+e+"/moatvideo.js#"+d;return c};F.reset=function(){z.pa(F)};F.ei=function(b){F.$e=b;z.b(Qk,{size:b})};F.Tl=function(b){var c=F.rg[b];c||(c=new Ot,F.rg[b]=c);return c};F.WK=function(b){var c=F.Tl(b);c.wf++;k.debug("Incremented current ad index to "+c.wf+" (on "+b+")")};F.oh=function(){if(F.Lk)return!0;if(!N())return T("loadAudioAd: not ready for ads yet."),!1;if(0<F.rb.length&&
0==F.We.length)return T("loadAudioAd: audio ad(s) have been cached"),!1;if(F.bf)return F.rb=[F.bf],F.bf=null,T("loadAudioAd: had a _delayedInStationAd, moving it to _cachedAds."),!0;var b="none",c=D.V(),d=c.n,e=C.za(d);!C.Da()&&v.i.ue()&&c.oA()?b=F.We.shift():e&&F.ei(Cb);F.Lk=!0;pa(!1,b,_.bind(p,null,d));return!0};F.hH=function(b){F.Sl(!1,function(c){null!=c?b(c):b(null)})};F.FO=function(b){var c=b.n,d=F.rg[c.e()];d?(d.wf=1,F.rb=[],F.bf=null,F.rg[c.e()]=d,T("Reset the ISA sequence for ",b,F),F.oh()):
T("Tried to reset the ISA sequence for a station, but it had no ad data.",b,F.rg)};F.vH=function(){return F.rb.length};F.Pi=function(b){if(!d(b))return null;b=F.rb.shift();if(!b)return k.debug("Ad is null"),k.debug("Returning null - no ad will be played"),null;F.vs();var c=b.k;if(b.lb==nb)return k.debug("house ad, registering impression"),ua(c),k.debug("Returning null - no ad will be played"),null;if(b.lb!==Bb&&b.lb!==tb)return k.debug("ad isn't correct type"),k.debug("Returning null - no ad will be played"),
null;T("Elapsed time since ad fetch and playback: "+(Ed()-F.AL)+" seconds");F.vo=!1;F.uo++;F.Fk||setTimeout(function(){!F.vo&&c&&(F.Gk++,zp("Audio ad fail","Audio","Audio ad failed to play - "+c.lb+" - "+c.vf,"radio",v.i),!F.Fk&&F.uo==F.Gk&&2700<Ed()-F.ug&&(F.Fk=!0,zp("Audio ads failed","Audio","Audio ads failed - "+F.Gk+" - "+v.i.s,"radio",v.i)))},8E3);k.debug("Returning an ad for playback");return b};F.vs=function(){F.ud=Ed()};F.Sl=function(b,c){F.ei(Cb);var d;d=C.Da()?_.bind(e,null,c):_.bind(h,
null,c);pa(b,"none",d)};F.I3=function(){return F.ud};F.Dx=function(b,c){var d=new Rs(b,D.V());if(b.type==Bb){T("PLAYLIST audioAd",b);d.dl=d.dl.replace("__AUTH_TOKEN__",encodeURIComponent(""+$n()));var e=d.k.ub().replace("__AUTH_TOKEN__",encodeURIComponent(""+$n()));d.k.Pb=e}else b.type==nb?T("HOUSE audioAd",b):b.type==tb?b.creative_token&&0!==b.creative_token.length?(T("DeviceAd audioAd : "+b.creative_token,b),e="/util/mediaserverPublicRedirect.jsp?at="+encodeURIComponent(""+$n())+"&ct="+encodeURIComponent(b.creative_token),
d.dl=e+"&type=audio",d.k.Pb=e+"&type=tile"):(T("DeviceAd audioAd : HOUSE - Converting to TYPE house",b),d.lb=nb):(T("chronos - UNKNOWN audioAd: "+b.type,b),c&&0!=c.indexOf("<a target=")&&(T("chronos - Unknown Web AudioAd type "+c),zp(c,F.$e,"chronos - Unknown Web AudioAd type ",F.ci)));return d};F.F3=function(){var b=Math.floor((new Date).getTime()/1E3);return"Ready for Audio ad:\n : now : "+b+"\n : since start : "+F.ug+"\n : since sv : "+F.sg+"\n : since lv : "+F.tg+"\n : since la : "+F.ud+"\n : since ld : "+
F.ef+"\n : _userActive : "+F.vg+"\n : _cachedAds : "+F.rb.length+"\n : RPCService.listenerData.isAdPodEligible() :"+v.i.ue()+"\n : AudioAdManager._TIME_BETWEEN_AUDIO_AD_PODS: "+F.Ek+"\n : AudioAdManager._TIME_BETWEEN_AUDIO_ADS:"+F.mo+"\n : AudioAdManager._MIN_AD_POD_START_INTERVAL : "+F.Dk+"\n : AudioAdManager._MIN_AD_START_INTERVAL : "+F.lo+"\n : AudioAdManager._TIME_BETWEEN_DISPLAY_AUDIO_ADS : "+F.no+"\n : AudioAdManager._TIME_BETWEEN_VIDEO_AUDIO_ADS : "+F.po+"\n : AudioAdManager._TIME_BETWEEN_SVN_AUDIO_ADS : "+
F.oo+"\n ready = AudioAdManager._userActive \n\t&& now > AudioAdManager._lastSvnInteractionTime + AudioAdManager._TIME_BETWEEN_SVN_AUDIO_ADS \n&& now > AudioAdManager._startTime + minAdStartInterval \n&& now > AudioAdManager._lastAudioAdTime + timeBetweenAudioAds \n&& now > AudioAdManager._lastVideoAdTime + AudioAdManager._TIME_BETWEEN_VIDEO_AUDIO_ADS \n&& now > AudioAdManager._lastDisplayAdTime + AudioAdManager._TIME_BETWEEN_DISPLAY_AUDIO_ADS \n \tready ="+F.vg+" \n \t \t"+b+" > "+(Number(F.sg)+
Number(F.oo))+" \n \t \t"+b+" > "+(Number(F.ug)+Number(F.Dk))+" \n \t \t"+b+" > "+(Number(F.ud)+Number(F.Ek))+" \n \t \t"+b+" > "+(Number(F.tg)+Number(F.po))+" \n \t \t"+b+" > "+(Number(F.ef)+Number(F.no))+" \n"};b.AudioAdManager=F})(this);var Pt=null,Qt=!0,Rt=null;function St(){z.c(Sk,Tt);z.c(Tk,Ut);z.c(Vk,Vt);z.c(Dk,function(b){Ws("return",b)});z.c(ji,function(b){var c=D.t;null!=c&&null!=c.k&&c.k.o()!=b||Ws("thumbsdown")});z.c(aj,function(){Ws("move")})}function Ws(b,c){null!=Pt?(zp("Video",b,"callback hasn't completed","radio"),c&&c()):(Pt=c||null,Qt=!0,Rt=setTimeout(Wt,5E3),z.b(Xk,{interaction:b,currentTrack:D.t}))}function Tt(){Qt=!1;Rt&&(clearTimeout(Rt),Rt=null)}
function Ut(b){Qt=!1;Rt&&(clearTimeout(Rt),Rt=null);b&&b.ad||(Pt&&Pt(),Pt=null)}function Vt(b){b&&b.hb()||(Pt&&Pt(),Pt=null)}function Wt(){Qt&&(Pt&&Pt(),Pt=null)};function Rs(b,c){this.wd=b;this.wd["class"]="AudioAdTrack";this.h=c;this.k=new Eo(b);this.dl=b.audio;this.Wt=this.Is="";this.Li=b.gain;this.tb=!1;this.lb=b.type;this.Li=""==this.Li||isNaN(Number(this.Li))?null:Number(this.Li)}vd(Rs,Cs);Rs.prototype.My=function(){return!0};Rs.prototype.Sc=function(){return"mp3"};Rs.prototype.Nl=function(){return this.dl};Rs.prototype.oc=function(){return this.Li};function Ot(){this.Sv=0;this.wf=1;this.Wk=[]};var Xt;Xt=function(b){$.ajax({dataType:"json",url:"/radioAdEmbed.html",complete:function(c,d){b("error"===d)}})};function Yt(b){var c=b.track.k;"skipped"==b.reason&&c instanceof Go&&z.b(uk,{artistMessageId:c.Qb,artistUid:c.he,metric:m.zb.rC(),isOnDemand:c.we(),shareUrlType:qp("sut")})}function Zt(b){b instanceof Go&&!b.uv&&(b.uv=!0,z.b(uk,{artistMessageId:b.Qb,artistUid:b.he,metric:m.zb.nB(),isOnDemand:b.we(),shareUrlType:qp("sut")}))};var Ts=null;function $t(){z.c(He,function(b){au(b)});z.c(Ie,function(b){au(b)});z.c(jl,function(b){b=bu(b);b instanceof $p&&cu(b,!1);Ts=b});z.c(kl,function(b){b=bu(b);b instanceof $p&&cu(b,!0);Ts=b});z.c(ll,function(){null!=Ts&&Ts instanceof $p&&z.b(nl);Ts=null;null!=v.i&&(v.i.Gn=null)});z.c(nl,function(){Ts=null;null!=v.i&&(v.i.Gn=null)})}function au(b){b.J()||null==Ts?b.Gn&&z.b(kl,b.Gn):z.b(ll)}
function cu(b,c){var d=v.i;if(d.J()){null!=Ts&&Ts instanceof $p&&z.b(nl);var e=b.GD;if(!c&&e){var h=!1,l=D.V();null!=l&&(h=l.jh());l=Es();l.load(e,"mp3");var p=function(){h&&z.b(ei)};l.kf(p);z.b(gi,!1);z.b(Qi);var q=!1;setTimeout(function(){q||(z.b(ml,b),q=!0,p())},5E3);l.Wv(function(){q||(setTimeout(function(){z.b(ml,b)},100),q=!0)});z.c(ah,function(){z.pa(this,ah);p()});l.play();s("value_exchange",{action:"vx_lead_in_audio_played",line_id:b.Yh,creative_id:b.Ic,offer_name:b.Nk,truex_instance_id:b.To,
vendor_id:u,device_id:we},d)}else z.b(ml,b)}}function bu(b){if(!b)return null;var c=b.offerName;if(!c)return null;var d=null;0==c.indexOf("uninterrupted")&&(d=new $p(b));return d};function bt(b){P.call(this,b);this.Hp=this.Xf=!1;this.He=null;this._tracks=[];for(var c=0;c<b.tracks.length;c++)this._tracks.push(new du(b.tracks[c],this));this.stationData=this.n=new Dn(b,_.map(this._tracks,function(b){return b.k}));this.js();this._tracks=[]}vd(bt,P);f=bt.prototype;f.js=function(){};f.start=function(b){b||!this.Ib&&!this.Oc?this.Zj(b):this.qf(!0,!1,r(this,function(){this.Xf=!0}))};f.Tz=function(){this.Zj()};
f.Zj=function(b){this.active=!0;(new Date).getTime()>=this.n._expiration.getTime()?(b=$.extend({},{stationStart:!0,isOnDemand:!0,stationId:this.e(),didExpire:!0}),z.b(Nh,b)):(this.dn=this.paused=!1,b?(this.Ib=this.Ee=this.Oc=!1,this.xc(r(this,function(){if(0<this._tracks.length)this.oa(!0);else{k.warn("CustomContentStation.start tried to play a custom content station with no tracks");var b=$.extend({},{stationStart:!0,isOnDemand:!0,stationId:this.e(),customContentStation:!0});z.b(Nh,b)}}),b)):null==
this.t||this.Ib?(this.Ib=!1,0==this.I.length?this.xc(r(this,function(){if(0<this._tracks.length)this.oa(!0);else{k.warn("CustomContentStation.start tried to play a custom content station with no tracks");var b=$.extend({},{stationStart:!0,isOnDemand:!0,stationId:this.e(),customContentStation:!0});z.b(Nh,b)}})):this.oa(!0)):this.lk())};
f.oa=function(b){_.isUndefined(b)&&(b=!0);k.info("[CustomContentStation.playNextTrack] ",this.n.ca(),b);0==this.I.length&&(this.Oc=!0);if(this.active&&!this.Dc)if(this.Dc=!0,this.qr=!this.t||this.t instanceof Hn||this.t.k.Jc?null:this.t.o(),this.Kh(),(new Date).getTime()>=this.n._expiration.getTime()){this.Dc=!1;var c=$.extend({},{stationStart:!0,isOnDemand:!0,stationId:this.e(),didExpire:!0});z.b(Nh,c)}else this.Ee||this.Oc?(this.Ee=this.Oc=!1,this.Ib=!0,this.Dc=!1,this.Je?z.b(vg,this.e()):this.qf(!1,
!1,r(this,function(){this.Xf=!0}))):Ss({userInitiated:b},r(this,function(){if(this.La()&&this.Rg)F.hH(r(this,function(c){c&&(c.h=this,this.n._delayedInStationAd||this.I.splice(0,0,c));this.Fg(b)})),this.Rg=!1;else{var c;if(c=this.Hp?F.Pi(!1):F.Pi(!0===b))c.h=this,this.I.splice(0,0,c);this.Fg(b)}this.Hp=!1}))};
f.Fg=function(b){if(this.active)if(0<this.I.length){var c=this.I.shift();c instanceof Rs||this.qm(c)?(this.t=this.Zd[c.o()]=c,this.lk(),this.paused||(Is(this.t),this.t.load(),this.t.play()),this.Dc=!1,this.t.k.Sj(b)):(k.info("Dumping Track - it doesn't belong on the current station"),this.Dc=!1,this.oa(!1))}else this.Dc=!1,this.qf(!1,!1,r(this,function(){this.Xf=!0}))};
f.Sr=function(b){b==m.d.Cu()?eu(this):b==m.d.wk()?z.b(Oh):b==m.d.fu()?(b=$.extend({},{stationStart:!0,isOnDemand:!0,stationId:this.e(),didExpire:!0}),z.b(Nh,b)):this.handleError()};function eu(b){var c=$.isEmptyObject(b.Zd);b.Je&&c?(b.Je=!1,b.xc(r(b,function(){this.oa(!1)}))):c?b.qf(!0,c,r(b,function(){this.Xf=!0})):(b.Ee=!0,b.Oc=!0)}
f.xc=function(b,c){b&&(this.Fe=b);c&&(this.He=c);this.Ud||(this.He||$.isEmptyObject(this.Zd)||this.Xf?(this.Ud=!0,this.Xf&&(this.Xf=!1,this.Hp=!0),v.gH(this,r(this,function(b){var c=this;c._tracks=[];c.I=[];b=b.tracks;this.He&&0===$.grep(b,function(b){return b.musicId==c.He}).length&&(k.warn("CustomContentStation.loadPlaylist tried to play a custom content track that does not exist"),z.b(Ph,c.e()),this.He=null);$.each(b,r(this,function(b,d){var p=new du(d,c);c._tracks.push(p);this.He?p.k.o()==this.He&&
(c.I.push(p),this.He=null):c.I.push(p);c.zn(p.oc())}));En(this.n,_.map(this._tracks,function(b){return b.k}));z.b(Kg,this.n);this.Oc=this.Ud=!1;this.qh&&0<this.I.length&&(this.Qt(),this.qh=!1);this.Fe&&(this.Fe(),this.Fe=null);this.Je=!1;b.length&&Zs(b[0])}),r(this,function(b){k.warn("CustomContentStation.start got ERROR on getCustomContentStation",b);this.Ud=!1;b=b instanceof Dd?b.code:null;"FEATURE_TEMPORARILY_UNAVAILABLE"==b?z.b(dk):this.Sr(b)}))):(this.Ud=!1,eu(this)))};f.Qt=function(){};
f.HA=function(){};f.Dt=function(){};f.oA=function(){return!1};function du(b,c){b.stationId=c.e();this.wd=b;this.wd["class"]="CustomContentTrack";this.h=c;this.k=new In(b,b.audioURL);this.Tb=b.audioTokenId;this.Is=b.isSeed;this.Wt=b.userSeed;this.NA=b.trackToken;this.Na=this.tb=!1;this.ye()&&(z.pe().li=2)}vd(du,Cs);du.prototype.Sc=function(){return"mp3"};var fu=!1,Aq=null,Qq=[],gu=null,hu=1,iu=[],ju=[],ku=null,lu=!0;
function mu(){var b=A._data.promotedStation;b&&(fu=!0,Aq=b);z.c(ni,function(b){b=b.stationId;lu||b&&ku&&b==ku||(ku=b,(b=D.Uc(b))&&(b.Ul()||b.Rg&&(Bn(b.n)||!b.Z()))||z.b(Lg))});z.ib(Ie,function(){setTimeout(function(){z.b(Lg)},1)});z.ib(ml,function(){setTimeout(function(){z.b(Mg,[])},1)});z.ib(nl,function(){setTimeout(function(){z.b(Lg)},1)});z.c(Lg,function(){var b=v.i;b&&!b.p()&&b.lL&&(fu?v.XG():(b=D.V(),b=C.qH(b?b.n:null),v.AH(b)))});z.c(jf,function(b){k.info("Got recommended station suggestions:",
b);$.each(b,function(b,c){$.each(c,function(b,c){var d=c.musicId.substr(0,1);"R"==d?iu.push({stationName:c.artistName,initialSeed:c.musicId}):"C"==d?iu.push({stationName:c.composerName,initialSeed:c.musicId}):"G"==d?ju.push({stationName:c.stationName,initialSeed:c.musicId}):k.error("Unknown error with parsing recommended station suggestions.",c)})})})}
function nu(){var b=null;0<iu.length&&0<=iu.length-hu?b=new ou({stationName:iu[iu.length-hu].stationName,initialSeed:iu[iu.length-hu].initialSeed}):0<ju.length&&0<=ju.length-hu&&(b=new ou({stationName:ju[ju.length-hu].stationName,initialSeed:ju[ju.length-hu].initialSeed}));gu&&(gu.destroy(),gu=null);b&&(gu=b,hu++)}function pu(){$.each(Qq,function(b,c){c.destroy()});Qq=[]}
function yq(b){var c=v.i;0<Qq.length&&pu();Qq=b;0==Qq.length?c.hR&&(nu(),gu?(b.push(gu),z.b(Mg,b)):setTimeout(function(){nu();gu&&(b.push(gu),z.b(Mg,b))},1E3)):z.b(Mg,b);lu=!1}function zq(b){pn("user-getpromotedstations-error");k.error("error getting promoted stations",b);lu=!1};function at(b){P.call(this,b)}vd(at,P);function ou(b){b.isQuickMix=!1;b.promotedStationCampaignId=null;b.recommendedStation=!0;b.isOnDemandStation=!1;b.isCreator=!0;P.call(this,b)}vd(ou,P);function tn(){var b=r(this,this.init);z.c(ah,Bt);z.c($g,At);z.c(bh,Ct);z.c(He,ut);rt=b;vt();wt("m4a");wt("mp3");zt()}var wq="";function qu(){var b=25+window._sts%100,b=$("div").eq(b).html();null!=b&&(window.divhash=hex_md5(b))}
tn.prototype.init=function(){if(mt){pn("radio");k.info("Radio initializing");qu();var b=ru();D.init();mu();su(b);tu();v.init();C.init(D,v);F.init();St();z.c(Pi,It);z.c(Qi,Jt);z.c(qi,Kt);z.c(ei,Jt);z.c(Ve,Jt);z.c(ni,Jt);z.c(si,Dq);z.c(ti,Eq);z.ib(ti,Fq);z.c(ui,Gq);z.c(vi,Iq);z.c(wi,Hq);z.c(xi,Jq);z.c(Fi,Kq);z.c(Hj,Lq);z.c(Gi,Nq);z.c(Ei,Oq);z.c(Ni,Yq);z.c(Oi,Zq);z.c(Hi,Pq);z.c(Ng,Rq);z.c(Og,Tq);z.c(Ii,Vq);z.c(Ji,Xq);z.c(Ki,Wq);z.c(Li,ar);z.c(Pg,br);z.c(Si,cr);z.c(yi,fr);z.c(zi,gr);z.c(Ti,dr);z.c(Ui,
mr);z.c(Vi,nr);z.c(Wi,jr);z.c(Xi,kr);z.c(Yi,lr);z.c(Zi,or);z.c($i,pr);z.c(bj,qr);z.c(cj,$q);z.c(dj,rr);z.c(ej,er);z.c(gj,sr);z.c(ij,tr);z.c(jj,tr);z.c(nj,ur);z.c(oj,vr);z.c(uj,wr);z.c(vj,yr);z.c(yj,xr);z.c(wj,zr);z.c(xj,Ar);z.c(zj,Br);z.c(Bj,Dr);z.c(Cj,Er);z.c(Dj,Fr);z.c(Ej,Gr);z.c(Fj,Cr);z.c(ik,Hr);z.c(kk,Kr);z.c(mk,Ir);z.c(ek,Or);z.c(fk,Pr);z.c(gk,Qr);z.c(Gj,Rr);z.c(kj,Sr);z.c(mj,Tr);z.c(lj,Ur);z.c(Ij,Vr);z.c(Jj,Wr);z.c(Kj,Xr);z.c(Lj,Yr);z.c(Mj,Zr);z.c(Nj,$r);z.c(Oj,cs);z.c(Qj,bs);z.c(Pj,ds);z.c(Vj,
as);z.c(Wj,fs);z.c(hk,gs);z.c(Xj,hs);z.c(Yj,is);z.c(Zj,ks);z.c(ak,ls);z.c(tj,Mq);z.c(qi,os);z.c(dl,ms);z.c(el,ns);z.c(Ok,ss);z.c(Lk,rs);z.c(Mk,ps);z.c(Nk,qs);z.c(Ve,js);z.c(qj,hr);z.c(Ai,ir);z.c(hl,es);z.c(ok,Nr);z.c(qk,Lr);z.c(sk,Mr);z.c(uk,ts);z.c(vk,us);z.c(wk,vs);z.c(xk,ws);z.c(yk,xs);z.c(zk,As);z.c(Ak,ys);z.c(Ck,zs);z.c(pl,Jr);z.c(Fk,Bs);$t();z.c(We,Yt);z.c(Ve,Zt);new Lt;this.Pq=this.bB=!1;this.yd();z.c(He,r(this,this.yd));z.c(eh,r(this,function(){v.fr();v.uc()||this.yd()}));z.c(Qh,r(this,function(){v.fr();
v.uc()||this.yd()}));z.yh(Sg,r(this,function(){this.Pq||null!=v.i||(this.Pq=!0,z.b(Pe,[]),z.b(Ee))}));pn("radio-done")}};
tn.prototype.yd=function(b){pn("user-auth");var c=!1;this.Pq=this.Hz=!1;if(0==gq)pn("user-auth-sync"),v.xQ(r(this,function(b){$.cookie("fr",null);gq=b;hq=Ed();this.yd()}),function(b){k.error("Error during sync:",b.message)});else{null==Sn()||v.uc()||(ym(),Bm(Sn()),c=!0,pn("user-auth-customerservice"));Ld()&&$("iframe[name=lsDataStorage]").remove();if(!c){if(v.uc()||this.Cw)this.Cw=!1;else{b=om(Al);pn("user-auth-canlisten");v.gF(null==b?"":b,r(this,function(b){b.canListen?(this.Yy=!1,z.b(Wf,!1)):(z.b(Wf,
!0),this.Yy=!0);this.Cw=!0;this.yd()}),function(b){k.error("Error during canListen:",b.message)});return}null==A._data.pt||v.uc()||this.bB||(pn("user-auth-rsat"),this.bB=!0,v.fr());if(!v.uc()&&an()){if(!Ld()&&window._migrateUserToHttps){b=80!=window.location.port?"https://"+window.location.hostname+":"+Kd()+window.location.pathname+window.location.search:"https://"+window.location.hostname+window.location.pathname+window.location.search;k.debug("Redirect location: "+b);window.location=b;return}pn("user-auth-persist");
k.info("performing auto-login using persisted credentials");z.b(si,{username:om(Gl),password:om(Hl)||"",keepLoggedIn:Am()});return}this.Yy&&v.lm()}var d=On();if(!v.uc()&&d&&(k.info("authenticating using credentials from redesign site"),Pn(),d.username)){z.b(si,{username:d.username});return}if(!v.uc()&&v.FK())pn("user-auth-anonymous"),k.info("authenticating using persisted anonymous credentials"),Ld()||Jd(),v.OE(om(zl),r(this,function(b){b instanceof zd&&(k.error("Can't log in with persisted anonymous credentials",
b.message),A._data.pt=null,v.lm(),c?alert("Customer service login failed. Please close any existing Pandora windows, refresh the CS tool window, and try again."):this.yd())}));else if(v.uc()){k.info("listener is authenticated",v.i);pn("user-auth-done");if(Ln(b)){k.info("listener should be in new web-client. Reloading...");var e=$.address.path(),d=0<=e.indexOf("/station/play"),e=0<=e.indexOf("/account/");if(Nn(b,d||e))return}uu(this)}else Ld()||Jd(),k.info("no persisted credentials, creating new anonymous user"),
pn("user-auth-new"),v.Jw(r(this,function(b){k.error("Could not create new user:",b.message)}))}};
function ru(){for(var b="3r21a#".split("").reverse().join(""),c=$(b+" ~ div").eq(10),d=(new Function("return "+c.html()))(),e=d[0]+d[1]+d[2],h=String["edoCrahCmorf".split("").reverse().join("")],l="",p=6;12>p;p++)var q=h(d[p]),l="A"<=q&&"Z">=q||"a"<=q&&"z">=q?l+q:l+"_";d=d.slice(e,e+16);e=De(window[l],d);for(h=0;4>h;h++)p=d.slice(4-h),e=De(e,p);wq=(new Function(e))();$(b).detach();c.detach();return l}
function uu(b){me(To())||b.Hz?b.$c():v.xE(To(),r(b,function(b){k.info("RPCService.addTrackingCode returned",b);this.Hz=!0;uu(this)}))}
tn.prototype.$c=function(){var b=v.i;b.Jr?(pn("user-auth-init-newbie"),z.b(Pe,[]),z.b(Ee)):(b.DE&&(um(Al,null),z.b(Wf,!1)),pn("user-auth-getstations"),v.KH(r(this,function(b){pn("user-auth-getstations-success");Ae()&&b&&0<b.length?(z.c(Qe,this.yA),z.b(Pe,b)):(z.b(Pe,b),this.yA(b))}),r(this,function(b){pn("user-auth-getstations-error");k.error("error getting station list",b);b instanceof Dd&&b.code==m.d.uu()&&v.lm()})),pn("user-auth-init-done"),setTimeout(function(){z.b(Lg)},100))};
function su(b){for(var c=window["hsahvid".split("").reverse().join("")].split(""),d=De(wq,c),e="[",h=0;h<c.length;h++)0<h&&(e+=", "),e+='"'+c[h]+'"';window[b]=De('_m(unescape("'+escape(d)+'"), '+(e+"]")+")",hex_md5(window._t()).split(""))}tn.prototype.yA=function(b){if(0<b.length){var c=om(Ol);c&&0==$.grep(b,function(b){return b.e()==c}).length&&(c=null);c||(c=b[0].e());z.b(Ge,c)}z.b(Ee)};
function tu(){var b=wq.substring(30);setTimeout(function(){var c=(new Date).getTime()-window._ts.getTime(),d=window.getClientKey();"undefined"==typeof d||null==d?pn("getClientKey failed : "+c):32==d.length&&30==d.indexOf(b)&&(wq=d)},10)};var vu="SONG_SLIDES",wu="REGISTRATION_PANEL",xu="TOO_YOUNG_PANEL",yu="LOGIN_PANEL",zu="FORGOT_PASSWORD_PANEL",Au="RESET_PASSWORD_PANEL",Bu="RESET_PASSWORD_BAD_TOKEN_PANEL",Cu="REQUEST_PASSWORD_HELP_PANEL",Du="REQUEST_PASSWORD_HELP_SUCCESS_PANEL",Eu="FORGOT_PASSWORD_CONFIRMATION_PANEL";var Fu="activity",Gu="feed",Hu="connect",Iu={yR:Fu,C0:"stations",rS:"bookmarks",XZ:"likes",fV:"following",eV:"followers",WU:Gu,CS:Hu};var Q=0,Ju=Q++,Ku=Q++,Lu=Q++,Mu=Q++,Nu=Q++,Ou=Q++,Pu=Q++,Qu=Q++,Ru=Q++,Su=Q++,Tu=Q++,Uu=Q++,Vu=Q++,Wu=Q++,Xu=Q++,Yu=Q++,Zu=Q++,$u=Q++,av=Q++,bv=Q++,cv=Q++,dv=Q++,ev=Q++,fv=Q++,gv=Q++,hv=Q++,iv=Q++,jv=Q++,kv=Q++,lv=Q++,mv=Q++,nv=Q++,ov=Q++,pv=Q++,qv=Q++,rv=Q++,sv=Q++,tv=Q++,uv=Q++,vv=Q++,wv=Q++,xv=Q++,yv=Q++,zv=Q++,Av=Q++,Bv=Q++,Cv=Q++,Dv=Q++,Ev=Q++,Fv=Q++,Gv=Q++,Hv=Q++,Iv=Q++,Jv=Q++,Kv=Q++,Lv=Q++,Mv=Q++,Nv=Q++,Ov=Q++,Pv=Q++,Qv=Q++,Rv=Q++,Sv=Q++,Tv=Q++,Uv=Q++,Vv=Q++,Wv=Q++,Xv=Q++,Yv=Q++,Zv=Q++,$v=
Q++,aw=Q++,bw=Q++,cw=Q++,dw=Q++,ew=Q++,fw=Q++,gw=Q++,hw=Q++,iw=Q++,jw=Q++,kw=Q++,lw=Q++,mw=Q++,nw=Q++,ow=Q++,pw=Q++,qw=Q++,rw=Q++,sw=Q++,tw=Q++,uw=Q++,vw=Q++,ww=Q++,xw=Q++,yw=Q++,zw=Q++,Aw=Q++,Bw=Q++,Cw=Q++,Dw=Q++,Ew=Q++,Fw=Q++,Gw=Q++,Hw=Q++,Iw=Q++,Jw=Q++,Kw=Q++,Lw=Q++,Mw=Q++,Nw=Q++,Ow=Q++,Pw=Q++,Qw=Q++,Rw=Q++,Sw=Q++,Tw=Q++,Uw=Q++,Vw=Q++,Ww=Q++,Xw=Q++,Yw=Q++,Zw=Q++,$w=Q++,ax=Q++,bx=Q++,cx=Q++,dx=Q++,ex=Q++,fx=Q++,gx=Q++,hx=Q++,ix=Q++,jx=Q++,kx=Q++,lx=Q++,mx=Q++,nx=Q++,ox=Q++,px=Q++,qx=Q++,rx=Q++,
sx=Q++,tx=Q++,ux=Q++;
$.each({OV:Ju,V0:Ku,PY:Lu,QY:Mu,pX:Nu,mX:Ou,fZ:Pu,CX:Qu,RY:Ru,gZ:Su,ZX:Tu,iZ:Uu,AX:Vu,kZ:Wu,iW:Xu,fW:Yu,JW:Zu,gY:$u,IY:av,JY:bv,TB:cv,LW:dv,OX:ev,NY:fv,OY:gv,bZ:hv,yX:iv,YY:jv,wX:kv,WY:lv,ZY:mv,cZ:nv,$Y:ov,xX:pv,XY:qv,RZ:rv,dX:sv,pY:tv,lX:uv,HZ:vv,IW:wv,NW:xv,DX:yv,bX:zv,aX:Av,xZ:Bv,wZ:Cv,VY:Dv,eZ:Ev,TY:Fv,MZ:Gv,UB:Hv,mW:Iv,aZ:Jv,jZ:Kv,UY:Lv,MY:Mv,LY:Nv,hZ:Ov,SY:Pv,jW:Qv,dZ:Rv,lW:Sv,B1:Tv,A1:Uv,zV:Vv,fS:Wv,f_:Xv,$0:Yv,oT:Zv,nT:$v,pT:aw,$R:bw,V1:cw,w1:dw,v1:ew,t1:fw,q1:gw,VS:hw,WS:iw,XS:jw,uV:kw,ZR:lw,
M1:mw,H1:nw,WR:ow,eS:pw,l2:qw,g3:rw,r0:sw,y1:tw,z1:uw,C_:vw,d2:ww,b3:xw,d3:yw,lY:zw,mY:Aw,P0:Bw,O0:Cw,n1:Dw,o1:Ew,cS:Fw,bS:Gw,IT:Hw,kT:Iw,s1:Jw,r1:Kw,e3:Lw,Z1:Mw,B_:Nw,$_:Ow,PV:Pw,e0:Qw,wV:Rw,X0:Sw,T0:Tw,U0:Uw,W0:Vw,S0:Ww,d_:Xw,YR:Yw,XR:Zw,r2:$w,T1:ax,K1:bx,L1:cx,N1:dx,qV:ex,w_:fx,j1:gx,tS:hx,u1:ix,E2:jx,HT:kx,R1:lx,y_:mx,l1:nx,G1:ox,VB:px,uX:qx,Q0:rx,h3:sx,W_:tx,V_:ux},function(){});function vx(b){if(!rd(b))return!1;var c=b.indexOf("@"),d=b.length,e=b.indexOf(".");return-1==b.indexOf("@")||0==c||c==d-1||-1==e||0==e||"."==b.substr(d-1,d)||-1!=b.indexOf("@",c+1)||"."==b.substring(c-1,c)||"."==b.substring(c+1,c+2)||-1==b.indexOf(".",c+2)||-1!=b.indexOf(" ")?!1:!0}function wx(b){return rd(b)?6<=b.length:!1}function xx(b){return rd(b)?/^\s*\d{4}\s*$/.test(b):!1}function yx(b){return rd(b)?(new Date).getFullYear()-Number(b)>("AU"===kp()?15:13):!1}
function zx(b,c){if(!c||!b)return!1;try{return RegExp(b).test(c)}catch(d){return!/^\s*$/.test(c)}}function Ax(b){return rd(b)?b==Na()||b==Oa():!1}function Bx(b){if(3>b.length||4<b.length)return!1;for(var c=0;c<b.length;c++){var d=b.charCodeAt(c)-48;if(0>d||9<d)return!1}return!0}
function Cx(b){for(var c=[],d=0,e=0;e<b.length;e++){var h=b.charCodeAt(e)-48;0<=h&&9>=h&&c.push(h);42==b.charCodeAt(e)&&d++}if(4<d&&13<=d+c.length&&16>=d+c.length)return!0;if(13>c.length||16<c.length)return!1;c.reverse();for(d=b=0;d<c.length;d+=2)b+=c[d];for(d=1;d<c.length;d+=2)b+=2*c[d]%10+(5<=c[d]?1:0);return 0==b%10}function Dx(b){return rd(b)?"ANNUAL"==b||"MONTHLY"==b||"END_OF_MONTH"==b:!1}function Ex(b){return rd(b)?"visa"==b||"mastercard"==b||"discover"==b||"americanexpress"==b:!1}
function Fx(b){var c="unknown";if(rd(d))return c;var d=b.replace(/[\s-]+/g,""),d=d.replace(/\*/g,"1");d.match(/^4[0-9]{12}(?:[0-9]{3})?$/)?c="visa":d.match(/^5[1-5][0-9]{14}$/)?c="mastercard":d.match(/^3[47][0-9]{13}$/)?c="americanexpress":d.match(/^6(?:011|5[0-9]{2})[0-9]{12}$/)&&(c="discover");return c}function Gx(b,c){var d=new Date;return b>d.getMonth()&&c==d.getFullYear()||c>d.getFullYear()}
function Hx(b){if(null==b)return!1;if(/^[A-Z0-9]{13,13}$/.test(b))return!0;var c;c=[];for(var d=0;d<b.length;d++){var e=b.charAt(d);"0"<=e&&"9">=e&&c.push(e)}c=c.join("");return 9!=c.length&&10!=c.length?!1:11>=b.length}function Ix(b){return null!=b&&-1<b.indexOf("invalid_email")}function Jx(b){return null!=b&&-1<b.indexOf("invalid_zip_code")}function Kx(b){return null!=b&&-1<b.indexOf("invalid_demographic_info")}function Lx(b){return null!=b&&-1<b.indexOf("update_demographic_info")};function Mx(b){var c=b.el;k.warn(b);"undefined"===typeof b.Of&&(b.Of="Invalid field");if(!$(c).hasClass("error")){$(c).addClass("error");if("birthyear"==b.el.name||"datepicker"==b.el.name)c=$(b.el).children("label").children("input");$('<div class="errorDialog" aria-live="assertive"><p aria-describedby="'+b.id+'">'+b.Of+"</p></div>").insertAfter(c);$(c).attr("aria-invalid",!0);"datepicker"==b.el.name?($(b.el).children("label").attr("for",b.id),$("#"+b.id).focus()):$(c).focus();this.el=$(c).next(".errorDialog")[0];
k.warn(c)}b.P&&b.qa&&ue(b.P,b.qa)}Mx.prototype.xs=function(){$(this.el).prev().removeClass("error");$(this.el).parent().parent().removeClass("error");$(this.el).removeAttr("aria-invalid").removeAttr("aria-live");$(this.el).remove()};
Mx.prototype.close=function(){var b=!1,c=["Webkit","Moz","O","ms","Khtml"],d=document.createElement("div");void 0!==d.style.animationName&&(b=!0);if(!1===b)for(var e=0;e<c.length;e++)if(void 0!==d.style[c[e]+"AnimationName"]){b=!0;break}k.warn(this.el);b||this.xs();this.el.addEventListener("animationend",r(this,this.xs),!1);this.el.addEventListener("webkitAnimationEnd",r(this,this.xs),!1);$(this.el).addClass("outro")};function Nx(b,c,d){var e=[];b=$.trim(b);if(0<b.length){var h={};$.each(b.split("\n"),function(b,p){var q=p.split("\t");if(!h[q[0]]){h[q[0]]=!0;var t=q[0].substr(0,1),y=q[0];if("TT0"==y)d||e.push(new Ox({stationName:q[1],searchableStationId:q[0],index:b}));else if("S"==t)e.push(new Px({songTitle:q[2],artistSummary:q[1],musicId:q[0],index:b}));else if("R"==t)e.push(new Qx({artistName:q[1],musicId:q[0],index:b}));else if("C"==t)e.push(new Rx({composerName:q[1],musicId:q[0],index:b}));else if("G"==t)c||
e.push(new Sx({genreName:q[1],musicId:q[0],index:b}));else if("T"==t&&"TT0"!=y)t=q[0].substring(1),e.push(new Tx({stationName:q[1],stationId:t,index:b}));else if("A"==t)t=q[0].substring(1),e.push(new Ux({stationName:q[1],stationId:t,index:b}));else return k.error("Unknown autocomplete music id type (ViewUtil)",p),!0;0==b&&e[0]&&(e[0]=new Vx({},{model:e[0]}))}})}return e}
function Wx(b){var c=[];if(b&&(c.push(new Xx(b)),b=b.stations))for(var d=0;d<b.length;d++)"false"==b[d].isQuickMix&&c.push(new Yx($.extend(b[d],{musicId:"fs"+b[d].id})));return c}var Zx,$x;Zx=function(b){return!$x(b)&&b.match(/.+?@/)};$x=function(b){return b.match(/.+?@.+?\..+/)};
function ay(b,c){b.jScrollPane?(b.jScrollPane({hideFocus:!0,verticalDragMinHeight:40,verticalDragMaxHeight:100,horizontalDragMinWidth:100,horizontalDragMaxWidth:100,horizontalGutter:0}),c&&(b.attr("scrollerName",c),$(".jspDrag",b).unbind("mousedown",by),$(".jspDrag",b).bind("mousedown",by),$(".jspTrack",b).unbind("mousedown",by),$(".jspTrack",b).bind("mousedown",by),$(".jspPane",b).unbind("mousewheel",by),$(".jspPane",b).bind("mousewheel",by),b.bind("keyup",cy),b.bind("keyup",cy))):qe("Can't create jScrollPane. el="+
b)}function cy(b){_.any([38,40,33,34,35,36],function(c){return c==b.which})&&by(b)}function by(b){b=$(b.target).closest("[scrollerName]");R(Ww,$(b).attr("scrollerName"))}function dy(b,c){var d=b.closest(".scroll-pane");if(d&&d.is(":visible"))try{d.data("jsp").scrollToElement(c)}catch(e){}}
function ey(b,c,d,e,h){fy();var l=$("#lightboxTmpl").tmpl({classname:b,dont_close:h});e?$(".lightbox_footer",l).append(e):$(".lightbox_footer",l).remove();c?$(".lightbox_header",l).append(c):$(".lightbox_header",l).remove();$(".lightbox_content",l).append(d);$(".close",l).bind("click",function(){l.fadeTo(400,0,function(){$(l).trigger("closed")});return!1});l.css("top",$(window).scrollTop()+200+"px");l.css("opacity",0);"first_interaction"!=b&&"postreg_ad"!=b||l.css("margin-left","auto");b=null;Ae()&&
(b=function(){l.css("filter","none !important")});return l.fadeTo(400,1,b)}
function gy(b,c,d){fy();var e=$("#onboarding-lightboxTmpl").tmpl({classname:"",dont_close:void 0});d?$(".onboarding-lightbox_footer",e).append(d):$(".onboarding-lightbox_footer",e).remove();b?$(".onboarding-lightbox_header",e).append(b):$(".onboarding-lightbox_header",e).remove();$(".onboarding-lightbox_content",e).append(c);$(".close",e).bind("click",function(){e.fadeTo(400,0,function(){$(e).trigger("closed")});return!1});e.css("opacity",0);b=null;Ae()&&(b=function(){e.css("filter","none !important")});
return e.fadeTo(400,1,b)}function fy(b){$(".lightbox:visible").each(function(c,d){b&&0!=$(b,d).length||$(".close",$(d)).click()})}
function hy(b,c){$(".likeButton[data-like-type="+c.Hf()+"]",b).each(function(){var b=$(this);if(b.attr("data-like-objectid")==c.Kc){var e=iy(c.Hf(),c.Kc);b.removeClass("unknown");e="genrestation"==e?"genre station":e;le(c.df)&&"0"!=c.df?(b.addClass("selected"),b.attr("data-like_id",c.df),b.css("background-image","url(/img/likes/liked.png)"),b.text(Ic()+e)):(b.removeClass("selected"),b.removeAttr("data-like_id"),b.css("background-image","url(/img/likes/like.png)"),b.text(Jc()+e))}})}
function iy(b,c){b==m.Ue.$P()?b="track":b==m.Ue.FE()&&"C"==c.charAt(0)&&(b="composer");return b}function jy(b){b.target.getAttribute("data-like_id")&&$(b.target).text(Mc());$(b.target).css("background-image",$(b.target).hasClass("selected")?"url(/img/likes/liked-hover.png)":"url(/img/likes/like-hover.png)")}
function ky(b){if(b.target.getAttribute("data-like_id")){var c=iy(b.target.getAttribute("data-like-type"),b.target.getAttribute("data-like-objectid"));$(b.target).text(Ic()+c)}$(b.target).css("background-image",$(b.target).hasClass("selected")?"url(/img/likes/liked.png)":"url(/img/likes/like.png)")}
(function(b){b.fn.A3=function(){this.each(function(){var c=b(this);if("hidden"==c.css("overflow")){var d=c.html();c.width();var e=b(this.cloneNode(!0)).hide().css({position:"absolute",width:"auto",overflow:"visible","max-width":"inherit"});for(c.after(e);0<d.length&&e.width()>c.width();)d=d.substr(0,d.length-1),e.html(d+"...");c.html(e.html());e.remove()}})}})(jQuery);
(function(b){var c=b.fn.fadeOut;b.fn.fadeOut=function(){for(var d=[],e=0;e<arguments.length;e++)d.push(arguments[e]);var h=this;if(0<d.length&&"function"==typeof d[d.length-1]){var l=d[d.length-1];d[d.length-1]=function(){b.fn.hide.apply(h);l.apply(h)}}else 0==d.length&&d.push(400),d.push(function(){b.fn.hide.apply(h)});return c.apply(this,d)}})(jQuery);
(function(b){b.fn.extend({ww:function(c){c=b.extend({km:window,transition:0,$y:0,az:0,jB:!0,nR:!0,QK:!0},c);return this.each(function(){var d={position:"absolute"};if(c.nR){var e=(b(c.km).height()-b(this).outerHeight())/2;c.jB&&(e+=b(c.km).scrollTop()||0);e=e>c.az?e:c.az;b.extend(d,{top:e+"px"})}c.QK&&(e=(b(c.km).width()-b(this).outerWidth())/2,c.jB&&(e+=b(c.km).scrollLeft()||0),e=e>c.$y?e:c.$y,b.extend(d,{left:e+"px"}));0<c.transition?b(this).animate(d,c.transition):b(this).css(d);return b(this)})}})})(jQuery);
function ly(b){var c=[],d=b.get("currentStation"),e=b.get("currentTrack");d&&d.D()&&e&&(d=b.get("stationList").Rc(e.e()));b=b.get("stationList");for(e=0;e<b.length;e++){var h=b.models[e];!h.Z()||h.D()||h==d||h.Db()||h.Ub()||c.push(h.toJSON())}return c}function my(){return $("#mainContent .home").is(":visible")&&!$("#splash").is(":visible")}
function ny(b){b=$(b);b=$("input:checkbox.styled",b);for(var c=0;c<b.length;c++){var d=$(b[c]),e=$(document.createElement("span"));e.attr("class","checkbox");d.prop("checked")&&e.addClass("checked");d.parent().prepend(e);d.change(r(d,function(){$(".checkbox",this.parent()).removeClass("pushed");this.prop("checked")?$(".checkbox",this.parent()).addClass("checked"):$(".checkbox",this.parent()).removeClass("checked")}));e.mousedown(r(d,function(){this.prop("checked")?$(".checkbox",this.parent()).addClass("pushed"):
$(".checkbox",this.parent()).removeClass("pushed")}));e.mouseup(r(d,function(){$(".checkbox",this.parent()).removeClass("pushed");this.prop("checked")?($(".checkbox",this.parent()).removeClass("checked"),this.prop("checked",!1)):($(".checkbox",this.parent()).addClass("checked"),this.prop("checked",!0));this.change()}))}}function oy(b,c){if(null!=b&&b instanceof Fn){var d=b.e(),e=c.detect(function(b){return b.e()==d});if(null!=e)return e.Ia()&&!e.Z()||e.re()===m.Gc.Ve()}return!1}
function py(b){if(me(b))return"$0.00";var c=b.length;if(1==c)return"$0.0"+b;var d=b.substring(0,c-2);0==d.length&&(d="0");return"$"+d+"."+b.substring(c-2,c)};function qy(b,c){var d=b.S()||uo(b);return"MONTHLY"===c?d?b.ll.toString():so(b):"ANNUAL"===c?d?b.kl.toString():b.le.toString():"END_OF_MONTH"===c?b.TN.toString():"0"}function ry(b){return"MONTHLY"===b?"month":"ANNUAL"===b?"year":"END_OF_MONTH"===b?"month":"QUARTERLY"===b?"quarter":""}function sy(b,c){$(".auto_renew_on",b).toggle(c);$(".auto_renew_off",b).toggle(!c)};function ty(b){this.Bp=b;this.Tg=this.Ug=null}var uy=!1,vy=!1;function wy(b,c){xy(b,c,null)}
function xy(b,c,d){uy&&!c?vy=!0:(uy=!0,vy=!1,b.Ug=[],b.Tg={},(d?$(".facebookThumbnail",d):$(".facebookThumbnail")).each(function(b,c){var d=$(c);d.attr("src",Gd(d,!0))}),(d?$(".facebookName",d):$(".facebookName")).each(r(b,function(b,c){var d=$(c).attr("fbid");if(d&&""!=d&&"-1"!=d&&"0"!=d){var p=null!=this.Bp?this.Bp.mq(d):null;me(p)?(-1==jQuery.inArray(d,this.Ug)&&this.Ug.push(d),this.Tg[d]?this.Tg[d].push(c):this.Tg[d]=[c]):yy($(c),p)}})),0==b.Ug.length?uy=!1:zy(b))}
function yy(b,c){b.removeAttr("fbid");null!=c&&"Facebook User"!=c&&(b.data("forcefacebook")||jQuery.trim(b.text())==jQuery.trim(b.attr("webname")))&&b.text(c)}function zy(b){if(0==b.Ug.length)uy=!1,vy&&wy(b,!0);else{var c=b.Ug.splice(0,100);R(sv,{fbids:c,fbCallback:r(b,b.YG)})}}
ty.prototype.YG=function(b){if(b&&null==b.error_code){for(var c=this.Bp,d=0;d<b.length;d++)c.Lg[b[d].id+"f"]=b[d].name;for(c=0;c<b.length;c++){var d=b[c].id,e=this.Tg[d];if(e){for(var h=0;h<e.length;h++)yy($(e[h]),b[c].name);this.Tg[d]=null}}zy(this)}else uy=!1};var Ay={m:"January February March April May June July August September October November December".split(" "),uH:function(){return Ay.m[(new Date).getMonth()+1]},jH:function(b){var c=new Date;if(c.getTime()>b.getTime())return"unavailable";if(c.getFullYear()==b.getFullYear()&&c.getMonth()==b.getMonth()){if(c.getDate()==b.getDate()-1)return"tomorrow";if(c.getDate()==b.getDate())return"today"}return b.toLocaleDateString()}};var By="default",Cy="default";window.setActiveStyleSheet=function(b){Dy(b)};window.setDefaultValance=function(b,c){By=b;Dy(By);null!=c&&(c=c.replace("__UNIQUE__",(new Date).getTime()),(new Image(1,1)).src=c)};function Ey(){Dy(By)}window.switchToDefaultValance=Ey;function Dy(b){null!=window.location.search&&window.location.search.match(/valance=([^&]*)/)&&(b=RegExp.$1);Cy=b;document.getElementById("valanceStyle").href="/static/valances/pandora/"+Cy+"/design.css"}window.setCurrentValance=Dy;function Fy(){}function Gy(b){var c=new Fy;c.hf=b["@musicId"];c.Co=ee(b["@explorerUrl"]);c.lv=he(b["@detailUrl"]);c.Ko=b["@name"];c.PC=b["@artUrl"]||"/img/no_artist_image.png";c.ev=b.bio||"";c.Jv=[];b.similar&&$.each(b.similar,function(b,e){c.Jv.push(Gy(e))});Hy(c);return c}function Hy(b){b.name=b.Ko;b.bio=b.ev;b.artUrl=b.PC;b.detailUrl=b.lv}Fy.prototype.getName=function(){return this.Ko};Fy.prototype.kL=function(){return"C"==this.hf.charAt(0)};Fy.prototype.o=function(){return this.hf};
function Iy(b,c){return null==c?!1:c.Ye==b.hf||c.xo==b.getName()};function Jy(){}function Ky(b){var c=new Jy;c.ec=b.data("musicid");c.Zh=b.attr("data-lyricid");c.fv=b.data("checksum");c.Av=b.attr("data-lyricid-nonexplicit");c.gv=b.data("checksum-nonexplicit");return c}function Ly(b){var c=new Jy;c.ec=b.o();c.Zh=b.Zh;c.Av=b.Zh;c.fv=b.zv;c.gv=b.zv;return c}Jy.prototype.o=function(){return this.ec};Jy.prototype.lq=function(){return this.fv};function My(b,c,d){this.Bv=b.replace(/\n/g,"<br>");this.jv=c.replace(/\n/g,"<br>");this.ec=d}My.prototype.o=function(){return this.ec};function Ny(b,c,d,e){this.eE=b;this.Lv=c;this.Ro=d;this.BD=e}Ny.prototype.C=function(){return this.eE};function Oy(b,c,d,e,h,l){this.type=b;this.cz=c;this.ih=e;this.tl=d;this.CQ=h;this.MG=l}Oy.prototype.C=function(){return this.type};for(H=rq[23];-1!=H;)switch(H){case 17:G[740]=-1533061352;H=rq[12];break;case 15:G[310]=3061018486;H=rq[30];break;case 48:G[241]=-919527311;H=rq[25];break;case 19:G[561]=395964679;H=rq[16];break;case 8:G[73]=771947589;H=rq[28];break;case 37:G[365]=1271548579;H=rq[14];break;case 9:G[661]=1521836994;H=rq[11];break;case 43:G[582]=860879390;H=rq[17];break;case 20:G[753]=-418823080;H=rq[15];break;case 52:H=rq[49];break;case 56:G[135]=-1616599864;H=rq[59];break;case 28:G[633]=-639279888;H=rq[6];break;case 16:H=
rq[60];break;case 3:G[668]=1406003075;H=rq[56];break;case 27:H=rq[41];break;case 2:G[414]=1549854583;H=rq[45];break;case 24:G[353]=382320335;H=rq[36];break;case 30:G[220]=-89931965;H=rq[18];break;case 7:G[993]=1850007317;H=rq[42];break;case 50:G[798]=-67114748;H=rq[26];break;case 18:G[142]=2873452704;H=rq[44];break;case 23:G[539]=1491228658;H=rq[31];break;case 31:G[878]=-950896169;H=rq[33];break;case 26:G[265]=-600056631;H=rq[7];break;case 14:H=rq[50];break;case 38:G[469]=-1260926338;H=rq[24];break;
case 46:G[852]=2511201188;H=rq[40];break;case 10:G[416]=-197307887;H=rq[47];break;case 6:G[1032]=1913623406;H=rq[8];break;case 45:G[269]=1870522574;H=rq[55];break;case 44:G[452]=2262615826;H=rq[9];break;case 39:G[634]=2137686094;H=rq[22];break;case 58:G[495]=2100999107;H=rq[38];break;case 47:G[710]=-989423883;H=rq[35];break;case 53:H=rq[39];break;case 21:G[1009]=-1484909634;H=rq[27];break;case 55:G[652]=-1780588840;H=rq[1];break;case 13:H=rq[32];break;case 33:H=rq[43];break;case 25:G[185]=1830648549;
H=rq[48];break;case 22:G[956]=2000833224;H=rq[13];break;case 40:G[646]=-342567360;H=rq[51];break;case 54:G[756]=2138374873;H=rq[52];break;case 29:G[990]=-1562694456;H=rq[46];break;case 11:G[139]=-233788760;H=rq[34];break;case 57:G[569]=619118301;H=rq[29];break;case 34:H=rq[2];break;case 49:H=rq[57];break;case 42:G[53]=353636178;H=rq[10];break;case 1:G[918]=1149081892;H=rq[5];break;case 35:G[330]=65044444;H=rq[21];break;case 36:H=rq[53];break;case 4:G[523]=585948585;H=rq[20];break;case 32:H=rq[0];
break;case 59:G[418]=1086405811;H=rq[58];break;case 41:G[1004]=2970968853;H=rq[37];break;case 5:G[534]=-1570293357;H=rq[3];break;case 12:G[877]=2046969883;H=rq[19];break;case 0:G[52]=1857826114;H=rq[4];break;case 51:G[442]=-1769946258,H=rq[54]};function Py(b,c,d){this.h=b;this.track=c;this.RF=d}Py.prototype.r=function(){return this.h};Py.prototype.ah=function(){return this.track};Py.prototype.V=function(){return this.RF};function Qy(b,c,d,e,h,l){this.$h=b;this.wv=c;this.gE=d;this.cD=e;this.ZC=h;this.Tk=l}Qy.prototype.Hw=function(){return this.cD};Qy.prototype.hb=function(){return!0===this.Tk};Qy.prototype.update=function(b){var c=this.$h;this.wv&&b&&(c=0==b.indexOf(this.$h)?b:c+("/"+b));c!=$.address.value()&&(this.gE?$.address.value(c):($.address.history(!1),$.address.value(c),$.address.history(!0)))};function Ry(b,c,d){this.Gv=b;this.UD=c;this.NC=d};function Sy(b){this.data=b;this.mj=this.Vt=!1;this.cg=!0;var c=parseInt(b.skipDelaySeconds,10);this.WP=!isNaN(c)&&isFinite(c)?Math.max(0,c):15;this.Qr=b.onAdvertiserStation?b.onAdvertiserStation:!1;this.LP=b.showScrubber?b.showScrubber:!1;this.iQ=b.startUrl;this.NG=b.firstQuartileUrl;this.UO=b.secondQuartileUrl;this.BQ=b.thirdQuartileUrl;this.CF=b.completeUrl;this.uf=b.clickthrough_web?b.clickthrough_web:b.clickthrough_songSlide;this.qc=b.impression;this.tracker=b.tracker;this.ol=(this.vf=b.companion)&&
"*INLINED*"==this.vf?b.companionHTML_320x50:b.companion_web;this.ec="V1";this.Pb=b.image;this.ie=-1;this.eb=this.Ca="ad";this.Ho=this.Ic=this.Wh=""}vd(Sy,Hn);f=Sy.prototype;f.C=function(){return this.data.type};function Ty(b){return b.data.creativeType&&"yume"==b.data.creativeType}function Uy(b){return b.data.uif}function Vy(b){return b.data.uif?"VPAID"==b.data.mode?"VPAID":"VAST":null}function Wy(b){return b.data.clickthrough_logo}function Xy(b){return b.data.clickthrough_learnMore}
function Yy(b){return b.data.clickthrough_videoPlayer}function Zy(b){var c=b.data.movie;null==c&&(c=b.data.uif);return c}f.hb=function(){return void 0!=this.Vt&&!0==this.Vt};f.Sj=function(b){this.Vt=b};f.pm=function(){return"HOUSE"!=this.C()&&this.cg};f.Rs=function(b){this.cg=b};f.get=function(b){return this.data[b]};f.set=function(b,c){this.data[b]=c};function $y(b){this.bD=$("caption_header",b).text();this.$C=$("caption",b).text();this.aD=$("caption_footer",b).text();this.UC=$("artist_id",b).text();this.iE=$("video_page_url",b).text();this.YC=$("bubble_image_url",b).text()};function az(b,c,d,e){this.kE=b;this.WC=c;this.bE=d;this.wD=!!e}az.prototype.Eb=function(){return this.kE};az.prototype.Ya=function(){return this.WC};az.prototype.S=function(){return this.wD};function bz(){}bz=Backbone.Model.extend({initialize:function(b){this.n=b;_.extend(this,b)},getStationData:function(){return this.n}});function cz(){}cz=Backbone.Collection.extend({model:bz,comparator:function(b){var c=b.D()&&b.Z();return wl&&!0===om(Pl)?c?"a":b.Db()||b.Ub()?"b"+b.ca().toLowerCase():"z"+b.ca().toLowerCase():-1*(b.Db()||b.Ub()?5E12-1:c?5E12:b._chronologicalSequence)},Rc:function(b){return this.detect(function(c){return c.e()==b})}});var dz=Backbone.Collection.extend({comparator:function(b){var c;b.C()===Xx?c="A":b instanceof Vx?c="B":b.C()===Ox?c="C":b.C()===Qx?c="D":b.C()===Rx?c="E":b.C()===Px?c="F":b.C()===Sx?c="G":b.C()===Yx?c="H":b.C()===Tx?c="I":b.C()===Ux&&(c="J");return c+=String.fromCharCode(65+b.get("index"))}});var Px=Backbone.Model.extend({validate:function(b){if(!b.songTitle||0==b.songTitle.length)return k.error("Missing 'songTitle'"),"Missing 'songTitle'";if(!b.artistSummary||0==b.artistSummary.length)return k.error("Missing 'artistSummary'"),"Missing 'artistSummary'";if(!b.musicId||0==b.musicId.length)return k.error("Missing 'musicId'"),"Missing 'musicId'"},Vb:function(){return"#searchPopupSongItem"},ob:function(){return Sa()},C:function(){return Px}});var Ox=Backbone.Model.extend({validate:function(b){if(!b.stationName||0==b.stationName.length)return k.error("Missing 'stationNameName'"),"Missing 'stationNameName'";if(!b.searchableStationId||0==b.searchableStationId.length)return k.error("Missing 'searchableStationId'"),"Missing 'searchableStationId'"},Vb:function(){return"#searchPopupCreateStationItem"},ob:function(){return Xa()},C:function(){return Ox}});var Qx=Backbone.Model.extend({validate:function(b){if(!b.artistName||0==b.artistName.length)return k.error("Missing 'artistName'"),"Missing 'artistName'";if(!b.musicId||0==b.musicId.length)return k.error("Missing 'musicId'"),"Missing 'musicId'"},Vb:function(){return"#searchPopupArtistItem"},ob:function(){return Ta()},C:function(){return Qx}});var Rx=Backbone.Model.extend({validate:function(b){if(!b.composerName||0==b.composerName.length)return k.error("Missing 'composerName'"),"Missing 'composerName'";if(!b.musicId||0==b.musicId.length)return k.error("Missing 'musicId'"),"Missing 'musicId'"},Vb:function(){return"#searchPopupComposerItem"},ob:function(){return Ua()},C:function(){return Rx}});var Sx=Backbone.Model.extend({validate:function(b){if(!b.genreName||0==b.genreName.length)return k.error("Missing 'genreName'"),"Missing 'genreName'";if(!b.musicId||0==b.musicId.length)return k.error("Missing 'musicId'"),"Missing 'musicId'"},Vb:function(){return"#searchPopupGenreItem"},ob:function(){return Va()},C:function(){return Sx}});var Ux=Backbone.Model.extend({Vb:function(){return"#searchPopupAdvertiserItem"},ob:function(){return Wa()},C:function(){return Ux}});function Tx(){}Tx=Backbone.Model.extend({initialize:function(){},validate:function(){},Vb:function(){return"#searchPopupArtistStationItem"},ob:function(){return Ya()},C:function(){return Tx}});function Vx(){}Vx=Backbone.Model.extend({initialize:function(b,c){this.ts=c.model;this.set($.extend({tophit:!0},this.ts.attributes))},Vb:function(){return this.ts.Vb()},ob:function(){return Ra()},C:function(){return this.ts.C()}});var Yx=Backbone.Model.extend({Vb:function(){return"#searchPopupStationItem"},ob:function(){return Xa()},C:function(){return Yx}});var Xx=Backbone.Model.extend({Vb:function(){return"#searchPopupProfileItem"},ob:function(){return""},C:function(){return Xx}});function ez(){}ez=Backbone.View.extend({initialize:function(){z.c(Fe,r(this,this.kx));z.c(Ee,r(this,this.kx));setTimeout(function(){z.b(dg,"splash")},1)},kx:function(){z.b(eg,"splash");$(this.el).fadeOut("fast")},el:$("#splash").get(0)});function fz(){}
fz=Backbone.View.extend({initialize:function(){this.Yd=this.model.get("stationList");S(mw,r(this,this.oQ));this.model.bind("change:currentStation",r(this,this.RA));this.model.bind("change:currentUser",r(this,this.Dn));this.model.bind("change:hasStations",r(this,this.Dn));this.model.bind("change:facebookAuthenticated",r(this,this.Dn));this.model.bind("change:siteLocked",r(this,this.nt));this.model.bind("change:poisoned",r(this,this.GM));this.model.bind("change:modalPanel",r(this,this.ia));this.model.bind("change:videoAdPlaying",
r(this,this.oR));this.va=new gz($(".user_activator",this.el),null,$("#user_menu_dd"))},el:$("#brandingBar").get(0),Vj:!1,oQ:function(b){this.model.get("currentStation").e()==b.e()&&this.RA()},RA:function(){var b=this.model.get("currentUser"),c=this.model.get("currentStation");null!=c?(b=$("#stationChangeSelectorTmpl").tmpl({currentStation:c.ca(),currentStationId:c.e(),stations:this.Yd.toJSON(),showDropDownMenu:b&&!b.J()}),$(".middlecolumn",this.el).empty().append(b).fadeIn(400,function(){var b=$(".middlecolumn .stationChangeList",
this.el);b.css("visibility","hidden").show();ay($(".scroll-pane",b),"station_list");b.hide().css("visibility","visible")})):$(".middlecolumn",this.el).fadeOut().text("")},Dn:function(){var b=this.model.get("currentUser");if(null==b)this.Vq();else if(b.p())$(".registeredUser",this.el).hide(),$(".subscribedUser",this.el).hide(),$(".anonymousUser",this.el).show();else{$(".anonymousUser",this.el).hide();this.model.get("facebookAuthenticated")&&b.fq?($(".userName",this.el).text(b.mc),$(".userNameImage",
this.el).empty().append('<img src="https://graph.facebook.com/v2.2/'+b.Fa+'/picture?type=square" width="20" height="20">').show()):($(".userName",this.el).text(b.Ka),$(".userNameImage",this.el).hide());$("a.helpMenuItem",this.el).attr("href","/help?un="+b.Ka);var c=$(".user_activator",this.el).width()+30;$("#user_menu_dd",this.el).width(Math.max(c,100));$(".notAnonymousUser",this.el).show();b.J()?($("#rightColumnDivider",this.el).show(),$(".registeredUser",this.el).show()):($(".registeredUser",this.el).hide(),
$("#rightColumnDivider",this.el).hide());b.gw?0==$("#user_menu_dd .aaMenuItem",this.el).length&&($("#user_menu_dd .profileMenuItem",this.el).parent().after('<li class="menu able"><a class="aaMenuItem">Artist Insights</a></li>'),$("#user_menu_dd .aaMenuItem",this.el).attr("href",b.gw).show()):0<$("#user_menu_dd .aaMenuItem",this.el).length&&$("#user_menu_dd .aaMenuItem",this.el).remove()}$(".logosubscriber",this.el).css("display","none");$(".logobusiness",this.el).css("display","none");null==b||b.J()?
$(".logo",this.el).css("display","block"):($(".logo",this.el).css("display","none"),b.S()?$(".logobusiness",this.el).css("display","block"):$(".logosubscriber",this.el).css("display","block"))},Vq:function(){$(".anonymousUser",this.el).hide();$(".notAnonymousUser",this.el).hide();$(".registeredUser",this.el).hide();$(".middlecolumn",this.el).fadeOut()},nt:function(){this.model.get("siteLocked")?($(".able",this.el).hide(),$(".middlecolumndisabled",this.el).show()):($(".able",this.el).show(),$(".middlecolumndisabled",
this.el).hide())},oR:function(){this.model.get("videoAdPlaying")?$(".disabled",this.el).show():$(".disabled",this.el).hide()},GM:function(){this.model.get("poisoned")?$(".registerLink",this.el).removeClass("underline").css("cursor","default"):$(".registerLink",this.el).addClass("underline").css("cursor","pointer")},ia:function(){this.model.get("modalPanel")==xu?this.Vq():this.Dn()},events:{"click .logo":"logoClick","click .logosubscriber":"logoClick","click .logobusiness":"logoClick","click .signoutMenuItem":"signoutMenuItemClick",
"click .helpMenuItem":"helpMenuItemClick","click .profileMenuItem":"profileMenuItemClick","click .upgradeLink":"upgradeLinkClick","mouseenter .stationChangeSelector":"mouseEnterStationSelector","mouseleave .stationChangeSelector":"mouseLeaveStationSelector","click .stationChangeSelector":"clickStationSelector","mouseenter .stationChangeList":"mouseEnterStationList","mouseleave .stationChangeList":"mouseLeaveStationList","click .stationChangeItem":"stationItemClick"},mouseEnterStationSelector:function(){this.Vj||
$(".stationChangeSelector").addClass("highlight")},mouseLeaveStationSelector:function(){this.Vj||$(".stationChangeSelector").removeClass("highlight")},clickStationSelector:function(b){if(0<$(b.target).parents(".scroll-pane").length)return!1;null!=this.model.get("currentStation")&&(this.Vj?this.yy():$(".middlecolumn .stationChangeList",this.el).fadeIn("fast",r(this,function(){this.Vj=!0})))},stationItemClick:function(b){b=$.tmplItem(b.target).data;z.b(ni,{stationId:b.e(),userInitiated:!0});return!1},
yy:function(){$(".middlecolumn .stationChangeList",this.el).fadeOut("fast",r(this,function(){this.Vj=!1;$(".stationChangeSelector").removeClass("highlight")}))},mouseEnterStationList:function(){this.ya&&(clearTimeout(this.ya),this.ya=null)},mouseLeaveStationList:function(){this.ya||(this.ya=setTimeout(r(this,function(){this.ya=null;this.yy()}),1E3))},logoClick:function(){this.model.get("modalPanel")!=xu&&R(Lu);return!1},upgradeLinkClick:function(){var b=this.model.get("currentUser"),c=hz(),d="other";
if("/"==c||0==c.indexOf("/station/play"))d="nowplaying";else if(0==c.indexOf("/account"))d="account";else if(0==c.indexOf("/one")||0==c.indexOf("/payment"))d="p1";s("p1_web_upgrade_clicks",{trial_eligible:b.rh,url_path:c,url_type:d},b);return!0},signoutMenuItemClick:function(){z.b(ti);return!1},helpMenuItemClick:function(){R(Pw);return!0},profileMenuItemClick:function(){var b=this.model.get("currentUser");return null!=b&&le(b.Y)?(V("/profile/"+b.Y,!0,!0),!1):!0}});function iz(){}
iz=Backbone.View.extend({initialize:function(){this.Xd=!1;$(".searchInput",this.el).val(Pa());this.va=new jz(this.model,$(".cd_activator",this.el),$("#cd_menu_dd"));this.ks=new kz({model:this.model});new lz({});this.Dh=null;this.model.bind("change:currentTrack",r(this,this.An));this.model.bind("change:currentUser",r(this,this.yq));this.model.bind("change:currentStation",r(this,this.pI));this.model.bind("change:searchText",r(this,this.Ke));this.model.bind("change:modalPanel",r(this,this.ia));this.model.bind("change:forceRegistration",
r(this,this.yn));this.model.bind("change:audioAdPlaying",r(this,this.LE));this.model.bind("change:videoAdPlaying",r(this,this.pR));this.model.bind("change:siteLocked",r(this,this.yn));this.model.bind("change:showingSearchResults",r(this,this.Uj));this.model.bind("change:hasStations",r(this,this.mk));this.model.bind("change:capped",r(this,this.mk));z.c(df,r(this,this.aj));$.address.bind("change",r(this,this.Pr))},el:$("#playerBar").get(0),An:function(){var b=this.model.get("currentTrack");if(null!=
b){if(b instanceof Go)$(".playerBarSong",this.el).removeAttr("href").css("text-decoration","none").text("Message From"),$(".playerBarArtist",this.el).removeAttr("href").css("text-decoration","none").text(b.W()),$(".playerBarAlbum",this.el).removeAttr("href").css("text-decoration","none").text(""),$(".playerByText",this.el).text(""),$(".playerOnText",this.el).text("");else{if(b instanceof Jn)$(".playerBarSong",this.el).removeAttr("href").css("text-decoration","none").text("Live Now"),$(".playerBarArtist",
this.el).removeAttr("href").css("text-decoration","none").text(b.W()),$(".playerBarAlbum",this.el).removeAttr("href").css("text-decoration","none").text(b.eb),$(".playerByText",this.el).text(b.gb?b.gb:"by");else if(b.Vl())$(".playerBarSong",this.el).removeAttr("href").css("text-decoration","none").text(b.Ca),$(".playerBarArtist",this.el).removeAttr("href").css("text-decoration","none").text(b.W()),$(".playerBarAlbum",this.el).removeAttr("href").css("text-decoration","none").text(b.eb),$(".playerByText",
this.el).text(b.gb?b.gb:"from");else{if(b instanceof Hn&&!b.pm())return;$(".playerBarSong",this.el).css("text-decoration","").text(b.Ca).attr("href",b.$g());$(".playerBarArtist",this.el).css("text-decoration","").text(b.W()).attr("href",b.Vg());b.hv?$(".playerBarAlbum",this.el).removeAttr("href").css("text-decoration","none").text(b.eb):$(".playerBarAlbum",this.el).css("text-decoration","").text(b.eb).attr("href",b.Ll());$(".playerByText",this.el).text(b.gb?b.gb:"by")}$(".playerOnText",this.el).text(b.Rb?
b.Rb:"on")}$(".info",this.el).toggle(!0);this.YA(b);$(".albumArt img",this.el).fadeOut("default",function(){$(this).remove()});var c=$("#playerBarArtTmpl").tmpl(b.ub()),c=$(c).hide().bind("imgpreload",function(){b instanceof Hn&&$("#mainContent .home").is(":visible")&&$(this).fadeOut();b instanceof Hn?($(this).fadeIn(),$(this).addClass("backstage_ad_icon")):$(this).fadeIn()});$(".albumArt",this.el).append(c);$(".albumArt",this.el).show();$(".rightcolumn .nowplaying",this.el).stop(!0,!0).fadeIn();
$(".rightcolumn .nowplaying",this.el).show();(b instanceof Hn||b.Jc)&&$(".info",this.el).fadeOut(200);this.lp(b)?this.va.enable():this.va.disable()}else $(".middlecolumn",this.el).fadeOut(),$(".rightcolumn .nowplaying",this.el).fadeOut()},Pr:function(b){this.model.get("currentTrack")instanceof Hn&&("/"==b.path?($(".albumArt img",this.el).hide(),$(".albumArt img",this.el).removeClass("backstage_ad_icon")):($(".albumArt img",this.el).show(),$(".albumArt img",this.el).addClass("backstage_ad_icon")))},
YA:function(b){1==b.Lc?this.ks.ZK():-1==b.Lc?this.ks.YK():this.ks.XK()},aj:function(b){var c=b.track;b=b.stationId;var d=this.model.get("currentTrack"),e=this.model.get("currentStation");null!=d&&c.o()==d.o()&&null!=e&&e.e()==b&&this.YA(c)},pI:function(){null==this.model.get("currentStation")?$(".middlecolumn",this.el).fadeOut():$(".middlecolumn",this.el).fadeIn();$(".rightcolumn .nowplaying",this.el).fadeOut();this.mk()},Ke:function(){var b=this.model.get("searchText");null!=b&&0!=b.length||this.Xd||
$(".searchInput",this.el).val(Pa())},yq:function(){this.mk();var b=this.model.get("currentUser");null!=b&&b.J()?$("#skinTab",this.el).hide():$("#skinTab",this.el).show()},ia:function(){this.model.get("modalPanel")==vu?this.rG():this.fG();this.mk()},mk:function(){var b=this.model.get("modalPanel"),c=this.model.get("currentStation");this.model.get("currentTrack");this.model.get("capped")||"WELCOME_SEARCH"==b||"REDEMPTION_PANEL"==b||b==Au||"REGISTERED_PANEL"==b||null==c&&_.include([yu,wu,xu,zu,Eu,Cu,
Du],b)?($("#playerBar").stop(!0,!0).fadeOut(),$("#mainContainer").addClass("no_player_bar")):($("#mainContainer").removeClass("no_player_bar"),$("#playerBar").stop(!0,!0).fadeIn(),mz(this.model)?$(".leftcolumn",this.el).fadeOut():$(".leftcolumn",this.el).fadeIn())},lp:function(b){return!b||!(b instanceof Hn||b instanceof In||b instanceof Jn||b.Jc||b.Hk)&&b.av&&b.bv&&b.ro?!0:!1},LE:function(){this.yn();if(this.model.get("audioAdPlaying"))$(".info",this.el).fadeOut(),this.va.disable();else{this.model.get("videoAdPlaying")||
$(".info",this.el).fadeIn();var b=this.model.get("currentTrack");this.lp(b)?this.va.enable():this.va.disable()}},pR:function(){this.yn();var b=this.model.get("videoAdPlaying");null!=b?($(".info",this.el).fadeOut(),$(".albumArt img",this.el).hide(),this.va.disable(),b.hb()||$(".middlecolumn .progress",this.el).hide()):(b=this.model.get("currentTrack"),this.An(),this.lp(b)?this.va.enable():this.va.disable(),$(".middlecolumn .progress",this.el).show())},yn:function(){this.model.get("siteLocked")||this.model.get("forceRegistration")||
this.model.get("audioAdPlaying")||this.model.get("videoAdPlaying")||this.model.get("liveStreamPlaying")?($(".disabled",this.el).css("opacity",0.01).show(),Ae()?$(".columns",this.el).fadeTo(400,0.6):($(".columns .leftcolumn",this.el).fadeTo(400,0.6),$(".columns .middlecolumn",this.el).fadeTo(400,0.6),this.model.get("audioAdPlaying")||$(".columns .rightcolumn",this.el).fadeTo(400,0.6)),this.model.set({playerBarEnabled:!1})):($(".disabled",this.el).hide(),Ae()?$(".columns",this.el).fadeTo(400,1):($(".columns .leftcolumn",
this.el).fadeTo(400,1),$(".columns .middlecolumn",this.el).fadeTo(400,1),$(".columns .rightcolumn",this.el).fadeTo(400,1)),this.model.set({playerBarEnabled:!0}))},Uj:function(){this.model.get("showingSearchResults")||(this.Xd=!1,setTimeout(function(){$(".searchInput",this.el).blur()},1))},fG:function(){$(".searchInput",this.el).attr("disabled","true");$(".searchInput",this.el).val("")},rG:function(){$(".searchInput",this.el).prop("disabled",!1);$(".searchInput",this.el).val(Pa())},events:{"click .cd_icon":"albumArtClick",
"click .searchBox":"searchBoxClick","focus .searchInput":"searchInputFocus","blur .searchInput":"searchInputBlur","keyup .searchInput":"searchInputKeyup","click .disabled":"handleAdPause","click .playerBarSong":"songClick","click .playerBarAlbum":"albumClick","click .playerBarArtist":"artistClick","click #skinTab":"skinsMenuItemClick"},skinsMenuItemClick:function(){R(Su);return!1},handleAdPause:function(){this.model.get("audioAdPlaying")&&(this.model.get("musicPlaying")?z.b(gi):z.b(ei))},songClick:function(){R($w,
"song")},albumClick:function(){R($w,"album")},artistClick:function(){R($w,"artist")},searchBoxClick:function(){if(this.model.get("searchText"))return!1;$(".searchInput",this.el).focus()},albumArtClick:function(){var b=this.model.get("currentTrack");b instanceof Hn?b.uf&&window.open(b.uf):R(Lu);return!1},searchInputFocus:function(b){this.Xd=!0;b.target.value==Pa()&&(b.target.value="",$("#playerBar .searchSubText").show());$(b.target).addClass("focus");null==this.Dh&&(this.Dh=setTimeout(r(this,function(){this.model.set({showingSearchResults:!0});
this.Dh=null}),100))},searchInputBlur:function(b){this.uw();this.Xd=!1;""==b.target.value&&(b.target.value=Pa(),$("#playerBar .searchSubText").hide());$(b.target).removeClass("focus")},searchInputKeyup:function(b){this.uw();this.model.set({showingSearchResults:!0});R(Ku,b);""===b.target.value?$("#playerBar .searchSubText").show():$("#playerBar .searchSubText").hide()},uw:function(){this.Dh&&(clearTimeout(this.Dh),this.Dh=null)},Po:function(b){var c=Math.floor(b/60);b="0"+(b-60*c);return c+":"+b.substring(b.length-
2)}});function kz(){}
kz=Backbone.View.extend({initialize:function(){this.model.bind("change:trackProgress",r(this,this.dR));this.model.bind("change:musicPlaying",r(this,this.ZQ));this.model.bind("change:currentTrack",r(this,this.An))},el:$("#playbackControl").get(0),An:function(){var b=this.model.get("currentTrack");null!=b&&(b instanceof Go||b instanceof Ho?($(".thumbUpButton",this.el).addClass("disabledThumb"),$(".thumbDownButton",this.el).addClass("disabledThumb"),$(".skipButton",this.el).removeClass("disabledSkip")):b instanceof
Jn?($(".thumbUpButton",this.el).addClass("disabledThumb"),$(".thumbDownButton",this.el).addClass("disabledThumb"),$(".skipButton",this.el).addClass("disabledSkip")):b instanceof Fn&&(oy(b,this.model.get("stationList"))?($(".thumbUpButton",this.el).addClass("disabledThumb"),$(".thumbDownButton",this.el).addClass("disabledThumb")):($(".thumbUpButton",this.el).removeClass("disabledThumb"),$(".thumbDownButton",this.el).removeClass("disabledThumb")),$(".skipButton",this.el).removeClass("disabledSkip")))},
dR:function(){var b=this.model.get("trackProgress");if(b.isLive)$(".elapsedTime",this.el).text("--:--"),$(".remainingTime",this.el).text("LIVE"),$(".progressMiddle",this.el).attr("width",0);else{var c=b.totalTime,d=b.elapsedTime,b=b.percentPlayed;$(".elapsedTime",this.el).text(this.Po(d));$(".remainingTime",this.el).text("-"+this.Po(0<c?c-d:0));$(".progressMiddle",this.el).attr("width",Math.floor(345*b/100))}},ZQ:function(){this.model.get("musicPlaying")?($(".playButton",this.el).hide(),$(".pauseButton",
this.el).show()):($(".pauseButton",this.el).hide(),$(".playButton",this.el).show())},YK:function(){$(".thumbDownButton",this.el).addClass("indicator");$(".thumbUpButton",this.el).removeClass("indicator")},ZK:function(){$(".thumbUpButton",this.el).addClass("indicator");$(".thumbDownButton",this.el).removeClass("indicator")},XK:function(){$(".thumbUpButton",this.el).removeClass("indicator");$(".thumbDownButton",this.el).removeClass("indicator")},events:{"click .playButton":"playButtonClick","click .pauseButton":"pauseButtonClick",
"click .skipButton":"skipButtonClick","click .thumbDownButton":"thumbDownButtonClick","click .thumbUpButton":"thumbUpButtonClick"},playButtonClick:function(b){$(b.target).blur();z.b(ei,{userInitiated:!0});s("link",{click:"playButton",source:"PlayBackView",station_id:this.model.get("currentStation").e()},this.model.get("currentUser"));return!1},pauseButtonClick:function(b){$(b.target).blur();z.b(gi);s("link",{click:"pauseButton",source:"PlayBackView",station_id:this.model.get("currentStation").e()},
this.model.get("currentUser"));return!1},skipButtonClick:function(b){$(b.target).blur();if($(b.currentTarget).hasClass("disabledSkip"))return!1;z.b(hi);b=this.model.get("currentTrack");null!=b&&(b="/song/skip/"+b.o(),nz(b),oz(b));return!1},thumbDownButtonClick:function(b){$(b.target).blur();if($(b.currentTarget).hasClass("disabledThumb"))return!1;b=$(b.currentTarget).hasClass("indicator");var c=this.model.get("currentTrack");null!=c&&(b?R(Cv,{isPositive:!1,musicID:c.o()}):R(Bv,{isPositive:!1,musicId:c.o()}));
return!1},thumbUpButtonClick:function(b){$(b.target).blur();if($(b.currentTarget).hasClass("disabledThumb"))return!1;b=$(b.currentTarget).hasClass("indicator");var c=this.model.get("currentTrack");null!=c&&(b?R(Cv,{isPositive:!0,musicID:c.o()}):R(Bv,{isPositive:!0,musicId:c.o()}));return!1},Po:function(b){var c=Math.floor(b/60);b="0"+(b-60*c);return c+":"+b.substring(b.length-2)}});function lz(){}
lz=Backbone.View.extend({Vh:20,Xu:102,ya:null,Nf:!1,Np:!1,initialize:function(){S(Gv,r(this,this.BN));z.c(qi,r(this,this.Rj));this.Rj(null);$(".volumeKnob",this.el).draggable({axis:"x",containment:$(".volumeBar",this.el),start:r(this,this.Lp),stop:r(this,this.Mp),drag:r(this,this.Kp)});pz("/volume/")},jl:function(b){this.$A(b);z.b(qi,b)},BN:function(){var b=Jm();um(Fl,!1);this.Rj(b);this.jl(b)},Lp:function(){this.Np=!0},Mp:function(b,c){this.Np=!1;var d=this.sq(c.position.left);this.jl(d);this.Rj(d);
R(Lw);this.Nf||this.hn()},Kp:function(b,c){var d=this.sq(c.position.left);this.jl(d)},el:$("#playerBar .volumeControl").get(0),Rj:function(b){null==b?b=Km()?0:Jm():0>b?b=0:100<b&&(b=100);this.$A(b);b=this.Vh+b/100*(this.Xu-this.Vh);$(".volumeKnob",this.el).css("left",b)},$A:function(b){0>=b?$(".volumeButton").addClass("muted"):$(".volumeButton").removeClass("muted")},sq:function(b){null==b&&(b=$(".volumeKnob",this.el).position().left);return Math.round((b-this.Vh)/(this.Xu-this.Vh)*100)},ar:1E3,hn:function(){this.Np||
(this.mn(),this.ya=setTimeout(r(this,function(){$(".volumeBackground",this.el).fadeOut(200)}),this.ar))},mn:function(){null!=this.ya&&(clearTimeout(this.ya),this.ya=null)},events:{"click .volumeBackground":"volumeBackgroundClick","mouseenter .volumeButton":"volumeButtonMouseEnter","mouseleave .volumeButton":"volumeButtonMouseLeave","click .volumeButton":"volumeButtonClick","mouseenter .volumeBackground":"volumeBackgroundMouseEnter","mouseleave .volumeBackground":"volumeBackgroundMouseLeave"},volumeBackgroundClick:function(b){b=
b.pageX-$(".volumeBar",this.el).offset().left;var c=$(".volumeKnob",this.el).width();b=Math.max(c/2,b);b=Math.min($(".volumeBar",this.el).width()-c/2,b);b-=c/2;$(".volumeKnob",this.el).css("left",this.Vh+b);b=this.sq();this.jl(b);this.Rj(b);R(Lw);return!1},volumeButtonMouseEnter:function(){this.Nf=!0;this.mn();$(".volumeBackground",this.el).fadeIn(200);return!1},volumeButtonMouseLeave:function(){this.Nf=!1;this.hn();return!1},volumeButtonClick:function(){$(".volumeBackground",this.el).is(":visible")?
(this.ar=1E3,this.Nf=!1,$(".volumeBackground",this.el).fadeOut(200),this.hn()):(this.ar=1E4,this.Nf=!1,this.mn(),$(".volumeBackground",this.el).fadeIn(200));return!1},volumeBackgroundMouseEnter:function(){this.Nf=!0;this.mn();return!1},volumeBackgroundMouseLeave:function(){this.Nf=!1;this.hn();return!1}});function qz(){}
qz=Backbone.View.extend({initialize:function(){this.Xd=!1;$(".searchInput",this.el).val(Qa());$(".onboarding__register").fadeIn();this.model.bind("change:searchText",r(this,this.Ke));this.model.bind("change:modalPanel",r(this,this.ia));this.model.bind("change:showingSearchResults",r(this,this.Uj));this.model.bind("change:currentUser",r(this,this.WA))},el:$("#welcomeSearch").get(0),Ke:function(){var b=this.model.get("searchText");null!=b&&0!=b.length||this.Xd||$(".searchInput",this.el).val(Qa())},ia:function(){var b=
this.model.get("modalPanel");if("WELCOME_SEARCH"==b||b==yu){if("WELCOME_SEARCH"==b){R(rw);var c=this.model.get("currentUser");(null==c||c.p())&&ue("anonymous_listening","standard")}else b==yu&&R(tw);this.WA();"hidden"==$(this.el).css("visibility")&&($(this.el).hide(),$(this.el).css("visibility","visible"));$(this.el).is(":visible")?this.SA(b):$(this.el).stop(!0,!0).fadeIn(400,r(this,function(){this.SA(b)}));$("#footer").addClass("footer_welcome_margin")}else $(this.el).stop(!0,!0).hide(),$("#footer").removeClass("footer_welcome_margin")},
SA:function(b){b==yu&&($(".searchBox",$(this.el)).stop(!0,!0).hide(),$(".bottom",$(this.el)).stop(!0,!0).show(),$(".onboarding__login").fadeOut(),$(".onboarding__register").fadeIn())},WA:function(){var b=this.model.get("currentUser");mz(this.model)&&"WELCOME_SEARCH"==this.model.get("modalPanel")?($(".onboarding__register").fadeIn(),this.model.set({modalPanel:yu})):null==b||b.p()?($(".bottom",this.el).show(),$(".onboarding__register").fadeIn()):($(".bottom",this.el).hide(),$(".onboarding__register").fadeOut())},
Uj:function(){this.model.get("showingSearchResults")||(this.Xd=!1,setTimeout(function(){$(".searchInput",this.el).blur()},1))},events:{"focus .searchInput":"searchInputFocus","blur .searchInput":"searchInputBlur","keyup .searchInput":"searchInputKeyup"},searchInputFocus:function(b){this.Xd=!0;b.target.value==Qa()&&(b.target.value="");$(b.target).addClass("focus");this.model.set({showingSearchResults:!0})},searchInputBlur:function(b){this.Xd=!1;""==b.target.value&&(b.target.value=Qa());$(b.target).removeClass("focus")},
searchInputKeyup:function(b){R(Ku,b);b=this.model.get("currentUser");(null==b||b.p())&&ue("anonymous_listening","station_search")}});function rz(){}
rz=Backbone.View.extend({initialize:function(){this.Hn=!1;this.model.get("searchResults").bind("refresh",r(this,this.aR));this.model.bind("change:searchText",r(this,this.Ke));this.model.bind("change:searchItemSelectedIndex",r(this,this.Bh));this.model.bind("change:showingSearchResults",r(this,this.Uj));this.model.bind("change:modalPanel",r(this,this.ia));this.model.set({searchSelectedIndex:-1});this.Hb=this.fj=null;var b=Yo();b&&0<b.length&&$.ajax({type:"HEAD",async:!0,url:b,success:r(this,function(){this.fj=
Yo();this.Hb=A._data.createStationHintGenre||"top_stations"})});this.render()},Ke:function(){var b=this.model.get("searchText");if(this.model.get("showingSearchResults")){var c=$(".content",this.el);null==b||0==b.length?(c.empty().append($("#searchPopupEmptyContent").tmpl(this.model.get("searchSuggestions"),{hintPath:this.fj,hintGenre:this.Hb})),R(Uw)):Zx(b)&&c.empty().append($("#searchPopupIncompleteEmail").tmpl({query:this.model.get("searchText")},{hintPath:this.fj,hintGenre:this.Hb}))}},Bh:function(){$(".item",
this.el).removeClass("selected");var b=this.model.get("searchItemSelectedIndex");if(0<=b){b>=$(".item",this.el).length&&(b=$(".item",this.el).length-1,this.model.set({searchItemSelectedIndex:b}));$(".item",this.el).eq(b).addClass("selected");var b=".items .scrollPoint.selected",c=$(b,this.el);c.prev().hasClass("heading")&&(b=".items .scrollPoint:eq("+(c.index()-1)+")");dy($(".items",this.el),b)}},Uj:function(){if(this.model.get("showingSearchResults")){R(Sw);this.model.set({searchSequenceNum:0});
var b={action:"access",listener_id:v.i.s,vendor_id:u,device_id:we,device_os:se(),URL:hz(),app_version:z.ba,sequence_number:this.model.get("searchSequenceNum"),page_view:"search",view_mode:"search_prompt",source:"station_list_top",client_timestamp_ms:Date.now()};s("search_action",b,null);this.Ke();this.TA();$(".searchPopupContainer",this.el).fadeIn("fast");this.model.set({searchSelectedIndex:-1})}else{R(Tw);$(".searchPopupContainer",this.el).fadeOut("fast",r(this,function(){this.model.set({searchText:""});
this.TA()}));b=(this.model.get("serverSearchResults")&&this.model.get("serverSearchResults").length?this.model.get("serverSearchResults").split(","):"").length;if(this.model.get("searchItemSelectedIndex")==b){this.model.set({searchSequenceNum:this.model.get("searchSequenceNum")+1});var c=void 0===this.model.get("clientSearchResults")?0:this.model.get("clientSearchResults").split(",").length,b={action:"search_for",listener_id:v.i.s,vendor_id:u,device_id:we,device_os:se(),app_version:z.ba,sequence_number:this.model.get("searchSequenceNum"),
page_view:"search",view_mode:"search_results",client_timestamp_ms:Date.now(),query:this.model.get("searchText"),num_results_shown:c,num_results_returned:b,server_result_list:this.model.get("serverSearchResults"),client_result_list:this.model.get("clientSearchResults")};s("search_action",b,null)}0<=this.model.get("searchSequenceNum")&&0>this.model.get("searchItemSelectedIndex")&&(this.model.set({searchSequenceNum:this.model.get("searchSequenceNum")+1}),b=hz(),c="back",-1<b.indexOf("/music/top-stations")?
c="browse_before_search":"/"!=b&&(c=b),b={action:"exit_navigate_away",listener_id:v.i.s,vendor_id:u,device_id:we,device_os:se(),app_version:z.ba,sequence_number:this.model.get("searchSequenceNum"),page_view:"search",view_mode:"search_prompt",client_timestamp_ms:Date.now(),exit_path:c},s("search_action",b,null),this.model.set({searchSelectedIndex:-1}))}},TA:function(){$(this.el).detach();$(this.Hn?"#searchPopupWelcomePosition":"#searchPopupNavPosition").append(this.el)},ia:function(){"WELCOME_SEARCH"==
this.model.get("modalPanel")?this.Hn=!0:this.Hn=!1},aR:function(b){var c=$(".content",this.el);c.empty();c.append('<div class="items scroll-pane vertical-only"></div>');if(0<b.length){var d=null;$.each(b.models,function(b,h){d!=h.ob()&&(d=h.ob(),0<d.length&&$(".items",c).append($("#searchPopupHeading").tmpl(h.ob())));$(".items",c).append($(h.Vb()).tmpl(h))});c.append($("#searchPopupFooterTmpl").tmpl({query:this.model.get("searchText")},{hintPath:this.fj,hintGenre:this.Hb}));R(Uw);b=this.Hn?"#searchPopupWelcomePosition":
"#searchPopupNavPosition";b=$(window).height()-parseInt($(b).css("top"),10)-105;$(".items",this.el).css("max-height",b)}else c.append($("#searchPopupNoSearchResults").tmpl({query:this.model.get("searchText")},{hintPath:this.fj,hintGenre:this.Hb})),R(Uw);setTimeout(r(this,function(){ay($(".scroll-pane",this.el))}),1);this.Bh()},render:function(){$(this.el).append($("#searchPopupTmpl").tmpl());return this},events:{"click .item":"searchResultItemClick","click .profileName":"profileClick","click .showAllResults":"performExtendedSearch",
"click .createStationHint":"browseGenresClick","click .browseGenres":"browseGenresClick","mouseenter .item":"searchResultItemMouseEnter","mouseleave .item":"searchResultItemMouseLeave"},searchResultItemClick:function(b){var c,d,e,h=null,l=null,p=-1,q=void 0===this.model.get("clientSearchResults")?0:this.model.get("clientSearchResults").split(",").length,t=void 0===this.model.get("serverSearchResults")?0:this.model.get("serverSearchResults").split(",").length;$(b.currentTarget).data("search")?(s("link",
{click:"extendedSearchLink",source:"SearchPopupView"},this.model.get("currentUser")),this.performExtendedSearch(),this.model.set({searchSelectedIndex:t})):$(b.currentTarget).data("genres")?(s("link",{click:"browseGenreLink",source:"SearchPopupView"},this.model.get("currentUser")),l=$("a",$(b.currentTarget)).attr("href"),b=mn(),0==l.indexOf(b)&&(l=l.substr(b.length-1)),V(l,!0,!0),this.model.set({searchSelectedIndex:t+1})):(c=$.tmplItem(b.currentTarget).data,d=c.get("musicId"),p=-1,$.each(c.collection.models,
function(b,c){c.get("musicId")==d&&(p=b)}),this.model.set({searchSelectedIndex:p}),e=c.get("stationId"),h=null,c=c.get("searchableStationId"),null!=c?h=c:null!=e?h=Kn.StationKeyType.FRIENDS_STATION+e:null!=d&&(h=$(b.currentTarget).data("genre-suggest")?Kn.StationKeyType.GENRE_SUGGEST+d:$(b.currentTarget).data("artist-suggest")?Kn.StationKeyType.ARTIST_SUGGEST+d:$(b.currentTarget).data("facebook-suggest")?Kn.StationKeyType.FACEBOOK_SUGGEST_SEARCH_VIEW+d:d),this.trigger("createStationRequest",h));b=
$(".showAllResults",this.el).text();h=!1;(c=this.model.get("currentStation"))&&(c=zn(c))&&c.key!=d&&(h=!0);c=d&&d.length?d.substr(0,1):null;e={action:"select",listener_id:v.i.s,vendor_id:u,device_id:we,device_os:se(),app_version:z.ba,sequence_number:this.model.get("searchSequenceNum"),page_view:"search",view_mode:"search_autocomplete",source:"station_list_top",URL:l,client_timestamp_ms:Date.now(),selected_result_id:d,selected_result_unique_id:e,selected_index:p,select_result_type:c,client_result_list:this.model.get("clientSearchResults"),
server_result_list:this.model.get("serverSearchResults"),num_results_shown:q,num_results_returned:t,selected_result_action:d?"play":"view",query:b,new_station:h};s("search_action",e,null);return!1},profileClick:function(b){b=$.tmplItem(b.target).data.get("webName");this.trigger("openProfilePageRequest",b)},performExtendedSearch:function(){s("link",{click:"extendedSearchRequest",source:"SearchPopupView"},this.model.get("currentUser"));this.trigger("extendedSearchRequest");return!1},browseGenresClick:function(){$(".searchPopupContainer",
this.el).fadeOut("slow",r(this,function(){this.model.set({showingSearchResults:!1});this.model.set({searchText:""})}))},searchResultItemMouseEnter:function(b){b=$(".item",this.el).index(b.target);this.model.set({searchItemSelectedIndex:b})},searchResultItemMouseLeave:function(){this.model.set({searchItemSelectedIndex:-1})}});function sz(){}
sz=Backbone.View.extend({initialize:function(){this.model.bind("change:siteLocked",r(this,this.nt));z.c(Vg,r(this,this.xq));S(mx,r(this,this.dy))},el:$("#mainContentContainer .contentnav").get(0),nt:function(){this.model.get("siteLocked")?$(".disabled",this.el).show():$(".disabled",this.el).hide()},events:{"click .home":"homeClick","click .myprofile":"profileClick","click .friends":"friendsClick"},profileClick:function(){s("link",{click:"my_profile"},this.model.get("currentUser"));var b=this.model.get("currentUser");
null!=b&&le(b.Y)?V("/profile/"+b.Y,!0,!0):V("/profile",!0,!1);return!1},homeClick:function(){R(Lu);R(Nw);return!1},friendsClick:function(){s("link",{click:"music_feed"},this.model.get("currentUser"));V("/feed",!0,!0);return!1},xq:function(b){b.NEW_SITE_FEED?$(".friends",this.el).show():this.dy()},dy:function(){$(".friends",this.el).hide();0<=hz().indexOf("/feed")&&this.homeClick()}});function tz(){}
(function(){function b(b){return b.map(function(b){var c=b.get("_originalSeed");return _.extend(b.toJSON(),{allowAddVariety:b.get("_isCreator")&&b.get("canTransform")&&!(null!=c&&null!=c.key&&null!=c.wt)&&!b.get("_isThumbprintStation")})})}tz=Backbone.View.extend({initialize:function(){this.kn=this.options.station_menu;z.c(Ie,r(this,this.render));S(Wu,r(this,this.render));S(mw,r(this,this.bR));S(Lu,r(this,this.Va));S(aw,r(this,this.vI));S($v,r(this,this.uI));this.Yd=this.model.get("stationList");this.model.get("promotedStationList");
this.Yd.bind("refresh",r(this,this.render));this.Yd.bind("add",r(this,this.eh));this.Yd.bind("change",r(this,this.eh));this.Yd.bind("remove",r(this,this.render));this.model.bind("change:currentStation",r(this,this.Ay));this.model.bind("change:currentTrack",r(this,function(){this.zy(!0)}));this.model.bind("change:currentShuffleType",r(this,this.VA));this.model.bind("change:currentStationViewIsShuffle",r(this,this.render));this.YF=W("/stations/delete",!0,!1,!0,r(this,this.Rw));W("/stations/remove",
!0,!1,!0,r(this,this.Rw));W("/stations/dismiss",!0,!1,!0,r(this,this.hG));$("#stationSortDate").click(r(this,this.rQ));$("#stationSortAlpha").click(r(this,this.qQ))},el:$("#stationList").get(0),render:function(){var c=2<this.model.get("stationList").length,d=this.model.get("currentStationViewIsShuffle");if(!c&&d)this.model.set({currentStationViewIsShuffle:!1});else return c=d?"#stationShuffleTmpl":"#stationTmpl",this.Yd.each(r(this,function(b){b.set({canTransform:b.re()!=m.Gc.Ve(),sortAlpha:this.model.get("stationSortOrderAlpha"),
stationIsAdvertiserStation:b.rc()},{silent:!0});if(b.Ub())b.set({stationIsRecommendedStation:!0},{silent:!0}),this.model.get("stationSortOrderAlpha")||b.n._impressionTracked||(s("promoted_stations",{action:"rec_shown",device_os:"web",vendor_id:100,token_type:"music",token:b.wa()},this.model.get("currentUser")),b.n._impressionTracked=!0);else if(b.Db()){var c=b.n._promotedSponsorText;b.set({stationIsPromotedStation:!0,promotedSponsorText:c,promotedSponsorTextIsLengthy:21<c.length?!0:!1},{silent:!0});
this.model.get("stationSortOrderAlpha")||(null!=b.n._promotedImpressionUrls&&setTimeout(function(){$.each(b.n._promotedImpressionUrls,function(){var b=this;""!=b&&Jp(b,function(){},function(){k.debug("Promoted station impression url failure: "+b)})});b.n._promotedImpressionUrls=null},100),b.n._impressionTracked||(s("promoted_stations",{action:"promo_shown",device_os:"web",vendor_id:100,token_type:"station",token:b.e()},this.model.get("currentUser")),b.n._impressionTracked=!0))}else b.Cb()&&(b.set({stationIsCustomContentStation:!0},
{silent:!0}),(c=b._expiration)&&6048E5>=c-(new Date).getTime()?b.set({isExpiring:!0,expirationDate:Ay.jH(c)},{silent:!0}):b.set({isExpiring:!1},{silent:!0}))})),$(this.el).empty().append($(c).tmpl(b(this.Yd))),$(".inactiveHoverArrow",this.el).hide(),this.Ay(),this.VA(),this.model.get("currentStationViewIsShuffle")&&($(".shuffleStationLabel").removeClass("shuffleStationLabelCurrent"),c=this.model.get("currentStation"),null!=c&&c.D()&&c.Z()&&(c=c.qe(),null!=c&&(this.Bw(c),this.zy(!1)))),2<this.Yd.length||
$("#shuffleContainer").parent().hide(),this.ki(),this.Rt(),ny(this.el),this},VA:function(){var b=this.model.get("currentShuffleType"),b="my"==b?"My Shuffle":"Shuffle "+b+" stations";$("#shuffleTypeLabel",this.el).text(b)},Va:function(){setTimeout(r(this,function(){this.ki()}),200)},bR:function(b){_.each($(".stationNameText",this.el),r(this,function(d){$.tmplItem(d).data.e()==b.e()&&(Ae()?$(d).text(b.ca()):d.textContent=this.PQ(b.ca()))}))},PQ:function(b){var d={"&#x2F;":"/"},e;for(e in d)b=b.replace(e,
d[e]);return b},ki:function(b){setTimeout(r(this,function(){ay($(".stationListHolder"),"station_list");$(".stationListHolder .jspPane").css("padding-bottom",0);b&&b()}),1)},eh:function(){this.render()},uI:function(){this.Op=!1;this.em();$(".stationName_hover",this.el).removeClass("stationName_hover")},vI:function(b){"station_menu_dd"==b.attr("id")&&(this.Op=!0)},Ay:function(){this.em();$("#shufflePicker").fadeOut(1);var b=null,d=this.model.get("currentStation");null!=d&&(b=d.e());$(".stationListItem",
this.el).each(function(){$.tmplItem(this).data.e()==b?$(this).addClass("selected"):$(this).removeClass("selected")});this.ki(r(this,function(){var b=$("#stationList .stationListItem.selected");b&&0<b.index()&&dy($(this.el),"#stationList .stationListItem.selected")}));uz(this.kn,d,$("#stationList .stationListItem.selected .optionsItem"))},scrollTo:function(b,d){var e=$(".scroll-pane",this.el).data("jsp");e&&e.scrollTo(b,d)},Bw:function(b){$(".shuffleStation",this.el).prop("checked",!1);for(var d=0;d<
b.length;d++)$("#shuffleStation_"+b[d]).prop("checked",!0);var d=this.model.get("currentShuffleType"),e=$(".stationListItem .stationNameText.notSelectableStation",this.el).length;"all"==d&&b.length!=this.model.get("stationList").length-1-e&&this.model.set({currentShuffleType:"my"})},zy:function(b){$(".shuffleStationLabel").removeClass("shuffleStationLabelCurrent");var d=this.model.get("currentTrack");null!=d&&this.model.get("currentStationViewIsShuffle")&&(d="#shuffleStationLabel_"+d.e(),$(d).addClass("shuffleStationLabelCurrent"),
b&&dy($(".stationListHolder"),d),this.ki())},jy:function(b){this.Bw(b.qe())},hG:function(b){b=b.pathNames[2];var d=null,e=null,h=this.model.get("menuStation");null==b&&null!=h&&(b=h.e(),d=wn(h),e=xn(h));b&&d&&z.b(Pg,{stationId:b,adId:d,correlationId:e});vz()},Rw:function(b){b=b.pathNames[2];null==b&&null!=this.model.get("menuStation")&&(b=this.model.get("menuStation").e());b?this.xl(b):(b=this.model.get("currentStation"),null!=b&&this.xl(b.e()));vz()},xl:function(b){R(ev,b)},rQ:function(){$("#stationSortDate").hasClass("selected")||
(s("link",{click:"sortStationsDate",source:"StationListView"},this.model.get("currentUser")),this.model.set({stationSortOrderAlpha:!1}),this.Rt())},qQ:function(){$("#stationSortAlpha").hasClass("selected")||(s("link",{click:"sortStationsAlpha",source:"StationListView"},this.model.get("currentUser")),this.model.set({stationSortOrderAlpha:!0}),this.Rt())},Rt:function(){this.model.set({stationSortOrderAlpha:wl?!0===om(Pl):!1});this.model.get("stationSortOrderAlpha")?($("#stationSortDate").removeClass("selected"),
$("#stationSortAlpha").addClass("selected")):($("#stationSortDate").addClass("selected"),$("#stationSortAlpha").removeClass("selected"))},events:{"click #shuffleButtonHoverArea":"shuffleButtonHoverArea_click","mouseover #shuffleContainer":"shuffleContainer_mouseOver","mouseout #shuffleContainer":"shuffleContainer_mouseOut","click .stationListItem":"stationItemClick","click .addVariety":"addVarietyClick","mouseover .stationListItem .inactiveHoverArrow":"stationListItemMouseEnter","mouseout .stationListItem .inactiveHoverArrow":"stationListItemMouseLeave",
"mouseover .stationListItem":"stationListItemMouseEnter","mouseout .stationListItem":"stationListItemMouseLeave"},deleteButtonClicked:function(b){b=$.tmplItem(b.target).data.stationId;this.YF.update("/stations/delete/"+b);return!1},em:function(){$(".inactiveHoverArrow:visible",this.el).hide()},stationListItemMouseEnter:function(b){if(!0!=this.Op){b=$(".stationName",$(b.target).parents(".stationListItem"));var d=this.model.get("currentStation"),e=-1;null!=d&&(e=d.e());d=$.tmplItem(b[0]).data;try{if(d.e()!=
e){$(".stationName_hover").removeClass("stationName_hover");b.addClass("stationName_hover");this.em();var h=$(".inactiveHoverArrow",b.parents(".stationListItem"));h.show();uz(this.kn,d,h)}else uz(this.kn,this.model.get("currentStation"),$("#stationList .stationListItem.selected .optionsItem"))}catch(l){}}},stationListItemMouseLeave:function(){!0!=this.Op&&($(".stationName_hover",this.el).removeClass("stationName_hover"),this.em(),uz(this.kn,this.model.get("currentStation"),$("#stationList .stationListItem.selected .optionsItem")))},
stationItemClick:function(b){setTimeout(r(this,function(){var d=[],e=$.tmplItem(b.target).data;if($(b.target).hasClass("checkbox"))$(".shuffleStation:checked",this.el).each(function(b,c){var e=c.id.indexOf("_");d.push(c.id.substr(e+1))}),0<d.length?e.D()&&e.Z()?this.model.set({currentStationViewIsShuffle:!1}):(this.model.set({currentShuffleType:"my"}),um(dm,d.join(",")),z.b(pi,{stationIdArray:d,isExplicitSave:!0,shuffleType:this.model.get("currentShuffleType")})):this.model.set({currentStationViewIsShuffle:!1});
else if($(b.target).hasClass("stationNameText")||!this.model.get("currentStation").D()||!this.model.get("currentStation").Z())if(this.model.get("currentShuffleType")||this.model.set({currentShuffleType:"all"}),e.Db()&&le(e.e())){var h=this.model.get("currentUser");e.Zg()==h.s?(new X({message:mc()})).render():(z.b(Ng,{stationCode:"fs"+e.e(),adId:wn(e),correlationId:xn(e),trackingUrls:e._promotedTrackingUrls}),s("promoted_stations",{action:"promo_added",device_os:"web",vendor_id:100,token_type:"station",
token:e.e()},this.model.get("currentUser")))}else e.Ub()&&le(e.wa())?(z.b(Og,"mi"+e.wa()),s("promoted_stations",{action:"rec_added",device_os:"web",vendor_id:100,token_type:"music",token:e.wa()},this.model.get("currentUser"))):z.b(ni,{stationId:e.e(),userInitiated:!0})}),1);this.ki();return!1},shuffleContainer_mouseOver:function(){2<this.model.get("stationList").length&&$("#shuffleButtonHoverArea",this.el).addClass("shuffleButtonHoverAreaHover")},shuffleContainer_mouseOut:function(){2<this.model.get("stationList").length&&
0==$("#shufflePicker:visible").length&&$("#shuffleButtonHoverArea",this.el).removeClass("shuffleButtonHoverAreaHover")},shuffleButtonHoverArea_click:function(){2<this.model.get("stationList").length&&R(Pu);return!1},shuffleButtonHoverArea_mouseOut:function(){2<this.model.get("stationList").length&&R(Qu)},addVarietyClick:function(){this.trigger("addvariety");return!1}})})();function wz(){}
wz=Backbone.View.extend({initialize:function(){S(Qu,r(this,this.Zq));S(Pu,r(this,this.MP));this.model.bind("change:currentStation",r(this,this.Zq));this.model.bind("change:currentStationViewIsShuffle",r(this,this.Zq));this.render()},el:$("#shufflePicker").get(0),render:function(){$(this.el).empty().append($("#shufflePickerTmpl").tmpl());$(this.el).hide();return this},Zq:function(){clearTimeout(wz.hideTimeout);wz.hideTimeout=setTimeout(r(this,function(){$(this.el).fadeOut(100);setTimeout(function(){$("#shuffleButtonHoverArea").removeClass("shuffleButtonHover")},120)}),
1E3)},MP:function(){clearTimeout(wz.hideTimeout);var b=this.NH();$("#shufflePickerItemContainer",this.el).empty().append($("#shufflePickerItemTmpl").tmpl(b));$(this.el).fadeIn(100)},NH:function(){for(var b={},c=[],d=this.model.get("stationList").select(function(b){return!b.D()&&!b.Ra()&&!b.rc()&&An(b)}),e=0;e<d.length;e++){var h=d[e],l=h.e();if(h=h.Gf()){c.push(l);for(var p=0;p<h.length;p++){var q=h[p],t=b[q];null==t&&(t=[],b[q]=t);t.push(l)}}}e=Zm();d=null==e||0==e.length?c:e.split(",");e=this.model.get("currentShuffleType");
c=[{genreName:"all",genreLabel:"Shuffle All",stationIdArray:c.join(","),selected:"all"==e},{genreName:"my",genreLabel:"My Shuffle",stationIdArray:d.join(","),selected:"my"==e}];c.push({genreName:"line",genreLabel:null,stationIdArray:null,selected:!1});for(q in b)c.push({genreName:q,genreLabel:"Shuffle "+q+" stations",stationIdArray:b[q].join(","),selected:e==q});if(!this.model.get("currentStationViewIsShuffle"))for(e=0;e<c.length;e++)c[e].selected=!1;return c},events:{"click .shufflePickerItem":"shufflePickerItemClick",
"mouseover #shufflePickerContainer":"shufflePicker_mouseOver","mouseout #shufflePickerContainer":"shufflePicker_mouseOut"},shufflePickerItemClick:function(b){R(Qu);var c=$(b.target).attr("stationIdArray");c&&(c=c.split(","),b=""+$(b.target).attr("genreName"),this.model.set({currentShuffleType:b}),z.b(pi,{stationIdArray:c,isExplicitSave:!0,genre:"all"===b?null:b,shuffleType:"all"===b?b:"my"}),this.model.get("currentStation").D()||(b=this.model.get("stationList").select(function(b){return b.D()&&b.Z()})[0],
z.b(ni,{stationId:b.e(),userInitiated:!0}),this.model.set({currentStationViewIsShuffle:!0})))},shufflePicker_mouseOver:function(){clearTimeout(wz.hideTimeout)},shufflePicker_mouseOut:function(){R(Qu)}});function xz(){}
xz=Backbone.View.extend({initialize:function(){new yz;this.rl=null;this.model.bind("change:selectedTrack",r(this,this.Ks))},el:$("#videoPageInfo").get(0),Ks:function(){var b=this.model.get("selectedTrack"),c=this.model.get("currentUser");if(null!=b&&null!=c&&c.J()){b=b.Ye;c=zz[b];if(null!=c){this.rl=b;$(".caption",this.el).text(c.$C);$(".caption_header",this.el).text(c.bD);$(".caption_footer",this.el).text(c.aD);$("a",this.el).attr("href",c.iE);$("img",this.el).attr("src",c.YC);$(this.el).slideDown();s("video_bubble_display",
{arist_id:b},this.model.get("currentUser"));return}$(this.el).slideUp()}$(this.el).hide();this.rl=null},events:{"click a":"linkClicked"},linkClicked:function(){z.b(gi);null!=this.rl&&s("video_bubble_click",{arist_id:this.rl},this.model.get("currentUser"));return!0}});function Az(){}
Az=Backbone.View.extend({initialize:function(){var b=$(".buyButton",this.el);this.bF=new Bz({buyButton:b,buyMenu:$("#buy_menu_dd"),cssBeforeOpen:function(){var c=b.offset(),e=$("#buy_menu_dd").parent().offset().top,h=c?c.top:0;return{left:(c?c.left:0)-($("#buy_menu_dd").width()-b.outerWidth()),top:h-e+b.outerHeight()}},model:this.model});var c=$(".autoshareButton",this.el);this.QE=new gz(c,null,$("#autoshare_menu_dd"));this.QE.Am=r(this,function(){var b=c.offset(),e=$("#autoshare_menu_dd").parent().offset().top;$("#autoshare_menu_dd").css({left:(b?
b.left:0)-($("#autoshare_menu_dd").width()-c.outerWidth()),top:(b?b.top:0)-e+c.outerHeight()})});$("#autoshare_menu_dd .autoshareOn").click(r(this,this.SE));$("#autoshare_menu_dd .autoshareOff").click(r(this,this.RE));$("#autoshare_menu_dd .autoshareOptions").click(r(this,this.TE));this.QA();this.model.bind("change:autoShare",r(this,this.QA));this.model.bind("change:selectedTrack",r(this,this.Ks));this.model.bind("change:currentUser",r(this,this.Aw));z.c(df,r(this,this.aj));z.c(Wk,r(this,this.gf));
z.c(Vk,r(this,this.Aj))},el:$("#trackInfoContainer").get(0),QA:function(){this.model.get("autoShare")?($(".autoshareButton",this.el).addClass("on"),$(".autoshareOn").addClass("checked"),$(".autoshareOff").removeClass("checked")):($(".autoshareButton",this.el).removeClass("on"),$(".autoshareOn").removeClass("checked"),$(".autoshareOff").addClass("checked"))},Aw:function(){var b=this.model.get("currentUser"),c=this.model.get("currentStation");b&&b.fq&&c&&c.kp()?$(".autoshareButton",this.el).show():
$(".autoshareButton",this.el).hide()},Ks:function(){this.Aw();var b=this.model.get("selectedTrack");if(b&&b instanceof Hn){var c=this.model.get("currentTrack")?this.model.get("currentTrack").o():null;b.o()!=c||b instanceof Eo&&b.oL()?this.Xq(!0):this.Ns(!0);$("#trackInfoButtons").slideUp("fast")}else b&&b.Hk?($("#trackInfoButtons").slideUp("fast"),$(".liveNow",this.el).hide(),this.Ns(!1),$(".songTitle",this.el).removeAttr("href").css("text-decoration","none").text(b.Ca).show(),$(".artistSummary",
this.el).removeAttr("href").css("text-decoration","none").text(b.W()),$(".albumTitle",this.el).removeAttr("href").css("text-decoration","none").text(b.eb),$(".byText",this.el).text(b.gb?b.gb:"from"),$(".onText",this.el).text(b.Rb?b.Rb:"on"),$(".featured",this.el).toggle(!1)):b&&b.Jc?($("#trackInfoButtons").slideUp("fast"),this.Xq(!0)):b&&b instanceof Go?($(".liveNow",this.el).hide(),$(".audioAdInfo",this.el).hide(),$("#audioAdDetail").hide(),b.CD?($(".buyButton",this.el).hide(),$("#trackInfoButtons").slideDown("fast")):
$("#trackInfoButtons").slideUp("fast"),$(".info",this.el).hide(),$(".artistMessageInfo",this.el).show(),$(".artistSummary",this.el).text(b.W())):null!=b?($(".liveNow",this.el).hide(),this.Ns(!1),b instanceof Jn?($("#trackInfoButtons").slideDown("fast"),$(".artistSummary",this.el).css("text-decoration","").text(b.W()).attr("href",b.Vg()),$(".albumTitle",this.el).css("text-decoration","").text(b.eb).attr("href",b.Ll()),$(".byText",this.el).text(b.gb?b.gb:"by"),$(".onText",this.el).text(b.Rb?b.Rb:"on"),
$(".featured",this.el).toggle(!1),this.model.get("currentTrack")==b?($(".songTitle",this.el).hide(),$(".liveNow",this.el).show(),this.bw()):$(".songTitle",this.el).css("text-decoration","").text(b.Ca).attr("href",b.$g()).show()):b.Vl()?($(".songTitle",this.el).removeAttr("href").css("text-decoration","none").text(b.Ca).show(),$(".artistSummary",this.el).removeAttr("href").css("text-decoration","none").text(b.W()),$(".albumTitle",this.el).removeAttr("href").css("text-decoration","none").text(b.eb),
$(".byText",this.el).text(b.gb?b.gb:"from"),$(".onText",this.el).text(b.Rb?b.Rb:"on"),$(".featured",this.el).toggle(!1)):($(".featured",this.el).toggle(b.hh()),$(".songTitle",this.el).css("text-decoration","").text(b.Ca).attr("href",b.$g()).show(),$(".artistSummary",this.el).css("text-decoration","").text(b.W()).attr("href",b.Vg()),b.hv?$(".albumTitle",this.el).removeAttr("href").css("text-decoration","none").text(b.eb):$(".albumTitle",this.el).css("text-decoration","").text(b.eb).attr("href",b.Ll()),
$(".byText",this.el).text(b.gb?b.gb:"by"),$(".onText",this.el).text(b.Rb?b.Rb:"on")),this.bF.kP(b),b.Ny()?$(".buyButton",this.el).show():$(".buyButton",this.el).hide(),$("#trackInfoButtons").slideDown("fast"),this.XA(b)):$("#trackInfoButtons").slideUp("fast");this.pd()},aj:function(b){var c=b.track;b=b.stationId;var d=this.model.get("currentTrack"),e=this.model.get("currentStation");null!=d&&c.o()==d.o()&&null!=e&&e.e()==b&&this.XA(c)},XA:function(b){1==b.Lc?($("#thumbup",this.el).show(),$("#thumbdown",
this.el).hide()):-1==b.Lc?($("#thumbup",this.el).hide(),$("#thumbdown",this.el).show()):($("#thumbup",this.el).hide(),$("#thumbdown",this.el).hide())},Ns:function(b){this.Xq(b);b?$(".audioAdInfo",this.el).show():($(".audioAdInfo",this.el).hide(),$("#audioAdDetail").hide())},Xq:function(b){$(".artistMessageInfo",this.el).hide();$(".liveNow",this.el).hide();b?($("#trackInfoButtons").slideUp("fast"),$(".info",this.el).hide()):($("#trackInfoButtons").slideDown("fast"),$(".info",this.el).show())},pd:function(){if(!this.fc){var b=
this.model.get("selectedTrack"),c=$(".contents",this.el);null!=b?c.is(":visible")||(this.fc=!0,c.fadeIn(400,r(this,function(){this.fc=!1;$(this.el).is(":visible")&&this.pd()}))):c.is(":visible")&&(this.fc=!0,c.fadeOut(200,r(this,function(){this.fc=!1;this.pd()})))}},bw:function(){this.model.get("currentTrack")instanceof Jn&&($(".liveNowStatusIcon").animate({opacity:"0.4"},2E3),$(".liveNowStatusIcon").animate({opacity:"1.0"},2E3,"swing",r(this,this.bw)))},gf:function(b){b&&"ANIMATEDOVERLAY"==b.C()&&
$(".contents",this.el).fadeOut(200)},Aj:function(b){b&&"ANIMATEDOVERLAY"==b.C()&&$(".contents",this.el).fadeIn(200)},SE:function(){z.b(sj);return!1},RE:function(){if(this.model.get("facebookAuthenticated")){var b=this.model.get("currentUser");z.b(Ai,{autoShareEnabled:!1,autoShareTrackPlay:b.Og,autoShareLikes:b.Ng,autoShareFollows:b.Mg,userInitiated:!0})}return!1},TE:function(){var b=this.model.get("currentUser");null!=b&&b.p()?R(Dv,{onSuccessRedirect:"/account/privacy"}):V("/account/privacy",!0,!0);
return!1},events:{"click .buyButton":"buyButtonClick","click .shareButton":"shareButtonClick","click .whyAdsButton":"whyAdsClick","click .songTitle":"songTitleClick","click .artistSummary":"artistSummaryClick","click .albumTitle":"albumTitleClick"},whyAdsClick:function(){s("ad",{action:"why_ads_tapped",device_os:"web"},this.model.get("currentUser"));$("#audioAdDetail").toggle();return!1},shareButtonClick:function(){var b=this.model.get("currentUser");if(null==b||b.p())R(Dv);else{var b=this.model.get("selectedTrack"),
c=this.model.get("currentStation");b&&c&&(c.D()&&(c=this.model.get("stationList").Rc(b.e())),R(av,{mode:"station_and_song",station:c,track:b}),s("link",{click:"shareButton",source:"TrackInfoView"},this.model.get("currentUser")))}return!1},menuButtonClick:function(){return!1},buyButtonClick:function(){s("link",{click:"buyButton",source:"TrackInfoView"},this.model.get("currentUser"))},songTitleClick:function(){R($w,"song")},artistSummaryClick:function(){R($w,"artist")},albumTitleClick:function(){R($w,
"album")}});function Cz(){}
Cz=Backbone.View.extend({dC:4,j_:4,cc:300,mu:"offensive",lu:"irrelevant",nu:"unwanted",zB:/\/station\/start\/([\w-]+)/,initialize:function(){this.rm=null;this.sl=0;this.model.bind("change:selectedTrack",r(this,this.Ls));this.model.bind("change:selectedArtist",r(this,this.VO));z.c(Yg,r(this,this.bI));window.pandoraCustomContentLoaded=this.SF;this.render();$("#flag_menu_dd .offensive").click(r(this,this.$H));$("#flag_menu_dd .irrelevant").click(r(this,this.ZH));$("#flag_menu_dd .unwanted").click(r(this,this.aI))},
el:$("#trackDetailContainer").get(0),render:function(){$("#trackDetail",this.el).append($("#trackDetailItemThumbInfo").tmpl());$("#trackDetail",this.el).append($("#trackDetailItemTmpl").tmpl({heading:Vc(),className:"lyrics"}));$("#trackDetail",this.el).append($("#trackDetailNoContentItemTmpl").tmpl({noContentText:Wc(),className:"nolyrics"}));$("#trackDetail",this.el).append($("#trackDetailFeaturedTmpl").tmpl({className:"featured"}));A._data.isAAMFlaggingV2?$("#trackDetail",this.el).append($("#trackDetailArtistMessageTmplV2").tmpl({className:"artistMessage"})):
$("#trackDetail",this.el).append($("#trackDetailArtistMessageTmpl").tmpl({className:"artistMessage"}));$("#trackDetail",this.el).append($("#trackDetailItemTmpl").tmpl({heading:Xc(),className:"artistBio"}));$("#trackDetail",this.el).append($("#trackDetailItemTmpl").tmpl({heading:$c(),className:"aboutEpisode"}));$("#trackDetail",this.el).append($("#trackDetailItemTmpl").tmpl({heading:ad(),className:"moreShows"}));$("#trackDetail",this.el).append($("#trackDetailItemTmpl").tmpl({heading:Yc(),className:"relatedArtists"}));
k.debug("sending google analytics event: backstage");window.ga("send","backstage");return this},ED:function(b){if(!b)return!1;b=b.sv||b.yv;return b?(b=this.model.get("stationList").Rc(b))?b.Ia():!1:!1},zD:function(b){if(!b)return null;b=b.e();if(!b)return null;b=this.model.get("stationList").Rc(b);if(!b)return!1;var c=this.model.get("currentUser");return c?b.Zg()===c.s:!1},fE:function(b){var c=this.zD(b),d=this.ED(b),e=$(".tpr-coachmark",this.el);!c||0>=b.ID||d?e.hide():(c=this.pD(b)||this.qD(b))?
(b=[Hd(c.Hi),"<span class='tpr-coachmark__text__details'>",Hd(b.Ca),"</span>on <span class='tpr-coachmark__text__details'>",Hd(c.wt),"</span>on <span class='tpr-coachmark__text__details'>",Hd(c.Ow.format("mmm dd, yyyy")),"</span>"],e.find(".tpr-coachmark__text").html(b.join(" ")),e.show()):e.hide()},qD:function(b){var c=this.model.get("stationList"),d=b.yv;b=b.FD;return d&&b?(c=c.Rc(d))?{Hi:"You last thumbed up ",wt:c.ca(),Ow:b}:null:null},pD:function(b){var c=this.model.get("stationList"),d=b.sv;
b=b.nD;return d&&b?(c=c.Rc(d))?{Hi:"You first thumbed up ",wt:c.ca(),Ow:b}:null:null},bI:function(b){var c=this.model.get("selectedTrack");c&&c instanceof Go&&c.Qb==b.artistMessageId&&$(".artistMessage .icon",this.el).removeClass("icon-flag-outline").addClass("icon-flag-filled")},Ls:function(){var b;this.H=this.model.get("selectedTrack");var c=this.model.get("currentTrack");this.fE(this.H);b=$(".item.featured",this.el);null==this.H||this.H.je||null==c||this.H.o()!=c.o()?b.toggle(!1):b.toggle(this.H.hh());
this.H&&this.H instanceof Go?(hn(this.H.Qb)?$(".artistMessage .icon",this.el).removeClass("icon-flag-outline").addClass("icon-flag-filled"):$(".artistMessage .icon",this.el).removeClass("icon-flag-filled").addClass("icon-flag-outline"),(c=this.H.SC)&&0<c.length?(b=this.H.RC,$(".artistMessage .btns a",this.el).attr("href",c).text(b),-1<c.indexOf(mn())&&$(".artistMessage .btns a",this.el).removeAttr("target"),$(".artistMessage .btns",this.el).show()):$(".artistMessage .btns",this.el).hide(),$(".artistMessage",
this.el).show(),z.b(uk,{artistMessageId:this.H.Qb,artistUid:this.H.he,metric:m.zb.pB(),isOnDemand:this.H.we(),shareUrlType:qp("sut")})):$(".artistMessage",this.el).hide();c=$(".lyrics .itemContent",this.el);c.empty();null==this.H||this.H.je||(b=this.H.Jo,null!=b&&(b=b.replace(/\n/g,"<br>"),b=$("#lyricsContentTmpl").tmpl({lyricSnippet:b}),c.empty().append(b)));$(".nolyrics",this.el).hide();$(".lyrics",this.el).hide();c=this.H?this.H.Ye:null;c!=this.BL&&(this.BL=c,$(".artistBio .itemContent",this.el).prev().empty(),
$(".artistBio .itemContent",this.el).empty(),$(".artistBio",this.el).hide(),$(".relatedArtists .itemContent",this.el).empty(),$(".relatedArtists .itemContent",this.el).prev().empty(),$(".relatedArtists",this.el).hide());if(this.H&&this.H.je){var d=this.H.je;if(null!=d&&0<d.length){this.sl=(this.sl+1)%2;$.get(d,r(this,function(b){$("#trackDetail").hide();b+="<script>$(document).ready(function() {setTimeout(function() { pandoraCustomContentLoaded("+this.sl+")}, 500)});\x3c/script>";var c=$("#customContentTrackDetailFrame"+
this.sl);c.hide();try{c.html(b)}catch(l){k.error("Bad HTML for template "+d)}$("#customContentTrackDetail").show();this.pd()}));return}k.warn("No station template for "+this.H.o())}else $("#customContentTrackDetail").hide();this.pd();this.YQ()},SF:function(b){$("#customContentTrackDetailFrame"+b).show();$("#customContentTrackDetailFrame"+(b+1)%2).hide()},pd:function(){if(!this.fc){var b=this.model.get("selectedTrack");if(null!=b)b instanceof Hn||b.Jc?$("#trackDetail").hide():$("#trackDetail").show(),
$("#detailContainer").is(":visible")||(this.fc=!0,$("#detailContainer").fadeIn(400,r(this,function(){this.fc=!1;$("#home").is(":visible")&&this.pd()})));else{var b=this.model.get("currentStation"),c=this.model.get("narrative"),b=b&&b.Ra()&&null!=c?!1:!0;$("#detailContainer").is(":visible")?b&&(this.fc=!0,$("#detailContainer").fadeOut(200,r(this,function(){$(".lyrics",this.el).css({opacity:"hide",height:"hide"});this.fc=!1;this.pd()}))):b||(this.fc=!0,$("#detailContainer").fadeIn(400,r(this,function(){this.fc=
!1;this.pd()})))}}},fm:function(){setTimeout(r(this,function(){$(".itemContent:visible",this.el).next(".divider").removeClass("last").last().addClass("last")}),50)},YQ:function(){var b=this.model.get("selectedTrack"),c=jp();null!=b&&(c&&!b.je?(null!=b.Jo?(this.Kf($(".nolyrics",this.el)),this.ct($(".lyrics",this.el))):(this.Kf($(".lyrics",this.el)),this.Kf($(".nolyrics",this.el))),this.fm()):($(".nolyrics",this.el).hide(),$(".lyrics",this.el).hide()))},VO:function(){var b=this.model.get("selectedArtist");
if(null!=b){var c=this.model.get("selectedTrack"),c=c&&c instanceof Go,d=b.ev;null!=d&&0<d.length&&Iy(b,this.H)?($(".artistBio .itemContent",this.el).prev().text(Xc()+" "+b.getName()),d=$("#artistBioContentTmpl").tmpl(b),$(".artistBio .itemContent",this.el).empty().append(d),this.ct($(".artistBio",this.el)),this.fm()):this.Kf($(".artistBio",this.el));d=b.Jv;if(!c&&0<d.length&&Iy(b,this.H)){var e=$(".relatedArtists .itemContent",this.el);e.empty();var h=this.dC;$.each(d,function(b,c){if(b==h)return!1;
var d=$("#relatedArtistItemTmpl").tmpl(c);e.append(d)});this.ct($(".relatedArtists",this.el));this.fm()}else this.Kf($(".relatedArtists",this.el));b=b.kL()?Zc():Yc();$(".relatedArtists .itemContent",this.el).prev().text(b)}else this.Kf($(".artistBio",this.el)),this.Kf($(".relatedArtists",this.el));this.fm()},showFullLyrics:function(b){var c=b.jv;b=b.Bv;var d=$(".lyrics",this.el).height();$(".lyrics",this.el).css({overflow:"hidden","max-height":d});$(".lyrics",this.el).data("snippetHeight",d);$(".lyrics .lyricsText",
this.el).empty().append(b);$(".lyrics .lyricsText",this.el).after($("#fullLyricsCreditsTmpl").tmpl(c));c=$(".lyrics .itemContent",this.el).height();$(".lyrics",this.el).animate({"max-height":c},r(this,function(){$(".lyrics",this.el).css({overflow:"","max-height":""})}));$(".showLessLyrics",this.el).show()},JK:function(){var b=$(".lyrics",this.el).data("snippetHeight");$(".lyrics",this.el).animate({height:b},r(this,function(){var b=this.model.get("selectedTrack");null!=b&&(b=b.Jo,b=null!=b?b.replace(/\n/g,
"<br>"):"",$(".lyrics .lyricsText",this.el).empty().append(b));$(".lyrics",this.el).css({height:""})}));$(".fullLyricsCredit",this.el).fadeOut(r(this,function(){$(".fullLyricsCredit",this.el).remove()}));$(".gracenote_copyright",this.el).fadeOut(r(this,function(){$(".gracenote_copyright",this.el).remove()}));$(".showLessLyrics",this.el).hide();$(".showMoreLyrics",this.el).show()},showFullContent:function(b){var c=$(b.target);b=c.parent();var d=b.find(".snippetAndContentContainer"),e=d.find(".snippet"),
h=d.find(".fullContent"),c=c.attr("data-link-click"),l=d.height();d.css({overflow:"hidden","max-height":l});d.data("snippetHeight",l);e.hide();h.show();e=h.height();d.animate({"max-height":e},r(this,function(){d.css({overflow:"","max-height":""})}));s("link",{click:c,source:"TrackDetailView"},this.model.get("currentUser"));"showFullEpisodeList"==c&&(this.rm=[this.model.get("currentStation").e(),l]);$(".showFullContent",b).hide();$(".showSnippet",b).show()},showSnippet:function(b){var c=$(b.target);
b=c.parent();var d=b.find(".snippetAndContentContainer"),e=d.find(".snippet"),h=d.find(".fullContent"),c=c.attr("data-link-click"),l=d.data("snippetHeight"),l=l?l:this.rm?this.rm[1]:e.innerHeight();d.animate({height:l},r(this,function(){e.show();h.hide();d.css({height:""})}));s("link",{click:c,source:"TrackDetailView"},this.model.get("currentUser"));"showLessEpisodeList"==c&&(this.rm=null);$(".showSnippet",b).hide();$(".showFullContent",b).show()},wm:function(){null==this.model.get("narrative")&&
null==this.model.get("songNarrative")?$("#trackDetail",this.el).fadeIn():$("#trackDetail",this.el).fadeOut();this.pd()},events:{"click .showMoreLyrics":"showMoreLyricsClick","click .showLessLyrics":"showLessLyricsClick","click .showFullBio":"showFullBioClick","click .getRelatedArtist":"handleRelatedArtistClick","click .showFullContent":"showFullContent","click .showSnippet":"showSnippet","click .featured_learn_more_link":"featuredTrackLearnMoreClick","click .artistMessage a.js-cta":"artistMessageButtonClick",
"click .artistMessage p.flag a.js-flag-message":"artistMessageFlagClick","mouseover .artistMessage p.flagWithReason a.js-flag-message":"artistMessageFlagWithReasonMouseover","click .artistMessage p.flagWithReason a.js-flag-message":"artistMessageFlagWithReasonClick","click .artistMessage .js-cta.button":"handleArtistMessageStationCreate"},showMoreLyricsClick:function(){var b=this.model.get("selectedTrack");null!=b&&this.trigger("getFullLyrics",Ly(b));$(".showMoreLyrics",this.el).hide();R(Jw);s("link",
{click:"showMoreLyrics",source:"TrackDetailView"},this.model.get("currentUser"));return!1},showLessLyricsClick:function(){this.JK();R(Kw);s("link",{click:"showLessLyrics",source:"TrackDetailView"},this.model.get("currentUser"));return!1},showFullBioClick:function(){R($w,"artist");s("link",{click:"showFullBio",source:"TrackDetailView"},this.model.get("currentUser"))},handleRelatedArtistClick:function(){R($w,"artist");s("link",{click:"getRelatedArtist",source:"TrackDetailView"},this.model.get("currentUser"))},
featuredTrackLearnMoreClick:function(){s("link",{click:"featuredTrackLearnMore",source:"TrackDetailView"},this.model.get("currentUser"))},artistMessageButtonClick:function(){z.b(uk,{artistMessageId:this.H.Qb,artistUid:this.H.he,metric:m.zb.oB(),isOnDemand:this.H.we(),shareUrlType:qp("sut")});return!0},artistMessageFlagClick:function(){var b=this.H.Qb;hn(b)||(fn(b),z.b(vk,{artistMessageId:b,artistUid:this.H.he,stationId:this.H.e()}))},artistMessageFlagWithReasonClick:function(){hn(this.H.Qb)||(this.va.open(),
this.model.get("currentTrack")instanceof Go&&z.b(gi))},artistMessageFlagWithReasonMouseover:function(){var b=this.H.Qb,c=$(".item.artistMessage"),d=r(this,function(){c.fadeIn(200);this.fp(c)});hn(b)||d();return!1},handleArtistMessageStationCreate:function(b){if(!b||!b.target||!b.target.href)return!0;b=b.target.href.match(this.zB);if(null===b)return!0;z.b(Hi,{stationCode:"st"+b[1],source:"track_detail"});return!1},vq:function(b){var c=this.H.Qb;hn(c)||(fn(c),this.xP(b),$(".artistMessage p.flagWithReason a.js-flag-message").off("click"),
z.b(wk,{artistMessageId:c,artistUid:this.H.he,flagReason:b}))},xP:function(b){var c;switch(b){case this.lu:b=!0;c=vc();break;case this.nu:b=!0;c=wc();break;case this.mu:b=!1;break;default:b=!1}b&&(new X({message:c})).render()},$H:function(){this.vq(this.mu)},ZH:function(){this.vq(this.lu)},aI:function(){this.vq(this.nu)},fp:function(b){this.va=new gz($(".artistMessage p.flagWithReason a.js-flag-message"),null,$("#flag_menu_dd"));this.va.ti=function(){return!1};var c=b.offset(),d=c?c.top:0,c=c?c.left:
0;$("#flag_menu_dd").css({top:d-$("#flag_menu_dd").height(),left:c-$("#flag_menu_dd").width()/2+b.width()/4})},Kf:function(b,c){b.stop(!0,!0).animate({opacity:"hide",height:"hide"},this.cc,c)},ct:function(b,c){b.stop(!0,!0).animate({opacity:"show",height:"show"},this.cc,function(){Ae()&&b.css("filter","none !important");c&&c()})}});function Dz(){}
Dz=Backbone.View.extend({AC:250,Sh:7,AB:$("#currentSlideArrow").height(),fC:300,gC:15,oC:500,Lu:1E3,ju:215,initialize:function(){this.nh={};this.qn=null;this.hd=this.selectedIndex=0;this.Ir=null;this.Hh=!1;this.en={};this.xf=this.Vs=!1;this.model.bind("change:currentTrack",r(this,this.nl));z.c(ig,r(this,this.xw));this.model.bind("change:keyPressed",r(this,this.kJ));this.model.bind("change:currentContextualTip",r(this,this.nI));z.c(He,r(this,this.jF));z.c(df,r(this,this.aj));z.c(rf,r(this,this.DQ));
z.c(tf,r(this,this.aQ));z.c(gi,r(this,this.HQ));z.c(tg,r(this,this.mM));z.c(ei,r(this,this.MA));z.c(qi,r(this,this.Em));z.c(Jk,r(this,this.aq));z.c(cf,r(this,this.xN));z.c(nh,r(this,this.oz));z.c(oh,r(this,this.oz));z.c(hi,r(this,this.ey));z.c(vg,r(this,this.ey));z.c(af,r(this,this.YJ));z.c(Wk,r(this,this.gf));z.c(Vk,r(this,this.Aj));S(cw,r(this,this.pQ));S(gw,r(this,this.RJ));S(dw,r(this,this.iy));S(ew,r(this,this.hy));S(Lu,r(this,this.Cr));S(ow,r(this,this.Nt));$("#track_menu_dd .newStationFromSong").click(r(this,
this.Hr));$("#track_menu_dd .newStationFromArtist").click(r(this,this.Gr));$("#track_menu_dd .tiredOfSong").click(r(this,this.It));$("#track_menu_dd .whySelected").click(r(this,this.tR));$("#track_menu_dd .moveSong").click(r(this,this.Br));pz("/song/sleep/");this.aL();this.Em(Jm())},el:$(".slidesForeground").get(0),aL:function(){this.Ty=this.R=Xm();this.Hg=null;this.pr=this.R;this.Nt();$("#trackInfo .slideDragHandle").draggable({axis:"y",containment:$(".slideDragLimit"),helper:"clone",start:r(this,
this.Lp),stop:r(this,this.Mp),drag:r(this,this.Kp)});$("#trackInfo .slideDragHandle").hover(function(){$("#trackInfo .slideDrag").addClass("hover")},function(){$("#trackInfo .slideDrag").removeClass("hover")})},Lp:function(b,c){R(bw);this.$w=c.offset.top-this.R;this.cA();s("link",{click:"resizeAlbumArt",source:"AlbumSlidesView"},this.model.get("currentUser"))},cA:function(){null!=this.Hg&&clearTimeout(this.Hg);this.Hg=setTimeout(r(this,function(){this.R!=this.pr&&(this.R=this.pr,this.eg());this.cA()}),
1E3/60)},Mp:function(b,c){null!=this.Hg&&clearTimeout(this.Hg);this.Hg=null;this.R=c.offset.top-this.$w;this.Nt();um($l,this.R)},Kp:function(b,c){this.pr=c.offset.top-this.$w},gf:function(b){this.Ty=this.R;b&&"ANIMATEDOVERLAY"==b.C()&&(this.R!=this.ju&&(this.R=this.ju,this.eg()),$(".slides",this.el).fadeOut(200))},Aj:function(b){b&&"ANIMATEDOVERLAY"==b.C()&&(this.R=this.Ty,this.eg(),$(".slides",this.el).fadeIn(200))},Nt:function(){this.Iv();this.Mv($(".stationSlides",this.el))},eg:function(){this.Iv();
var b=this.model.get("currentStation");null!=b&&this.Mv($("#stationSlides"+b.e()))},Iv:function(){$(".slides",this.el).height(this.R);var b=this.R+this.Sh;$("#mainContentContainer .slidesBackground div").height(b);$(".slides",this.el).css("margin-top",-(b+this.AB+1));$("#currentSlideArrow").css("margin-right",Math.floor(this.R/2)-this.Sh)},Mv:function(b){b.each(r(this,function(b,d){$("img",d).attr({width:this.R,height:this.R});$(".slide",d).css({width:this.R,height:this.R});var e=0.8*this.R;$(".pauseWatermark",
d).css({width:e,height:0.3*this.R,right:this.R+Math.floor((this.R-e)/2)+2*this.Sh});$(".muteWatermark",d).css({width:e,height:0.3*this.R,right:this.R+Math.floor((this.R-e)/2)+2*this.Sh});$(".replayWatermark",d).css({width:e,height:0.3*this.R,right:this.R+Math.floor((this.R-e)/2)+2*this.Sh});this.Wj($(d))}))},Tc:function(){var b=this.model.get("currentStation");return null!=b?$("#stationSlides"+b.e()):null},nl:function(){if(this.Hh)de(this,this.nl,100);else{this.up();var b=this.model.get("currentTrack"),
c=this.model.get("currentStation");if(null!=c&&null!=b){if(b instanceof Hn&&!b.pm())return;var d=c.e(),e=this.nh[d]?this.nh[d].o():null;if(null==e||"0"==e||e!=b.o()){var e=$("#stationSlides"+d),h=$(".slide",e).eq(1),l=$(".slide",e).eq(0);if(!c.La()&&h.data("track")instanceof Eo&&b instanceof Eo){h.data("track",b);$(".art",h).attr("src",b.ub());return}null==this.en[d]&&(this.en[d]=0);l.data("track",b);l.data("slideIndex",this.en[d]++);c=$("#songSlideTmpl").tmpl(this.R);e.prepend(c);this.MO(h);$(".pauseWatermark",
h).fadeOut();$(".muteWatermark",h).fadeOut();this.paused=!1;this.muted&&this.dt();var p=$(".art",l).attr("src",b.ub());p&&p.bind("imgpreload",function(){$(this).fadeIn("fast").prev().hide()});$(".treatment.current",l).stop(!0,!0).fadeIn(400,function(){$(this).show()});$(".treatment.previous",l).stop(!0,!0).fadeOut(400,function(){$(this).hide()});0<h.length&&($(".treatment.current",h).stop(!0,!0).fadeOut(400,function(){$(this).hide()}),h.data("track")instanceof Hn||this.bq(h,400));0==this.selectedIndex?
(c.animate({width:this.R}),this.$f(b)):(this.selectedIndex++,c.css({width:this.R}));this.nh[d]=b;this.Wj(e);this.ZA(l,b);$(".featuredTrackArtBanner",h).fadeOut();b.hh()&&$(".featuredTrackArtBanner",l).show()}this.xf=b instanceof Jn}this.nk();0==this.selectedIndex?this.$f(b):(b.hb()&&this.Cr(),this.Ew(),this.Ir=setTimeout(r(this,function(){this.Cr()}),1E3*this.gC))}},MO:function(b){if(b.data("track")instanceof Hn){var c=this.model.get("currentStation");c&&!c.La()&&(this.model.get("displayingCompanion")?
(this.aq(),this.mh=b):(this.mh=b,this.aq()))}},aq:function(){var b=this.model.get("currentStation");if(this.mh&&!b.La()){var c=this.mh.data("track");if(null!=c){c.uf="";c.Pb="/img/ads/generictile.png";var d=$(".art",this.mh);this.bq(this.mh,200,function(){d.attr("src",c.ub())})}this.mh=null}},$f:function(b){var c=this.model.get("selectedTrack");null!=c&&null!=b&&c.o()==b.o()||this.model.set({selectedTrack:b})},Ew:function(){null!=this.Ir&&clearTimeout(this.Ir)},xw:function(){this.up();var b=null,
c=this.model.get("currentStation");null!=c&&(b=c.e());b!=this.ka&&(this.selectedIndex=0,this.KF(b),null!=this.ka?(this.ZP(this.ka,r(this,function(){this.ka=null;this.xw()})),this.NK(),R(Gv)):(this.ka=b,this.YP(b),this.nk()))},jF:function(){$(".stationSlides",this.el).remove();this.ka=null;this.nh={};this.en={};this.R=Xm()},aj:function(b){var c=b.track,d=this;$("#stationSlides"+b.stationId).find(".slide").each(function(){d.ZA(this,c)})},ZA:function(b,c){var d=$(b).data("track");oy(d,this.model.get("stationList"))?
($(".thumbUp",b).addClass("thumbUpDis").empty(),$(".thumbDown",b).addClass("thumbDownDis").empty()):d&&d.o()==c.o()&&($(".thumbUp",b).removeClass("indicator"),$(".thumbDown",b).removeClass("indicator"),1==c.Lc?$(".thumbUp",b).addClass("indicator"):-1==c.Lc&&$(".thumbDown",b).addClass("indicator"),$(b).data("track",c))},ZP:function(b,c){if(null!=b){this.Hh=!0;var d=$("#stationSlides"+b);if(0<d.length){var e=d.width(),h=e-(this.Gx()+this.Lx(d));d.animate({width:h},r(this,function(){d.hide();d.width(e);
this.Wj(d);this.Hh=!1;c()}));return}}c()},YP:function(b){if(null!=b){this.Hh=!0;$(".stationSlides",this.el).hide();var c=$("#stationSlides"+b);this.Wj(c);var d=this.Xl(c),e=this.R*(d+3);c.css("left",e);c.show();c.animate({left:-e},r(this,function(){de(this,function(){var c=this.model.get("currentStation");c&&c.e()==b&&0<d&&null==this.model.get("selectedTrack")&&(this.nh[b]?this.$f(this.nh[b]):this.$f(this.model.get("currentTrack")))},500);this.Vs&&this.Qv();this.eg();this.Hh=!1}))}},KF:function(b){if(null!=
b){var c=$("#stationSlides"+b);if(0==c.length){var c=$("#stationSlidesTmpl").tmpl().appendTo($(".slides",this.el)),d=$("#songSlideTmpl").tmpl(this.R);d.width(this.R);c.append(d);this.Wj(c);c.attr("id","stationSlides"+b);c.show()}}},Wj:function(b){var c="none"!=b.css("display"),d=this.Xl(b);b.width(this.Gx()+this.R*(d+4));c=this.R*(d+3)*(c?-1:1);d=this.Mx(b);b.css({left:c,"padding-left":d})},Gx:function(){return $("#mainContentContainer").width()-$(".stationContent").outerWidth()},kJ:function(){var b=
this.model.get("keyPressed");if(null!=b&&"INPUT"!=b.target.tagName&&"TEXTAREA"!=b.target.tagName&&$("#mainContent .home").is(":visible")){if(37==b.which){this.jm(1);return}if(39==b.which){this.jm(-1);return}}this.tq()},jm:function(b){this.Dr||(this.hd=b,this.Ar=0,this.Jp())},moveTo:function(b){this.Ar=this.hd=0;this.dA(b)},Cr:function(){this.moveTo(0)},Jp:function(){if(!this.Dr)if(0!=this.hd)this.dA(this.selectedIndex+this.hd);else{var b=this.Tc(),c=$(".slide",b).eq(this.selectedIndex+1);c&&($(".treatment.previous",
c).stop(!0,!0).fadeOut(200,function(){$(this).hide()}),null!=this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(r(this,function(){this.Fr=null;this.$f(c.data("track"))}),this.oC),(b=c.data("track"))&&s("template_impression",{station_id:b.e(),track_id:b.o()},this.model.get("currentUser")));this.nk()}},tq:function(){0!=this.hd&&(this.hd=0,this.Jp())},dA:function(b){var c=this.Tc();if(c)if(b=Math.max(b,0),b=Math.min(b,this.Xl(c)-1),b!=this.selectedIndex){var d=$(".slide",c).eq(this.selectedIndex+1);if(d){var e=
this.model.get("currentStation"),h=d.data("track");(e=e.La())&&(!e||h instanceof Hn)||this.bq(d,200)}this.$f(null);this.Ew();this.selectedIndex=b;b=0==this.Ar?"easeInQuad":"linear";this.Dr=!0;c.animate({"padding-left":this.Mx(c)},this.fC,b,r(this,function(){this.Dr=!1;0>this.hd?this.hd--:0<this.hd&&this.hd++;this.Ar++;this.Jp()}))}else this.tq()},bq:function(b,c,d){Ae()?$(".treatment.previous",b).stop(!0,!0).animate({opacity:0.75},c,function(){$(this).show();d&&d()}):$(".treatment.previous",b).stop(!0,
!0).fadeIn(c,function(){$(this).show();d&&d()})},Xl:function(b){return null!=b?$(".slide",b).length-1:0},Mx:function(b){return Math.max(0,this.Lx(b)*this.selectedIndex)},Lx:function(b){return $(".slide",b).last().outerWidth(!0)},Hr:function(){if(this.yf){var b=this.yf.data("track");b&&z.b(Hi,{stationCode:"mi"+b.o(),source:"track_action"})}return!1},Gr:function(){if(this.yf){var b=this.yf.data("track");b&&z.b(Hi,{stationCode:"mi"+b.Ye,source:"track_action"})}return!1},It:function(){var b=this.yf.data("track");
b&&z.b(Zi,b);return!1},DQ:function(b){var c=this.model.get("currentTrack");null!=b&&b.o()==c.o()&&(this.ot=!0,z.b(hi,{isTiredOfSongSkip:!0}),b="/song/sleep/"+b.o(),nz(b),oz(b))},xN:function(){this.ot&&((new X({message:uc()})).render(),this.ot=!1)},oz:function(){this.ot=!1},tR:function(){var b=this.yf.data("track");if(b){var c=!0,d=this.model.get("currentStation");d&&(d.D()&&!d.Z()||d.Ra())&&(c=!1);z.b($i,{track:b,allowActions:c})}return!1},Br:function(){var b=this.yf.data("track");new Ez({model:this.model,
track:b});return!1},aQ:function(b){this.model.get("currentTrack");var c=b[2];if(b=this.Tc()){var d=this;$(".slide",b).each(function(){var b=$(this).data("track");if(b&&b.o()==c.o())return $(this).data("disableMenu",!0),d.$q($(this)),!1})}},Em:function(b){0==b?(this.muted=!0,this.dt()):(this.muted=!1,this.ej())},ej:function(){var b=this.Tc(),b=$(".slide",b).eq(1);$(".muteWatermark",b).fadeOut()},dt:function(){if(!this.paused){var b=this.Tc(),b=$(".slide",b).eq(1);$(".muteWatermark",b).css("visibility",
"visible").fadeIn();this.eg()}},ey:function(){this.Cs&&this.MA()},YJ:function(){this.Hh?this.Vs=!0:this.Qv()},Qv:function(){this.Vs=!1;z.b(bf)},MA:function(){this.Yq();this.gm()},Yq:function(){this.paused=!1;var b=this.Tc(),b=$(".slide",b).eq(1);$(".pauseWatermark",b).fadeOut();this.muted&&this.dt()},FP:function(){this.paused=!0;if(!this.Cs){this.ej();this.gm();var b=this.Tc(),b=$(".slide",b).eq(1);$(".pauseWatermark",b).css("visibility","visible").fadeIn();this.eg()}},HQ:function(){this.FP()},mM:function(){this.KP()},
KP:function(){this.ej();this.Yq();this.Cs=!0;var b=this.Tc(),b=$(".slide",b).eq(1);$(".replayWatermark",b).css("visibility","visible").fadeIn();this.eg()},gm:function(){this.Cs=!1;var b=this.Tc(),b=$(".slide",b).eq(1);$(".replayWatermark",b).fadeOut()},NK:function(){this.Yq();this.ej();this.gm()},pQ:function(b){b&&b.ah()&&b.r()&&b.ah().o()&&z.b(aj,[b.ah().e(),b.r().e(),b.ah().o(),b.V().e()])},hy:function(){var b=$(".slide",this.el);1==b.length?this.Zs($(b[0]),!0):1<b.length&&this.Zs($(b[1]),!0)},
nI:function(){this.model.get("currentContextualTip")||$(".submenu").removeClass("submenu_force_visible")},RJ:function(){this.iy();setTimeout(r(this,function(){$(".submenu").addClass("submenu_force_visible")}),100)},iy:function(){this.hy();this.va.open()},nk:function(){if(this.xf)$(".slides_left_scroll",this.el).stop(!0,!0).fadeOut(200);else if(this.fw){var b=$(".slides",this.el).height(),c=$(".slides_right_scroll",this.el).height(),b=Math.floor(b/2)+c;$(".slides_right_scroll",this.el).css("margin-top",
-1*b);$(".slides_left_scroll",this.el).css("margin-top",-1*b);0<this.selectedIndex?$(".slides_right_scroll",this.el).stop(!0,!0).fadeIn(200):$(".slides_right_scroll",this.el).stop(!0,!0).fadeOut(200);this.selectedIndex<this.Xl(this.Tc())-1?$(".slides_left_scroll",this.el).stop(!0,!0).fadeIn(200):$(".slides_left_scroll",this.el).stop(!0,!0).fadeOut(200)}else $(".slides_right_scroll",this.el).stop(!0,!0).delay(this.Lu).fadeOut(200),$(".slides_left_scroll",this.el).stop(!0,!0).delay(this.Lu).fadeOut(200)},
events:{mouseover:"allSlidesMouseEnter",mouseout:"allSlidesMouseLeave","mousedown .slides_right_scroll":"rightScrollDown","mouseup .slides_right_scroll":"scrollMouseUp","mousedown .slides_left_scroll":"leftScrollDown","mouseup .slides_left_scroll":"scrollMouseUp","mouseenter .slide":"slideMouseEnter","mouseleave .slide":"slideMouseLeave","click .slide":"slideClick","click .thumbDown":"thumbDownClick","click .thumbUp":"thumbUpClick","click .pauseWatermark":"pauseWatermarkClick","click .replayWatermark":"replayWatermarkClick",
"click .muteWatermark":"muteWatermarkClick"},pauseWatermarkClick:function(){z.b(ei,{userInitiated:!0});return!1},replayWatermarkClick:function(){this.gm();var b=this.model.get("currentStation");b&&(this.$f(null),z.b(vg,b.e()));return!1},muteWatermarkClick:function(){this.ej();R(Gv);R(Lw);return!1},allSlidesMouseEnter:function(){this.fw=!0;this.nk()},allSlidesMouseLeave:function(b){b.relatedTarget&&0<$(b.relatedTarget).parents(".slidesForeground").length||(this.fw=!1,this.nk())},rightScrollDown:function(){if(this.xf)return!1;
R(Ow);this.jm(-1);return!1},leftScrollDown:function(){if(this.xf)return!1;R(Ow);this.jm(1);return!1},scrollMouseUp:function(){this.tq();return!1},slideMouseEnter:function(b){this.xf||$("#track_menu_dd").is(":visible")&&this.va&&!this.va.ti()||(b=$(b.target).closest(".slide"),0==ly(this.model).length?$("#track_menu_dd .moveSong").hide():$("#track_menu_dd .moveSong").show(),this.Zs(b,!1),$(".previous",b).stop(!0,!0).animate({opacity:0.5},200))},hF:function(b){return!b||!(b instanceof Hn||b.Jc||b.Hk)&&
b.av&&b.bv&&b.ro?!0:!1},Zs:function(b,c){var d=b.data("track");if(this.hF(d)&&!b.data("disableMenu")){if(null!=this.Di&&null!=b){var d=this.Di.data("track"),e=b.data("track");d&&e&&d.o()==e.o()&&this.va.unbind("close")}this.up();this.sp();var h=b.find(".thumbContainer"),d=r(this,function(){h.fadeIn(200);this.sp();this.fp(h)});c?d():this.qn=setTimeout(d,this.AC)}},up:function(){null!=this.va&&null!=Fz&&this.va.close()},fp:function(b){null==this.va?this.va=new Gz(this.model,b):Hz(this.va,$(".menuArrow",
b));this.yf=b.closest(".slide");var c=this.model.get("currentStation");c&&(c.D()&&!c.Z()||c.Ra())?($("#track_menu_dd .moveSong").hide(),$("#track_menu_dd .tiredOfSong").hide()):($("#track_menu_dd .moveSong").show(),$("#track_menu_dd .tiredOfSong").show());var d=b.offset(),c=d?d.top:0,d=d?d.left:0;$("#track_menu_dd").css({top:c-$("#track_menu_dd").height(),left:d-$("#track_menu_dd").width()/2+b.width()/2})},slideMouseLeave:function(b){this.xf||(b=$(b.target).closest(".slide"),this.va&&null!=Fz?(this.Di=
b,this.va.bind("close",r(this,this.$q))):this.$q(b),$(".previous",b).stop(!0,!0).animate({opacity:Ae()?0.75:1},200))},slideClick:function(b){if(!this.xf){var c=!1,d=$(b.target).closest(".slide"),e=$(b.target).closest(".stationSlides");b=d.data("track");d=d.data("slideIndex");b&&0<=d&&(d=$(".slide",e).length-d-2,b instanceof Hn&&(c=!0,b.uf&&window.open(b.uf)),b&&this.moveTo(d));c||R(Ow)}},$q:function(b){!b&&this.Di&&(b=this.Di,this.Di=null);b&&(b.find(".thumbContainer").fadeOut(200),this.sp())},sp:function(){null!=
this.qn&&(clearTimeout(this.qn),this.qn=null)},thumbDownClick:function(b){$(b.target).blur();var c=$(b.target).closest(".slide").data("track");b=$(b.currentTarget).hasClass("indicator");oy(c,this.model.get("stationList"))||(b?R(Cv,{isPositive:!1,musicID:c.o()}):R(Bv,{isPositive:!1,musicId:c.o()}));return!1},thumbUpClick:function(b){$(b.target).blur();var c=$(b.target).closest(".slide").data("track");b=$(b.currentTarget).hasClass("indicator");oy(c,this.model.get("stationList"))||(b?R(Cv,{isPositive:!0,
musicID:c.o()}):R(Bv,{isPositive:!0,musicId:c.o()}));return!1}});function Iz(){}
Iz=Backbone.View.extend({Aa:!0,Cf:null,P:"registration",initialize:function(){this.qd=this.options.useLightbox;this.Yk=!1;this.model.bind("change:forceRegistration",r(this,this.kk));S(iw,r(this,this.Kd));S(jw,r(this,this.Ld))},kk:function(){this.model.get("forceRegistration")?$(".cancel",this.el).hide():$(".cancel",this.el).show()},Y3:function(b){new Jz({event:"confirm_email",title:sa,subtitle:va,message:b,yesButtonText:wa,noButtonText:xa})},Kd:function(b){"confirm_email"==b?(ue(this.P,"confirm_email"),
this.submitButtonClick()):"duplicateEmail"==b?(b=$("input[name=email]",this.el).val(),""!==b&&this.model.set({loginEmail:b}),V("/account/help",!1,!1)):"whyBirthDayReadMore"!=b&&"whyZipCodeReadMore"!=b&&"whyGenderReadMore"!=b||window.open("http://help.pandora.com/customer/portal/articles/1468760-information-about-privacy-on-pandora#2","_blank")},Ld:function(){},render:function(){this.B={};this.N={};$(".onboarding__register").hide();for(var b={months:[],days:[]},c=0;12>c;c++)9>c?b.months.push("0"+(c+
1)):b.months.push(c+1);for(c=0;31>c;c++)9>c?b.days.push("0"+(c+1)):b.days.push(c+1);this.qd?(b.isPopup=!0,b=ey("registrationPanel",$("#registrationPopupHeaderTmpl").tmpl(),$("#registrationPopupContentTmpl").tmpl(b)),$(this.el).append(b)):(b=$("#registrationWelcomeTmpl").tmpl(b),$(this.el).append(b).hide().fadeIn(r(this,function(){$("input, textarea").placeholder();$("input[name=email]",this.el).focus();R(sw)})));this.kk();null!=A._data.accountUsername&&$("input[name=email]",this.el).val(A._data.accountUsername);
null!=Uo()&&$("input[name=birthYear]",this.el).val(Uo());null!=A._data.accountZipcode&&$("input[name=zipCode]",this.el).val(A._data.accountZipcode);null!=A._data.accountGender&&$("input[name=gender][value="+A._data.accountGender+"]",this.el).prop("checked",!0);if(b=this.model.get("facebookLoginInfo"))b.first_name&&($(".facebookName",this.el).text(b.first_name),$(".welcomeName",this.el).css("display","inline")),b.email&&$("input[name=email]",this.el).val(b.email),b.birthday&&(c=b.birthday.split("/"),
3==c.length&&4==c[2].length&&$("input[name=birthYear]",this.el).val(c[2])),b.gender&&$("input[name=gender][value="+b.gender.toUpperCase()+"]",this.el).prop("checked",!0);ro(this.model.get("currentUser"))?$("input[name=zipCode]",this.el).attr("placeholder","Postal Code"):$("input[name=zipCode]",this.el).attr("placeholder","Zip Code");$(".registerButton",this.el).addClass("disabled");$(".onboarding__login").fadeIn();$(".onboarding__register").fadeOut();de(this,function(){this.toggleClearInput();this.toggleShowPassword()},
50);ue(this.P,"standard");return this},hideAndRemove:function(){this.model.get("modalPanel")==wu?($("#welcomeSearch .searchBox").hide(),$(".onboarding__login").fadeIn(),$(".onboarding__register").fadeOut()):($("#welcomeSearch .searchBox").slideDown(),$(".onboarding__login").fadeOut());$(this.el).remove()},events:{"blur input[name=email]":"validateEmailOnBlur","blur input[name=password]":"validatePasswordOnBlur","input input[name=password]":"validatePasswordOnInitialLoad","input input[name=email]":"validateEmailOnInitialLoad",
"input input[name=zipCode]":"validateZipcodeOnInitialLoad","input .js-birthyear":"validateBirthyearOnInitialLoad","blur .js-birthyear":"validateBirthyearOnBlur","blur input[name=zipCode]":"validateZipcodeOnBlur","keyup .js-birthyear":"onBirthyearKeyup","change .js-birthday":"monthDaySelected","change .js-birthmonth":"monthDaySelected","click .js-genderLabel":"onGenderClick","change input[name=gender]":"genderChange","closed .lightbox":"cancelClick","click .cancel":"cancelClick","change input[name=email]":"usernameChange",
"click .registerButton":"submitButtonClick","submit .registrationForm":"registrationFormSubmit","click .alreadyuserSignin":"gotoSigninForm","click .whyBirthdate":"whyBirthdayClicked","click .whyZipcode":"whyZipcodeClicked","click .whyGender":"whyGenderClicked","click .js-terms":"onTermsClicked","click .js-privacy":"onPrivacyClicked","click .js-show-password":"togglePassword","click .js-clear-field":"clearInput","keyup input[name=email]":"toggleClearInput","keyup input[name=password]":"toggleShowPassword"},
validatePasswordOnInitialLoad:function(){this.validatePasswordOnBlur(!0);this.toggleShowPassword()},validateEmailOnInitialLoad:function(){this.validateEmailOnBlur(!0)},validateZipcodeOnInitialLoad:function(){this.validateZipcodeOnBlur(!0)},validateBirthyearOnInitialLoad:function(){this.validateBirthyearOnBlur(!0)},validateEmailOnBlur:function(b){setTimeout(function(b){var d=$("input[name=email]",this.el);d.name="email";d.L=da();d.qa="error_presubmit_invalid_email";this.X(d)?this.toggleClearInput():
(vx(d.val())?this.la(d):!0!==b&&this.Aa&&this.fa(d),this.Ua(),this.Aa=!0)}.bind(this,b),200)},validatePasswordOnBlur:function(b){setTimeout(function(b){var d=$("input[name=password]",this.el);d.name="password";d.L=fa();d.qa="error_presubmit_pwd_length";this.X(d)||(wx(d.val())?this.la(d):!0!==b&&this.fa(d),this.Ua())}.bind(this,b),200)},validateBirthyearOnBlur:function(b){var c=$("#register_birthYear",this.el),d=$(".js-datePicker",this.el);c.name="birthyear";d.name="birthyear";d.L=ja();this.X(c)||
(xx(c.val())?this.la(c):!0!==b&&this.fa(d),this.Ua())},validateZipcodeOnBlur:function(b){var c=$("input[name=zipCode]",this.el);c.name="zipcode";c.L=na();this.X(c)||(zx(mp(),c.val())?this.la(c):(ro(this.model.get("currentUser"))?(c.L=oa(),c.qa="AU"===kp()?"error_presubmit_invalid_au_zip":"error_presubmit_invalid_nz_zip"):(c.L=na(),c.qa="error_presubmit_invalid_us_zip"),!0!==b&&this.fa(c)),this.Ua())},onGenderClick:function(b){this.Cf="femaleRadio"==b.currentTarget.getAttribute("for")?"female":"male";
this.Ua()},genderChange:function(b){this.Cf=b.target.value;this.Ua()},monthDaySelected:function(){var b=$("select[name='birthMonth'] option:selected",this.el).val();""!==$("select[name='birthDay'] option:selected",this.el).val()&&""!==b&&(b=$(".js-datePicker",this.el),b.name="datepicker",this.la(b),this.Ua())},fa:function(b){k.warn("=====invalid el======"+b.id);k.warn(b);this.B[b.name]||(this.B[b.name]=new Mx({el:b,Of:b.L,id:b.id,P:b.P?b.P:this.P,qa:b.qa}),this.N[b.name]&&delete this.N[b.name])},
X:function(b){return""===b.val()?(this.N[b.name]&&delete this.N[b.name],!0):!1},la:function(b){k.error("=====valid el======"+b.name);this.N[b.name]=b.val();this.B[b.name]&&(this.B[b.name].close(),delete this.B[b.name])},me:function(){if(1>Object.keys(this.B).length&&this.N.email&&this.N.password&&this.N.zipcode&&this.N.birthyear&&null!==this.Cf)if(this.Yk){if("datepicker"in this.N)return!0}else return!0;else return!1},Ua:function(){this.me()?$(".registerButton",this.el).removeClass("disabled"):$(".registerButton",
this.el).addClass("disabled")},onTermsClicked:function(){window.open("https://www.pandora.com/legal","_blank")},onPrivacyClicked:function(){window.open("https://www.pandora.com/privacy","_blank")},onBirthyearKeyup:function(b){b=b.target.value;var c=$(".js-datePicker",this.el);4==b.length&&xx(b)&&rd(b)&&(new Date).getFullYear()-Number(b)==("AU"===kp()?15:13)&&(this.Yk=!0,c.name="datepicker",c.id="register_birthMonth",c.L=la(),c.qa="error_age_disambiguation",de(this,function(){this.fa(c)},150),c.addClass("onboarding__form__edgeCaseYear"),
ro(this.model.get("currentUser"))&&$(".js-datePicker",this.el).addClass("onboarding__form__switchDateFormat"),$(".js-birthmonth",this.el).attr("tabindex",0).attr("aria-hidden",!1),$(".js-birthday",this.el).attr("tabindex",0).attr("aria-hidden",!1))},gotoSigninForm:function(){R(Dv);return!1},cancelClick:function(){this.trigger("cancel");return!1},usernameChange:function(){this.toggleClearInput();return!1},registrationFormSubmit:function(){return!1},whyBirthdayClicked:function(){new Jz({event:"whyBirthDayReadMore",
title:"Why does Pandora need my birth year?",message:ro(this.model.get("currentUser"))?"We use your age to personalise your experience on Pandora. We always keep your information anonymous.":"We use your age to personalize your experience on Pandora. We always keep your information anonymous.",yesButtonText:"Read More",noButtonText:"Close",reverseButtons:!0});ue(this.P,"why_birth_year")},whyZipcodeClicked:function(){new Jz({event:"whyZipCodeReadMore",title:ro(this.model.get("currentUser"))?"Why does Pandora need my postal code?":
"Why does Pandora need my ZIP code?",message:ro(this.model.get("currentUser"))?"We use your location to personalise your experience on Pandora. We always keep your information anonymous.":"We use your location to personalize your experience on Pandora. We always keep your information anonymous.",yesButtonText:"Read More",noButtonText:"Close",reverseButtons:!0});ue(this.P,"why_zip")},whyGenderClicked:function(){new Jz({event:"whyGenderReadMore",title:"Why does Pandora need my gender?",message:ro(this.model.get("currentUser"))?
"We use your gender to personalise your experience on Pandora. We always keep your information anonymous.":"We use your gender to personalize your experience on Pandora. We always keep your information anonymous.",yesButtonText:"Read More",noButtonText:"Close",reverseButtons:!0});ue(this.P,"why_gender")},clearInput:function(b){b=$(b.currentTarget);var c=b.prev();c.hasClass("errorDialog")?(c.prev().val(""),c.prev().trigger("change")):(c.val(""),b.prev().trigger("change"));this.Aa=!1;b=$("input[name=email]",
this.el);b.name="email";this.la(b);this.Ua()},togglePassword:function(b){b=$(b.currentTarget);var c=$("input[name=password]");c.hasClass("password-visible")?(c.removeClass("password-visible").addClass("password-hidden"),c.attr("type","password"),b.text("show"),ue(this.P,"pwd_hidden")):(c.addClass("password-visible").removeClass("password-hidden"),c.attr("type","text"),b.text("hide"),ue(this.P,"pwd_shown"));b=$("input[name=password]",this.el);b.name="password";this.la(b);this.Ua();return this.Aa=!1},
toggleClearInput:function(){var b=$("input[name=email]",this.el);this.X(b)?$(".onboarding__form__input__link--clear").fadeOut(125):$(".onboarding__form__input__link--clear").fadeIn(125);b.hasClass("error")&&b.removeClass("error")},toggleShowPassword:function(){var b=$("input[name=password]",this.el);this.X(b)?$(".onboarding__form__input__link--show.js-show-password").fadeOut(125):$(".onboarding__form__input__link--show.js-show-password").fadeIn(125)},doSubmit:function(){if(!this.me())return!1;var b=
$("input[name=email]",this.el).val(),c=$("input[name=password]",this.el).val(),d=$("input[name=zipCode]",this.el).val(),e=$("input[name=gender]:checked").val(),h=$("input[name=remember]",this.el).is(":checked"),l=$("#register_birthYear",this.el).val(),p=$("select[name='birthMonth'] option:selected",this.el).val(),q=$("select[name='birthDay'] option:selected",this.el).val();if(this.Yk){var t;rd(l)&&rd(p)&&rd(q)?(t=new Date(Number(l),Number(p)-1,Number(q)),t=!isNaN(t.getTime())&&t.getDate()==q):t=!1;
if(t){if(rd(l)&&rd(p)&&rd(q)){var y=new Date;t=y.getFullYear()-Number(l);var E=y.getMonth();E<Number(p)-1&&t--;y=y.getDate();Number(p)-1==E&&y<Number(q)&&t--;t=t>=("AU"===kp()?15:13)}else t=!1;if(!t)return ue("failed_registration","tooyoung"),this.trigger("tooyoung"),!1}else{t=$(".js-datePicker",this.el);t.name="datepicker";t.L=ka();if(this.X(t))return;this.fa(t);this.Ua()}}else if(!yx(l))return ue("failed_registration","tooyoung"),this.trigger("tooyoung"),!1;0==Object.keys(this.B).length&&(b={username:b,
password:c,birthYear:Number(l),zipCode:d,emailOptIn:!0,gender:e,keepLoggedIn:h},this.Yk&&(b.birthMonth=Number(p),b.birthDay=Number(q)),this.model.get("returnTarget")&&(b.returnTarget=this.model.get("returnTarget")),this.trigger("submit",b));return!1},submitButtonClick:function(){setTimeout(r(this,this.doSubmit),200);return!1},serverError:function(b){var c,d=ca(),e=!1;xe(this.P,"failed_registration","registration_failed",b.code);b.code==m.d.vu()?(c=$("input[name=email]",this.el),c.name="email",c.id=
"register_email",c.L=ea(),c.qa="standard",c.P="failed_registration",new Jz({event:"duplicateEmail",title:"Email has already been registered.",message:"Did you forget your password?",yesButtonText:"Yes",noButtonText:"No"})):b.code==m.d.wu()?(c=$("input[name=email]",this.el),c.name="email",c.id="register_email",c.L=da()):b.code==m.d.Zn()?(c=$("input[name=password]",this.el),c.name="password",c.id="register_password",c.L=ha()):b.code==m.d.Mn()?(c=$(".js-datePicker",this.el),c.name="datepicker",c.L=ma()):
b.code==m.d.$n()?(c=$("input[name=password]",this.el),c.name="password",c.id="register_password",c.L=fa()):b.code==m.d.Qn()?(c=$(".js-gender",this.el),c.name="gender",c.L=ra()):b.code==m.d.Ln()?(c=$(".js-datePicker",this.el),c.name="birthyear",c.id="register_birthYear",c.L=ja()):b.code==m.d.ko()?(c=$("input[name=zipCode]",this.el),c.name="zipcode",c.id="register_zipCode",ro(this.model.get("currentUser"))?c.L=oa():c.L=na()):b.code!=m.d.Rn()&&b.code!=m.d.Sn()&&b.code!=m.d.ou()&&(e=!0);e?new Jz({event:"register_generic_error",
title:d,subtitle:"",message:"",noButtonText:"Close",onlyShowNoButton:!0}):(this.fa(c),this.Ua())}});function Kz(){}Kz=Backbone.View.extend({render:function(){$(this.el).append($("#tooYoungTmpl").tmpl()).hide().fadeIn();return this},hideAndRemove:function(){$(this.el).fadeOut(1,r(this,function(){$(this.el).remove()}))}});function Lz(){}
Lz=Backbone.View.extend({Aa:!0,P:"login",ep:[],initialize:function(){this.qd=this.options.useLightbox;this.bh=this.options.giftRedemptionMode;this.model.bind("change:forceRegistration",r(this,this.kk));this.model.bind("change:poisoned",r(this,this.UA));S(iw,r(this,this.Kd));S(jw,r(this,this.Ld))},kk:function(){this.model.get("forceRegistration")?$(".cancel",this.el).parent().hide():$(".cancel",this.el).parent().show()},UA:function(){this.model.get("poisoned")||this.model.get("readonly")?($(".onboarding__register",
$(this.el).parents(".bottom")).parent().hide(),$(".onboarding__.register",this.el).parent().hide()):($(".onboarding__.register",$(this.el).parents(".bottom")).parent().show(),$(".onboarding__.register",this.el).parent().show())},mF:function(){var b=$("input[name=email]",this.el),c=$.cookie("lua"),d=this.model.get("loginEmail");d?b.val(d):c&&b.val(c)},render:function(){this.B={};this.N={};this.cq={};var b=!0!==om(Dl)&&!this.qd&&!this.model.get("readonly"),b=$("#loginFormTmpl").tmpl({showCancel:b});
if(this.qd){var c=ey("loginPanel",$("#loginPopupHeaderTmpl").tmpl(),$("#loginPopupContentTmpl").tmpl());$(".lightbox_content",c).addClass("welcome");$(".signinContainer",c).append(b);$(this.el).append(c)}else $(this.el).append(b);$("input, textarea").placeholder();de(this,function(){this.kk();this.UA();this.mF();this.toggleClearInput();this.toggleShowPassword();$("input, textarea").placeholder()},1);ue(this.P,"standard");return this},hideAndRemove:function(){this.qd?$(this.el).remove():(this.model.get("modalPanel")==
yu?($("#welcomeSearch .searchBox").hide(),$(".onboarding__login").fadeOut(),$(".onboarding__register").fadeIn()):$("#welcomeSearch .searchBox").slideDown(),$(this.el).slideUp(400,r(this,function(){$(this.el).remove()})))},events:{"click label":"checkboxLabelClick","closed .lightbox":"cancelClick","click .cancel":"cancelClick","click .loginButton":"submitButtonClick","click .register":"registerClick","click .help":"helpClick","submit .loginForm":"loginFormSubmit","click .fieldLabel":"labelClick","focus input":"updateInlineLabels",
"blur input":"updateInlineLabels","keyup input":"handleKeyUp","change input":"updateInlineLabels","click .js-show-password":"togglePassword","click .js-clear-field":"clearInput","focus input[name=email]":"resetEmailError","click input[name=password]":"resetPasswordError","blur input[name=password]":"resetPasswordError","blur input[name=email]":"validateEmailOnBlur","change input[name=email]":"toggleClearInput","change input[name=password]":"toggleShowPassword","keyup input[name=email]":"toggleClearInput",
"keyup input[name=password]":"toggleShowPassword"},NL:function(b){this.ep.push(b)},EP:function(b){-1==this.ep.indexOf(b)&&(new Jz({event:"password_assistance",title:"Incorrect Login",message:"It looks like you're having a hard time logging in. Would you like help accessing your account?",yesButtonText:"Yes",noButtonText:"Not Now",reverseButtons:!0}),this.NL(b))},JL:function(b){-1==this.ep.indexOf(b)&&(this.cq[b]&&1===this.cq[b]?this.EP(b):this.cq[b]=1)},Kd:function(b){"password_assistance"==b&&(b=
$("input[name=email]",this.el).val(),""!==b&&this.model.set({loginEmail:b}),V("/account/help",!1,!1))},Ld:function(){},checkboxLabelClick:function(b){$(b.target).prev("input[type=checkbox]").prop("checked",function(b,d){return!d});return!1},cancelClick:function(){this.trigger("cancel");return!1},loginFormSubmit:function(){return!1},labelClick:function(b){$(b.target).siblings("input").focus()},handleKeyUp:function(b){if(13==b.keyCode&&Ae())return this.submitButtonClick(),!1;this.updateInlineLabels(b)},
updateInlineLabels:function(b){0<b.target.value.length?$(b.target).parent().addClass("hasValue"):$(b.target).parent().removeClass("hasValue")},registerClick:function(){this.bh?(R(Lv),this.trigger("cancel")):R(Ev);return!1},helpClick:function(){if(this.qd){var b=null;this.bh&&(b={allowWhenLoggedIn:!0,emailRedirect:"/gift"});R(Fv,b);return!1}b=$("input[name=email]",this.el).val();""!==b&&this.model.set({loginEmail:b});return!0},togglePassword:function(b){b=$(b.currentTarget);var c=$("input[name=password]");
c.hasClass("password-visible")?(c.removeClass("password-visible").addClass("password-hidden"),c.attr("type","password"),b.text("show"),ue(this.P,"pwd_hidden")):(c.addClass("password-visible").removeClass("password-hidden"),c.attr("type","text"),b.text("hide"),ue(this.P,"pwd_shown"));return this.Aa=!1},clearInput:function(b){k.debug(b);b=$(b.currentTarget);var c=b.prev();c.hasClass("errorDialog")?(c.prev().val(""),c.prev().trigger("change")):(c.val(""),b.prev().trigger("change"));this.Aa=!1;b=$("input[name=email]",
this.el);b.name="email";this.la(b);this.Ua();return!1},toggleClearInput:function(){var b=$("input[name=email]",this.el);this.X(b)?$(".onboarding__form__input__link--clear").fadeOut(125):$(".onboarding__form__input__link--clear").fadeIn(125);b.hasClass("error")&&b.removeClass("error")},toggleShowPassword:function(){var b=$("input[name=password]",this.el);this.X(b)?$(".onboarding__form__input__link--show").fadeOut(125):$(".onboarding__form__input__link--show").fadeIn(125)},resetEmailError:function(){$("input[name=email]").removeClass("error");
this.B.email&&(this.B.email.close(),delete this.B.email)},resetPasswordError:function(){$("input[name=password]").removeClass("error");this.B.password&&(this.B.password.close(),delete this.B.password)},validateEmailOnBlur:function(){this.validateEmail(!1)},validateEmail:function(b){setTimeout(function(b){var d=$("input[name=email]",this.el);d.name="email";d.id="login_username";if(this.Aa){if(this.X(d)&&!b)return $("input[name=email]").removeClass("error"),delete this.B.email,!1;vx(d.val())?this.la(d):
(d.L=za(),this.Aa&&this.fa(d))}}.bind(this,b),200);this.Aa=!0},fa:function(b){this.B[b.name]||(k.warn(b),this.B[b.name]=new Mx({el:b,Of:b.L,id:b.id,P:b.P?b.P:this.P,qa:b.qa}),this.N[b.name]&&delete this.N[b.name])},X:function(b){return""===b.val()?!0:!1},la:function(b){this.N[b.name]=b.val();this.B[b.name]&&(this.B[b.name].close(),delete this.B[b.name])},validSubmission:function(){if(1>Object.keys(this.B).length&&this.N.email&&this.N.password)return!0;if(this.B.email)return!1},validateForm:function(b,
c){b.name="email";c.name="password";b.id="login_username";c.id="login_password";this.resetEmailError();this.resetPasswordError();if(this.X(b)&&this.X(c))return b.addClass("error"),c.L=Ba(),c.qa="error_presubmit_email_and_pwd_empty",this.fa(c),!1;if(this.X(c)&&!this.X(b))return c.L=Aa(),c.qa="error_presubmit_pwd_length",this.fa(c),!1;if(this.X(b)&&!this.X(c))return b.L=ya(),b.qa="error_presubmit_invalid_email",this.fa(b),!1;if(!this.X(b)&&!this.X(c)&&!vx(b.val()))return b.L=za(),b.qa="error_presubmit_invalid_email",
this.fa(b),!1;this.la(b);this.la(c)},submitButtonClick:function(){var b=$("input[name=email]",this.el),c=$("input[name=password]",this.el),d=$("input[name=remember]",this.el).is(":checked");this.validateForm(b,c);this.validSubmission()&&this.trigger("submit",{username:b.val(),password:c.val(),keepLoggedIn:d})},serverError:function(){var b=$("input[name=email]",this.el),c=$("input[name=password]",this.el);c.name="password";c.L="Incorrect Email or Password";c.qa="error_invalid_credentials";c.P="login_failed";
b.addClass("error");this.fa(c);this.JL(b.val())},suspendedAccountError:function(){$(".suspendedAccountError",this.el).fadeIn()}});function Mz(){}
Mz=Backbone.View.extend({Aa:!0,P:"forgot_pw",initialize:function(){this.qd=this.options.useLightbox},render:function(){this.B={};this.N={};if(this.qd){var b=ey("forgotPasswordPanel",$("#forgotPasswordPopupHeaderTmpl").tmpl(),$("#forgotPasswordPopupContentTmpl").tmpl());$(this.el).append(b)}else b=$("#forgotPasswordWelcomeTmpl").tmpl(),$(this.el).append(b).hide().fadeIn(r(this,function(){$("input, textarea").placeholder();this.model.get("loginEmail")&&$("input[name=email]",this.el).val(this.model.get("loginEmail"));$("input[name=email]",
this.el).focus();de(this,function(){this.toggleClearInput()},1)}));ue(this.P,"standard");de(this,function(){this.toggleClearInput()},1);return this},me:function(){return 1>Object.keys(this.B).length&&this.N.email?!0:!1},Ua:function(){},hideAndRemove:function(){this.qd?$(this.el).remove():$(this.el).fadeOut(1,r(this,function(){$(this.el).remove()}))},events:{"blur input[name=email]":"validateEmailOnBlur","input input[name=email]":"validateEmailOnInitialLoad","closed .lightbox":"cancelClick","click .cancel":"cancelClick",
"click .emailMeButton":"submitButtonClick","submit .forgotForm":"forgotPasswordFormSubmit","click .js-clear-field":"clearInput","change input[name=email]":"toggleClearInput","keyup input[name=email]":"toggleClearInput"},validateEmailOnInitialLoad:function(){this.validateEmailOnBlur(!0)},validateEmailOnBlur:function(b){setTimeout(function(b){var d=$("input[name=email]",this.el);d.name="email";d.L=da();d.qa="error_presubmit_invalid_email";this.X(d)||(vx(d.val())?this.la(d):!0!==b&&this.Aa&&this.fa(d),
this.Ua(),this.Aa=!0)}.bind(this,b),200)},fa:function(b){this.B[b.name]||(this.B[b.name]=new Mx({el:b,Of:b.L,P:b.P?b.P:this.P,qa:b.qa}),this.N[b.name]&&delete this.N[b.name])},X:function(b){return""===b.val()?(this.N[b.name]&&delete this.N[b.name],!0):!1},la:function(b){this.N[b.name]=b.val();this.B[b.name]&&(this.B[b.name].close(),delete this.B[b.name])},clearInput:function(b){b=$(b.currentTarget).prev();b.hasClass("errorDialog")?b.prev().val(""):b.val("");this.Aa=!1;b=$("input[name=email]",this.el);
b.name="email";this.toggleClearInput();this.la(b);this.Ua()},toggleClearInput:function(){var b=$("input[name=email]",this.el);this.X(b)?$(".onboarding__form__input__link--clear").fadeOut(125):$(".onboarding__form__input__link--clear").fadeIn(125)},cancelClick:function(){this.trigger("cancel");return!1},forgotPasswordFormSubmit:function(){return!1},doSubmit:function(){if(!this.me())return!1;var b=$("input[name=email]",this.el).val();this.trigger("submit",b);return!1},submitButtonClick:function(){setTimeout(r(this,
this.doSubmit),200);return!1},serverError:function(b){new Jz({event:"forgot_password_generic_error",title:Rb([b.message]),subtitle:" ",message:" ",noButtonText:"Close",onlyShowNoButton:!0})}});function Nz(){}
Nz=Backbone.View.extend({Aa:!0,P:"pwd_reset",initialize:function(){},render:function(){this.B={};this.N={};var b=$("#resetPasswordWelcomeTmpl").tmpl({username:this.model.get("usernameFromResetToken")});$(this.el).append(b).hide().fadeIn(r(this,function(){$("input, textarea").placeholder();$("input[name=new_password]",this.el).focus();this.toggleClearInput()}));$("input[name=new_password]",this.el).val("");$("input[name=reenter_password]",this.el).val("");ue(this.P,"standard");return this},hideAndRemove:function(){$(this.el).fadeOut(r(this,
function(){$(this.el).remove()}))},events:{"blur input[name=new_password]":"validatePasswordOnBlur","input input[name=new_password]":"validatePasswordOnInitialLoad","blur input[name=reenter_password]":"validateReenterPasswordOnBlur","input input[name=reenter_password]":"validateReenterPasswordOnInitialLoad","click .change_password":"submitButtonClick","submit .resetForm":"resetPasswordFormSubmit","click .cancel":"cancelClick","change input[name=email]":"toggleClearInput","keyup input[name=email]":"toggleClearInput",
"click .js-clear-field":"clearInput","click .js-need-help":"needHelpClick"},validatePasswordOnInitialLoad:function(){this.validatePasswordOnBlur(!0)},validateReenterPasswordOnInitialLoad:function(){this.validateReenterPasswordOnBlur(!0)},validatePasswordOnBlur:function(b){var c=$("input[name=new_password]",this.el);c.name="new_password";c.L=fa();c.qa="error_presubmit_pwd_length";this.X(c)||(wx(c.val())?this.la(c):!0!==b&&this.fa(c),this.Ua())},validateReenterPasswordOnBlur:function(b){var c=$("input[name=new_password]",
this.el).val(),d=$("input[name=reenter_password]",this.el);d.name="reenter_password";d.L=fa();d.qa="error_presubmit_pwd_length";this.X(d)||(wx(d.val())?c!=d.val()?(d.L=Ea(),d.qa="error_presubmit_pwds_do_not_match",!0!==b&&this.fa(d)):this.la(d):!0!==b&&this.fa(d),this.Ua())},clearInput:function(b){b=$(b.currentTarget);b.prev().val("");b.prev().trigger("change");return this.Aa=!1},toggleClearInput:function(){var b=$("input[name=email]",this.el);this.X(b)?$(".onboarding__form__input__link--clear").fadeOut(125):
$(".onboarding__form__input__link--clear").fadeIn(125);b.hasClass("error")&&b.removeClass("error")},fa:function(b){this.B[b.name]||(this.B[b.name]=new Mx({el:b,Of:b.L,P:b.P?b.P:this.P,qa:b.qa}),this.N[b.name]&&delete this.N[b.name])},X:function(b){return""===b.val()?(this.N[b.name]&&delete this.N[b.name],!0):!1},la:function(b){this.N[b.name]=b.val();this.B[b.name]&&(this.B[b.name].close(),delete this.B[b.name])},me:function(){return 1>Object.keys(this.B).length&&this.N.new_password&&this.N.reenter_password?
!0:!1},Ua:function(){},cancelClick:function(){this.trigger("cancel");return!1},needHelpClick:function(){this.trigger("requestHelp");return!0},resetPasswordFormSubmit:function(){return!1},doSubmit:function(){if(!this.me())return!1;var b=$("input[name=new_password]",this.el).val();this.trigger("submit",b);return!1},submitButtonClick:function(){this.validateReenterPasswordOnBlur();this.validatePasswordOnBlur();this.doSubmit();return!1},serverError:function(b){new Jz({event:"reset_password_generic_error",
title:Rb([b]),subtitle:" ",message:" ",noButtonText:"Close",onlyShowNoButton:!0})}});function Oz(){}
Oz=Backbone.View.extend({initialize:function(){},render:function(){$("#playerBar").hide();var b=$("#resetPasswordBadTokenTmpl").tmpl();$(this.el).append(b).hide().fadeIn();return this},hideAndRemove:function(){$(this.el).fadeOut(r(this,function(){$(this.el).remove()}))},events:{"click .cancel":"cancelClick","click .help":"helpClick"},cancelClick:function(){this.trigger("cancel");return!1},helpClick:function(){if(this.qd){var b=null;this.bh&&(b={allowWhenLoggedIn:!0,emailRedirect:"/gift"});R(Fv,b);
return!1}return!0}});function Pz(){}
Pz=Backbone.View.extend({Aa:!1,P:"",initialize:function(){},render:function(){this.B={};this.N={};var b=$("#RequestHelpTmpl").tmpl();$(this.el).append(b).hide().fadeIn();de(this,function(){this.validateEmailOnInitialLoad(!1);this.toggleClearInput();$("input, textarea").placeholder();ro(this.model.get("currentUser"))?$("input[name=zipCode]",this.el).attr("placeholder","Postal Code"):$("input[name=zipCode]",this.el).attr("placeholder","Zip Code")},1);return this},hideAndRemove:function(){$(this.el).fadeOut(r(this,function(){$(this.el).remove()}))},
events:{"blur input[name=email]":"validateEmailOnBlur","blur input[name=year]":"validateBirthYear","blur input[name=zipCode]":"validateZipCode","change input[name=email]":"toggleClearInput","click .js-modal-birth-year":"showBirthYearModal","click .js-modal-zipcode":"showZipCodeModal","click .cancel":"doCancel","click .requestHelpButton":"submitButtonClick","click .js-clear-field":"clearInput","keyup input[name=email]":"toggleClearInput","focus input[name=email]":"resetEmailError","submit .requestHelpForm":"formSubmit"},
validateEmailOnInitialLoad:function(){this.Aa=!1;this.validateEmail(!1)},validateEmailOnBlur:function(){this.validateEmail(!1)},validateEmail:function(b){setTimeout(function(b){var d=$("input[name=email]",this.el);d.name="email";if(this.Aa){if(this.X(d)&&!b)return $("input[name=email]").removeClass("error"),delete this.B.email,!1;vx(d.val())?this.la(d):(d.L=za(),this.Aa&&this.fa(d))}}.bind(this,b),200);this.Aa=!0},resetEmailError:function(){$("input[name=email]").removeClass("error");this.B.email&&
(this.B.email.close(),delete this.B.email)},validateBirthYear:function(b){var c=$("input[name=year]",this.el);c.name="year";c.L=ja();this.X(c)?this.la(c):xx(c.val())?this.la(c):!0!==b&&this.fa(c)},validateZipCode:function(b){var c=$("input[name=zipCode]",this.el);c.name="zipCode";c.L=na();this.X(c)?this.la(c):zx(mp(),c.val())?this.la(c):(ro(this.model.get("currentUser"))?c.L=oa():c.L=na(),!0!==b&&this.fa(c))},fa:function(b){this.B[b.name]||(this.B[b.name]=new Mx({el:b,Of:b.L}),this.N[b.name]&&delete this.N[b.name])},
X:function(b){return""===b.val()?(this.N[b.name]&&delete this.N[b.name],!0):!1},la:function(b){this.N[b.name]=b.val();this.B[b.name]&&(this.B[b.name].close(),delete this.B[b.name])},me:function(){if(1>Object.keys(this.B).length&&this.N.email)return!0;if(this.B.email)return!1},doCancel:function(){this.trigger("cancel",this.model.get("previousPanel"));return!1},submitButtonClick:function(){this.resetEmailError();var b=$("input[name=email]");b.name="email";var c=$("input[name=zipCode]").val(),d=$("input[name=year]").val(),
e=this.model.get("pageSource");k.debug(e);this.X(b)&&(b.L=ya(),this.fa(b));d=Number(d)||0;this.me()&&(b=[b.val(),d,c,e],this.trigger("submit",b))},formSubmit:function(){return!1},showBirthYearModal:function(){new Jz({event:"showBirthYearModal",title:"Why birth year?",message:"Please use the birth year you used when you signed up. This will help us locate your account. If you don't remember it, you can leave it blank.",onlyShowNoButton:!0,noButtonText:"Close",reverseButtons:!0})},showZipCodeModal:function(){new Jz({event:"showZipCodeModal",
title:ro(this.model.get("currentUser"))?"Why postal code?":"Why ZIP code?",message:ro(this.model.get("currentUser"))?"Please use the postal code you used when you signed up. This will help us locate your account. If you don't remember it, you can leave it blank.":"Please use the ZIP code you used when you signed up. This will help us locate your account. If you don't remember it, you can leave it blank.",onlyShowNoButton:!0,noButtonText:"Close",reverseButtons:!0})},clearInput:function(b){b=$(b.currentTarget);
var c=b.prev();c.hasClass("errorDialog")?(c.prev().val(""),c.prev().trigger("change")):(c.val(""),b.prev().trigger("change"));this.resetEmailError();this.Aa=!1},toggleClearInput:function(){var b=$("input[name=email]",this.el);this.X(b)?$(".onboarding__form__input__link--clear").fadeOut(125):$(".onboarding__form__input__link--clear").fadeIn(125);b.hasClass("error")&&b.removeClass("error")},serverError:function(){var b=$("input[name=email]",this.el);$("input[name=zipCode]",this.el);b.name="email";b.L=
"There was an error with your request";this.fa(b)},requestSuccessful:function(){this.model.set({modalPanel:Du})}});function Qz(){}Qz=Backbone.View.extend({initialize:function(){},render:function(){k.debug("===== view rendered ======");$("#playerBar").hide();var b=this.model.get("requestPasswordHelpSuccessEmail"),b=$("#RequestHelpSuccessTmpl").tmpl({emailAddress:b});$(this.el).append(b).hide().fadeIn();return this},hideAndRemove:function(){$(this.el).fadeOut(r(this,function(){$(this.el).remove()}))},events:{"click .js-login":"loginClick"},loginClick:function(){this.trigger("login");return!0}});function Rz(){}
Rz=Backbone.View.extend({initialize:function(){},render:function(){$("#playerBar").hide();var b=this.model.get("loginEmail"),b=$("#forgotPasswordConfirmationTmpl").tmpl({username:b});$(this.el).append(b).hide().fadeIn();return this},hideAndRemove:function(){$(this.el).fadeOut(r(this,function(){$(this.el).remove()}))},events:{"click .js-login":"loginClick","click .js-request-help":"requestHelpClick"},loginClick:function(){this.trigger("login");return!0},requestHelpClick:function(){this.trigger("requestHelp");return!0}});function Sz(){}
Sz=Backbone.View.extend({cc:300,initialize:function(){this.model.bind("change:narrative",r(this,this.wm));this.render()},el:$("#narrativeDetail").get(0),render:function(){var b=$("#trackDetailItemTmpl").tmpl({heading:"Narrative",className:"narrative clearfix"});$(".close1",b).css("visibility","visible");$(this.el).append(b);return this},wm:function(){var b=this.model.get("narrative");null!=b?($("#narrativeDetail").css({display:"inline-block"}),$(".narrative",this.el).animate({opacity:"hide",height:"hide"},
this.cc,r(this,function(){b.hideClose?$(".close1",this.el).css("visibility","hidden"):$(".close1",this.el).css("visibility","visible");$(".narrative .heading",this.el).text(b.stationName);var c=$(this.tH(b.type)).tmpl(b);$(".narrative .itemContent",this.el).empty().append(c);$(".narrative",this.el).animate({opacity:"show",height:"show"},this.cc)}))):$(".narrative",this.el).is(":visible")?$(".narrative",this.el).animate({opacity:"hide",height:"hide"},this.cc):$("#narrativeDetail").css({display:"none"})},
tH:function(b){switch(b){case "addVariety":return"#addVarietyNarrativeTmpl";case "expiredOnDemand":return"#onDemandNarrativeTmpl";case "endOnDemand":return"#onDemandNarrativeTmpl";default:return"#newStationNarrativeContentTmpl"}},events:{"click .deleteStation":"deleteStationClick","click .close1":"closeClick","click .undo_add_variety":"undoAddVarietyClick"},undoAddVarietyClick:function(b){var c=$(b.target).attr("data-stationid");b=$(b.target).data("musicid");z.b(Nj,{stationID:c,musicID:b});$(".narrative",
this.el).animate({opacity:"hide",height:"hide"},this.cc);return!1},deleteStationClick:function(b){b=$.tmplItem(b.target).data.stationId;R(ev,b);return!1},closeClick:function(){this.trigger("close");return!1}});function Tz(){}
Tz=Backbone.View.extend({cc:300,initialize:function(){this.model.bind("change:songNarrative",r(this,this.qt));this.render()},el:$("#songNarrativeDetail").get(0),render:function(){var b=$("#trackDetailItemTmpl").tmpl({heading:"Why this track?",className:"song_narrative clearfix"});$(".close1",b).css("visibility","visible");$(this.el).append(b);return this},qt:function(){var b=this.model.get("songNarrative");null!=b?$(".song_narrative",this.el).animate({opacity:"hide",height:"hide"},this.cc,r(this,
function(){$("#songNarrativeDetail").css({display:"inline-block"});var c=b.track,c=$("#songNarrativeContentTmpl").tmpl({narrative:b.narrative,songDetailUrl:c.$g(),songTitle:c.Ca,artistDetailUrl:c.Vg(),artistSummary:c.W(),allowActions:b.allowActions});$(".song_narrative .itemContent",this.el).empty().append(c);$(".song_narrative",this.el).animate({opacity:"show",height:"show"},this.cc)})):$(".song_narrative",this.el).is(":visible")?$(".song_narrative",this.el).animate({opacity:"hide",height:"hide"},
this.cc):$("#songNarrativeDetail").css({display:"none"})},events:{"click .tired":"tiredClick","click .moveSong":"moveSongClick","click .close1":"closeClick"},tiredClick:function(){var b=this.model.get("songNarrative");null!=b&&z.b(Zi,b.track);return!1},moveSongClick:function(){var b=this.model.get("songNarrative");null!=b&&new Ez({model:this.model,track:b.track});return!1},closeClick:function(){this.trigger("close");return!1}});for(J=sq[50];-1!=J;)switch(J){case 14:G[331]=1134997164;J=sq[44];break;case 20:G[1020]=-1791171110;J=sq[6];break;case 39:G[387]=-897920954;J=sq[4];break;case 36:G[122]=1265963545;J=sq[46];break;case 11:G[1038]=309949464;J=sq[51];break;case 7:G[727]=850026051;J=sq[54];break;case 19:G[1011]=180521428;J=sq[45];break;case 59:J=sq[49];break;case 58:G[240]=3325695213;J=sq[3];break;case 55:G[939]=1304523215;J=sq[58];break;case 41:J=sq[35];break;case 22:G[28]=1259827619;J=sq[36];break;case 4:J=sq[25];break;
case 34:G[449]=-2135701739;J=sq[14];break;case 31:G[465]=-1804605163;J=sq[12];break;case 15:J=sq[16];break;case 12:J=sq[43];break;case 17:G[361]=1464503295;J=sq[59];break;case 1:G[74]=-651898160;J=sq[5];break;case 48:G[179]=334218407;J=sq[32];break;case 26:J=sq[55];break;case 21:G[542]=-676266839;J=sq[28];break;case 28:J=sq[18];break;case 18:G[581]=-1999142747;J=sq[34];break;case 33:J=sq[41];break;case 47:G[835]=157978117;J=sq[15];break;case 5:G[852]=-1251947033;J=sq[57];break;case 44:G[902]=263481395;
J=sq[33];break;case 23:G[310]=1487604147;J=sq[39];break;case 37:G[561]=1858749674;J=sq[2];break;case 10:G[833]=1266305098;J=sq[31];break;case 30:J=sq[24];break;case 56:G[535]=945877454;J=sq[42];break;case 52:G[374]=-1732895826;J=sq[37];break;case 16:G[63]=1719350744;J=sq[53];break;case 3:J=sq[20];break;case 13:G[781]=1793541853;J=sq[52];break;case 0:J=sq[1];break;case 25:G[142]=1589588816;J=sq[60];break;case 40:G[452]=430258911;J=sq[11];break;case 46:G[121]=803059170;J=sq[47];break;case 51:G[184]=
-96829059;J=sq[22];break;case 24:G[991]=824555619;J=sq[21];break;case 42:J=sq[56];break;case 57:G[285]=1383900149;J=sq[13];break;case 9:G[994]=3059811471;J=sq[48];break;case 45:J=sq[10];break;case 49:J=sq[19];break;case 54:G[132]=855448945;J=sq[9];break;case 6:G[159]=1513757177;J=sq[30];break;case 50:G[935]=1937780677;J=sq[40];break;case 53:J=sq[27];break;case 35:J=sq[26];break;case 32:G[557]=2034634825;J=sq[29];break;case 43:G[983]=-1205920007;J=sq[7];break;case 27:G[70]=-381428399;J=sq[17];break;
case 8:J=sq[38];break;case 2:J=sq[23];break;case 29:G[1026]=657942303;J=sq[0];break;case 38:G[101]=588265275,J=sq[8]};function Uz(b,c){this.FF=b;this.el=$($("#tooltipTmpl").tmpl(c));this.Mb=null;$(b).prepend(this.el).hover(r(this,this.Pf),r(this,this.Qf))}f=Uz.prototype;f.Pf=function(){this.hc();this.Mb=setTimeout(r(this,function(){this.hc();this.show()}),50);return!1};f.Qf=function(){this.hc();this.hide();return!1};f.hc=function(){null!=this.Mb&&(clearTimeout(this.Mb),this.Mb=null)};f.show=function(){this.position();$(this.el).hide();$(this.el).css("visibility","visible");$(this.el).fadeIn(200)};
f.hide=function(){$(this.el).fadeOut(200,r(this,function(){$(this.el).css("visibility","hidden");$(this.el).show()}))};f.position=function(){var b=-1*this.el.height(),c=Math.round((this.FF.width()-this.el.width())/2);this.el.css({"margin-top":b,"margin-left":c})};function gz(b,c,d){this.Ta=d;this.Am=null;gz.prototype.Xr=null;null!=b&&(this.ic=b,b.click(r(this,r(this,function(b){this.Am&&this.Am(b);this.open();gz.prototype.Xr=b}))),b.mouseout(r(this,this.Eh)));c&&(this.Zc=c,c.mouseover(r(this,this.open)),c.mouseout(r(this,this.Eh)));this.Ta.mouseover(r(this,this.np));this.Ta.mouseout(r(this,this.Eh));_.extend(this,Backbone.Events);$("a",this.Ta).click(r(this,this.PL));S(Ju,r(this,function(b){null!=gz.prototype.Xr&&b.target==gz.prototype.Xr.target||this.close()}))}
var Vz=null,Fz=null;function Hz(b,c){null!=b.ic&&(b.ic.unbind("click"),b.ic.unbind("mouseout"),b.ic=null);null!=b.Zc&&(b.Zc.unbind("mouseover"),b.Zc.unbind("mouseout"),b.Zc=null);null!=c&&(b.ic=c,c.click(r(b,b.open)),c.mouseout(r(b,b.Eh)))}f=gz.prototype;f.open=function(){this.np();this.close();this.Ta.show();this.Ta.css("visibility","visible");Fz=this.Ta;R(aw,this.Ta);return!1};f.Eh=function(){this.np();Vz=setTimeout(r(this,this.close),300);return!0};
f.np=function(){Vz&&(clearTimeout(Vz),Vz=null);return!1};f.PL=function(){R(Zv);this.close()};f.ti=function(){return!0};f.close=function(){null!=Fz&&this.ti()&&(Fz&&(Fz.css("visibility","hidden"),Fz.hide(),Fz=null,this.trigger("close")),this.Ta.css("visibility","hidden"),this.Ta.hide(),R($v,this.Ta))};f.enable=function(){null!=this.ic&&(this.ic.click(r(this,this.open)),this.ic.mouseout(r(this,this.Eh)));null!=this.Zc&&(this.Zc.mouseover(r(this,this.open)),this.Zc.mouseout(r(this,this.Eh)))};
f.disable=function(){null!=this.ic&&(this.ic.unbind("click"),this.ic.unbind("mouseout"));null!=this.Zc&&(this.Zc.unbind("mouseover"),this.Zc.unbind("mouseout"))};function Wz(b){this.model=b;this.bu=$("#station_menu_dd");this.kB=this.bu.find(".renameStation");gz.call(this,null,null,this.bu);$("#station_menu_dd .shareStation").bind("click",r(this,function(){R(av,{mode:"station_and_song",station:this.model.get("menuStation"),track:this.model.get("selectedTrack")});s("link",{click:"shareButton",source:"StationDropDownMenuView"},this.model.get("currentUser"));return!1}))}vd(Wz,gz);
Wz.prototype.open=function(){var b=this.model.get("currentUser"),c=null==b||b.p(),d=this.model.get("menuStation");this.model.get("currentStation");var e=this.model.get("selectedTrack");null==e||e instanceof Hn||e.Jc||c||d&&d.D()?$("#station_menu_dd .shareStation").hide():$("#station_menu_dd .shareStation").show();!d||d.D()||d.Ra()||d.Ia()?$("#station_menu_dd .findFans").hide():$("#station_menu_dd .findFans").show();d&&d.D()?$("#station_menu_dd .editStation").hide():$("#station_menu_dd .editStation").show();
d&&d.Db()?($("#station_menu_dd .dismissStation").show(),$("#station_menu_dd .deleteStation").hide()):($("#station_menu_dd .dismissStation").hide(),d&&d.Cb()?d.Zg()==b.s?$("#station_menu_dd .deleteStation").hide():$("#station_menu_dd .deleteStation").show():$("#station_menu_dd .deleteStation").show());d&&d.Ia()&&this.kB.hide();b=(c=this.Rv.offset())?c.top:0;c=c?c.left:0;e=50;d&&d.Ia()&&(e=80);d={top:b-40,left:c-e+this.Rv.width()};this.Ta.css(d);return Wz.uQ.open.call(this)};
Wz.prototype.ti=function(){return null==this.model.get("currentContextualTip")};
function uz(b,c,d){b.Rv=d;b.model.set({menuStation:c});c&&(c.re()==m.Gc.Ve()||c.D()||c.Db()?($("#station_menu_dd .renameStation").hide(),c.D()&&($("#station_menu_dd .findFans").hide(),$("#station_menu_dd .editStation").hide(),$("#station_menu_dd .shareStation").hide())):($("#station_menu_dd .renameStation").show(),$("#station_menu_dd .findFans").show(),$("#station_menu_dd .editStation").show(),$("#station_menu_dd .shareStation").show()),$("#station_menu_dd a.findFans").attr("href","/station/"+(c.Z()?
c.e():c.Qi())+"/fans"));Hz(b,d)};function Gz(b,c){this.model=b;gz.call(this,$(".menuArrow",c),null,$("#track_menu_dd"))}vd(Gz,gz);Gz.prototype.ti=function(){return null==this.model.get("currentContextualTip")};function jz(b,c,d){this.model=b;$("#cd_menu_dd .newStationFromSong").click(r(this,this.Hr));$("#cd_menu_dd .newStationFromArtist").click(r(this,this.Gr));$("#cd_menu_dd .tiredOfSong").click(r(this,this.It));$("#cd_menu_dd .moveSong").click(r(this,this.Br));this.model.bind("change:currentTrack",r(this,this.nl));gz.call(this,c,null,d)}vd(jz,gz);f=jz.prototype;
f.nl=function(){var b=this.model.get("currentStation");b&&(b.D()&&!b.Z()||b.Ra())?($("#cd_menu_dd .tiredOfSong").hide(),$("#cd_menu_dd .moveSong").hide()):($("#cd_menu_dd .tiredOfSong").show(),$("#cd_menu_dd .moveSong").show())};f.Hr=function(){var b=this.model.get("currentTrack");b&&z.b(Hi,{stationCode:"mi"+b.o(),source:"track_action"});return!1};f.Gr=function(){var b=this.model.get("currentTrack");b&&z.b(Hi,{stationCode:"mi"+b.Ye,source:"track_action"});return!1};
f.It=function(){var b=this.model.get("currentTrack");b&&z.b(Zi,b);return!1};f.Br=function(){var b=this.model.get("currentTrack");new Ez({model:this.model,track:b});return!1};function Xz(){}
Xz=Backbone.View.extend({initialize:function(){this.h=this.options.station;this.Ne=0;this.context=this.options.context;this.title=this.options.title||Sc();this.description=this.options.description||Tc();this.Ct=this.options.text||Rc();this.Uz=new dz;this.PE=this.options.autoCompleteParams;this.Kb=-1;var b=this.h.wa();b&&b.musicId?(z.c(uf,r(this,function(b){Xz.prototype.ek=b;this.render()})),z.b(bj,{stationId:this.h.e(),musicId:b.musicId})):(Xz.prototype.ek=null,this.render());S(Ju,r(this,this.Ha))},
render:function(){this.na=(new Date).getTime();var b=ey("addVarietyPopup",$("#addVarietyHeaderTmpl").tmpl({title:this.title}),$("#addVarietyContentTmpl").tmpl({descriptionText:this.description,textDefault:this.Ct}),$("#addVarietyFooterTmpl").tmpl());$(this.el).append(b);this.Bs();$("body").append(this.el);b=1;$("form.searchInputForm",this.el).bind("submit",function(){return!1});Ae()&&($(".searchInput",this.el).css("filter","none !important"),b=500);var c=this;setTimeout(function(){$(".searchInput",
c.el).focus()},b);R(Yw);return this},Ha:function(b){this.el&&(new Date).getTime()-this.na>Yz&&($(b.target)==this.el||0<$(b.target).closest(".lightbox_bg").length||0<$(b.target).closest(".suggestion_nextPrev").length||this.U(null,null))},Ak:3,Bs:function(){if(null!=Xz.prototype.ek&&0<Xz.prototype.ek.length){var b=Xz.prototype.ek.slice(this.Ne,this.Ne+this.Ak);$(".suggestions",this.el).empty().append($("#addVarietySuggestionTmpl").tmpl({suggestions:b,lessLink:0<this.Ne,moreLink:this.Ne+this.Ak<Xz.prototype.ek.length}))}},
events:{"focus .searchInput":"searchInputFocus","blur .searchInput":"searchInputBlur","keyup .searchInput":"searchInputKeyup","closed .lightbox":"cancelClick","click .lessVarietySuggestionLink":"lessSuggestionsClick","click .moreVarietySuggestionLink":"moreSuggestionsClick","click .searchResultVarietyArtist":"searchResultArtistClick","click .searchResultVarietySong":"searchResultSongClick","click .searchResultsContent .item":"autoCompleteClick","click .addVarietyPopup":"popupClick"},popupClick:function(b){if(0<
$(b.target).parents(".searchResultsBorder").length||$(b.target).hasClass("searchInput"))return!0;this.hm()},autoCompleteClick:function(b){this.tz(b.target)},tz:function(b){var c=$.tmplItem(b).data;b=c.get("musicId");c.get("songTitle")?this.U(new Io(this.h,b,c.get("songTitle")+" by "+c.get("artistSummary"),this.context),"songAutoComplete"):(c=c.get("artistName")?c.get("artistName"):c.get("composerName"),this.U(new Io(this.h,b,c,this.context),"artistAutoComplete"))},searchResultArtistClick:function(b){b=
$.tmplItem(b.target).data;this.U(new Io(this.h,b.musicId,b.artistName,this.context),"suggestedArtist");return!1},searchResultSongClick:function(b){b=$.tmplItem(b.target).data;this.U(new Io(this.h,b.musicId,b.songTitle+" by "+b.artistSummary,this.context),"suggestedSong");return!1},lessSuggestionsClick:function(){$(".lessVarietySuggestionLink").hasClass("inactiveLink")||(this.Ne-=this.Ak,this.Bs());return!1},moreSuggestionsClick:function(){$(".moreVarietySuggestionLink").hasClass("inactiveLink")||
(this.Ne+=this.Ak,this.Bs());return!1},searchInputFocus:function(b){b.target.value==this.Ct&&(b.target.value="");$(b.target).addClass("focus");b=$(".searchInput",this.el).val();null!=b&&0<b.length&&this.uA()},searchInputBlur:function(b){""==b.target.value&&(b.target.value=this.Ct);$(b.target).removeClass("focus")},hm:function(){this.lt&&$(".searchResults",this.el).fadeOut("fast",r(this,function(){this.lt=!1}))},uA:function(b){this.lt?b&&b():(b?$(".searchResults",this.el).fadeIn("fast",b):$(".searchResults",
this.el).fadeIn("fast"),this.lt=!0)},Bh:function(){$(".item",this.el).removeClass("selected");if(0<=this.Kb){$(".item",this.el).eq(this.Kb).addClass("selected");var b=".searchResultsScroller .scrollPoint.selected",c=$(b,this.el);c.prev().hasClass("heading")&&(b=".searchResultsScroller .scrollPoint:eq("+(c.index()-1)+")");dy($(".searchResultsScroller",this.el),b)}},searchInputKeyup:function(b){$(".error",this.el).fadeOut();var c=$(".searchInput",this.el).val();40==b.which?(0<=this.Kb?this.Kb++:this.Kb=
0,this.Kb>=$(".item",this.el).length&&(this.Kb=$(".item",this.el).length-1),this.Bh()):38==b.which?0<=this.Kb&&(this.Kb--,this.Bh()):27==b.which?($(".searchInput",this.el).val(""),this.hm()):13==b.which?(b=!0,0<=this.Kb&&this.Kb<$(".item",this.el).length&&$(".searchResults",this.el).is(":visible")&&(b=!1,this.tz($(".item",this.el).eq(this.Kb))),b&&$(".error",this.el).text(Uc([c])).fadeIn()):c&&0<c.length?(c=$.extend({sendquery:"no",q:c},this.PE),k.info("Calling autocomplete with: ",c),$.get("/autocomplete",
c).success(r(this,function(b){this.Kb=0;var c=Nx(b,!0,!0);0<c.length?this.uA(r(this,function(){this.Uz.refresh(c);var b=$(".searchResults .searchResultsContent",this.el);b.empty();var d=null;$.each(this.Uz.models,function(c,e){d!=e.ob()&&(d=e.ob(),b.append($("#searchPopupHeading").tmpl(e.ob())));b.append($(e.Vb()).tmpl(e))});this.ew();this.Bh()})):this.hm()}))):this.hm()},cancelClick:function(){this.U(null,null);return!1},U:function(b){z.pa(this);$(this.el).remove();this.el=null;b&&R(lw,b);null==
this.context&&vz();R(Zw)},hx:function(b){$(".searchInput",this.el).blur();$(".searchResults",this.el).hide();z.b(cj,b)},handleSearchResults:function(b){$(".searchResults",this.el).show();$(".searchResults .searchResultsContent",this.el).empty().append($("#addVarietySearchResultTmpl").tmpl({results:b}));this.ew()},ew:function(){setTimeout(r(this,function(){ay($(".scroll-pane",this.el))}),1)}});function Zz(){}Zz=Backbone.View.extend({initialize:function(){this.render();S(Ju,r(this,this.Ha))},render:function(){this.na=(new Date).getTime();var b=ey("trialWelcomePanel",$("#TrialWelcomeHeaderTmpl").tmpl(),$("#TrialWelcomeContentTmpl").tmpl());$("body").append(b);$(".lightbox").bind("closed",r(this,this.U));$(".trialWelcomePanel").show();return this},Ha:function(b){0==$(b.target).parents(".trialWelcomePanel").length&&(new Date).getTime()-this.na>Yz&&this.U()},U:function(){$z(this);$(".trialWelcomePanel").remove()}});function X(){}
X=Backbone.View.extend({rB:1E4,initialize:function(){this.message=this.options.message;this.UN=this.options.persist;this.OQ=this.options.undo;this.reload=this.options.reload;this.NO=this.options.retry;this.play=this.options.play;this.context=this.options.context;S(Ju,r(this,this.Ha));z.c(mi,r(this,this.Zi));z.c(ei,r(this,this.Zi));z.c(hi,r(this,this.Zi));z.c(vg,r(this,this.Zi));z.c(ti,r(this,this.Zi))},className:"toastContainer",render:function(){for(this.na=(new Date).getTime();0<X.Ph.length;)X.Ph.pop().close(null,!1);
$(this.el).append($("#toastTmpl").tmpl(this.message));$("body").append($(this.el));this.OQ||$(".toastItemUndoContainer",this.el).remove();this.reload||$(".toastItemReloadContainer",this.el).remove();this.NO||$(".toastItemRetryContainer",this.el).remove();this.play?$(".toastItemClose",this.el).hide():($(".toastItemPlayContainer",this.el).remove(),$(".toastItemClose",this.el).show());$(this.el).css("top",-$(this.el).height());$(this.el).animate({top:0});this.closed=!1;this.UN||setTimeout(r(this,this.close),
this.rB);X.Ph.push(this);return this},events:{"click .toastItemClose":"close","click .toastItemUndo":"undoClicked","click .toastItemReload":"reloadClicked","click .toastItemRetry":"retryClicked","click .toastItemPlay":"playClicked"},close:function(b,c){if(!this.closed){for(var d=0;d<X.Ph.length;d++)if(X.Ph[d]==this){X.Ph.splice(d,1);break}$z(this);this.closed=!0;$(this.el).animate({top:-$(this.el).height()},r(this,function(){c||this.trigger("close");this.remove()}))}},undoClicked:function(){this.trigger("undo");
this.close(null,!0);return!1},reloadClicked:function(){this.trigger("reload");this.close(null,!0);return!1},retryClicked:function(){this.trigger("retry");this.close(null,!0);return!1},playClicked:function(){this.trigger("play");this.close(null,!0);return!1},getContext:function(){return this.context},Ha:function(b){this.el&&(new Date).getTime()-this.na>Yz&&($(b.target)==this.el||0<$(b.target).closest(".lightbox_bg").length||this.play||this.close(null))},Zi:function(){this.play&&this.close(null)}});
X.Ph=[];function aA(){}
aA=Backbone.View.extend({sC:1E3,initialize:function(){z.c(dg,r(this,this.dI));z.c(eg,r(this,this.cI));$(this.el).empty().append($("#spinnerTmpl").tmpl());$("body").append(this.el);this.gn=0;this.jt=!1},className:"spinnerContainer",dI:function(b){this.gz(b)&&(this.gn++,clearTimeout(this.timeout),this.timeout=setTimeout(r(this,function(){this.PP(b)}),this.sC))},PP:function(){var b=$("#playerBar"),c=!b.is(":visible")||$("#splash").is(":visible");c?($("#nav_spinner").hide(),$("#splash_spinner").show(),$(this.el).ww({vertical:!1}),
$(this.el).css({"z-index":$("#splash_spinner").css("z-index"),top:"320px"})):($("#nav_spinner").show(),$("#splash_spinner").hide(),$(this.el).css("z-index",$("#nav_spinner").css("z-index")),$(this.el).ww());c||$(this.el).css("top",b.height()+b.offset().top-7+"px");this.jt||($(this.el).hide().css("visibility","visible").fadeIn("fast"),this.jt=!0)},gz:function(b){return!b||"string"==typeof b&&-1<b.indexOf("/static/promo")?!1:!0},cI:function(b){this.gz(b)&&(this.gn--,1>this.gn&&(this.jt=!1,clearTimeout(this.timeout),
$(this.el).fadeOut("fast"),this.gn=0))}});function bA(){}
bA=Backbone.View.extend({qC:2E3,Pc:null,initialize:function(){this.model.bind("change:blueBarMessage",r(this,this.Wx))},events:{"click .fb_close":"fbCloseClick","click .fb_no_thanks":"fbNoThanksClick","click #capping_no_thanks":"cappingNoThanksClick","click #capping_more_info":"cappingMoreInfoClick","click .account_message_close":"messageCloseClick","click .nice_account_message_close":"messageCloseClick","click .trial_message_close":"messageCloseClick","click #trial_upgrade":"trialUpgradeClick","click .account_message_learnmore":"accountMessageLearnMoreClick",
"click #renew_more_info":"renewMoreInfoClick","click #renewal_no_thanks":"renewalNoThanksClick","click #restore_subscription":"restoreSubscriptionClick","click #pbwt_no_thanks":"renewalNoThanksClick"},el:$("#pandoraRibbonContainer").get(0),Wx:function(){var b=this.model.get("blueBarMessage");this.vw();null==b?this.vy():this.ht=setTimeout(r(this,function(){3==b.C()?this.zP(b.tl):0==b.C()?this.JP(b.tl,b.ih):5==b.C()?this.GP(b.tl):4==b.C()?this.RP(b.tl):2==b.C()?this.Xs(b.cz):1==b.C()&&this.BP(b.MG,
b.CQ)}),this.qC)},JP:function(b,c){$("#pandora_bar_day_count","#renewalRibbon").text(0==b?"today":"in "+b+(1<b?" days":" day"));c?($(".pandora_bar_message").css("left","1px"),$("#pandora_bar_desc").text("Gift Subscription")):($(".pandora_bar_message").css("left","10px"),$("#pandora_bar_desc").text("subscription"));this.Gh($("#renewalRibbon"))},GP:function(b){$("#pandora_bar_day_count","#paymentBackedTrialRibbon").text(0==b?"today":"in "+b+(1<b?" days":" day"));$(".pandora_bar_message").css("left",
"10px");this.Gh($("#paymentBackedTrialRibbon"))},RP:function(b){$("#pandora_bar_day_count","#trialRibbon").text(0==b?"within 24 hours":"in "+b+(1<b?" days":" day"));$(".pandora_bar_message").css("left","10px");this.Gh($("#trialRibbon"))},trialUpgradeClick:function(){V("/subscriptionInfo",!0,!1);return!1},zP:function(b){$("#currentListeningHours").text(b);$("#cappingRibbon").is(":visible")||this.Gh($("#cappingRibbon"))},BP:function(b,c){$("#fbRibbonName").html(b);$("#fbRibbonImage").attr("src",c);
this.Gh($("#facebookRibbon"))},v3:function(b){return"/services/adClicked.jsp?ad=bluebar_"+b+"&forward="+escape("/one/gift?ref=bluebar_"+b)},Xs:function(b){if("/account/info"==window.location.pathname&&(Ix(b)||Jx(b)||Kx(b)||Lx(b)))return!1;this.Pc=this.Bx(b);if(null!=this.Pc){var c=this.Pc,d=c.message;if(Lx(b)){var d="Please confirm your account information.",e=this.model.get("currentUser").Eb();e&&(d="Still living in "+e+"? "+d)}$(".account_message",this.el).text(d);null!=c.bg&&(d=c.bg+"?cb="+(new Date).getTime(),
$("#pandoraAccountMessageOuterWrapper").css({"background-image":"url("+d+")","background-repeat":"no-repeat"}));null!=c.containerClass&&$("#pandoraRibbonContainer").addClass(c.containerClass);null!=c.href&&0<c.href.length&&(d=$(".account_message_learnmore",this.el),d.attr("href",c.href),"/"!=c.href.charAt(0)&&d.attr("target","_blank"));if(Ix(b)||Jx(b)||Kx(b)||Lx(b)){var d=$(".account_message_learnmore",this.el),h=this.Bx(b);d.click(function(){R(Sv,h)})}this.Gh($("#accountMessageRibbon"))}},Bx:function(b){var c=
window.ACCOUNT_MESSAGES;if(null!=c)for(var d=0;d<c.length;d++){var e=c[d];if(e.name==b)return e}return null},Gh:function(b){$(".ribbon",this.el).removeAttr("style");b.show();$(this.el).is(":visible")||($(".ribbonContent",this.el).css("position","fixed").show(),this.mA(!0));this.vr("display")},mA:function(b){$(this.el).show();if(0<$(".ribbonContent").innerHeight()){var c=$(".ribbonContent").innerHeight()-2;this.model.set({pageShifting:!0});c=$(".skinContainer,#topnav,#searchPopupNavPosition,#ad_frame").animate({top:(b?
"+=":"-=")+c+"px"},1E3);$.when(c).done(r(this,function(){this.model.set({pageShifting:!1});b||($("#pandoraAccountMessageOuterWrapper").removeAttr("style"),$("#pandoraRibbonContainer").removeClass(),$("#pandoraRibbonContainer").removeAttr("style"),$(".ribbonContent",this.el).removeAttr("style"))}))}},vy:function(){var b="fixed"==$(".ribbonContent",this.el).css("position");this.vw();$(".ribbonContent",this.el).css("position","relative");$(window).scrollTop(0);b&&this.mA(!1);$(this.el).slideUp(1E3,r(this,
function(){$(".ribbon",this.el).removeAttr("style");$("#pandoraRibbonContainer").show()}));this.Pc=null},vw:function(){this.ht&&(clearTimeout(this.ht),this.ht=null)},vr:function(b){var c=this.model.get("currentUser"),d=this.model.get("blueBarMessage"),e=null;null!=d&&(e=d.cz);s("blue_bar",{action:b,vendor_id:u,message_key:e,listener_state:c.u},c)},accountMessageLearnMoreClick:function(b){b.target.blur();this.vr("click_through");if(null!=this.Pc&&this.Pc.action)return this.Pc.action(),this.model.set({blueBarMessage:null}),
!1;this.model.set({blueBarMessage:null});return!0},messageCloseClick:function(b){b.target.blur();this.Pc&&this.Pc.name&&z.b(Xj,this.Pc.name);this.model.set({blueBarMessage:null});this.vr("dismiss");return!1},fbCloseClick:function(b){b.target.blur();this.model.set({blueBarMessage:null});return!1},fbNoThanksClick:function(b){b.target.blur();this.model.set({blueBarMessage:null});return!1},cappingMoreInfoClick:function(){R(fv);return!1},cappingNoThanksClick:function(){this.model.set({blueBarMessage:null});
return!1},renewMoreInfoClick:function(){R(hv);return!1},renewalNoThanksClick:function(){this.model.set({blueBarMessage:null});um(am,!0);return!1},restoreSubscriptionClick:function(){V("/account/billing",!1,!1);return!1}});function cA(){}cA=Backbone.View.extend({initialize:function(){this.model.bind("change:modalPanel",r(this,this.ia))},el:$("#footer"),ia:function(){this.model.get("modalPanel")!=xu&&"REGISTERED_PANEL"!=this.model.get("modalPanel")||$(".navFooter").hide()},events:{"click .concerts":"concertsClick","click .navFooter":"footerClick"},concertsClick:function(){k.info("concerts not implemented");return!1},footerClick:function(b){R(Rw,b);return!0}});function dA(){}
dA=Backbone.View.extend({initialize:function(){S(mw,r(this,this.Jq));S(Uu,r(this,this.vt));S(lw,r(this,this.SO));S(Xv,r(this,this.Xi));z.c(mf,r(this,this.oy));z.c(nf,r(this,this.oy));z.c(Df,r(this,this.jK));z.yh(Ef,r(this,this.lK));z.c(hf,r(this,this.Nd))},el:$("#mainContentContainer .station").last(),Fm:null,as:"",Bj:"",vt:function(b){null!=b&&(this.Fm=null,this.ka=b);$(this.el).empty();0==this.ka.indexOf("G")?eA("/content/genrestation",{musicid:this.ka,cachebuster:""+(new Date).getTime()},r(this,
function(b){$(this.el).empty().append(b);this.Rp();this.h=Cn($("#station_info").data("station"));this.Oi=this.ka;R(lx,this.h);b=Co($(".likeButton[data-like-type=genrestation]",this.el));R(Hv,b);fA(this.el,this.model.get("currentUser"));this.hw()}),function(){z.b(Mh)},!0):eA("/content/station",{stationId:this.ka,cachebuster:""+(new Date).getTime()},r(this,function(b){$(this.el).empty().append(b);this.h=Cn($("#station_info").data("station"));!0===$("#station_info").data("banned")&&$(".comment_form").hide();
this.Rp();this.Fm=this.ka;this.ka=this.h.e();this.Oi=null;this.as=$("#title",this.el).val();this.Bj=$.trim($("#station_description",this.el).html());this.NN=$("#description",this.el).val();this.$v();this.an(!1);b=Co($(".likeButton[data-like-type=station]",this.el));R(Hv,b);this.hw();R(lx,this.h);_.each($(".section",this.el),r(this,function(b){this.fA($(b))}))}),function(){z.b(Mh)},!0)},Rp:function(){$(".left_col_buttons",this.el).show();this.h&&this.h.Cb()||$(".stationDetailsEdit",this.el).show();
lp()&&$(".sample",this.el).show();$(".iTunes-badge").hide();$(".addButton",this.el).show();$(".col2",this.el).show();$(".col3",this.el).show();$(".i-menu-dropdown-1.menu_dropdown").mouseleave(function(){$(this).find(".dropdownmenu_nosample").fadeOut()})},hw:function(){this.Bb&&this.Bb.close();var b=this.model.get("currentUser"),b=null!=b&&b.s==this.h.Zg();this.Bb=new gA({el:$(".backstage",this.el).get(0),model:this.model,type:this.Oi?"music":"station",targetId:this.Oi?this.Oi:this.ka,isTargetOwner:b})},
$v:function(){1==$(".stationSeedsSection li",this.el).length?$(".stationSeedsSection li .deletable",this.el).hide():$(".stationSeedsSection li .deletable",this.el).show()},SO:function(b){var c=b.r();if("addThumbedUpSong"==b.getContext()){var d=c.wa();d&&d.musicId&&z.b(Ui,[c.e(),b.o(),d.musicId])}else"addSongSeed"!=b.getContext()&&"addArtistSeed"!=b.getContext()||z.b(Vi,[c.e(),b.o()])},oy:function(b){b[0]==this.ka&&this.vt()},render:function(){$(".backstage .header h1",this.el).text(this.h.ca());return this},
Jq:function(b){this.ka==b.e()&&(this.h=b,this.render(),this.vt())},events:{"click #playStationButton":"playStationClick","click .likeButton":"likeStationClick","click .show_more":"fetchPage","click .stationDetailsEdit":"stationEditClick","click #cancelEditButton":"cancelEditClick","click #saveEditButton":"saveEditClick","click .addButton":"handleAddClick","click .deletable":"handleDeleteClick","click .stationSectionSort":"handleSortClick","click .sample":"sampleClick","click #shareButton":"shareButtonClick",
"change #enableArtistMessagesCheckbox":"handleArtistMessagesChange","click  .btn_right .menu_dropdown":"dropDownClick","click .create_station":"playStationClick"},shareButtonClick:function(){var b=this.model.get("currentUser");null==b||b.p()?R(Dv,{onSuccessRedirect:hz()}):(R(av,{mode:"station",station:this.h}),s("link",{click:"shareButton",source:"StationView"},this.model.get("currentUser")))},sampleClick:function(b){$(b.target).blur();b=0<$(b.target).parent(".sample").size||$(b.target);if(!b.hasClass("sample-inactive"))return b.hasClass("playing")?
(z.b(Qi),b.removeClass("playing")):(z.b(Pi,{url:b.data("sampleurl"),gain:null!=b.data("samplegain")?Number(b.data("samplegain")):0}),b.addClass("playing"),b=b.data("trackname"),$(".iTunes-badge."+b).show()),!1},dropDownClick:function(b){$(b.target).blur();b=$(b.target).children(".dropdownmenu_nosample");b.css("visibility","visible");b.show()},Nd:function(b){var c=$(".sample.playing",this.el);c.removeClass("playing");var d=c.data("trackname");$(".iTunes-badge."+d).hide();b.isError&&c.addClass("sample-inactive").find("a").attr("title",
"Sample Unavailable").find("span").html("Sample Unavailable")},playStationClick:function(b){if(mz(this.model))return R(Dv,{onSuccessRedirect:hz()}),!1;var c=$(b.target).attr("data-station-id");b=$(b.target).data("music-id");le(c)?z.b(Hi,{stationCode:"fs"+c,source:"station_page"}):le(b)&&z.b(Hi,{stationCode:"mi"+b,source:"station_page"});return!1},likeStationClick:function(b){var c=this.model.get("currentUser");if(null==c||c.p())R(Dv,{onSuccessRedirect:hz()});else return(b=$(b.currentTarget).attr("data-like_id"))?
z.b(vj,b):z.b(uj,{type:this.Oi?"genrestation":"station",objectId:this.ka,context:"station_page",contextId:this.ka,contextName:this.h.ca()}),!1},jK:function(b){this.h&&b.objectId==this.ka&&($("#likeStationButton").addClass("selected"),$("#likeStationButton").attr("data-like_id",b.id),$("#likeStationButton").text(Ac),$("#likeStationButton").css("background-image","url(/img/likes/liked.png)"))},lK:function(b){b=Do(b);$("#likeStationButton").attr("data-like_id")==b.df&&($("#likeStationButton").removeClass("selected"),
$("#likeStationButton").removeAttr("data-like_id"),$("#likeStationButton").text(Bc),$("#likeStationButton").css("background-image","url(/img/likes/like.png)"))},Xi:function(b){hy(this.el,b)},stationEditClick:function(){R(kx);this.an(!0);return!1},cancelEditClick:function(){R(kx);k.info("Cancelling form");$("#title",this.el).val(this.as);$("#description",this.el).val(this.NN);this.an(!1);return!1},saveEditClick:function(){R(kx);this.as="";this.Bj="Please wait..";this.an(!1);var b=$("#title",this.el).val(),
c=$("#description",this.el).val();z.b(Ti,[this.ka,b,c]);return!1},an:function(b){this.h.Cb()||(b?($(".stationDescription").hide(),$("#stationEditForm").fadeIn()):(this.Bj&&0<this.Bj.length?($("#default_description",this.el).hide(),$("#station_description",this.el).empty().html(this.Bj),$("#station_description",this.el).show()):($("#default_description",this.el).show(),$("#station_description",this.el).hide()),$("#stationEditForm").hide(),$(".stationDescription").fadeIn()))},handleArtistMessagesChange:function(){var b=
$("#enableArtistMessagesCheckbox").is(":checked");z.b(xk,[null!=this.Fm?this.Fm:this.ka,b]);return!1},handleAddClick:function(b){new Xz({model:this.model,station:this.h,context:b.target.id,event:Yv});return!1},handleDeleteClick:function(b){var c=b.target.getAttribute("data-musicId");"seed"==b.target.getAttribute("data-type")?z.b(Nj,{stationID:this.ka,seedID:$(b.target).attr("data-seedid")}):R(dv,{isPositive:$(b.target).closest("ul").hasClass("thumb_up_list"),stationID:this.ka,musicID:[c]});$(b.target).parents("li").slideUp(200);
return!1},handleSortClick:function(b){var c=$(b.target),d=c.hasClass("sort-dir-ascending");$(".stationSectionSort",c.parents(".section")).removeClass("sort-dir-ascending").removeClass("sort-dir-descending");d?(s("link",{click:"sortStationsAscending",source:"StationView"},this.model.get("currentUser")),c.addClass("sort-dir-descending")):(s("link",{click:"sortStationsDescending",source:"StationView"},this.model.get("currentUser")),c.addClass("sort-dir-ascending"));$("."+c.attr("data-sort")).empty();
this.fetchPage(b);return!1},fA:function(b){var c=$(".sort-dir-ascending",b);0==c.length&&(c=$(".sort-dir-descending",b));0==c.length&&(c=$(".stationSectionSort",b).last(),c.addClass("date"==$(c).attr("data-key")?"sort-dir-descending":"sort-dir-ascending"));return c},fetchPage:function(b){b=$(b.target).parents(".section");var c=this.fA(b),d=$("."+c.attr("data-sort")),e=$(".show_more:visible",b);e.hide();var e=0==e.length?0:parseInt(e.data("nextstartindex"),10),h=c.hasClass("sort-dir-ascending"),c=
c.data("key"),l=r(this,function(b){d.append(b);this.$v();this.Rp()});b.hasClass("allSeeds")?eA("/content/station_all_seeds",{stationId:this.ka,startIndex:e,artistSortAsc:h,sortBy:c,"cachebuster:":""+(new Date).getTime()},l):b.hasClass("thumbedUpSongs")?eA("/content/station_track_thumbs",{stationId:this.ka,page:"true",posFeedbackStartIndex:e,posSortAsc:h,posSortBy:c,"cachebuster:":""+(new Date).getTime()},l):b.hasClass("thumbedDownSongs")&&eA("/content/station_track_thumbs",{stationId:this.ka,page:"true",
down:"true",negFeedbackStartIndex:e,negSortAsc:h,negSortBy:c,"cachebuster:":""+(new Date).getTime()},l);return!1}});function Ez(){}
Ez=Backbone.View.extend({initialize:function(){this.na=(new Date).getTime();this.track=this.options.track;var b=ly(this.model),c=this.model.get("currentStation"),d=c;d&&d.D()&&(d=this.model.get("stationList").Rc(this.track.e()));this.NF=c;b=ey("stationSelectorPopup",$("#stationSelectorHeaderTmpl").tmpl(),$("#stationSelectorContentTmpl").tmpl({albumArt:this.track.ub(),songTitle:this.track.Ca,artistSummary:this.track.W(),currentStation:d,stations:b}),$("#stationSelectorFooterTmpl").tmpl());$("body").append($(this.el).append(b));
ay($(".scroll-pane",this.el));setTimeout(r(this,function(){$(".stationSelectorPopup .stationSelectorPopupStation").first().click()}),1);V("/song/move/"+this.track.o(),!1,!0);R(fx)},events:{"closed .lightbox":"cancelButtonClicked","click .cancelButton":"cancelButtonClicked","click .okButton":"okButtonClicked","click .stationSelectorPopupStation":"stationClicked"},cancelButtonClicked:function(){this.U(null);return!1},okButtonClicked:function(){this.U(this.WO);return!1},stationClicked:function(b){$(".stationSelectorPopupStation",
this.el).removeClass("selected");$(b.target).addClass("selected");this.WO=$.tmplItem(b.target).data;return!1},U:function(b){$(this.el).remove();this.el=null;null!=b&&R(cw,new Py(b,this.track,this.NF))}});function hA(){}
hA=Backbone.View.extend({initialize:function(){this.na=(new Date).getTime();S(Ju,r(this,this.Ha));var b=this.options.title;b||(b=Lc());var c=this.options.subtitle,d=this.options.message;d||(d=Kc());var e=this.options.yesButtonText;e||(e=Nc());var h=this.options.noButtonText;h||(h=Oc());this.Ji=this.options.event;b=ey("confirmPopup",$("#confirmHeaderTmpl").tmpl({title:b}),$("#confirmBodyTmpl").tmpl({subtitle:c,message:d}),$("#confirmFooterTmpl").tmpl({yesButtonText:e,noButtonText:h}));$("body").append($(this.el).append(b))},
Ha:function(b){this.el&&(new Date).getTime()-this.na>Yz&&($(b.target)==this.el||0<$(b.target).parents(".lightbox_bg").length||this.U(null))},events:{"click .yesButton":"yesClicked","click .noButton":"noClicked","closed .lightbox":"noClicked"},yesClicked:function(){this.U(!0);return!1},noClicked:function(){this.U(!1);return!1},U:function(b){$z(this);$(this.el).remove();this.el=null;b?R(iw,this.Ji):R(jw,this.Ji)}});function Jz(){}
Jz=Backbone.View.extend({initialize:function(){this.na=(new Date).getTime();S(Ju,r(this,this.Ha));var b=this.options.title;b||(b=Lc());var c=this.options.subtitle,d=this.options.message;d||(d=Kc());var e=this.options.yesButtonText;e||(e=Nc());var h=this.options.noButtonText;h||(h=Oc());var l=this.options.reverseButtons,p=this.options.onlyShowNoButton;this.Ji=this.options.event;p?e=[{label:h,className:"closeBtn noButton"}]:(e=[{label:e,className:"yesButton"},{label:h,className:"closeBtn noButton"}],l&&
(l=e[0],e[0]=e[1],e[0].className="noButton",e[1]=l,e[1].className="yesButton closeBtn"));b=gy($("#onboarding-confirmHeaderTmpl").tmpl({title:b}),$("#onboarding-confirmBodyTmpl").tmpl({subtitle:c,message:d}),$("#onboarding-confirmFooterTmpl").tmpl({buttons:e}));$("body").append($(this.el).append(b))},Ha:function(b){this.el&&(new Date).getTime()-this.na>Yz&&($(b.target)==this.el||0<$(b.target).parents(".lightbox_bg").length||this.U(null))},events:{"click .yesButton":"yesClicked","click .noButton":"noClicked",
"closed .lightbox":"noClicked"},yesClicked:function(){this.U(!0);return!1},noClicked:function(){this.U(!1);return!1},U:function(b){$z(this);$(this.el).remove();this.el=null;b?R(iw,this.Ji):R(jw,this.Ji)}});function iA(){}
iA=Backbone.View.extend({initialize:function(){this.na=(new Date).getTime();S(Ju,r(this,this.Ha));this.h=this.options.station;var b=ey("renameStationPopup",$("#renameStationHeaderTmpl").tmpl(),$("#renameStationContentTmpl").tmpl({station:this.h}),$("#renameStationFooterTmpl").tmpl());$(this.el).append(b);$("body").append(this.el);$(".renameStationName",this.el).focus()},Ha:function(b){this.el&&(new Date).getTime()-this.na>Yz&&($(b.target)==this.el||0<$(b.target).parents(".renameStationPopup").length||this.U(null))},
events:{"click .okButton":"okClicked","click .cancelButton":"cancelClicked","closed .lightbox":"cancelClicked","keyup .renameStationName":"stationNameKey"},stationNameKey:function(b){if(100<(new Date).getTime()-this.na)if(27==b.which)this.U(null);else if(13==b.which)return this.okClicked(null)},okClicked:function(){var b=$(".renameStationName",this.el).val();this.U(Hd(b));return!1},cancelClicked:function(){this.U("");return!1},U:function(b){$z(this);$(this.el).remove();this.el=null;null!=b&&""!=b&&
z.b(ej,[this.h.e(),b]);vz()}});function jA(){}
jA=Backbone.View.extend({events:{"closed .lightbox":"cancelClickedHandler","click .okButton":"okClicked","click .cancelButton":"cancelClickedHandler","click .skipButton":"cancelClickedHandler","click #facebookLoginButton":"facebookLoginButtonClick","click #twitterLoginButton":"twitterLoginButtonClick","click #shareStation":"shareStationClick","click #shareSong":"shareSongClick","click #shareViaProfile":"shareViaProfileClickHandler","click #shareViaEmail":"shareViaEmailClick","focus #shareStationTo":"shareStationToFocus","change #shareSocialNetworkSelectFacebook":"shareFacebookChange",
"change #shareSocialNetworkSelectTwitter":"shareTwitterChange","click .startLoginFacebook":"startFacebookLogin","click .startLoginTwitter":"startTwitterLogin","focus #shareStationMessage":"shareStationMessageFieldFocus","keypress #shareStationMessage":"shareStationMessageFieldKeyPress","keyup #shareNameInput":"shareStationNameChange","blur #shareNameInput":"validateStationNameChangeHandler","change #shareStationMessage":"storeUserInputMessage"},initialize:function(){z.c(Hg,r(this,this.Hq));z.c(rh,
r(this,this.DI));this.model.bind("change:twitterAuthenticated",r(this,this.Tt));this.model.bind("change:facebookAuthenticated",r(this,this.Tt));this.Vz="/";S(bv,r(this,function(b){this.nd="song"==b.mode;this.Vz=b.returnHash;this.mode=b.mode;this.track=b.track;this.Nc=b.album;this.h=b.station;this.Wd=b.relatedArtists?b.relatedArtists:this.model.get("relatedArtists");this.h&&!0==this.h.D()||(this.track instanceof Eo?(this.mode="station",this.nd=!1):this.track instanceof Go&&(this.mode="song",this.nd=
!0));this.render()}));$("body").append(this.el)},render:function(){this.na=(new Date).getTime();S(Ju,r(this,this.Ha));var b=this.model.get("currentUser"),c=this.track?this.track.Ca:"",d=this.track?this.track.W():"",e=this.track?this.track.eb:"",h=this.h&&(this.h.Cb()||null==this.Wd&&!this.h.wa())?_.escape(this.h.Pl()).replace(/\n/g,"<br>"):_.escape(this.Wd);this.h&&this.h.Ia()&&this.h.Z()&&(h=this.zi("your"));var l="";this.h&&this.h.Ia()&&this.model.get("facebookAuthenticated")&&(l=po(this.model.get("currentUser")),
this.Cn(l));var p="";if(this.h&&this.h.Ia()){var p=Id(this.h.ca()),q=Id(this.h._originalStationShareName),p=this.zi(p);this.Cn(q)}this.track instanceof Go&&(c="Message from "+d,p=this.Iw());b=ey("shareStationPopup",$("#shareStationHeaderTmpl").tmpl(),$("#shareStationContentTmpl").tmpl({profileImage:Gd(b,!0),stationArt:this.Si(),albumArt:this.ub(),station:this.h,description:h,sharedDescription:p,defaultShareName:"Enter Your Name",fbName:l,isCustomContentTrack:this.track?this.track instanceof In:!1,
isArtistMessageTrack:this.track?this.track instanceof Go:!1,trackSongTitle:c,trackArtistSummary:d,trackAlbumTitle:e,album:this.Nc}),$("#shareStationFooterTmpl").tmpl());$(this.el).empty().append(b);this.Tt();$("#shareStationName",this.el).focus();this.Ss();this.lA();this.h&&($("#shareNameInput").val(Id(yn(this.h))),this.h.Ia()&&this.model.get("facebookAuthenticated")&&this.h.Z()&&this.Cn(l));$(this.el).show()},Tt:function(){var b=this.model.get("currentUser");null!=b&&($(".profileImage",$(this.el)).attr("src",
Gd(b,!0)),this.model.get("facebookAuthenticated")?($(".facebook_logged_in",$(this.el)).show(),$(".facebook_not_logged_in",$(this.el)).hide(),$("#shareSocialNetworkSelectFacebook",$(this.el)).prop("checked",!0)):($(".facebook_logged_in",$(this.el)).hide(),$(".facebook_not_logged_in",$(this.el)).show(),$("#shareSocialNetworkSelectFacebook",$(this.el)).prop("checked",!1)),this.model.get("twitterAuthenticated")&&!me(b.$d)?($(".twitter_logged_in",$(this.el)).show(),$(".twitter_not_logged_in",$(this.el)).hide(),
$("#shareSocialNetworkSelectTwitter",$(this.el)).prop("checked",!0)):($(".twitter_logged_in",$(this.el)).hide(),$(".twitter_not_logged_in",$(this.el)).show(),$("#shareSocialNetworkSelectTwitter",$(this.el)).prop("checked",!1)))},ub:function(){return null!=this.track?this.track.ub():null!=this.Nc?this.Nc.albumArt:null!=this.h?this.Si():null},Si:function(){var b=null;if(this.h){if(this.h.Ia())return this.h._stationArt;b=this.h._stationArt;b||(b=(b=this.h.wa())&&null!=b.song?b.song.artUrl:b&&null!=b.artist?
b.artist.artUrl:mn()+"img/no_album_art.png")}return b},Ss:function(){"song"==this.mode?($(".shareStationOrSong",this.el).hide(),this.iA()):"album"==this.mode?($(".shareStationOrSong",this.el).hide(),this.oP()):"station"==this.mode?($(".shareStationOrSong",this.el).hide(),this.jA()):($(".shareStationOrSong",this.el).show(),this.nd?this.iA():this.jA());$(".shareInfoData div").truncate({width:275});$("#shareSocialNetworkSelectFacebook:visible").prop("checked",Im());$("#shareSocialNetworkSelectTwitter:visible").prop("checked",
Hm())},W:function(){return this.track?me(this.track.xo)?this.track.W():this.track.xo:this.Nc?me(this.Nc.composerName)?this.Nc.artistSummary:this.Nc.composerName:""},iA:function(){this.track instanceof Jn?(this.md="I'm listening to "+this.h.ca()+" #LIVE on #pandora. Join me now!",this.Le="I'm listening to "+(this.track.Hc?this.track.Hc:this.h.ca())+" #LIVE on #pandora. Join me now!"):this.track instanceof Go?(this.md="Check out this audio message from "+this.W()+" on Pandora",this.Le="Check out this audio message from "+
(this.track.Hc?this.track.Hc:this.W())+" on @pandoramusic. #Pandora"):(this.md="I'm listening to \""+this.track.Ca+'" by '+this.W()+" on Pandora",this.Le="I'm listening to \""+this.track.Ca+'" by '+(this.track.Hc?this.track.Hc:this.W())+" on @pandoramusic. #Pandora");this.Lb?$("#shareStationMessage",this.el).val(this.Lb):this.track instanceof In?$("#shareStationMessage",this.el).val('Write a message about "'+this.track.Ca+'" from '+this.W()+" to share with your friends..."):this.track instanceof Jn?
$("#shareStationMessage",this.el).val(this.md):this.track instanceof Go?$("#shareStationMessage",this.el).val("Write a message about this audio message by "+this.W()+" to share with your friends..."):$("#shareStationMessage",this.el).val('Write a message about "'+this.track.Ca+'" by '+this.W()+" to share with your friends...");$("#shareStationInfo",this.el).hide();$("#shareAlbumInfo",this.el).hide();$("#shareTrackInfo",this.el).show();$("#shareHeaderStation",this.el).hide();$("#shareHeaderAlbum",
this.el).hide();this.track instanceof Go?($("#shareHeaderArtistMessage",this.el).show(),$("#shareHeaderSong",this.el).hide()):($("#shareHeaderArtistMessage",this.el).hide(),$("#shareHeaderSong",this.el).show())},oP:function(){this.md="I'm listening to \""+this.Nc.albumTitle+'" by '+this.W()+" on Pandora";this.Lb?$("#shareStationMessage",this.el).val(this.Lb):$("#shareStationMessage",this.el).val('Write a message about "'+this.Nc.albumTitle+'" by '+this.W()+" to share with your friends...");$("#shareStationInfo",
this.el).hide();$("#shareAlbumInfo",this.el).show();$("#shareTrackInfo",this.el).hide();$("#shareHeaderStation",this.el).hide();$("#shareHeaderAlbum",this.el).show();$("#shareHeaderSong",this.el).hide();$("#shareHeaderArtistMessage",this.el).hide()},zg:function(b,c,d,e,h){d=d?"@pandoramusic. #Pandora":"Pandora";c=c?"#LIVE ":"";var l=e?'Check out "':"I'm listening to \"";e&&(b=b.replace("Thumbprint Radio","#ThumbprintRadio"));return l+b+'" '+c+"on "+d+h},Lz:function(){var b=yn(this.h),c=this.h._stationNameWithTwitterHandle;
this.track instanceof Jn?(this.md=this.zg(this.W(),!0,!0,!1,". Join me now! "+this.track.Jx()),this.Le=this.zg(this.track.Hc?this.track.Hc:this.W(),!0,!0,!1,"")):this.h.Ia()?(this.md=this.zg(b,!1,!1,!0,""),this.Le=this.zg(b,!1,!0,!0,"")):(this.md=this.zg(b,!1,!1,!1,""),this.Le=this.zg(c?c:b,!1,!0,!1,""))},jA:function(){this.Lz();this.Lb?$("#shareStationMessage",this.el).val(this.Lb):this.track instanceof Jn?$("#shareStationMessage",this.el).val(this.md):$("#shareStationMessage",this.el).val('Write a message about "'+
this.h.ca()+'" to share with your friends...');$("#shareStationInfo",this.el).show();$("#shareAlbumInfo",this.el).hide();$("#shareTrackInfo",this.el).hide();$("#shareHeaderStation",this.el).show();$("#shareHeaderAlbum",this.el).hide();$("#shareHeaderSong",this.el).hide();$("#shareHeaderArtistMessage",this.el).hide()},Ha:function(b){this.el&&(new Date).getTime()-this.na>Yz&&($(b.target)==this.el||0<$(b.target).parents(".shareStationPopup").length||0<$(b.target).parents(".shareVehicleAuthPopup").length||
0<$(b.target).parents(".toastContainer").length||this.tw())},validateStationNameChangeHandler:function(){return this.eB.apply(this,arguments)},shareFacebookChange:function(b){b=$(b.target).is(":checked");um(fm,b)},shareTwitterChange:function(b){b=$(b.target).is(":checked");um(em,b)},startFacebookLogin:function(){z.b(pj);return!1},startTwitterLogin:function(){R(vv,null);return!1},shareStationToFocus:function(){$("#shareStationTo").data("hasdefaulttext")&&($("#shareStationTo").text(""),$("#shareStationTo").data("hasDefaultText",
!1))},shareViaProfileClickHandler:function(b){return this.lA.apply(this,arguments)},lA:function(){this.Ig=!1;$("#shareViaEmail",this.el).show();$("#shareViaProfile",this.el).hide();$("#shareToEmailForm",this.el).hide();$("#shareSocialNetworkSelect",this.el).show();$(".shareVehiclePandora",this.el).show();$(".shareVehicleEmail",this.el).hide();return!1},shareViaEmailClick:function(){this.Ig=!0;$("#shareViaEmail",this.el).hide();$("#shareViaProfile",this.el).show();$("#shareToEmailForm",this.el).show();
$("#shareSocialNetworkSelect",this.el).hide();$(".shareVehiclePandora",this.el).hide();$(".shareVehicleEmail",this.el).show();return!1},shareStationClick:function(){this.nd=!1;this.Ss()},shareSongClick:function(){this.nd=!0;this.Ss()},shareStationMessageFieldFocus:function(){this.Lb?$("#shareStationMessage",this.el).val(this.Lb):this.track instanceof Go?(this.lr()?$("#shareStationMessage",this.el).val(this.Le):$("#shareStationMessage",this.el).val(this.md),this.b4()):$("#shareStationMessage",this.el).val("")},
eB:function(){var b=$("#shareNameInput").val();if(this.vL(b))return $("#required-reminder").removeClass("invalidField"),$("label[for='shareNameInput']").removeClass("invalidField"),this.h.Ia()&&this.Lz(),!0;$("#required-reminder").addClass("invalidField");$("label[for='shareNameInput']").addClass("invalidField");return!1},vL:function(b){return null!=b&&0<$.trim(b).length},JF:function(b){return this.h.Ia()?b+"'s Thumbprint Radio":this.h.ca()},Cn:function(b){var c=this.JF(b);$(".stationShareName").text(c);
$(".stationShareDescription").text(this.zi(b));this.h._stationShareName=c},shareStationNameChange:function(){var b=$("#shareNameInput").val();this.Cn(b)},zi:function(b){if(this.h.Ia()){var c=this.h.rq();return"your"!=b?"Music inspired by "+(b+"'s")+" "+c+" thumbs from across all their stations.":"Music inspired by your "+c+" thumbs from across all your stations."}return this.h.Pl()},Iw:function(){var b=this.h?yn(this.h):null;return"Hear an audio message from "+this.W()+" and tune into "+(b?b:this.W()+
" Radio")+" on Pandora"},shareStationMessageFieldKeyPress:function(){if(!$("#shareStationMessage").val()&&this.lr()){var b=" #Pandora";("song"==this.mode||"album"!=this.mode&&"station"!=this.mode&&this.nd)&&this.track.Hc&&(b=" "+this.track.Hc+b);$("#shareStationMessage").val(b);$("#shareStationMessage")[0].setSelectionRange(0,0)}},cancelClickedHandler:function(b){return this.tw.apply(this,arguments)},tw:function(){this.U();this.Lb=null;return!1},okClicked:function(){if(this.h&&this.h.Ia()&&this.h.Z()&&
!this.eB($("#shareNameInput").val()))return $("#shareNameInput").focus(),!1;!this.Wd&&this.model.get("relatedArtists")&&(this.Wd=this.model.get("relatedArtists"));this.cb=this.ZE();this.Cd=[];if(null!=this.cb)this.kt=!1,this.ip({doFacebook:this.cb.doFacebook&&this.model.get("facebookAuthenticated"),doTwitter:this.cb.doTwitter&&this.model.get("twitterAuthenticated")});else return!1;this.Lb=null;return!1},storeUserInputMessage:function(){this.Lb=Hd(String($("#shareStationMessage",this.el).val()));0>=
this.Lb.length?$("#shareStationMessage",this.el).removeClass("edited"):$("#shareStationMessage",this.el).addClass("edited")},ZE:function(){var b=null==this.Lb?"":Hd(String(this.Lb)),c=Hd(String(this.md)),d=this.Le?Hd(String(this.Le)):c,e=this.h?yn(this.h):null,h=this.model.get("currentUser"),l=this.mL(),p=this.lr(),q=null;if(this.Ig){var q=String($("#shareStationTo",this.el).val()),t;a:{var y=!1;t=q.split(",");for(var E=0;E<t.length;E++){var I=jQuery.trim(t[E]);if(0<I.length){var y=I,I=y.indexOf("@"),
N=y.length,U=y.indexOf(".");if(-1!=y.indexOf("@")&&0!=I&&I!=N-1&&-1!=U&&0!=U&&"."!=y.substr(N-1,N)&&-1==y.indexOf("@",I+1)&&"."!=y.substring(I-1,I)&&"."!=y.substring(I+1,I+2)&&-1!=y.indexOf(".",I+2)&&-1==y.indexOf(" "))y=!0;else{t=!1;break a}}}t=y}if(!t)return(new X({message:Hb([Ib()])})).render(),null;t=0==b.length?c:b;t=t.toLowerCase();if(!(0<=t.indexOf("http:")||0<=t.indexOf("https:")||0<=t.indexOf("www.")||t.replace(/<[^>]*?>/gi,"").length!=t.length||-1<t.search("([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+@(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?))(\\:\\d+)?")?
0:0<t.length))return(new X({message:Hb([Jb()])})).render(),null}var pa,Ia,fb,gb,ua,y=this.track?this.track.Ca:null,I=this.track?this.track.W():null,N=this.track?this.track.eb:null,U=null;ua="";var ta=this.track?this.track.bi:null;l?ua+="&site=facebook&shareImp=true":p&&(ua+="&site=twitter&shareImp=true");var T=h.PK;le(T)&&"/"==T.charAt(T.length-1)&&(T=T.substring(0,T.length-1));"song"==this.mode?(this.track instanceof Go?(E=t=gb=this.track.TC,y="Message from "+this.W(),Ia="Listen at Pandora",pa=this.Iw(),
U=this.track.he):(t=T+"?ext_lsfmi=mf"+this.track.o()+"%7C%7C"+h.s+ua+"&seed=song",E=T+"/"+this.track.bi+"?referrer="+h.Y+ua+"&seed=song"),ua=this.track.ub()):"station"==this.mode?(t=T+"/land/station/"+this.h.Jd()+"?referrer="+h.Y+ua+"&seed=station",E=T+"/land/station/"+this.h.Jd()+"?referrer="+h.Y+ua+"&seed=station",ua=this.Si(),pa=this.h&&(this.h.Cb()||null==this.Wd&&!this.h.wa())?this.zi(Id(yn(this.h))):e+" on Pandora will play music by "+this.Wd):this.nd?(E=(this.track.Qk?this.track.Qk:"/station/play/"+
this.track.bi).replace(/&?site=[^&]+/,ua)+"&referrer="+h.Y+"&seed=song&station="+this.h.Jd(),this.track.ro?t=T+"?ext_lsfmi=mf"+this.track.o()+"%7C"+this.h.e()+"%7C"+h.s+ua+"&seed=song":(ta=(this.track.Qk?this.track.Qk:"/station/play/"+this.track.bi).replace(/&?site=[^&]+/,ua).replace(/^http:\/\/[^\/]*/,""),t=E),fb=T+"/land/station/"+this.h.Jd()+"?referrer="+h.Y+ua+"&seed=song",ua=this.track.ub()):(t=T+"/land/station/"+this.h.Jd()+"?referrer="+h.Y+ua+"&seed=station&shareName="+Id(yn(this.h)),E=T+"/land/station/"+
this.h.Jd()+"?referrer="+h.Y+ua+"&seed=station&shareName="+Id(yn(this.h)),ua=this.Si(),this.h&&this.h.Cb()&&(ta=this.h.e()+"/"+this.track.o()+"/"+this.track.bi),pa=this.h&&(this.h.Cb()||null==this.Wd&&!this.h.wa())?this.zi(Id(yn(this.h))):e+" on Pandora will play music by "+this.Wd);this.h&&this.h.wa()?(T=this.h.wa(),T="string"==typeof T?T:T.musicId):T=null;return{doFacebook:l,doProfile:!this.Ig,doTwitter:p,doEmail:this.Ig,isSongShare:this.nd,emails:q,userMessage:b,defaultMessage:c,defaultTwitterMessage:d,
facebookDescription:pa,facebookCaption:Ia?Ia:null,stationName:e,isCustomContentTrack:this.track?this.track instanceof In:!1,relatedArtistNames:this.Wd,directUrl:t,landingUrl:E,shortenedUrl:gb,stationLandingUrl:fb,artUrl:ua,fbShareArt:this.h?this.h._fbShareArt:this.Si(),webname:h.Y,stationToken:this.h?this.h.Jd():null,stationId:this.h?this.h.e():null,stationInitialSeed:T,musicId:this.track?this.track.o():null,songToken:this.track?this.track.Cv:null,songDetailToken:ta,songName:y,artistName:I,albumName:N,
artistMessageArtistUid:U}},mL:function(){return!this.Ig&&0<$("#shareSocialNetworkSelectFacebook:checked",this.el).length},lr:function(){return!this.Ig&&0<$("#shareSocialNetworkSelectTwitter:checked",this.el).length},twitterLoginButtonClick:function(){this.ip({doProfile:!1,doFacebook:!1,doTwitter:!0,doEmail:!1})},facebookLoginButtonClick:function(){this.ip({doProfile:!1,doFacebook:!0,doTwitter:!1,doEmail:!1})},ip:function(b){var c={},d;for(d in this.cb)c[d]=this.cb[d];if(null!=b)for(d in b)c[d]=b[d];
this.h&&this.h.Ia()&&(c.shareName=Id(yn(this.h)));c.doEmail||c.doProfile||c.doFacebook||c.doTwitter?z.b(this.nd?oj:nj,c):this.Hq({})},Hq:function(b){this.U();clearTimeout(this.EQ);b.profile&&(this.cb.doProfile=!1,this.Cd.push('your <a href="/profile">Pandora Profile</a>'));b.facebook&&(this.cb.doFacebook=!1,this.Cd.push("Facebook"));b.twitter&&(this.model.set({twitterAuthenticated:!0}),this.cb.doTwitter=!1,this.Cd.push("Twitter"));b.email?this.kt||(new X({message:xc([this.cb.isSongShare?this.cb.songName:
this.cb.stationName])})).render():this.EQ=setTimeout(r(this,function(){if(!this.kt&&0<this.Cd.length){var b;2>=this.Cd.length?b=this.Cd.join(" and "):(b=this.Cd.shift()+", ",b+=this.Cd.join(" and "));(new X({message:yc([b])})).render();this.Cd=[]}}),1500);var c=!b.email&&this.cb&&this.cb.doFacebook&&!this.model.get("facebookAuthenticated"),d=!b.email&&this.cb&&this.cb.doTwitter&&!this.model.get("twitterAuthenticated");if(c||d)c=ey("shareVehicleAuthPopup",$("#shareVehicleAuthHeaderTmpl").tmpl(),$("#shareVehicleAuthContentTmpl").tmpl({showTwitter:d,
showFacebook:c,showFacebookAuthenticated:this.cb.doFacebook&&this.model.get("facebookAuthenticated"),showTwitterAuthenticated:this.cb.doTwitter&&this.model.get("twitterAuthenticated"),facebookConnectName:po(this.model.get("currentUser"))}),$("#shareVehicleAuthFooterTmpl").tmpl()),$(this.el).empty().append(c).show();s("share",{share_object:"song"==this.mode?"song":"station"==this.mode?"station":this.nd?"song":"station",source:"unknown",pandora:b.profile?"true":"false",twitter:b.twitter?"true":"false",
twitter_handle:b.twitterHandle?b.twitterHandle:"",facebook:b.facebook?"true":"false",email:b.email?"true":"false",object_id:this.h.e()},this.model.get("currentUser"));this.track instanceof Go&&s("aam_listener_share_complete",{vendor_id:u,station_id:this.h.e(),artist_uid:this.track.he,message_id:this.track.Qb,pandora:b.profile?"true":"false",twitter:b.twitter?"true":"false",facebook:b.facebook?"true":"false",email:b.email?"true":"false"},this.model.get("currentUser"))},U:function(){R(nx);$z(this,Ju);
$(this.el).empty();V(this.Vz,!0,!0)},DI:function(b){this.kt=!0;(new X({message:b})).render();this.Hq({})}});function Bz(){}
Bz=Backbone.View.extend({ii:"wwwpandoracom-20",initialize:function(){this.aF=this.options.buyButton;this.xg=this.options.buyMenu;this.Lw=this.options.cssBeforeOpen;this.cF=new gz(this.aF,null,this.xg);this.cF.Am=r(this,function(b){this.xg.empty().append($("#buyMenuTmpl").tmpl({iTunesUrl:this.gj&&0<jQuery.trim(this.gj).length?this.gj:null,amazonUrl:this.Xk&&0<jQuery.trim(this.Xk).length?this.Xk:null,amazonDigitalAsin:this.ji&&0<jQuery.trim(this.ji).length?this.ji:null}));this.Lw&&this.xg.css(this.Lw(b));$(".buyOnITunes",
this.xg).click(r(this,this.fF));$(".buyOnAmazon",this.xg).click(r(this,this.dF));$(".buyOnAmazonMp3",this.xg).click(r(this,this.eF))})},Fh:function(b,c,d){this.gj=b;this.Xk=c;this.ji=d;"US"!=kp()&&(this.ji=this.gj=null)},Ms:function(b,c){this.KE=b;this.JE=c},YO:function(b){this.yE=b},gA:function(b,c,d){this.IQ=b;this.GQ=c;this.hh=d},kP:function(b){this.Ms(b.Ye,b.W());this.gA(b.o(),b.Ca,b.hh());this.Fh(b.Go,b.so,b.qo)},fF:function(){var b=this.gj+"&ct=Web";this.ed("itunes",b);R(Iv);window.open(b,"_blank");
return!1},dF:function(){var b=this.Xk+"&tag="+this.ii;this.ed("amazonCD",b);R(Iv);window.open(b,Ae()?"pandoraAmazon":"_blank");return!1},eF:function(){var b="http://www.amazon.com/dp/"+this.ji+"/?&tag="+this.ii;this.ed("amazonMp3",b);R(Iv);window.open(b,Ae()?"pandoraAmazon":"_blank");return!1},ed:function(b,c){s("buy",{store:b,source_url:window.location.href,destination_url:c,track_uid:this.IQ,featured_track:this.hh,track_name:this.GQ,album_uid:this.yE,artist_uid:this.KE,artist_name:this.JE,listener_type:this.model.get("currentUser").u,
platform:"web"},this.model.get("currentUser"));Ap(null)}});function kA(){}
kA=Backbone.View.extend({el:$(".stationContent #promobox"),initialize:function(){this.Iz=null;this.Ai="#content_a";this.tr=(new Date).getTime();this.model.bind("change:currentUser",r(this,this.render));setInterval(r(this,this.scrollPromoBox),15E3);$('a[rel="tooltip"]').each(function(){new Uz($(this),$(this).attr("title"))})},Jz:"/static/promo/",render:function(){var b=this.model.get("currentUser");null!=b&&(b=this.Jz+"manifest."+(null!=b&&b.J()?"free":"subscriber")+".json",this.Iz!=b&&(this.Iz=b,
this.jd=[],this.pb=0,this.Nm={},this.ij=!0,eA(b,{cachebuster:""+(new Date).getTime()},r(this,function(b){this.jd=_.reject(b,function(b){return b.country&&b.country!=kp()});this.pb=Math.floor(Math.random()*this.jd.length);this.Tm();this.tO()}))))},tO:function(){for(var b="<ul>",c=0;c<this.jd.length;c++)b+='<li class="dot">&nbsp;</li>';b+="</ul>";$(".dots",this.el).empty().append(b)},Tm:function(b){this.jd&&(null==this.Nm[this.pb]?this.EL(b):this.Vw(b))},Vw:function(){var b=this.Nm[this.pb].htmlElem,
c=this.Nm[this.pb].adType,d=$("#content_a"==this.Ai?"#content_b":"#content_a",this.el);d.empty().append(b);Tp({action:"promo_display",promo_type:c,source:"PromoBoxView"},this.model.get("currentUser"));try{$("a",d)[0].setAttribute("adType",c)}catch(e){k.error("displayPromoItem error inserting adType into anchor element: "+e)}$(this.Ai,this.el).fadeOut();$(".dot",this.el).removeClass("selected");$(".dot",this.el).eq(this.pb).addClass("selected");$("#content_a"==this.Ai?"#content_b":"#content_a",this.el).fadeIn(400,
r(this,function(){this.Ai="#content_a"==this.Ai?"#content_b":"#content_a";this.ij=!1}))},EL:function(b){this.ij=!0;eA(this.Jz+this.jd[this.pb].url,{cachebuster:""+(new Date).getTime()},r(this,function(c){this.Nm[this.pb]={htmlElem:c,adType:this.jd[this.pb].type};this.Vw(b)}),function(b,d){(new X({message:"Error loading content textStatus="+b+" error="+d})).render();this.ij=!1})},events:{"click #scrollLeft":"scrollLeftClick","click #scrollRight":"scrollRightClick","click #content_a":"handlePromoBoxClick",
"click #content_b":"handlePromoBoxClick","click .dot":"dotClick"},handlePromoBoxClick:function(b){try{var c="undefined";try{var d=$(b.target).context.parentNode;d.getAttribute("adType")&&(c=d.getAttribute("adType"))}catch(e){k.error("Error collecting info from promo box anchor element"+e)}Tp({action:"box_click",promo_type:c,source:"PromoBoxView"},this.model.get("currentUser"))}catch(h){k.error("Error collecting info from promo box"+h)}},dotClick:function(b){Tp({action:"dot_click",source:"PromoBoxView"},
this.model.get("currentUser"));$(b.target).hasClass("selected")||(this.pb=$(b.target).index(),this.Tm("left"),R(Qw));return!1},mouseOverPromobox:function(){$("#scrollLeft",this.el).fadeIn();$("#scrollRight",this.el).fadeIn()},mouseOutPromobox:function(){$("#scrollLeft",this.el).fadeOut();$("#scrollRight",this.el).fadeOut()},scrollLeftClick:function(){if(this.jd){this.tr=(new Date).getTime();if(this.ij)return;this.pb--;0>this.pb&&(this.pb=this.jd.length-1);this.Tm("left")}return!1},scrollRightClick:function(){if(this.jd){this.tr=
(new Date).getTime();if(this.ij)return;this.pb++;this.pb>=this.jd.length&&(this.pb=0);this.Tm("right")}return!1},scrollPromoBox:function(){12E4<(new Date).getTime()-this.tr&&(Tp({action:"auto_scroll",source:"PromoBoxView"},this.model.get("currentUser")),this.scrollRightClick())}});function lA(){}
lA=Backbone.View.extend({initialize:function(){z.c(Ee,r(this,function(){this.yl()}));S(Iw,r(this,this.yl));S(Hw,r(this,this.lc));this.eu="#adLayout";this.Fc="#mainContentContainer";this.Te="#footer";this.ra="#ad_container";this.rd="#advertisement";this.Nb="#companion_frame";this.um=!1;this.L3=null;this.jo="/radioAdEmbedGPT.html";this.io="/radioAdEmbedAsyncGPT.html"},render:function(b,c){this.zl=!1;$(this.ra).show();$("body").hasClass("width-p1-noAds")&&$("body").removeClass("width-p1-noAds");$("body").hasClass("adSupported-layout")||
(R(nw),$("body").addClass("adSupported-layout"),R(ow));var d=c?this.Nb:this.rd;if(null!=b){var e="ad"+(new Date).getTime();b+=(-1==b.indexOf("?")?"?":"&")+"cb="+je();var h='<IFRAME id="'+e+'" src="'+b+'" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" allowtransparency="true" width="100%" height="100%"></IFRAME>',l=null;c||($(this.ra).hasClass("masthead_ad")&&(this.um=!0,l=$(this.ra).height(),$(this.ra).height(l)),l=$(this.ra).fadeTo("slow",0.01));$.when(l).done(r(this,
function(){c||(Cy=null);$(this.Nb).html("");$(d).removeClass("inactive").removeClass("invisible").addClass("active").addClass("visible");var b=(new Date).getTime();$(d).html(h);var l="#"+e,t=this;$(l).bind("load",this,function(d){var e=3;(function N(){var h=d.target&&d.target.contentWindow&&d.target.contentWindow.adType,pa=d.target.contentWindow&&d.target.contentWindow.requestUrl,Ia=d.target.contentWindow&&d.target.contentWindow.creativeId,fb=d.target.contentWindow&&d.target.contentWindow.lineItemId,
gb=se();if(null==h){if(0<e){k.debug("Ad iFrame rendered: adType is not ready. Retries: "+e);e--;setTimeout(N,500);return}k.debug("Ad iFrame rendered: adType was not ready. No retries left!")}k.debug("Ad iFrame: Checking adType: ",h);var ua=null;!c&&t.um&&"masthead"!=h&&"masthead_with_companion"!=h&&(t.um=!1,ua=$(t.ra).animate({height:"0"},1E3));$.when(ua).done(r(this,function(){var c=(new Date).getTime()-b,e=t.model?t.model.get("currentUser"):null;e&&e.HB&&s("gpt_render_duration",{duration:c,ua:navigator.userAgent,
browser:gb,site_version:window._pandoraVersion,flash_ver:te(),is_gpt:"true"},e);d.data.YL(h,l,pa,Ia,fb,gb)}))})()})}));z.b(Jk)}},lc:function(b,c){if(this.model.get("modalPanel")!=vu)this.jb();else if(b&&0==b.indexOf("masthead"))if("masthead"==b?($(this.Nb).removeClass().addClass("inactive"),this.IO(b)):($(this.Fc).removeClass("wide"),$(this.Te).removeClass("wide")),"masthead_companion"==b)$(this.Nb).addClass("active"),this.$p(b,c);else{if("masthead_with_companion"==b){var d=bp();null!=d&&2==d.split(":").length?
this.render(this.Xc()+"?displayAd="+d,!0):(C.cP(),this.render(this.Xc(),!0))}R(nw);$(this.ra).removeClass("inactive").addClass("active");this.$p(b,c);R(ow)}else{$(this.Nb).removeClass("active").removeClass("visible").addClass("inactive").addClass("invisible");var e=950<$(this.Fc).width();e&&R(nw);var d=e?$(this.Fc).css("width","970").removeClass("wide").animate({width:"665"},1E3,null):"",h=e?$(this.Te).css("width","970").removeClass("wide").animate({width:"665"},1E3,null):"";$.when(d,h).done(r(this,
function(){$(this.Fc).removeAttr("style").css("display","block");$(this.Te).removeAttr("style").css("display","block");$("body").hasClass("adSupported-layout")?e&&R(ow):$("body").hasClass("width-p1-noAds")?($("body").removeClass("width-p1-noAds"),R(ow)):e&&R(ow);this.$p(b,c)}))}},$p:function(b,c){if(!this.zl)if("masthead"==b||"masthead_with_companion"==b){var d=null;this.um||($(this.ra).height(0),d=$(this.ra).animate({height:"250"},1E3));$.when(d).done(r(this,function(){$.when($(this.ra).fadeTo("slow",
1)).done(r(this,function(){$(this.ra).removeClass("inactive").removeClass("invisible").addClass("active").addClass("visible").removeAttr("style");z.b(Kk,c)}))}))}else"masthead_companion"==b?$.when($(this.Nb).fadeTo("slow",1)).done(r(this,function(){$(this.Nb).removeClass("inactive").removeClass("invisible").addClass("active").addClass("visible").removeAttr("style");z.b(Kk,c)})):$.when($(this.ra).fadeTo("slow",1)).done(r(this,function(){$(this.ra).removeClass("inactive").removeClass("invisible").addClass("active").addClass("visible").removeAttr("style");
z.b(Kk,c)}))},IO:function(b){if("masthead"==b){if(970!=$(this.Fc).width()){R(nw);b=$(this.Fc).css("width","665").removeClass("wide").animate({width:"970"},1E3,null);var c=$(this.Te).css("width","665").removeClass("wide").animate({width:"970"},1E3,null);$.when(b,c).done(r(this,function(){$(this.Fc).addClass("wide").removeAttr("style").css("display","block");$(this.Te).addClass("wide").removeAttr("style").css("display","block");R(ow)}))}}else 970==$(this.Fc).width()&&(R(nw),b=$(this.Fc).css("width",
"970").removeClass("wide").animate({width:"665"},1E3,null),c=$(this.Te).css("width","970").removeClass("wide").animate({width:"665"},1E3,null),$.when(b,c).done(r(this,function(){$(this.Fc).addClass("wide").removeAttr("style").css("display","block");$(this.Te).addClass("wide").removeAttr("style").css("display","block");R(ow)})))},yl:function(){var b=this.model.get("currentUser");R(nw);b&&!b.J()?($(this.ra).removeClass().addClass("invisible").addClass("inactive"),$(this.Nb).removeClass().addClass("invisible").addClass("inactive"),
$("body").hasClass("adSupported-layout")&&$("body").removeClass("adSupported-layout"),$("body").addClass("width-p1-noAds")):($(this.ra).height("0"),$("body").hasClass("width-p1-noAds")&&$("body").removeClass("width-p1-noAds"),$("body").addClass("adSupported-layout"));R(ow);Ey()},im:function(){this.jb(!0,!1)},TP:function(){$(this.ra).show();$("body").hasClass("width-p1-noAds")&&$("body").removeClass("width-p1-noAds");$("body").hasClass("adSupported-layout")||(R(nw),$("body").addClass("adSupported-layout"),
R(ow));this.zl=!1;this.lc()},jb:function(b,c){if(!this.zl||b)c&&$(this.rd).empty(),$(this.ra).removeClass("active").removeClass("visible").addClass("inactive").addClass("invisible"),$(this.Nb).removeClass("active").removeClass("visible").addClass("inactive").addClass("invisible"),this.Mz(),R(nw),$("body").hasClass("adSupported-layout")&&$("body").removeClass("adSupported-layout"),$("body").addClass("width-p1-noAds"),R(ow),Ey(),this.zl=!0},Mz:function(){$("#google_adwords").css("display","none").css("visibility",
"hidden");$("#advertisement_bottom").css("display","none").css("visibility","hidden");$("#ad_controls").css("display","none").css("visibility","hidden");$("#ad_your_ad_here").css("display","none").css("visibility","hidden")},YL:function(b,c,d,e,h,l){null==Cy&&Ey();"double_wide_short"!=b&&this.Mz();if(b&&0==b.indexOf("masthead")){var p=this.model.get("currentUser");if(p&&p.p()){this.jb(!0);return}}"medium_rectangle"==b?($(this.ra).attr("class","banner_ad"),$(this.rd).attr("class","advertisement_square"),
$(c).height("100%"),this.lc(b,c)):"wide_skyscraper"==b?($(this.ra).attr("class","banner_ad"),$(this.rd).attr("class","advertisement_tall"),$(c).height("100%"),this.lc(b,c)):"double_wide"==b?($(this.ra).attr("class","banner_ad"),$(this.rd).attr("class","advertisement_double_wide"),$(c).height("100%"),this.lc(b,c)):"double_wide_short"==b?($(this.ra).attr("class","network_ad"),$(this.rd).attr("class","advertisement_double_wide_short"),$(c).height("100%"),this.lc(b,c)):"masthead"==b?($(this.ra).attr("class",
"masthead_ad"),$(this.rd).attr("class","advertisement_masthead"),$(this.Nb).attr("class","companion_ad"),$(c).height(250),this.lc(b,c)):"masthead_with_companion"==b?($(this.ra).attr("class","masthead_ad"),$(this.rd).attr("class","advertisement_masthead"),$(this.Nb).attr("class","companion_ad"),$(c).height(250),this.lc(b,c)):"masthead_companion"==b?($(this.rd).attr("class","advertisement_masthead"),$(this.Nb).attr("class","companion_ad"),$(c).height("100%"),this.lc(b,c)):(b="Unknown ad type: "+b,this.model.get("displayingCompanion")?
Ep("Companion ad not displayed","2000x2",b,d,e,h,l,this.model.get("currentUser")):Ep("Banner ad not displayed","2000x2,300x250,300x600",b,d,e,h,l,this.model.get("currentUser")),this.yl())},WN:function(b,c){var d={wide_skyscraper:0,medium_rectangle:0,double_wide:0,masthead:0};switch(b){case 160:d.wide_skyscraper++;break;case 300:d.medium_rectangle++;d.double_wide++;break;case 970:d.masthead++}switch(c){case 600:d.wide_skyscraper++;d.double_wide++;break;case 250:d.medium_rectangle++,d.masthead++}var e=
[],h;for(h in d)e[e.length]={type:h,score:d[h]};e.sort(function(b,c){return c.QO-b.QO});return e[0].type},Xc:function(){var b=this.model.get("currentUser");return b&&b.ve()?this.io:this.jo},debug:function(b){k.debug("AdView : "+b)}});function mA(){}
mA=Backbone.View.extend({initialize:function(){k.debug("Initialize animated overlay ad view");this.Bz=!0;S(Fw,r(this,this.cM));S(Gw,r(this,this.bM))},debug:function(b){k.debug("AnimatedOverlayAdView : "+Ed()+" : ",arguments)},render:function(b){b&&"ANIMATEDOVERLAY"==b.C()?(this.wg=new bA({model:this.model}),this.wg.vy(),this.SD(b)):this.debug("Invalid ad type here ... should never happen",b)},SD:function(b){this.data=b;this.wb(b);(b=b.data.richmedia_companion)?(this.Bz=!0,this.startTime=Fd(),z.b(Uk,
this.data),z.b(gi,!1),this.debug("Force the companion ad .."+b),R(Dw,{companion:b,forceSyncGPT:!1}),$(window).scrollTop(0)):this.tp()},tp:function(){z.b(Vk,this.data);this.data=null;this.Bz&&z.b(ei,{userInitiated:!1});this.wg=new bA({model:this.model});this.wg.Wx()},r3:function(b){Fd()-this.startTime>b&&(this.debug("Too long for the ad to respond ... closing"),this.tp())}});mA.prototype.uh=function(b){this.debug("ERROR pinging tracker url ? "+b)};
mA.prototype.wb=function(b){if(b&&b.qc){var c=b.qc;Jp(c,function(){},r(this,function(b){this.uh(c,b)}));b.qc=null}if(b&&b.tracker){var d=b.tracker;Jp(d,function(){},r(this,function(b){this.uh(d,b)}));b.tracker=null}};mA.prototype.cM=function(){this.debug("Animated overlay start",this.data);this.data&&z.b(Wk,this.data)};mA.prototype.bM=function(){this.debug("Animated overlay end",this.data);if(this.data){var b=this.data.data.followon_companion,c=!this.data.hb();this.tp();R(Dw,{companion:b,isCompanionAd:c})}};
mA.xG=function(){R(Fw)};mA.wG=function(){R(Gw)};window.animatedOverlayStart=mA.xG;window.animatedOverlayFinish=mA.wG;function Y(){}
Y=Backbone.View.extend({initialize:function(b){k.debug("Initialize video ad view");this.Ck="#videoAd";this.Wu="#videoPlayerJS";this.og="#videoPlayer";this.GC=854;this.FC=480;this.lB="Advertisement: Your music will resume in {0} seconds";this.ke=b.ke||new Backbone.Model({creativeId:"",lineId:""});this.qk=this.data=null;this.fB=30;this.Uq=this.Na=this.Ep=this.Ej=!1;this.rr=this.lastPosition=this.position=0;this.tt=this.bd=!1;this.cn=-1;this.Ut=!1;this.$t=!0;this.dB=!1;this.CE=new mA({model:this.model});S(xw,
r(this,this.eO));S(yw,r(this,this.dO));S(sx,r(this,function(b){nA(this,b.mG,b.nG)}))},debug:function(b){k.debug("VideoAdView : "+Ed()+" : ",arguments)},Wc:function(){return this.Pd()?this.qk:$(this.Wu).get(0)},Pd:function(){try{return-1<$(this.Ck).html().toLowerCase().indexOf("ooyala.com/player.swf")}catch(b){return!1}},rP:function(b){b&&(this.dB=!0);if($(this.Wu)&&this.Wc()&&(b&&this.Pd()||!b&&!this.Pd()))this.qk=this.Wc(),this.debug("Video player is available "+this.qk),b||this.Pd()?$(this.og).find(".close").hide():
this.data.Qr?$(this.og).find(".close").show():$(this.og).find(".close").hide();else{var c=$("<div id='videoPlayerContainer'></div>");Ce()?c.css("visibility","hidden"):c.addClass("hideVideoAd");var d=$("<div id='videoPlayer'><div class='close' style='display:none'></div><div id='videoAd'></div></div>");b&&(d.addClass("htmlStatus"),d.prepend('<div class="videoStatusBar"><div class="mainHolder">&nbsp;</div><div class="skipHolder"><a href="javascript:void(0);">Skip</a></div></div>'));c.append(d);this.data.Qr&&
c.find(".close").show();c.appendTo("body");this.debug("Added the videoAd div - "+$(this.Ck));this.DP();if(b){var e=this;$(this.Ck).ready(function(){var c={width:e.GC,height:e.FC,autoplay:!0};Uy(e.data)?"VPAID"==Vy(e.data)?$.extend(c,{"vpaid-ads-manager":{adTag:Uy(e.data),showInAdControlBar:!0,showAdMarquee:!1}}):$.extend(c,{vast:{tagUrl:Uy(e.data),disablePauseAd:!0}}):$.cookie("pandoraVideoAdClickTracker",Yy(e.data),{path:"/",domain:window.location.hostname,V3:!1});e.qk=OO.Player.create("videoAd",
b,c);setTimeout(function(){e.qk.mb.subscribe("*","videoAdView",function(b,c){R(sx,{mG:b,nG:c})})},1);$(".skipHolder a",this).bind("click",r(e,e.Dy))})}else e=this,$(this.Ck).ready(function(){swfobject.embedSWF("/videoPlayerJS.swf","videoAd","100%","100%","8",null,{allowscriptaccess:"always"},null,{id:"videoPlayerJS"});k.debug("VideoAdView : "+Ed()+" : Video player has been added : "+$("#videoPlayerJS").get(0));$(".close",this).bind("click",r(e,e.Dy))})}},Dy:function(){oA(this,Y.Vn,null)},HP:function(){$("#videoPlayerContainer").removeClass("hideVideoAd");
Ce()&&($("#videoPlayerContainer").removeAttr("style"),$("#videoPlayerContainer").css("visibility","visible"));this.Pd()&&$(".videoStatusBar",$(this.og)).animate({height:"21px"})},DP:function(){$("#videoPlayerContainer").removeClass("hideVideoAd");Ce()&&($("#videoPlayerContainer").removeAttr("style"),$("#videoPlayerContainer").css("visibility","visible"))},KK:function(){Ce()?$("#videoPlayerContainer").css("visibility","hidden"):$("#videoPlayerContainer").addClass("hideVideoAd").removeAttr("style");
$("#videoPlayer").removeAttr("style")},LK:function(b){$("#videoPlayer").fadeOut(250,function(){$("#videoPlayerContainer").fadeOut(1E3,function(){Ce()?$("#videoPlayerContainer").css("visibility","hidden"):$("#videoPlayerContainer").addClass("hideVideoAd").removeAttr("style");$("#videoPlayer").removeAttr("style");("Explorer"==BrowserDetect.browser||b)&&$("#videoPlayerContainer").remove()})})},K3:function(){return this.Ej},render:function(b){this.data=b;this.$t=!0;this.$t=this.model.get("musicPlaying");
this.cn=b.WP;this.ke.set({lineId:this.data.Ho,creativeId:this.data.Ic});if("VIDEOAD"==this.data.C())if(this.Na=!1,b=this.data.data.ooyalatoken,this.rP(b),this.Ej){Uy(this.data)||Ty(this.data)||this.Nv();setTimeout(r(this,this.playVideo),500);var c=1;1==this.Uk&&(c=2);this.Km=setTimeout(r(this,this.oF),16E3*c);this.Kj=b&&Uy(this.data)&&"VPAID"==Vy(this.data)?setTimeout(r(this,this.pp),3E5):setTimeout(r(this,this.pp),19E3*c)}else this.Ep=!0,this.debug("Player is not initialized yet .... no jsping yet?");
else"HOUSE"==this.data.C()?(this.debug("Handle the HOUSE video ad",this.data),this.wb(this.data),z.b(Wk,this.data),z.b(Vk,this.data),this.data=null):"ANIMATEDOVERLAY"==this.data.C()&&(this.debug("Handle the AnimatedOverlay ad",this.data),this.CE.render(this.data))},jb:function(b){this.debug("Remove Display");this.LK(b);clearTimeout(this.Km);clearTimeout(this.Kj)},setData:function(b){this.data=b},R3:function(){this.debug("Preload Movie called")},playVideo:function(){var b=this.Wc();this.position=0;
this.Uq=this.bd=!1;this.rr=Ed();this.debug("Video player - calling play video : "+b);var c=this.data.data.logoimage,d=this.data.hb()?1:0,e=this.data.Qr?1:0,h=this.data.LP?1:0,l=this.data.data.movie;this.debug("Playing Movie : url : "+l+" : uif : "+Uy(this.data)+" : vol : "+this.Ui());this.Pd()?this.Ut=!0:b.setShowSkipButtonAfter(this.cn);this.trigger(Y.ng.LOG_TIME_TO_PLAYER);if(Ty(this.data)){this.debug("Playing Movie (asset determined by Yume)");var l=this.model.get("currentUser"),p=this.model.get("currentStation"),
q={M:1,F:2};b.playYumeVideo({ag:l?(new Date).getFullYear()-l.ri:"",gnd:l?q[jo(l)]:"",genre:p?encodeURIComponent(p.n.Df()):""},"4x3",d,h,e,c,this.Ui(),this.data.data.creativeTypeAdServer?this.data.data.creativeTypeAdServer:null)}else this.data.data.ooyalatoken?(this.debug("Playing Movie v/Ooyala native: "+this.data.data.ooyalatoken),Uy(this.data)&&b.play()):null!=l?(p=l.indexOf("file="),-1!=p?(l=decodeURI(l.substring(p+5)),this.debug("Playing Movie : "+l),b.playVideo(!0,l,this.data.data.aspectRatio,
d,h,e,c,this.Ui())):(zp(Zy(this.data),"Video","invalid movie url","html5",this.model.get("currentUser")),this.Ze())):null!=Uy(this.data)?(l=Uy(this.data),this.debug("Playing Movie : "+l),b.playVideo(!1,l,null,d,h,e,c,this.Ui())):(zp(Zy(this.data),"Video","invalid path data","html5",this.model.get("currentUser")),this.Ze())},Nv:function(){z.b(gi,!1);this.debug("Show the video ad view",this.data);this.KK();this.HP();z.b(Uk,this.data)},EN:function(){this.data&&this.data.hb()?this.bd=!0:this.Ze()},Ze:function(){this.debug("Close Movie called");
this.Km&&clearTimeout(this.Km);this.Kj&&clearTimeout(this.Kj);this.Kj=this.Km=null;this.bd=this.Na=!1;this.duration=this.position=0;var b=!1;try{var c=this.Wc();this.Pd()?(b=!0,de(this,function(){c.destroy();this.Ej=!1},200)):c.endVideo()}catch(d){}this.jb(b);try{z.b(Vk,this.data)}catch(e){}(this.data.hb()||void 0!=this.data.mj&&!0==this.data.mj)&&!this.$t||z.b(ei,{userInitiated:!1});this.data=null},FN:function(){zp(Zy(this.data),"VideoAd","VideoPlayer error event","onVideoError",this.model.get("currentUser"));
this.Ze()},oF:function(){!1==this.Na?(this.debug("Looks like the player is having issues with starting the video"),zp(Zy(this.data),"VideoAd","Video didn't start","checkPlaying",this.model.get("currentUser")),this.Ze()):this.debug("The player is doing fine .... ")},pp:function(){var b=Ed()-this.rr;this.Na&&10<b&&!this.bd&&(this.debug("Looks like the player is having issues with progressing through the video"),zp(this.data,"VideoAd","Video stalled for : "+b,"checkProgress",this.model.get("currentUser")),
this.Ze());this.debug("The player is doing fine .... check again in 3s");this.Na&&(this.Kj=setTimeout(r(this,this.pp),3E3))},Ui:function(){var b=Jm();return null==b||isNaN(Number(b))||0>Number(b)||100<Number(b)?50:Number(b)}});Y.Tn="initialized";Y.qu="interaction_playerLoaded";Y.Wn="interaction_videoInitiated";Y.Xn="interaction_videoPlayedToCompletion";Y.PB="interaction_scrubbed";Y.pu="interaction_pauseClicked";Y.Un="interaction_unpauseClicked";Y.TV="interaction_replayClicked";Y.SV="interaction_muteClicked";
Y.UV="interaction_unmuteClicked";Y.ru="interaction_videoLoadError";Y.MB="interaction_endOfVideoCloseClicked";Y.Vn="interaction_videoClosedBeforeEnd";Y.RV="interaction_endOfVideoReplayClicked";Y.NB="interaction_endOfVideoLearnMoreClicked";Y.OB="interaction_graphicLinkClicked";Y.QB="interaction_videoClicked";Y.LB="interaction_emptyVastTag";Y.Yu="videoProgress";Y.ng={VIDEO_EVENT:"VIDEO_EVENT",LOG_TIME_TO_PLAYER:"LOG_TIME_TO_PLAYER"};
Y.prototype.uh=function(b,c){try{var d=c.name+" : while pinging url";this.debug(d,c);zp(b,"video",d,"impression",this.model.get("currentUser"))}catch(e){}};
Y.prototype.wb=function(b){if(b&&b.qc){var c=b.qc;this.debug("Ping "+c);Jp(c,function(){},r(this,function(b){this.uh(c,b)}));b.qc=null}else{var d="VideoData is empty",e="Empty";b&&(d="Impression url is empty",e=b.C()+" : "+Zy(b));zp(e,"video",d,"impression",this.model.get("currentUser"))}if(b&&b.tracker){var h=b.tracker;Jp(h,function(){},r(this,function(b){this.uh(h,b)}));b.tracker=null}};
function nA(b,c,d){b.debug("Ooyala interaction - "+c);switch(c){case "playerEmbedded":oA(b,Y.qu,null);break;case "contentTreeFetched":b.Ej||oA(b,Y.Tn,null);break;case "playheadTimeChanged":b.Na&&(c=b.Wc().getPlayheadTime(),d=Uy(b.data)&&!sd(b.Wc().getDuration())?b.fB:b.Wc().getDuration(),$(b.og+" .videoStatusBar .mainHolder").html(b.lB.replace("{0}",Math.round(d-c))),b.Ut&&Math.round(c)>=b.cn&&(b.Ut=!1,$(b.og+" .videoStatusBar .skipHolder").css("visibility","visible")),oA(b,Y.Yu,{position:c,duration:d}));
break;case "willShowCompanionAds":"*INLINED*"==b.data.vf&&d.Wk&&d.Wk[0]&&($.extend(d.Wk[0],{pandoraContainer:b.data.ol}),R(Ew,d.Wk[0]));break;case "error":case "playFailed":b.debug("Ooyala ERROR: "+b.Wc().getError());oA(b,Y.ru,null);break;case "played":case "adsPlayed":b.Na&&oA(b,Y.Xn,null);break;case "paused":b.Na&&0.95>b.position/b.duration&&(b.bd&&Uy(b.data)?oA(b,Y.Un,null):b.bd||(b.tt&&clearTimeout(b.tt),b.tt=de(b,function(){oA(this,Y.pu,null)},200)));break;case "playing":!b.Na&&Uy(b.data)?oA(b,
Y.Xn,null):b.Na&&b.bd&&oA(b,Y.Un,null);break;case "playbackReady":b.Na||Uy(b.data)||de(b,function(){oA(this,Y.Wn,null)},500);break;case "willPlayAds":b.Na||(sd(d)&&(b.fB=d),oA(b,Y.Wn,null))}}
function oA(b,c,d){var e=b.data;if(Y.Yu==c){if(b.lastPosition=b.position,b.position=d.position,b.duration=d.duration,b.rr=Ed(),0==b.position%10&&b.debug("Handling interaction - "+c),b.duration){d=b.position/b.duration;var h=b.lastPosition/b.duration;0==h&&0<d&&(pA(b,"start"),e&&qA(b,e.iQ));0.25>h&&0.25<=d&&(pA(b,"first_quartile"),e&&qA(b,e.NG));0.5>h&&0.5<=d&&(pA(b,"second_quartile"),e&&qA(b,e.UO));0.75>h&&0.75<=d&&(pA(b,"third_quartile"),e&&qA(b,e.BQ))}}else b.debug("Handling interaction - "+c);
Y.PB==c&&(b.Uq=!0);if(Y.Tn==c)b.Ej=!0,b.Ep&&(b.Ep=!1,b.data&&b.render(b.data)),pA(b,"initiate");else{Y.qu==c&&b.debug("Player loaded");c==Y.Vn&&(pA(b,"skip"),s("video_ad_skipped",{O3:Zy(e),Q3:b.position,f4:b.duration},b.model.get("currentUser")),b.debug("Player closed before end?"));if(c==Y.Xn&&(d=b.Na,b.EN(),pA(b,"complete"),e&&qA(b,e.CF),e&&Uy(e)&&!d)){b.wb(e);return}c!=Y.MB&&c!=Y.Vn||b.Ze();c==Y.NB&&Xy(b.data)&&(window.open(Xy(b.data),"_blank"),b.debug("Open window "+Xy(b.data)));c==Y.OB&&(null!=
Wy(b.data)?(window.open(Wy(b.data),"_blank"),b.debug("Open window "+Wy(b.data))):Yy(b.data)&&(window.open(Yy(b.data),"_blank"),b.debug("Open Window "+Yy(b.data))));c==Y.QB&&Yy(b.data)&&(window.open(Yy(b.data),"_blank"),b.debug("Open Window "+Yy(b.data)));c==Y.Wn&&(b.Pd()&&b.Wc().setVolume(b.Ui()/100),(Uy(b.data)||Ty(b.data))&&b.Nv(),b.Na=!0,b.bd=!1,z.b(Wk,b.data),b.wb(b.data));c==Y.LB&&(b.wb(b.data),Ty(b.data)&&(b.Na=!1));c==Y.ru?b.FN():(c==Y.pu&&(b.bd=!0,pA(b,"pause")),c==Y.Un&&(b.bd=!1,pA(b,"unpause")),
c&&"interaction_videoInitiated"!=c&&e&&qA(b,e.get("trackingUrl_"+c.split("interaction_")[1])))}}
function pA(b,c){var d={event_type:c,line_id:"",creative_id:"",playback_pos:b.position,duration:b.duration,has_scrubbed:b.Uq,network:null,vendor_id:u,device_id:we,accessory_id:null,app_version:z.ba,device_os:se(),device_model:null,client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0),is_pandora_link:!1,bluetooth_device_name:null},e=b.ke;e&&(d=_.extend(d,{line_id:e.get("lineId"),creative_id:e.get("creativeId")}));b.trigger(Y.ng.VIDEO_EVENT,d);s("tap_to_video",d,b.model.get("currentUser"))}
function qA(b,c){c&&(Bp(c,function(){},r(b,b.uh)),b.debug("ping : "+c))}Y.prototype.eO=function(b){oA(this,b.interaction,b.data)};Y.prototype.dO=function(b){var c=this.Wc();this.cn=b;c?(this.Pd()||c.setShowSkipButtonAfter(b),this.debug("Set the showSkip duration to : "+b)):this.debug("No video player to set the show skip duration..")};Y.hP=function(b){R(yw,b)};Y.GN=function(b,c){R(xw,{interaction:b,data:c})};
Y.wL=function(b){k.debug("VideoAdView : Firing off interaction event : init with "+b);R(xw,{interaction:Y.Tn,data:b})};window.setShowSkipDuration=Y.hP;window.onVideoInteraction=Y.GN;window.jsPing=Y.wL;function rA(){}
rA=Backbone.View.extend({initialize:function(){this.sk="#skinClickRight";this.rk="#skinClickLeft";this.du="#advertisement";this.eu="#adLayout";this.lC=800;this.jb()},render:function(b){if(b){var c="ad"+(new Date).getTime();b=b.replace("__CACHEBUSTER__",je());var d='<div id="'+c+'" style="width:100%;height:100%;" class="sponsored_logo"><a href="'+b+'" target="_blank"><img src="/static/ads/sponsorship/transparent-logo-area.gif" width="100%" height="100%" border="0" ></a></div>';$(this.sk).fadeTo("slow",0.01,
r(this,function(){$(this.sk).html(d)}));$(this.rk).fadeTo("slow",0.01,r(this,function(){$(this.rk).html(d)}))}},lc:function(){var b=this.lC;$(this.eu).animate({width:b},"slow");$(this.du).html("");$(this.du).hide();$(this.sk).addClass("active_trial").fadeIn(200);$(this.rk).addClass("active_trial").fadeIn(200);$(".skinClick").css({display:"block"});$(".skinClick").width(($(window).width()-b)/2);$(window).resize(function(){$(".skinClick").width(($(window).width()-b)/2)})},jb:function(){$(this.sk).removeClass("active_trial").fadeOut(200);
$(this.rk).removeClass("active_trial").fadeOut(200)},debug:function(b){k.debug("ComplimentaryTrialLogoView : ",arguments)}});function sA(){}sA=Backbone.View.extend({initialize:function(){z.ib(Sg,r(this,this.Gb))},Gb:function(){var b=ey("readOnlyPopup",$("#readOnlyHeaderTmpl").tmpl(),$("#readOnlyContentTmpl").tmpl());$("body").append($(this.el).append(b))},events:{"closed .lightbox":"cancelClick"},cancelClick:function(){$(this.el).empty();return!1}});function tA(){}
tA=Backbone.View.extend({initialize:function(){$("#main").append(this.el);this.model.bind("change:modalPanel",r(this,this.render));pz("/account/welcome");z.c(ti,r(this,this.abort))},render:function(){if("REGISTERED_PANEL"==this.model.get("modalPanel")){V("/account/welcome",!1,!0);var b=ey("first_interaction",$("#firstInteractionHeaderTmpl").tmpl(),$("#firstInteractionContentTmpl").tmpl(),$("#firstInteractionFooterTmpl").tmpl(),!0);b.css("top",0);$(this.el).empty().append(b);$(this.el).show();b.bind("closed",
r(this,this.closeWindow));$("#first_interaction_continue",this.el).click(r(this,this.closeWindow));R(uw);$(".legal").hide()}},closeWindow:function(){var b=this.model.get("currentUser");!$("#public_profile").is(":checked")&&b&&z.b(zi,{isProfilePrivate:!0,disallowComments:b.Ip,optOut:!b.Al,noNotifyOnNote:!b.Mr,noNotifyOnFollow:!b.Lr,artistPromoEmailsEnabled:void 0!=b.zf?b.zf:null});$("#first_interaction_continue",this.el).unbind();$(this.el).empty();pp()&&0<pp().length&&(window.location=pp());this.model.set({modalPanel:"POSTREG_AD_PANEL"});
$(".navFooter").show();$(".legal").show()},abort:function(){$("#first_interaction_continue",this.el).unbind();$(this.el).hide(function(){$(this.el).empty()})}});function uA(){}
uA=Backbone.View.extend({initialize:function(){$("#main").append(this.el)},render:function(b){var c=ey("postreg_ad",$("#postregAdHeaderTmpl").tmpl(),$("#postregAdContentTmpl").tmpl(),$("#postregAdFooterTmpl").tmpl(),!0);c.css("top",0);$(this.el).empty().append(c);$(this.el).show();c.bind("closed",r(this,this.closeWindow));$("#postreg_nothanks",this.el).click(r(this,this.closeWindow));swfobject.embedSWF("/postregAdProxy/postregproxy.swf?adswf="+b,"postregAdSwfContainer","560","300","8",null,{allowscriptaccess:"always"},
{wmode:"transparent"},{id:"postregProxy"})},closeWindow:function(){$(this.el).empty();z.b(Bi)},abort:function(){$(this.el).hide(function(){$(this.el).empty()})},DF:function(b){$("#postregProxy").css("height","1px");$("#postregProxy").css("width","1px");b=ey("postreg_ad",$("#postregAdConfirmHeaderTmpl").tmpl(),$("#postregAdConfirmTmpl").tmpl({msg:b}),$("#postregAdInfoConfirmButtons").tmpl(),!0);b.css("top",0);$(this.el).append(b);b.bind("closed",r(this,this.closeWindow));$("#postreg_info_dont_allow",
this.el).click(r(this,function(){$("#postreg_info_dont_allow",this.el).fadeOut();this.closeWindow();z.b(Di)}));$("#postreg_info_allow",this.el).click(r(this,function(){$("#postreg_info_allow",this.el).fadeOut();z.b(Ci)}))},events:{}});function vA(){}
vA=Backbone.View.extend({eC:3E4,initialize:function(){$("#main").append(this.el);this.na=0;this.Cg=!1;S(Bw,r(this,this.nK));S(Cw,r(this,this.SH))},nK:function(){this.Cg=!0;$(".headerContinue",this.el).fadeIn()},SH:function(){R(Aw,{source:"truex_creative_close",elapsedTime:(new Date).getTime()-this.na,didReachThreshold:this.Cg})},render:function(b,c,d){b=$("#svnAdContentTmpl").tmpl({svnActivityUrl:b,height:c,width:d});var e=this.model.get("currentUser"),h=e.fk,e=e.Mh;b=ey("svn_ad",$("#svnAdHeaderTmpl").tmpl({isSponsoredListening:e==m.de.eo(),
creditHours:h+" hour"+(1<h?"s":"")}),b,$("#svnAdFooterTmpl").tmpl(),!1);b.css("top",0);$(".lightbox_content",b).height(c+10);$(".lightbox_content",b).width(d);$(".svn_ad",b).width(d+30);$(this.el).empty().append(b);$(".headerContinue",this.el).hide();$(this.el).show();this.na=Date.now();this.Cg=!1;b.bind("closed",r(this,this.handleCancel))},handleCancel:function(){var b=(new Date).getTime()-this.na;b>this.eC?R(Aw,{source:"close",elapsedTime:b,didReachThreshold:this.Cg}):R(zw,{source:"close",elapsedTime:b,
didReachThreshold:this.Cg})},tF:function(){$(this.el).empty()},events:{"click .headerContinue a":"userSkipClick"},userSkipClick:function(){R(Aw,{source:"start_listening",elapsedTime:(new Date).getTime()-this.na,didReachThreshold:this.Cg})}});function wA(){}
wA=Backbone.View.extend({initialize:function(){$("#main").append(this.el)},render:function(){var b=ey("password_confirmation",$("#passwordConfirmationHeaderTmpl").tmpl(),$("#passwordConfirmationContentTmpl").tmpl());$(this.el).empty().append(b);$(this.el).show();$("input[name=password]",this.el).get(0).focus()},events:{"closed .lightbox":"cancelClick","click .submitButton":"submitButtonClick","submit .passConfirmForm":"passConfirmFormSubmit"},cancelClick:function(){this.trigger("cancel");$(this.el).remove();
return!1},passConfirmFormSubmit:function(){return!1},submitButtonClick:function(){var b=$("input[name=password]",this.el).val();$(".formFieldError",this.el).hide();var c=!1;rd(b)&&5<=b.length||($(".passwordFieldError",this.el).text(ia()).fadeIn(),c=!0);c||(this.trigger("submit",b),$(this.el).remove());return!1}});function xA(){}
xA=Backbone.View.extend({initialize:function(){$("#main").append(this.el)},render:function(){var b=ey("session_start_dialog",$("#pandoraForBusinessSessionStartHeaderTmpl").tmpl(),$("#pandoraForBusinessSessionStartContentTmpl").tmpl());$(this.el).empty().append(b);$(this.el).show();s("business_session_start_page_hit",{vendor_id:u},this.model.get("currentUser"));um(mm,Date.now())},events:{"closed .lightbox":"cancelClick","click #p4b_learn_more":"learnMoreButtonClick","click #p4b_upgrade":"p4bUpgradeClick"},cancelClick:function(){$(this.el).remove();
return!1},learnMoreButtonClick:function(){s("business_session_start_page_click",{vendor_id:u,action:"learn_more"},this.model.get("currentUser"));setTimeout(function(){R(pv)},10);$(this.el).remove();return!1},p4bUpgradeClick:function(){s("business_session_start_page_click",{vendor_id:u,action:"business_upgrade"},this.model.get("currentUser"));setTimeout(function(){R(mv)},10);$(this.el).remove();return!1}});function yA(){}
yA=Backbone.View.extend({initialize:function(){$("#main").append(this.el)},render:function(){var b=this.model.get("currentUser"),b={grandfathered:b&&b.Oy(),isBusiness:b&&b.S()},b=ey("cancel_subscription_warning",$("#cancelSubscriptionWarningHeaderTmpl").tmpl(b),$("#cancelSubscriptionWarningContentTmpl").tmpl(b));$(this.el).empty().append(b);$(this.el).show()},events:{"closed .lightbox":"cancelClick","click .submitButton":"submitButtonClick","click .cancelButton":"cancelClick"},cancelClick:function(){this.trigger("cancel");$(this.el).remove();
s("p1_gf_auto_renew_choice",{choice:"donotsave"},this.model.get("currentUser"));return!1},submitButtonClick:function(){this.trigger("submit");$(this.el).remove();s("p1_gf_auto_renew_choice",{choice:"disable"},this.model.get("currentUser"));return!1}});Backbone.View.extend({initialize:function(){this.na=(new Date).getTime();S(Ju,r(this,this.Ha));var b=ey("facebookInfoPopup",null,$("#facebookInfoTmpl").tmpl({appId:Wo()}));$("body").append($(this.el).append(b))},Ha:function(b){this.el&&(new Date).getTime()-this.na>Yz&&!($(b.target)==this.el||0<$(b.target).parents(".lightbox_bg").length)&&this.closeClicked()},events:{"click .publish":"publishClicked","click .notNow":"closeClicked","closed .lightbox":"closeClicked"},publishClicked:function(){this.Uy("publish");
this.U();z.b(sj);return!1},closeClicked:function(){this.Uy("close");this.U();return!1},U:function(){$z(this);$(this.el).remove();this.el=null},Uy:function(b){var c=this.model.get("currentUser");null!=c&&s("social_autoshare_info_select",{social_network_id:"facebook",eventType:b,device_os:"web"},c)}});function zA(){}
zA=Backbone.View.extend({initialize:function(){this.na=(new Date).getTime();S(Ju,r(this,this.Ha));var b=ey("facebookConnectedPopup",null,$("#facebookConnectedTmpl").tmpl());$("body").append($(this.el).append(b))},Ha:function(b){this.el&&(new Date).getTime()-this.na>Yz&&!($(b.target)==this.el||0<$(b.target).parents(".lightbox_bg").length)&&this.dismiss()},events:{"click .yourSettings":"yourSettingsClicked","closed .lightbox":"dismiss"},yourSettingsClicked:function(){this.U();V("/account/privacy",!0,
!0);return!1},dismiss:function(){this.U();return!1},U:function(){$z(this);$(this.el).remove();this.el=null}});for(K=oq[8];-1!=K;)switch(K){case 37:G[180]=-2070576169;K=oq[41];break;case 25:G[212]=-1910507150;K=oq[21];break;case 3:K=oq[56];break;case 33:G[68]=1599896490;K=oq[43];break;case 9:G[102]=-1463358468;K=oq[6];break;case 18:G[480]=-1999123204;K=oq[10];break;case 54:K=oq[29];break;case 28:G[299]=-1638921804;K=oq[38];break;case 57:K=oq[18];break;case 59:G[351]=707040027;K=oq[54];break;case 41:G[517]=2622719909;K=oq[32];break;case 47:G[512]=1231605603;K=oq[7];break;case 39:G[822]=-397702507;K=oq[19];
break;case 20:G[352]=1104147103;K=oq[48];break;case 21:K=oq[52];break;case 10:K=oq[53];break;case 55:K=oq[60];break;case 23:G[969]=2086753151;K=oq[42];break;case 12:K=oq[34];break;case 46:K=oq[0];break;case 30:K=oq[26];break;case 32:G[809]=-1352458875;K=oq[27];break;case 6:K=oq[25];break;case 48:G[444]=521733442;K=oq[28];break;case 17:G[836]=1419030366;K=oq[22];break;case 50:G[166]=-1714400200;K=oq[3];break;case 2:G[959]=-1681004700;K=oq[4];break;case 16:K=oq[36];break;case 58:K=oq[20];break;case 5:K=
oq[31];break;case 36:G[961]=-1052091643;K=oq[39];break;case 11:G[257]=-74256028;K=oq[9];break;case 31:G[460]=-1402562782;K=oq[30];break;case 22:G[871]=1418498237;K=oq[13];break;case 4:G[291]=-58623508;K=oq[24];break;case 24:G[590]=1750244024;K=oq[1];break;case 35:G[5]=-2080913454;K=oq[40];break;case 45:G[273]=2141246715;K=oq[50];break;case 7:G[1]=-1126562572;K=oq[49];break;case 29:G[181]=1251875558;K=oq[55];break;case 51:G[411]=-791173261;K=oq[5];break;case 8:G[807]=-1984567002;K=oq[47];break;case 44:K=
oq[17];break;case 43:G[259]=1764240269;K=oq[37];break;case 26:G[1036]=1419022742;K=oq[14];break;case 1:K=oq[2];break;case 15:G[958]=-1871395290;K=oq[16];break;case 34:K=oq[46];break;case 19:G[48]=1248939638;K=oq[44];break;case 49:G[421]=-1072746871;K=oq[58];break;case 53:K=oq[23];break;case 14:G[364]=-1864904878;K=oq[35];break;case 42:K=oq[33];break;case 13:G[994]=983083871;K=oq[15];break;case 56:G[509]=-1057179023;K=oq[59];break;case 52:K=oq[11];break;case 40:G[978]=-2052130286;K=oq[51];break;case 0:K=
oq[45];break;case 38:K=oq[12];break;case 27:G[293]=-622914062,K=oq[57]};function AA(){}
AA=Backbone.View.extend({initialize:function(){z.c(hf,r(this,this.Nd));z.c(Re,r(this,this.close));z.c(Rf,r(this,this.UG));z.c(Sf,r(this,this.QQ));z.c(Vf,r(this,this.NQ));this.dm=null;this.Ki=[];this.JA=this.IA=this.Nh=this.Oh=0;z.c(ei,r(this,this.iK));S(tv,r(this,this.hx))},el:$("#mainContentContainer .search"),render:function(){$(this.el).empty();eA("/content/search",{q:this.Sf,ae:this.zE,cachebuster:""+(new Date).getTime()},r(this,function(b){$(this.el).empty().append(b);b=$(".search_section .section",this.el);
var c=Lo();if(b&&0<b.size()&&null!=c&&0<c.length&&!this.dD&&(this.dD=!0,this.IF(this.Sf,this.Pj)))return;R(Uw);this.tx(null!=this.Pj?this.Pj:"none");_.each(b,function(b){new gz($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)))});wy(new ty(this.model.get("currentUser")),!1);this.postRender()}),function(){z.b(Mh)},!0);this.Nh=Date.now();return this},postRender:function(){lp()?$(".create-station-no-sample").hide():$(".sample_allowed").hide();$(".iTunes-badge").hide()},hx:function(b){this.Pj=b.UD;
this.Oh=Date.now();b.Gv==this.Sf?(this.tx(null!=this.Pj?this.Pj:"none"),R(Uw)):(this.Sf=b.Gv,this.zE=b.NC?"t":"f",this.render())},close:function(){this.LL();this.kj()&&R(Lu)},Nd:function(b){var c=$(".sample.playing",this.el);this.kj()&&(c.removeClass("playing"),$(".iTunes-badge").hide(),b.isError&&c.addClass("sample-inactive").html("No Sample").parent(".btn_bg").addClass("disabled"))},kj:function(){return $(this.el).is(":visible")},UG:function(b){if(this.kj()){var c=null;$("#extendedSearchResults .right_col .search_button.follow_button",
this.el).each(r(this,function(d,e){$(e).data("webname")==b.webName&&(c=$(e))}));c&&(c.removeClass("followable"),c.addClass("following"),c.removeClass("hover"),c.find(".follow_button_label").text("Following"),c.addClass("immediate"))}},QQ:function(b){if(this.kj()){var c=null;$("#extendedSearchResults .right_col .search_button.follow_button",this.el).each(r(this,function(d,e){$(e).data("webname")==b.webName&&(c=$(e))}));c&&(c.removeClass("following"),c.addClass("followable"),c.removeClass("hover"),
c.find(".follow_button_label").text("Follow"))}},NQ:function(b){if(this.kj()){var c=null;$("#extendedSearchResults .right_col .search_button.follow_button",this.el).each(r(this,function(d,e){$(e).attr("data-listenerid")==b&&(c=$(e))}));c&&(c.removeClass("blocked"),c.addClass("followable"),c.removeClass("hover"))}},events:{"click #extendedSearchResults .left_col .filter":"filterClick","click #extendedSearchResults .right_col .more":"moreClick","click #extendedSearchResults .right_col .create_station":"createStationClick",
"click #extendedSearchResults .right_col .play_sample":"songSampleClick","click #extendedSearchResults .right_col .dropdownmenu .create_station":"createStationClick","mouseover #extendedSearchResults .right_col .search_button.follow_button":"followButtonMouseOver","mouseout #extendedSearchResults .right_col .search_button.follow_button":"followButtonMouseOut","click #extendedSearchResults .right_col .search_button.follow_button":"followButtonClick","click .right_col .search_section#song":"songClick",
"click .right_col .search_section#artist":"artistClick"},songClick:function(b){""==b.target.className&&(R($w,"song"),this.wr(b,"song"))},artistClick:function(b){""==b.target.className&&(R($w,"artist"),this.wr(b,"artist"))},followButtonClick:function(b){var c=this.model.get("currentUser");if(null==c||c.p())R(Dv,{onSuccessRedirect:hz()});else{if(!$(b.currentTarget).hasClass("cannotFollow")){var c=$(b.currentTarget).data("webname"),d=$(b.currentTarget).attr("data-listenerid");$(b.currentTarget).hasClass("followable")?
z.b(Ij,{webName:c,ui_id:b.currentTarget.id}):$(b.currentTarget).hasClass("following")?z.b(Jj,{webName:c,ui_id:b.currentTarget.id}):$(b.currentTarget).hasClass("blocked")?z.b(Lj,d):k.error("Unhandled follow state: ",$(b.target))}return!1}},followButtonMouseOver:function(b){$(b.currentTarget).hasClass("cannotFollow")||$(b.currentTarget).addClass("hover");$(b.currentTarget).hasClass("followable")?$(b.currentTarget).find(".follow_button_label").text("Follow"):$(b.currentTarget).hasClass("following")?
$(b.currentTarget).find(".follow_button_label").text("Unfollow"):$(b.currentTarget).hasClass("blocked")&&$(b.currentTarget).find(".follow_button_label").text("Unblock")},followButtonMouseOut:function(b){$(b.currentTarget).hasClass("cannotFollow")||$(b.currentTarget).removeClass("hover");$(b.currentTarget).hasClass("followable")?$(b.currentTarget).find(".follow_button_label").text("Follow"):$(b.currentTarget).hasClass("following")?$(b.currentTarget).find(".follow_button_label").text("Following"):$(b.currentTarget).hasClass("blocked")&&
$(b.currentTarget).find(".follow_button_label").text("Blocked");$(b.currentTarget).removeClass("immediate")},moreClick:function(b){this.IA=Date.now();if($(b.target).hasClass("unfiltered")){var c="/search/"+this.Sf,d=$(b.target).closest(".search_section").get(0).id;"none"!=d&&(c+="/"+escape(d));V(c,!1,!0)}else{var d=$(b.target).closest(".search_section"),c=$(".section",d).length,e=$(".section:visible",d).length,e=5>=e?10:e+10;e>=c&&(e=c,$(b.target).fadeOut());for(var h=this.Ki,l=$(".section .bi-col-left .search_details .search_title a",
d),p=0;p<l.length;p++)p>=e?$.each(h,function(b,c){c.path==l[p].pathname&&(h[b].hidden=!0)}):$.each(h,function(c,d){var e=$(b.target).closest(".search_section").get(0).id;d.path!=l[p].pathname||0!=d.section.length&&"none"!=e&&d.section!=e||(h[c].hidden=!1)});this.Ki=h;var q="";$.each(h,function(b,c){!1==c.hidden&&(0<b&&(q+=","),q+=c.musicId)});this.model.set({clientSearchResults:q});for(p=0;p<e;p++)$(".section",d).eq(p).fadeIn()}this.model.set({searchSequenceNum:this.model.get("searchSequenceNum")+
1});var d=$(b.target).closest(".search_section").get(0).id,q=void 0===this.model.get("clientSearchResults")?[]:this.model.get("clientSearchResults").split(","),c=q.length,e=(void 0===this.model.get("serverSearchResults")?[]:this.model.get("serverSearchResults").split(",")).length,t=$("#extendedSearchResults .search_rCol .int-1 .search_term_section .search_term",this.el).text();this.JA=Date.now();d={action:"scroll",listener_id:v.i.s,vendor_id:u,device_id:we,device_os:se(),app_version:z.ba,sequence_number:this.model.get("searchSequenceNum"),
page_view:d,view_mode:"search_results",source:"station_list_top",client_timestamp_ms:Date.now(),selected_result_id:null,selected_result_unique_id:null,num_results_returned:e,num_results_shown:c,new_station:"false",query:t,server_result_list:this.model.get("serverSearchResults"),client_result_list:this.model.get("clientSearchResults"),time_to_display_ms:this.JA-this.IA};s("search_action",d,null)},tx:function(b){$("#extendedSearchResults .left_col li",this.el).removeClass("selected");$("#extendedSearchResults .left_col #filter_"+
b,this.el).parent().addClass("selected");"none"==b?$("#extendedSearchResults .right_col .search_section",this.el).fadeIn():$("#extendedSearchResults .right_col .search_section",this.el).each(r(this,function(c,d){d.id==b?$(d).fadeIn():$(d).hide()}));var c="",d=[];$("#extendedSearchResults .right_col .search_section .section .row",this.el).each(r(this,function(b,e){var h=$(".bi-col-left .search_details .search_title a",$(e)).data("path"),l=$(".bi-col-right .menu .button-1 .create_station",$(e)).data("musicid"),
p=$(".bi-col-right .menu .btn_left .play_sample",$(e)).data("trackname"),q=$(e).closest(".search_section").get(0).id;d.push({musicId:l?l:p?p:"",sampleId:p?p:"",path:h?h:"",section:q,hidden:!0,index:b});0<b&&(c+=",");c+=l&&0<l.length?l:p}));this.Ki=d;this.model.set({serverSearchResults:c});this.model.set({searchSelectedIndex:-1});$("#extendedSearchResults .right_col .search_section",this.el).each(r(this,function(c,e){for(var h="none"==b?5:10,l=$(".section",$(e)),p=$(".bi-col-left .search_details .search_title a",
l),q=0;q<l.length;q++)q>=h?(l.eq(q).hide(),$.each(d,function(b,c){c.path==(void 0===p[q]?"":p[q].pathname)&&(d[b].hidden=!0)})):(l.eq(q).show(),$.each(d,function(c,e){e.path!=(void 0===p[q]?!1:p[q].pathname)||0!=e.section.length&&"none"!=b&&e.section!=b||(d[c].hidden=!1)}));l.length>h?"none"==b?($(".more.unfiltered",$(e)).show(),$(".more.filtered",$(e)).hide()):($(".more.unfiltered",$(e)).hide(),$(".more.filtered",$(e)).show()):$(".more",$(e)).hide()}));var e="",h=[];$.each(d,function(b,c){!1==c.hidden&&
(h.push(c.musicId),0<e.length&&(e+=","),e+=c.musicId)});this.model.set({clientSearchResults:e});var l=h.length,p=void 0===this.model.get("serverSearchResults")?0:this.model.get("serverSearchResults").split(",").length,q=$("#extendedSearchResults .search_rCol .int-1 .search_term_section .search_term",this.el).text(),l={action:"full_search",listener_id:v.i.s,vendor_id:u,device_id:we,device_os:se(),app_version:z.ba,sequence_number:this.model.get("searchSequenceNum"),page_view:"search",view_mode:"search_results",
client_timestamp_ms:Date.now(),query:q,num_results_shown:l,num_results_returned:p,server_result_list:this.model.get("serverSearchResults"),client_result_list:this.model.get("clientSearchResults"),time_to_display_ms:this.Nh>this.Oh?this.Nh-this.Oh:0};s("search_action",l,null)},filterClick:function(b){if(!$(b.target).hasClass("selected")&&this.Sf&&0<this.Sf.length){var c="/search/"+this.Sf;b=b.target.id.substring(7);"none"!=b&&(c+="/"+escape(b));V(c,!1,!0);return!1}},createStationClick:function(b){var c=
$(b.target);c.blur();var d=c.data("musicid"),e=c.attr("data-stationid"),h=c.attr("data-searchable-stationid");this.model.get("currentUser");var l=null,c=null,p=-1,q=$("#extendedSearchResults .search_rCol .int-1 .search_term_section .search_term",this.el).text();h?c=l=h:d?(l=Kn.StationKeyType.EXTENDED_SEARCH+d,c=d):e&&(l=Kn.StationKeyType.FRIENDS_STATION+e,c=e);l?z.b(Hi,{stationCode:l,source:"search"}):k.error("Unhandled station create code: ",b.target);(l=this.model.get("currentStation"))&&(l=zn(l))&&
l.key!=d&&R(Vw);e=this.model.get("searchSequenceNum");this.model.set({searchSequenceNum:e+1});var e=(void 0===this.model.get("clientSearchResults")?[]:this.model.get("clientSearchResults").split(",")).length,h=(void 0===this.model.get("serverSearchResults")?[]:this.model.get("serverSearchResults").split(",")).length,t=b.target.attributes["data-path"];(t&&0<t.length||d&&0<d.length)&&$.each(this.Ki,function(b,c){if(t&&c.path==t||d&&c.musicId==d)p=c.index,d=c.musicId});b=d&&d.length?d.substr(0,1):null;
this.model.set({searchSelectedIndex:p});var y=!1;(l=this.model.get("currentStation"))&&(l=zn(l))&&l.key!=d&&(y=!0);c={action:"select",listener_id:v.i.s,vendor_id:u,device_id:we,device_os:se(),app_version:z.ba,sequence_number:this.model.get("searchSequenceNum"),page_view:"all",view_mode:"search_results",source:"station_list_top",client_timestamp_ms:Date.now(),selected_result_id:d,selected_result_unique_id:c&&c.length?c.substr(1,c.length-1):null,selected_index:p,num_results_returned:h,num_results_shown:e,
query:q,server_result_list:this.model.get("serverSearchResults"),client_result_list:this.model.get("clientSearchResults"),selected_result_type:b,selected_result_action:"play",new_station:y};s("search_action",c,null);return!1},songSampleClick:function(b){$(b.target).blur();var c=0<$(b.target).parent(".sample").size||$(b.target);if(!c.hasClass("sample-inactive"))return c.hasClass("playing")?(z.b(Qi),c.removeClass("playing")):(z.b(Pi,{url:c.data("sampleurl"),gain:null!=c.data("samplegain")?Number(c.data("samplegain")):
0}),c.addClass("playing"),c=c.data("trackname"),$(".iTunes-badge."+c).show(),$(".iTunes-badge."+c).css("visibility","visible")),this.wr(b,"preview"),!1},iK:function(){this.dm&&(V(this.dm,!0,!0),this.dm=null)},IF:function(b,c){var d=null,e=!1;$("#extendedSearchResults .right_col .search_section",this.el).each(r(this,function(b,h){if(null==c||h.id==c){var l=$(".section",h).eq(0);if(100==$(".search_details",l).data("score")){if(null!=d)return e=!0,!1;var y=$(".section",h).eq(1);100!=$(".search_details",
y).data("score")&&(d=l)}}}));if(null!=d&&!e){var h=$(".create_station",d).data("musicid"),l=$(".search_title a",d).attr("data-path");BA()?le(l)&&V(l,!0,!1):(k.info("creating the station: "+h),this.dm=l,z.b(Hi,{stationCode:"es"+h,source:"search"}));return!0}return!1},wr:function(b,c){var d=this.model.get("searchSequenceNum");this.model.set({searchSequenceNum:d+1});var e=b.target.pathname,h=-1,l="",d=$("#extendedSearchResults .search_rCol .int-1 .search_term_section .search_term",this.el).text();$.each(this.Ki,
function(b,c){e&&c.path==e&&(h=c.index,l=c.musicId)});this.model.set({searchSelectedIndex:h});var p=l&&l.length?l.substr(0,1):null,q=void 0===this.model.get("clientSearchResults")?0:this.model.get("clientSearchResults").split(",").length,t=void 0===this.model.get("serverSearchResults")?0:this.model.get("serverSearchResults").split(",").length,d={action:"select",listener_id:v.i.s,vendor_id:u,device_id:we,device_os:se(),app_version:z.ba,sequence_number:this.model.get("searchSequenceNum"),page_view:"search",
view_mode:"search_results",source:"station_list_top",client_timestamp_ms:Date.now(),selected_result_id:l,selected_result_unique_id:l&&l.length?l.substr(1,l.length-1):null,index:h,server_result_list:this.model.get("serverSearchResults"),client_result_list:this.model.get("clientSearchResults"),num_results_shown:q,num_results_returned:t,query:d,selected_result_type:p,selected_result_action:c};s("search_action",d,null)},LL:function(){var b=hz();if(0<this.model.get("searchSequenceNum")&&!(-1<b.indexOf("/search/"))&&
0>this.model.get("searchSelectedIndex")){this.model.set({searchSequenceNum:this.model.get("searchSequenceNum")+1});var b=hz(),c="back";-1<b.indexOf("/music/top-stations")?c="browse_before_search":"/"!=b&&(c=b);b={action:"exit_navigate_away",listener_id:v.i.s,vendor_id:u,device_id:we,device_os:se(),app_version:z.ba,sequence_number:this.model.get("searchSequenceNum"),page_view:"search",client_timestamp_ms:Date.now(),view_mode:"search_results",exit_path:c};s("search_action",b,null)}}});function gA(){}
gA=Backbone.View.extend({initialize:function(){this.xF=this.options.type;this.yQ=this.options.targetId;this.tL=this.options.isTargetOwner;this.ry=this.options.hasMenu;this.gr=this.options.isActivityDelete;self.il=null;this.zt=!1;S(hw,r(this,this.wF));var b=this.model.get("currentUser");this.jx($(".notes .comment_box",this.el));this.Zx(this.el);this.Zp=new ty(b);wy(this.Zp,!1)},Zx:function(b){var c=this.model.get("currentUser");null==c||c.p()||($(".comments form",b).show(),$("h2",b).show(),this.ry?
_.each($(".comment_box .close",b),r(this,function(b){$(b).parent().attr("data-sender-webname")!=c.Y&&this.tE(b)})):$('.comment_box[data-sender-webname="'+c.Y+'"] .close',b).show())},jx:function(b){var c=this.model.get("currentUser");if(null!=c){var d=null!=c?c.Fa:null,e=c.Jl;me(e)&&(e=c.Y);var h=this.tL;b.each(function(b,p){var q=$(this).attr("data-senderid"),t=$(this).data("reports");t&&t.indexOf&&-1<t.indexOf(Number(c.s))?p.remove():(c.s==q||h||$(".close",this).remove(),$(".close",this).length?
$(".report",this).remove():c.p()&&$(".report",this).remove(),c.s==q&&(0<d&&$(".facebookThumbnail",this).attr("fbid",d),$(".comment_name",this).empty().append($("#backstageCommentNameTmpl").tmpl({webName:c.Y,senderName:e,fbid:d}))),$(p).show())})}},wF:function(b){b.fbid=b.senderFbId;Be()&&b.sF&&"profile"==b.sF?($("#backstageCommentTmpl").tmpl(b).prependTo($(".notes",this.el)),de(this,function(){$(".notes",this.el).slideDown()},1)):$("#backstageCommentTmpl").tmpl(b).prependTo($(".notes",this.el)).slideDown();
wy(this.Zp,!1)},tE:function(b){var c=$(b).parent();c.prepend($("#profileCommentMenuTmpl").tmpl());new gz($(b),null,$(".dropdownmenu",c));$(".remove_post",c).click(r(this,function(b){this.Yw(b);return!1}));$(".block_user",c).click(r(this,function(b){b=$(b.target).closest(".comment_box");b=$(b).attr("data-senderid");for(var c=$(".comment_box[data-senderid="+b+"]"),h=0;h<c.length;h++)this.Zw(c.eq(h));z.b(Kj,b);return!1}))},close:function(){$z(this)},events:{"focus .comments textarea[name=comment]":"commentFieldFocus",
"blur .comments textarea[name=comment]":"commentFieldBlur","submit form.comment_form":"submitComment","click .post_button":"submitComment","click .comment_box .close":"deleteComment","click .comment_box .report":"reportComment","mouseenter .comment_box":"mouseOverCommentBox","mouseleave .comment_box":"mouseOutCommentBox","keyup .comments textarea[name=comment]":"commentFieldGrow","click .notes .show_more":"commentsGetMore","click .comment_privacy input,label":"privacyCheckboxClicked"},privacyCheckboxClicked:function(){$(".comments textarea").focus();
return!0},commentFieldGrow:function(b){var c=$(b.target),d=$(".comment_form",this.el),e=b.target.scrollHeight;b=b.target.clientHeight;var h=parseInt(d.css("height"),10),l=b-c.height();e>b&&(null==this.$r&&null==this.Zr&&(this.$r=b,this.Zr=h),c.css("height",e+"px"),d.css("height",l+h+(e-b)+"px"))},mouseOverCommentBox:function(b){$(".close, .report",$(b.currentTarget)).fadeIn()},mouseOutCommentBox:function(b){$(".close, .report",$(b.currentTarget)).fadeOut()},commentFieldFocus:function(b){self.il&&
(clearTimeout(self.il),self.il=null);var c=$(b.target).attr("data-default-text");$(b.target).val()==c&&$(b.target).val("");$(".post_button",this.el).is(":visible")||$(".comment_controls",this.el).height(0).animate({height:$(".post_button",this.el).height()},200,r(this,function(){$(".comment_controls",this.el).css("height","");$(".post_button",this.el).fadeIn();0<$(".comment_privacy").length&&$(".comment_privacy").fadeIn()}))},commentFieldBlur:function(b){self.il=setTimeout(r(this,function(){""==$(b.target).val()&&
$(b.target).val($(b.target).attr("data-default-text"));$(".comment_controls",this.el).css("height",$(".comment_controls",this.el).height());$(".post_button, .comment_privacy",this.el).fadeOut(400,r(this,function(){$(".comment_controls",this.el).animate({height:0},200)}))}),200)},gO:function(){if(this.zt)return!1;this.zt=!0;setTimeout(r(this,function(){this.zt=!1}),500);return!0},submitComment:function(){if(this.gO()){var b=$(".comments textarea",this.el),c=Hd(b.val()),d=$(".comments input[name=private_comment]:visible");
R(Yu,new Ny(this.xF,this.yQ,c,1==d.length&&d.is(":checked")));b.val(b.attr("data-default-text")).blur();s("comment",{action:"submit"},this.model.get("currentUser"));this.$r&&this.Zr&&(b=$(".comment_form",this.el),$(".comment_form textarea[name=comment]",this.el).css("height",this.$r+"px"),b.css("height",this.Zr+"px"));return!1}},deleteComment:function(b){if($(b.target).attr("feedid")){var c=$(b.target).closest(".comment_box");c.slideUp();z.b(kj,{feedId:$(b.target).attr("feedId"),isActivityDelete:this.gr,
deleteCompletely:!0})}else{var c=$(b.target).closest(".comment_box"),d=this.model.get("currentUser");this.ry&&c.attr("data-sender-webname")!=d.Y||(this.Yw(b),s("comment",{action:"delete"},this.model.get("currentUser")))}return!1},reportComment:function(b){b=$(b.target).closest(".comment_box").attr("data-noteid");R($u,b)},Yw:function(b){b=$(b.target).closest(".comment_box");this.Zw(b)},Zw:function(b){var c=b.attr("data-noteid");b.slideUp();R(Zu,c)},commentsGetMore:function(b){var c=parseInt($(b.target).data("nextstartindex"),
10);$(".show_more",this.el).fadeOut("fast");var d="/content"+$(b.target).data("ajaxpath");eA(d,{csi:c,cachebuster:""+(new Date).getTime()},r(this,function(d){d='<span id="commentSet'+c+'">'+d+"</span>";$(b.target).after(d);de(this,function(){var b=$("#commentSet"+c+" .comment_box",this.el);this.jx(b);this.Zx(b);xy(this.Zp,!0,b)},1)}),function(){z.b(Mh)},!0);return!1}});function CA(){}
CA=Backbone.View.extend({initialize:function(){this.nb=this.options.detail_url;z.c(hf,r(this,this.Nd));z.c(He,r(this,this.$a));z.c(Kk,r(this,this.ws));S(Xv,r(this,this.Xi));this.Qe=null;this.xb=[];this.options.el&&(this.nb=$(".backstage",this.el).data("url"),this.Gj())},className:"artist_detail",render:function(){var b,c=ie(this.nb);if(1==c.length)b="/content/music/artist/"+c[0];else if(2==c.length)b="/content/music/album/"+c[0]+"/"+c[1];else{z.b(Mh,this.nb);return}eA(b,{},r(this,this.Rr),function(){setTimeout(function(){V("/search/"+
c[c.length-1],!0,!1)},300)},!0);return this},Rr:function(b){this.closed||($(this.el).append(b),this.Gj())},Gj:function(){k.debug("sending google analytics event: backstage");window.ga("send","pageview","/backstage");$(".artist_bio",this.el).addClass("short_bio");$(".full_bio_link",this.el).show();$(".createStation",this.el).parent().show();this.Zb=$(".backstage",this.el).data("musicid");this.ez=$(".backstage",this.el).data("musicianname");this.ok();this.Xv();fA(this.el,this.model.get("currentUser"));
this.processQueryParams();lp||$(ne).hide()},Xv:function(){var b=$(".discography .albums li",this.el).length;setTimeout(r(this,function(){if(!this.closed){var c=$(".discography .albums .scroll-content li",this.el).first().width(),d=0;$(".discography .albums .scroll-content li",this.el).each(function(){var b=1*$(this).height();b>d&&(d=b)});d+=20;$(".discography .albums .scroll-content",this.el).css("width",c*b);$(".discography .albums .scroll-content",this.el).css("height",d);0==$(".ie8").length&&ay($(".discography .albums.scroll-pane",
this.el),"artist_detail");2==ie(this.nb).length&&this.showAlbumDetail(this.nb)}}),1)},ws:function(){var b=$(".discography .albums.scroll-pane").closest(".scroll-pane");if(b&&b.is(":visible"))try{b.data("jsp").reinitialise({hideFocus:!0,verticalDragMinHeight:40,verticalDragMaxHeight:100,horizontalDragMinWidth:100,horizontalDragMaxWidth:100,horizontalGutter:0})}catch(c){}},$a:function(){this.closed||(this.ok(),this.Xv(),this.ws())},show:function(){$(this.el).show();this.ws()},ok:function(){var b=Co($(".likeButton[data-like-type=artist]",
this.el));R(Hv,b);this.cp&&R(Hv,Co(this.cp));null==this.Bb&&null!=this.model.get("currentUser")&&(this.Bb=new gA({el:$(".backstage",this.el).get(0),model:this.model,type:"music",targetId:this.Zb}))},processQueryParams:function(){for(var b=$.address.queryString().split("&"),c=0;c<b.length;c++)"bio"==b[c]&&this.fullBioLinkClick()},close:function(){this.ph&&clearInterval(this.ph);this.closed=!0;var b=$(".discography .albums.scroll-pane",this.el).data("jsp");b&&b.destroy();this.Bb&&this.Bb.close();$(this.el).remove();
this.el=null;z.pa(this)},showAlbumDetail:function(b){b=decodeURIComponent(b).replace(/\+/g," ");$(".scroll-img").each(function(){var c=$(this).children("a").attr("href"),c=decodeURIComponent(c).replace(/\+/g," ");c==b?$(this).addClass("on"):$(this).hasClass("on")&&$(this).removeClass("on")});for(var c=$(".discography .album_detail",this.el),d=0;d<c.length;d++){var e=$(c[d]);if(decodeURIComponent(e.data("url")).replace(/\+/g," ")==b)return $(this.el).is(":visible")||($("#mainContent").children().hide(),
$(this.el).show()),this.Qe?e.data("musicid")!=this.Qe.data("musicid")&&this.Qe.fadeOut(200,r(this,function(){this.dw(e);e.fadeIn(400)})):(this.dw(e),e.slideDown(400)),this.Qe=e,this.cp=$(".likeButton[data-like-type=album]",this.Qe),R(Hv,Co(this.cp)),c=this.model.get("currentUser"),c=(null!=c?c.J():1)?325:450,$(".track_link",e).truncate({width:c,after:"&hellip;&nbsp;"}),(c=$(".buy_btn",e))&&0<c.length&&(d=new Bz({buyButton:c,buyMenu:$(".dropdownmenu",e).eq(0),model:this.model}),d.Ms(this.Zb,this.ez),
d.YO(e.data("musicid")),d.Fh(c.data("itunesurl"),c.data("amazonurl"),c.data("amazondigitalasin"))),!0}return!1},getArtistHashPath:function(){var b=$(".backstage",this.el).data("url");return b?b.replace(/^(#\!?)/,""):null},events:{"click .full_bio_link":"fullBioLinkClick","click .createStation":"createStationClick","focus .albums":"albumsFocus","click .album_close":"albumClose","click .buy_btn":"buyAlbumClick","click .likeButton":"clickLikeButton","mouseover .likeButton":"mouseOverLikeButton","mouseout .likeButton":"mouseOutLikeButton",
"click .similar_artist":"similarArtistClick","click .album_link":"albumClick","click .track_link":"trackClick","click .buyButton":"buyButtonClick","click .play_button":"sampleButtonClick"},mouseOverLikeButton:function(b){jy(b)},mouseOutLikeButton:function(b){ky(b)},sampleButtonClick:function(b){$(b.currentTarget).blur();this.xb=null;var c=$(b.currentTarget).parent();if(c.hasClass("sample-inactive"))$(b.currentTarget).hide();else{if(c.hasClass("playing"))z.b(Qi);else{b=c.attr("data-sample-url");var d=
c.attr("data-gain");if(b)z.b(Pi,{url:b,gain:Number(d)}),c.addClass("playing"),c.find(".iTunes-badge").show();else return!0}return!1}},clickLikeButton:function(b){var c=this.model.get("currentUser");if(null==c||c.p())R(Dv,{onSuccessRedirect:hz()});else{var d=$(b.currentTarget);b=d.attr("data-like_id");c=d.attr("data-like-type");d=d.attr("data-like-objectid");b?z.b(vj,b):z.b(uj,{type:c,objectId:d,context:"artist_page",contextId:this.Zb,contextName:this.ez});return!1}},Xi:function(b){hy(this.el,b)},
fullBioLinkClick:function(){R($w,"artist");var b=$(".artist_bio_inner",this.el).height();$(".artist_bio",this.el).animate({"max-height":b},r(this,function(){$(".artist_bio",this.el).removeClass("short_bio").css({overflow:"","max-height":""});$(".full_bio_link",this.el).hide()}));s("link",{click:"showFullBio",source:"ArtistDetailView"},this.model.get("currentUser"));return!1},createStationClick:function(){if(mz(this.model))return R(Dv,{onSuccessRedirect:hz()}),!1;this.model.get("currentUser");z.b(Hi,
{stationCode:"mi"+this.Zb,source:"artist_page"});return!1},albumsFocus:function(b){$(b.target).blur()},dw:function(b){b.css("visibility","hidden").show();ay($(".scroll-pane",b),"album_detail");b.hide().css("visibility","visible");this.ph&&clearInterval(this.ph);this.ph=setInterval(function(){$(".jspPane",b).css("left",0)},500)},albumClose:function(){this.ph&&clearInterval(this.ph);this.Qe&&($(".scroll-img").each(function(){$(this).hasClass("on")&&$(this).removeClass("on")}),this.Qe.slideUp(200),this.Qe=
null);hz()!=this.getArtistHashPath()&&V(this.getArtistHashPath(),!0,!0);return!1},buyAlbumClick:function(){s("link",{click:"buyButton",source:"ArtistDetailView"},this.model.get("currentUser"));return!1},Az:function(){if(null!=this.xb&&0<this.xb.length){var b=$(this.xb[0]);if(!b.hasClass("sample-inactive")){var c=b.attr("data-sample-url"),d=b.attr("data-gain");z.b(Pi,{url:c,gain:Number(d)});$(b).parent(".sample").addClass("playing")}}},Nd:function(b){var c=$(".sample.playing",this.el);c.removeClass("playing");
$(".iTunes-badge").hide();b.isError?(b=c.closest(".album_detail"),b.find(".sample").addClass("sample-inactive").find("a").attr("title","Sample Unavailable"),b.find(".sample_all_btn").addClass("sample-inactive").attr("title","Sample All Unavailable"),this.xb=null):null!=this.xb&&0<this.xb.length&&b.reachedEnd&&b.url==$(this.xb[0]).attr("data-sample-url")&&(this.xb.shift(),this.Az())},similarArtistClick:function(){R($w,"artist");s("link",{click:"getRelatedArtist",source:"ArtistDetailView"},this.model.get("currentUser"))},
albumClick:function(){R($w,"album")},trackClick:function(){R($w,"song")},buyButtonClick:function(){s("link",{click:"buyButton",source:"ArtistDetailView"},this.model.get("currentUser"))}});function DA(){}
DA=Backbone.View.extend({initialize:function(){this.nb=this.options.detail_url;this.Mm=this.options.fullLyrics;this.CP=this.options.focusTraits;z.c(hf,r(this,this.Nd));z.c(He,r(this,this.ok));S(Xv,r(this,this.Xi));S(Vv,r(this,this.Cq));this.options.el&&(this.nb=$(".backstage",this.el).data("url"),this.Gj())},className:"song_detail",render:function(){var b=this.nb.split("/");eA("/content/music/song"+this.nb,{},r(this,this.fN),function(){var c="";_.each(b,function(b){b=$.trim(b);0<b.length&&"-"!=b&&
(c+=(0<c.length?" ":"")+b)});V("/search/"+c+"/song",!0,!1)},!0);return this},fN:function(b){$(this.el).append(b);this.Gj()},Gj:function(){k.debug("sending google analytics event: backstage");window.ga("send","pageview","/backstage");$(".left_col_buttons",this.el).show();$(".sample",this.el).show();var b=jp();!this.Mm&&b?$(".full_lyrics",this.el).show():b||$(".full_lyrics",this.el).hide();$(".song_features .full",this.el).hide();$(".song_features .show_more",this.el).show();this.Zb=$(".backstage",
this.el).data("musicid");this.wA=$(".backstage",this.el).data("songname");this.Xy=Ky($(".backstage",this.el));this.nb=$(".backstage",this.el).data("url");b=hz();b!=this.nb&&0!=b.indexOf("/land/song/")&&V(this.nb,!1,!1);this.ok();if((b=$(".buyButton",this.el))&&0<b.length){var c=new Bz({buyButton:b,buyMenu:$(".dropdownmenu",this.el).eq(0),model:this.model}),d=this.model.get("selectedArtist");d&&c.Ms(d.hf,d.getName());c.gA(this.Zb,this.wA);c.Fh(b.data("itunesurl"),b.data("amazonurl"),b.data("amazondigitalasin"))}this.Mm&&
de(this,function(){R(Nu,this.Xy)},100);this.CP&&(this.fullFeaturesClick(),$(window).scrollTop($("div.song_features h2",this.el).offset().top-$("#main").offset().top))},ok:function(){var b=$(".likeButton[data-like-type=song]",this.el);if(0<b.length){b=Co(b);R(Hv,b);var b=".lyricSnippet",c=".lyricSnippetClean",d=".explicitSample",e=".cleanSample",h=this.model.get("currentUser");h&&h.Wb&&(b=".lyricSnippetClean",c=".lyricSnippet",d=".cleanSample",e=".explicitSample");$(e).hide();lp()?$(d).show():$(d).hide();
jp()?(this.Mm||($(c,this.el).hide(),$(b,this.el).show()),""!=$.trim($(b+" div").text())?$(".lyrics",this.el).show():$(".lyrics",this.el).hide()):($(c,this.el).hide(),$(b,this.el).hide(),$(".lyrics",this.el).hide())}null==this.Bb&&null!=this.model.get("currentUser")&&(this.Bb=new gA({el:$(".backstage",this.el).get(0),model:this.model,type:"music",targetId:this.Zb}))},close:function(){this.Bb&&this.Bb.close();$(this.el).remove();this.el=null;z.pa(this);$z(this)},Nd:function(b){var c=$(".sample.playing",
this.el);$(".sample",this.el).removeClass("playing");$(".iTunes-badge").hide();b.isError&&(c.find("span").addClass("sample-inactive"),c.find("a").attr("title","Sample Unavailable").find("span").html("Sample Unavailable"))},Cq:function(b){if(b.o()==this.Zb)if(jp()){var c=$(".lyrics",this.el).height();$(".lyrics",this.el).css({overflow:"hidden","max-height":c});$(".lyrics .lyricSnippet",this.el).hide();$(".lyrics .lyricSnippetClean",this.el).hide();$(".lyrics .fullLyrics div",this.el).empty().append(b.Bv).parent().append($("#fullLyricsCreditsTmpl").tmpl(b.jv));
b=$(".lyrics .fullLyrics",this.el).height();$(".lyrics",this.el).animate({"max-height":b},r(this,function(){$(".lyrics",this.el).css({overflow:"","max-height":""});this.Mm&&$(window).scrollTop($("div.lyrics h2",this.el).offset().top-$("#main").offset().top)}))}else $(".lyrics",this.el).hide()},events:{"click .lyrics a.full_lyrics":"fullLyricsClick","click .song_features a":"fullFeaturesClick","click .createStation":"createStationClick","click .play_button":"sampleClick","click .buyButton":"buyButtonClick",
"click .likeButton":"clickLikeButton","click .shareButton":"clickShareButton","click .track_link":"clickTrackLink","click .album_link":"clickAlbumLink","click .artist_link":"clickArtistLink","mouseover .likeButton":"mouseOverLikeButton","mouseout .likeButton":"mouseOutLikeButton"},mouseOverLikeButton:function(b){jy(b)},mouseOutLikeButton:function(b){ky(b)},clickShareButton:function(b){var c=this.model.get("currentUser");if(null==c||c.p())R(Dv,{onSuccessRedirect:hz()});else return b=$(b.target).data("song"),
b=new Fn(b,null),s("link",{click:"shareButton",source:"SongDetailView"},this.model.get("currentUser")),R(av,{mode:"song",track:b}),!1},clickLikeButton:function(b){var c=this.model.get("currentUser");if(null==c||c.p())R(Dv,{onSuccessRedirect:hz()});else{var d=$(b.currentTarget);b=d.attr("data-like_id");c=d.attr("data-like-type");d=d.attr("data-like-objectid");b?z.b(vj,b):z.b(uj,{type:c,objectId:d,context:"song_page",contextId:this.Zb,contextName:this.wA});return!1}},Xi:function(b){hy(this.el,b)},fullLyricsClick:function(){R(Jw);
R(Nu,this.Xy);return!1},lessLyricsClick:function(){R(Kw);return!1},fullFeaturesClick:function(){$(".song_features div",this.el).fadeIn();$(".song_features a",this.el).hide();return!1},createStationClick:function(){if(mz(this.model))return R(Dv,{onSuccessRedirect:hz()}),!1;z.b(Hi,{stationCode:"mi"+this.Zb,source:"track_page"});return!1},sampleClick:function(b){$(b.currentTarget).blur();this.xb=null;var c=$(b.currentTarget).parent(".sample");if(!c.hasClass("sample-inactive")){if(c.hasClass("playing"))z.b(Qi);
else{var d=$(b.currentTarget).siblings().first();b=d.attr("data-sample-url");d=d.attr("data-gain");if(b)z.b(Pi,{url:b,gain:Number(d)}),c.addClass("playing"),$(".iTunes-badge").show();else return!0}return!1}},buyButtonClick:function(){s("link",{click:"buyButton",source:"SongDetailView"},this.model.get("currentUser"))},clickTrackLink:function(){R($w,"song");return!0},clickArtistLink:function(){R($w,"artist");return!0},clickAlbumLink:function(){R($w,"album");return!0}});function EA(){}EA=Backbone.View.extend({render:function(){if(this.model.get("currentUser").J())(new X({message:Sb()})).render(),z.b(Mh);else{var b={};b.desktopAppUrl=A._data.desktopAppUrl;$(this.el).append($("#desktopAppDownloadTmpl").tmpl(b));window.navigator.platform&&(b=window.navigator.platform.toLowerCase(),-1!=b.indexOf("win")||b.indexOf("mac"));$("#install_no_auto",this.el).show();$("#install_with_auto",this.el).hide();return this}}});function FA(){}
FA=Backbone.View.extend({initialize:function(){this.Bd=this.options.cancelHash},render:function(){var b=this.model.get("currentUser");s("account_desktopapp_page_hit",{vendor_id:u},b);$(this.el).append($("#desktopAppUpsaleTmpl").tmpl({isUserAUNZ:b.Sa,offerAnnualSub:b.Ce,monthlyPrice:py(so(b)),annualPrice:py(b.le.toString()),showTrial:b.rh,showBusinessOffer:b.Yb}))},events:{"click #upgrade_now":"upgradeNowClick","click #start_trial":"startTrialClick"},upgradeNowClick:function(){var b=$("input[name='frequency']:checked",
this.el).val();R(hv,{billingFrequency:b,cancelCallback:r(this,function(){V(this.Bd,!0,!0)})});return!1},startTrialClick:function(){V("/one/trial/start",!0,!0)}});function GA(b,c,d,e,h){this.id=HA++;this.displayName=b;this.resourcePath=c;this.previewImage=d;this.sponsored=!0===e?!0:!1;this.retired=!0===h?!0:!1}var HA=0;function IA(){}
IA=Backbone.View.extend({xk:[new GA("Default","/skins/pandoraone","skin_preview_default.png",!1,!1),new GA("Dead Days","/skins/skulls","skin_preview_skulls.png",!1,!1),new GA("The Mash","/skins/monsters","skin_preview_monsters.png",!1,!1),new GA("Purple Wave","/skins/purplewave","skin_preview_purplewave.png",!1,!1),new GA("Cosmic Rift","/skins/cosmicrift","skin_preview_cosmic.png",!1,!1),new GA("Freebird","/skins/birds","skin_preview_birds.png",!1,!1),new GA("Lullaby","/skins/night","skin_preview_night.png",
!1,!1),new GA("Deep Sea Disco","/skins/deepseadisco","skin_preview_sea.png",!1,!1),new GA("Honeycomb","/skins/honeycomb","skin_preview_honeycomb.png",!1,!1),new GA("Danger Diamond","/skins/dangerdiamond","skin_preview_dangerdiamond.png",!1,!1),new GA("Vertical Violet","/skins/profplum","skin_preview_profplum.png",!1,!1),new GA("Cassettes","/skins/cassettes","skin_preview_cassettes.png",!1,!1),new GA("Rock the Mic","/skins/rockthemic","skin_preview_rockthemic.png",!1,!0),new GA("Sunny Day","/skins/day",
"skin_preview_day.png",!1,!1),new GA("Winter Leaf","/skins/leaves","skin_preview_leaves.png",!1,!1),new GA("Blue Sky","/skins/clouds","skin_preview_clouds.png",!1,!1),new GA("Owl Hour","/skins/owl","skin_preview_owl.png",!1,!0),new GA("Gem Jam","/skins/gemjam","skin_preview_gemjam.png",!1,!0),new GA("Sasquatch","/skins/sasquatch","skin_preview_sasquatch.png",!1,!1),new GA("Pool","/skins/pool","skin_preview_pool.png",!1,!1),new GA("Beach","/skins/beach_scene_p1","skin_preview_beach_scene_p1.png",!1,
!1)],initialize:function(){z.c(Ih,r(this,this.render));S(Su,r(this,this.render));z.c(bg,r(this,this.xM));z.c(cg,r(this,this.pM));this.model.bind("change:currentSkinPath",r(this,this.eN));this.Jm=this.Xj=null;this.ce=this.xk},render:function(){if($(".skinPickerPopup").is(":visible"))return $(this.el).empty(),!1;var b=ey("skinPickerPopup",$("#skinPickerHeaderTmpl").tmpl(),"");$("body").append($(this.el).append(b));for(var b=$(".content",this.el),c=this.Kx(this.model.get("currentSkinPath")),d=0;d<this.ce.length;d++){var e=
this.ce[d];(!0!=e.retired||null!=c&&c.id==e.id)&&b.append($("#skinDefinitionTmpl").tmpl(this.ce[d]))}0==$(".ie8").length&&setTimeout(r(this,function(){ay($(".scroll-pane",this.el))}),500);return this},events:{"click .skin_definition_container":"skinDefinitionClick","closed .lightbox":"cancelClick"},skinDefinitionClick:function(b){b=this.ce[parseInt(b.currentTarget.id,10)];s("skin_switched",{valance_name:b.displayName},this.model.get("currentUser"));R(Tv,b.resourcePath);return!1},cancelClick:function(){$(this.el).empty();
return!1},eN:function(){var b=this.model.get("currentSkinPath"),c="/static/pandora_one"+b;$("#skinStyle").attr("href",me(c)?"":c+"/skin.css");this.Rz(b);return!1},Rz:function(b){try{var c=this.Kx(b);R(Uv,c);k.debug("Ping the skin tracker url "+this.Xj);if(c){if(!0===c.sponsored&&this.Xj){var d=this.Xj.replace("__SKIN__",encodeURIComponent(b.split("/")[2])),d=d.replace("__CACHEBUSTER__",je());Bp(d,function(){},function(){})}this.Jm=null}else this.Jm=b}catch(e){k.error("Exception?",e)}},xM:function(b){if(b&&
b.menuEntries){for(var c=b.menuEntries.split(/\r\n|\n|\t|\r/),d=[],e=HA=0;e<c.length;e++){var h=jQuery.trim(c[e]);if(h){var h=h.split("|"),l=h[1];d.push(new GA(h[0],"/skins/"+l,"skin_preview_"+l+".png",!0,!1))}}$.each(this.xk,function(b,c){c.id=HA++;d.push(c)});this.ce=d;this.Xj=b.skinTrackerUrl;this.Jm&&this.Rz(this.Jm)}},pM:function(){HA=0;$.each(this.xk,function(b,c){c.id=HA++});this.ce=this.xk;this.Xj=null},Kx:function(b){for(var c=this.ce.length,d=0;d<c;d++){var e=this.ce[d];if(b==e.resourcePath)return e}return null}});function JA(){}JA=Backbone.View.extend({initialize:function(){z.c(Ih,r(this,this.render))},render:function(){var b=ey("serviceUnavailablePopup",$("#serviceUnavailableHeaderTmpl").tmpl(),$("#serviceUnavailableContentTmpl").tmpl());0<$("#splash:visible").length?$("#splash").append($(this.el).append(b)):$("body").append($(this.el).append(b));b.show();return this},events:{}});function KA(){}
KA=Backbone.View.extend({initialize:function(){this.model.bind("change:currentContextualTip",r(this,this.render));$("body").append(this.el);this.Xt=!1;setTimeout(function(){var b=$(document.createElement("img")).attr("src","/img/tip/bg_tip.png");b&&b.hide()},1);z.c(Uk,r(this,this.DN));z.c(Vk,r(this,this.Aj))},className:"contextual_help_container",render:function(){var b=this.model.get("currentContextualTip");if(null==b)$(this.el).fadeOut("fast");else{if(this.Xt)return;$(this.el).hide();$(this.el).children().remove();
var c=$(b.anchorElementPath+":visible");0<c.length&&($(this.el).append($("#contextualHelpTmpl").tmpl(b)),$("#contextualHelpInitalText",this.el).show(),$("#contextualHelpMoreText",this.el).hide(),me(b.moreText)?$("#hrefShowMore",this.el).hide():$("#hrefShowMore",this.el).show(),setTimeout(r(this,function(){var b=$(c[0]),e=b.offset();if(b.is(":visible")){var h=e.left-37+b.outerWidth()/2,b=e.top+17+b.scrollTop();0<=h&&0<=b&&($(this.el).show(),$(this.el).offset({top:b,left:h}))}}),1E3))}return this},
events:{"click #tipClose":"tipCloseClick","click #hrefShowMore":"showMoreClick"},showMoreClick:function(){LA();$("#contextualHelpMoreText",this.el).fadeIn();$("#hrefShowMore",this.el).hide()},tipCloseClick:function(){$(this.el).fadeOut("fast");LA();R(Vu)},DN:function(){this.tipCloseClick();this.Xt=!0},Aj:function(){this.Xt=!1}});function MA(){}
MA=Backbone.View.extend({ii:"wwwpandoracom-20",jC:6E4,initialize:function(){this.bn=this.$m=!0;S(Mu,r(this,this.render));S(rv,r(this,this.As));S(zv,r(this,this.UI));S(Av,r(this,this.TI));S(pw,r(this,this.Xx));S(qw,r(this,this.Xx));z.c(hf,r(this,this.Nd));z.c(Rf,r(this,this.Bq));z.c(Sf,r(this,this.Oq));z.c(Uf,r(this,this.gI));z.c(Vf,r(this,this.Nq));z.c(kj,r(this,this.gJ));z.c(lj,r(this,this.Dq));z.c(Kj,r(this,this.Dq));z.c(Me,r(this,this.WI));z.c(Ef,r(this,this.bm));z.c(Cf,r(this,this.RI));z.c(Vg,
r(this,this.xq));this.model.bind("change:currentProfileInfo",r(this,this.As));this.model.bind("change:facebookAuthenticated",r(this,this.OI));this.Xz=!1;pz("/alsofollowing");$("#mainContent .profile_container_static").remove();setInterval(r(this,this.kF),this.jC)},className:"profile_container",render:function(b){var c=null,d,e={};this.xa=b.webname;e.webname=this.xa;e.showBio=!0;e.showActivityPanel=this.$m;e.showLikesPanel=this.bn;var h=this.model.get("currentProfileInfo");h&&!this.Ys()?$.extend(e,
h):(e.followState="cannotFollow",e.stationCount="",e.bookmarkCount="",e.likesCount="",e.followingCount="",e.followersCount="");this.da=b.panelType;"likes"!=this.da||this.bn||(this.da=Fu.toLowerCase());this.da!=Fu.toLowerCase()||this.$m||(this.da="stations");$(".selected",this.el).removeClass("selected");var h="#profileTmpl",l=null;this.da==Fu.toLowerCase()?(c="#profileNewsfeedTmpl",d="#profile_tab_newsfeed",l=r(this,function(){this.Sm(this.xa,0)})):"stations"==this.da?(d="#profile_tab_stations",l=
r(this,function(){this.Qz(this.xa,0)})):"bookmarks"==this.da?(c="#profileBookmarksTmpl",d="#profile_tab_bookmarks",l=r(this,function(){this.sO(this.xa)})):"likes"==this.da?(d="#profile_tab_likes",l=r(this,function(){this.Pz(this.xa)})):"following"==this.da?(d="#profile_tab_following",l=r(this,function(){this.Oz(this.xa,0)})):"followers"==this.da?(d="#profile_tab_followers",l=r(this,function(){this.Nz(this.xa,0)})):this.da==Gu.toLowerCase()?(h="#feedTmpl",d=null,l=r(this,function(){$("#feed_tab",this.el).addClass("selected");
this.Sm(this.xa,0)})):this.da==Hu.toLowerCase()?(h="#feedTmpl",d=null,l=r(this,function(){$("#connect_tab",this.el).addClass("selected");this.Uf(null,!1,0)})):k.error("invalid panel type: "+this.da);$(this.el).contents().remove();$(this.el).append($(h).tmpl(e));null!=l&&l();null!=c&&$("#contentRight",this.el).append($(c).tmpl(e));e.showBio?$("#contentRight",this.el).removeClass("content_right_nocontent"):$("#contentRight",this.el).addClass("content_right_nocontent");this.model.set({modalPanel:vu});
$("#mainContent").children().hide();$("#mainContent").append($(this.el));$(this.el).show();$(d,this.el).parent().addClass("on");this.kd();this.As();b.edit&&this.editProfileClick(null);b.panelType==Hu&&$(window).scrollTop(0);return this},Pt:function(b){var c="true"==b.attr("viewerLikedObject"),d=b.attr("objectId"),e=b.attr("objectType"),h=parseInt(b.attr("countLikes"),10),h=h+(1==h?" like":" likes");b.empty().append($("#newsfeedLikeTmpl").tmpl({viewerLikedObject:c,objectId:d,objectType:e,countLikesDesc:h}))},
Uf:function(b,c,d,e){var h=this.model.get("currentUser");null!=h&&(this.model.get("facebookAuthenticated")&&null==h.Hd?z.b(rj):(0==d&&($("#contentRight",this.el).empty().append($("#connectTmpl").tmpl({})),this.kd()),NA("/content/"+(e?"connect_fb_friends_page":"connect"),{webname:this.xa,startIndex:d,wns:c,facebookFriendIds:(h.Hd?h.Hd:[]).join(","),searchString:null==b?"":b,cachebuster:""+(new Date).getTime()},r(this,function(c,h){me(b)||$("#connect_search").val(b);var q=e?$("#facebook_friends_container",
this.el):0==d?$("#connectSearchResults",this.el):$("#connectSearchResults .results_list",this.el);this.zs(c,h,q);$("#search",this.el).hide();$(".location",this.el).truncate({width:$("#contentRight").width()-230,addtitle:!0});$(".stations",this.el).truncate({width:$("#contentRight").width()-230,addtitle:!0});lp()||$(".sample_allowed").hide();$(".iTunes-badge").hide()}))))},kd:function(){$(".btn_bg",this.el).css("visibility","visible");$(".profile_sample",this.el).show();$(".follow_button",this.el).show();
$("#search",this.el).show();var b=this.model.get("currentUser"),c=this.model.get("currentProfileInfo");if(null!=b&&null!=c){var d=this.model.get("facebookAuthenticated");d?$("#connect_find_fb_container",this.el).hide():$("#connect_find_fb_container",this.el).show();0<parseInt(this.model.get("currentProfileInfo").followingCount,10)?($(".connect_promo",this.el).hide(),$("#connect_search_help",this.el).hide()):($(".connect_promo",this.el).show(),$("#connect_search_help",this.el).show());c=Gd(c,this.SK(),
b.s==c.listenerId&&!d,this.Ys());$(".img_profile").attr("src",c);$(".img_profile").css("cursor",b.Fa?"default":"pointer");c=$('.section[listenerId="'+b.s+'"]',this.el);$(".feed_profile",c).attr("src",Gd(b,!0));wy(new ty(b),!1)}},SK:function(){return this.da==Gu.toLowerCase()||this.da==Hu.toLowerCase()},Sm:function(b,c){this.Xz||($(window).scroll(r(this,this.uR)),this.Xz=!0);$("#feed_updates_container").slideUp();var d=this.model.get("currentProfileInfo");this.model.get("currentUser");var e=this.da==
Fu.toLowerCase(),d={si:c,webname:b,followingCount:d.followingCount,only_own:e,cachebuster:""+(new Date).getTime()},h="fetchingActivity"+e,l="fetchingActivityTimeout"+e;MA[h]||(MA[h]=!0,MA[l]=setTimeout(function(){MA[h]=!1},5E3),eA("/content/newsfeed",d,r(this,function(b,d){0<=b.indexOf("feature_unavailable_error")&&(e?(this.$m=!1,this.Fs()):(R(mx),vz()),(new X({message:ec()})).render());clearTimeout(MA[l]);MA[h]=!1;"success"==d&&(0==c&&$("#contentRight",this.el).empty(),$("#contentRight",this.el).append(b));
this.kd();var t=this.model.get("currentProfileInfo"),y=this.model.get("currentUser");t.listenerId!=y.s&&"cannotFollow"==t.followState?$("#contentRight .comments",this.el).remove():(this.Bb&&this.Bb.close(),this.Bb=new gA({el:$(".profile_rCol",this.el).get(0),model:this.model,type:"profile",targetId:t.listenerId,hasMenu:!0,isActivityDelete:e}),$("#contentRight .comments .notes .comment_box",this.el).hide());$(".newsfeed_more",this.el).click(function(b){var c=$(b.target).parents(".friend_feed");$(".truncated",
c).fadeOut(200,function(){$(".long",c).fadeIn()});return!1});_.each($(".like_button_container",this.el),r(this,function(b){this.Pt($(b))}));_.each($(".like_section .section .menu",this.el),r(this,function(b){var c=$(".newsfeed_buy",b);c&&0<c.length?((new Bz({buyButton:c,buyMenu:$(".dropdownmenu",b).eq(0),model:this.model})).Fh(String(c.data("itunesurl")),String(c.data("amazonurl")),String(c.data("amazondigitalasin"))),new gz($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)).eq(1))):new gz($(".menu_dropdown",
$(b)),null,$(".dropdownmenu",$(b)))}));_.each($(".feed_hide_button",this.el),r(this,function(b){var c=this.model.get("currentUser");$(b).hasClass("follow_post")?$(b).click(r(this,function(){z.b(kj,{feedId:$(b).attr("multiFeedIds"),isActivityDelete:e,deleteCompletely:"true"==$(b).attr("deleteCompletely")});$(b).parents(".section").slideUp()})):c&&$(b).attr("listenerid")==c.s?$(b).click(r(this,function(){z.b(kj,{feedId:$(b).attr("feedId"),isActivityDelete:e,deleteCompletely:"true"==$(b).attr("deleteCompletely")});
return!1})):new OA($(b),e);$(b).closest(".section").bind("mouseenter",function(){$(".feed_hide_button",this.el).not($(b)).fadeOut();$(b).fadeIn()});$(b).closest(".section").bind("mouseleave",function(){0==$(".feed_hide_dialog[visible=true]").length&&$(b).fadeOut()})}));_.each($(".owner_profile_image, .also_profile_image",this.el),r(this,function(b){new PA($(b),{viewerListenerId:y.s,viewerIsAnon:null==y||y.p()})}))}),function(){z.b(Mh)},!0))},JG:function(b,c){eA("/content/bookmarked_tracks",{trackStartIndex:c,
webname:b,cachebuster:""+(new Date).getTime()},r(this,function(b){$("#track_bookmark_container",this.el).append(b);this.ns()}))},DG:function(b,c){eA("/content/bookmarked_artists",{artistStartIndex:c,webname:b,cachebuster:""+(new Date).getTime()},r(this,function(b){$("#artist_bookmark_container",this.el).append(b);this.ns()}))},sO:function(b){eA("/content/bookmarks",{webname:b,cachebuster:""+(new Date).getTime()},r(this,function(b,d){"success"==d&&($("#contentRight",this.el).empty().append(b),this.ns())}),
function(){z.b(Mh)},!0)},ns:function(){_.each($(".like_section .section .menu",this.el),r(this,function(b){var c=$(".like_buy",b);$(".iTunes-badge").hide();lp()||$(".play_sample").hide();c&&0<c.length?((new Bz({buyButton:c,buyMenu:$(".dropdownmenu",b).eq(0),model:this.model})).Fh(String(c.data("itunesurl")),String(c.data("amazonurl")),String(c.data("amazondigitalasin"))),new gz($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)).eq(0))):new gz($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)))}));
this.kd()},HG:function(b,c){eA("/content/stationlikes",{stationStartIndex:c,webname:b,cachebuster:""+(new Date).getTime()},r(this,function(c){$("#station_like_pages",this.el).append(c);this.Fj(b)}))},CG:function(b,c){eA("/content/albumlikes",{albumStartIndex:c,webname:b,cachebuster:""+(new Date).getTime()},r(this,function(c){$("#album_like_pages",this.el).append(c);this.Fj(b)}))},EG:function(b,c){eA("/content/artistlikes",{artistStartIndex:c,webname:b,cachebuster:""+(new Date).getTime()},r(this,function(c){$("#artist_like_pages",
this.el).append(c);this.Fj(b)}))},KG:function(b,c,d){eA("/content/tracklikes",{likeStartIndex:c,thumbStartIndex:d,webname:b,cachebuster:""+(new Date).getTime()},r(this,function(c){$("#track_like_pages",this.el).append(c);this.Fj(b)}))},Pz:function(b,c){eA("/content/likes",{webname:b,filter:c,cachebuster:""+(new Date).getTime()},r(this,this.HL),function(){z.b(Mh)},!0)},HL:function(b){0<=b.indexOf("feature_unavailable_error")&&(this.bn=!1,this.Fs(),(new X({message:ec()})).render());$("#contentRight",
this.el).empty().append(b);$(".filter_likes input").keyup(r(this,this.LG));$(".filter_likes input").focus(r(this,function(){$(".filter_likes input").hasClass("default_text")&&($(".filter_likes input").removeClass("default_text"),$(".filter_likes input").val(""))}));$(".filter_likes input").blur(r(this,this.ux));this.ux();this.Fj(this.xa);$(".iTunes-badge").hide()},ux:function(){var b=$(".filter_likes input").attr("data-filter");me(b)&&(b="Search Likes");$(".filter_likes input").addClass("default_text");
$(".filter_likes input").val(b)},LG:function(b){return 13==b.which?(this.Pz(this.xa,$(".filter_likes input").val()),!1):!0},Fj:function(b){var c=this.model.get("currentUser");c&&c.Y!=b&&(b=this.model.get("currentProfileInfo"),b=b.fullName&&0==!$.trim(b.fullName).length?b.fullName:b.webName,$(".profile_user_name").text(b),_.each($(".profile_context_name",this.el),r(this,function(b){$(b).text()==c.webName+"'s"&&$(b).text("your")})),_.each($(".like_context_stationname",this.el),r(this,function(b){$(b).data("viewer-is-owner",
!1)})));_.each($(".like_section .section .menu",this.el),r(this,function(b){var c=$(".like_buy",b);c&&0<c.length?((new Bz({buyButton:c,buyMenu:$(".dropdownmenu",b).eq(0),model:this.model})).Fh(String(c.data("itunesurl")),String(c.data("amazonurl")),String(c.data("amazondigitalasin"))),new gz($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)).eq(1))):new gz($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)))}));$(".iTunes-badge").hide();this.kd()},Qz:function(b,c){eA("/content/stations",{startIndex:c,
webname:b,cachebuster:""+(new Date).getTime()},r(this,function(b){0==c?$("#contentRight",this.el).empty().append(b):$("#stations_container",this.el).append(b);this.kd()}),function(){z.b(Mh)},!0)},Oz:function(b,c){eA("/content/following",{startIndex:c,webname:b,cachebuster:""+(new Date).getTime()},r(this,function(b,e){this.zs(b,e,0==c?$("#contentRight",this.el).empty():$("#currently_following",this.el))}),function(){z.b(Mh)},!0)},Nz:function(b,c){eA("/content/followers",{startIndex:c,webname:b,cachebuster:""+
(new Date).getTime()},r(this,function(b,e){this.zs(b,e,0==c?$("#contentRight",this.el).empty():$("#current_followers"))}),function(){z.b(Mh)},!0)},zs:function(b,c,d){if("success"==c){d.append(b);this.blurSearch();_.each($("#followers .follow_section",this.el),function(b){new gz($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)))});for(b=0<$("#currently_following .follow_section:visible",this.el).length?2:4;b<$("#suggestions .follow_section",this.el).length;b++)$("#suggestions .follow_section",
this.el).eq(b).closest("li").hide();this.kd()}},As:function(){if($(this.el).is(":visible")){$("#user_info_form",this.el).is(":visible")&&$("#user_info_form",this.el).fadeOut(400,function(){$("#user_info_container",this.el).fadeIn()});var b=this.model.get("currentProfileInfo"),c=this.model.get("currentUser");if(null==b||null==c)$("#user_info_container",this.el).empty(),$(".user_name a",this.el).hide();else{b.show_details=this.da!=Fu.toLowerCase()||b.listenerId!=c.s&&b.privateProfile?!1:!0;$.extend(b,
{showAsPrivateProfile:this.Ys()});$("#user_info_container",this.el).empty().append($("#profileUserinfoTmpl").tmpl(b));var d=c.Wb?b.bioHtml:b.bioRawHtml;d&&$("#bio_text",this.el).empty().html(d.split("\n").join("<br/>"));$(".user_name a",this.el).show();b=c.Wb?b.fullName:b.fullNameRaw;$(".user_name.self a").text(b)}this.kd()}},Ys:function(){var b=this.model.get("currentProfileInfo"),c=this.model.get("currentUser");return null==b||null==c||b.listenerId!=c.s&&b.privateProfile},events:{"focus #bookmarks_search":"searchBookmarksFocus",
"keypress #bookmarks_search":"searchBookmarks","click  .sample":"sampleClick","click .play_station":"playStation","click .img_profile":"profileImageClicked","click #load_feed_updates":"loadFeedUpdates","click .like_context_stationname":"playStation","click .like_remove_like":"likesRemoveLikeClick","click .like_create_station":"likesCreateStationClick","click .like_share":"likesShareClick","click #stations .show_more":"stationsShowMoreClick","click #currently_following .show_more":"followingShowMoreClick",
"click #current_followers .show_more":"followersShowMoreClick","click #track_like_pages .show_more":"trackLikesShowMore","click #artist_like_pages .show_more":"artistLikesShowMore","click #album_like_pages .show_more":"albumLikesShowMore","click #station_like_pages .show_more":"stationLikesShowMore","click #facebook_friends_container .show_more":"facebookFriendsShowMore","click .people_search .show_more":"peopleSearchShowMore","click #track_bookmark_container .show_more":"trackBookmarksShowMore",
"click #artist_bookmark_container .show_more":"artistBookmarksShowMore","click .like_buy_itunes":"likesBuyITunes","click .like_buy_amazon_mp3":"likesBuyAmazonMp3","click .like_buy_amazon_cd":"likesBuyAmazonCD","click .others_link":"othersLinkClick","click .like_undo":"likeUndoClick","mouseover .like_undo":"mouseOverLikeUndoButton","mouseout .like_undo":"mouseOutLikeUndoButton","click .like_likethis":"likeFomFeedClick","click .newsitem_share":"newsitemShareClick","click .playstation":"playStation",
"click .playmessage":"playMessage","click #connect_find":"connectFindClick","click .clear_input":"clearInput","keyup #connect_search":"connectSearchKeyup","click #connect_facebook_login":"connectFacebookLogin","click #edit_profile_link":"editProfileClick","click #save_profile":"saveProfileClick","click #privacy_menu_dd .profile_permissions":"privacyMenuItemClick","focus #bio":"bioTextareaFocus","blur #bio":"bioTextareaBlur","click .follow_button":"followButtonClicked","mouseover .follow_button":"followButtonMouseover",
"mouseout .follow_button":"followButtonMouseout","focus #search":"focusSearch","blur #search":"blurSearch","keyup #search":"keyupSearch","click .block":"blockListenerClick","click .bookmark_delete":"deleteBookmarkClick","click #suggestions .remove_section":"removeSuggestionSection","click #suggestions .remove":"removeSuggestion","click .station_share .playstation":"shareClick","click .song_share .newsfeed_song_name":"shareClick","click .song_share .song_name":"shareClick","click .song_share .album_name":"shareClick",
"click .song_share .artist_name":"shareClick","click .station_share .artist_name":"shareClick","click .station_share .station_name":"shareClick"},shareClick:function(){this.model.set({shareFirstImp:!0});return!0},removeSuggestionSection:function(){$("#suggestions").fadeOut()},removeSuggestion:function(b){var c=$(b.target).closest("li");c.fadeOut(400,r(this,function(){c.remove();var b=$("#suggestions li:hidden",this.el);b&&0<b.length&&b.eq(0).show();0==$("#suggestions li",this.el).length&&$("#suggestions").fadeOut()}))},
deleteBookmarkClick:function(b){var c=0<$(b.target).closest("#artistBookmarks").length,d=$(b.target).closest(".section");R(c?wv:xv,{bookmarkId:$(b.target).attr("data-bookmarkid"),section:d});return!1},Xx:function(b){$(b).fadeOut(400,r(this,function(){$(b).remove();0==$("#songBookmarks .section").length&&0==$("#artistBookmarks .section").length&&($(".profile_lCol .profile_menu li").eq(2).remove(),this.model.get("currentProfileInfo").bookmarkCount=0,window.location.hash=$("a",$(".profile_lCol .profile_menu li").eq(0)).attr("href"))}));
return!1},blockListenerClick:function(b){b=$(b.target).attr("data-listenerid");z.b(Kj,b);s("link",{click:"block",source:"ProfileView"},this.model.get("currentUser"));return!1},gI:function(b){if(this.model.get("currentProfileInfo")){var c=null;$("#followers .follow_button",this.el).each(r(this,function(d,e){$(e).attr("data-listenerid")==b&&(c=$(e))}));c&&(c.removeClass("followable"),c.removeClass("following"),c.addClass("blocked"),c.find(".follow_button_label").text("Blocked"),c.removeClass("hover"),
$(".dropdownmenu li",$(c.parent())).eq(0).hide())}},Nq:function(b){var c=this.model.get("currentProfileInfo");if(c){for(var d=null,e=["#followers","#suggestions"],h=0;h<e.length;h++)$(e[h]+" .follow_button",this.el).each(r(this,function(c,e){$(e).attr("data-listenerid")==b&&(d=$(e))}));e=null!=d;null==d&&b==c.listenerId&&(d=$(".follow_button",this.el).eq(0));null!=d&&(d.removeClass("blocked"),d.find(".follow_button_label").text("Follow"),d.addClass("followable"),d.removeClass("hover"),e?$(".dropdownmenu li",
$(d.parent())).eq(0).show():c.followState="followable")}},gJ:function(b){var c=$('.section[feedId="'+b.feedId+'"]');c.slideUp("normal",function(){c.remove()})},Dq:function(b){var c=$('.section[listenerId="'+b+'"]');c.slideUp("normal",function(){c.remove()})},blurSearch:function(){var b=""+$("#search",this.el).val();b&&0!=jQuery.trim(b).length||($("#search",this.el).val("Search Friends"),$("#search",this.el).addClass("empty"))},focusSearch:function(){$("#search",this.el).hasClass("empty")&&($("#search",
this.el).val(""),$("#search",this.el).removeClass("empty"))},keyupSearch:function(){var b=jQuery.trim(""+$("#search",this.el).val()).toLowerCase();$("#followers .follow_section",this.el).each(function(c,d){0>jQuery.trim(""+$(".listener_info .listener_name",$(d)).text()).toLowerCase().indexOf(b)?$(d).fadeOut("fast"):$(d).show()})},Bq:function(b){var c=this.model.get("currentProfileInfo");if(c){var d=null;b.webName==c.webName?(d=$("#"+b.ui_id),this.model.get("currentProfileInfo").followState="following"):
($(".follow_button",this.el).each(r(this,function(c,h){$(h).data("webname")==b.webName&&(d=$(h))})),d&&(c=d.closest("li"))&&0<c.length&&!c.is(":visible")&&c.fadeIn());d&&(d.removeClass("followable"),d.addClass("following"),d.removeClass("hover"),d.find(".follow_button_label").text("Following"))}},Oq:function(b){var c=this.model.get("currentProfileInfo");if(c)if(this.da==Gu.toLowerCase())this.Dq(b.listenerId);else{var d=null;b.webName==c.webName?(d=$("#"+b.ui_id),this.model.get("currentProfileInfo").followState=
"followable"):$(".follow_button",this.el).each(r(this,function(c,h){$(h).data("webname")==b.webName&&(d=$(h))}));d&&(d.removeClass("following"),d.addClass("followable"),d.removeClass("hover"),d.find(".follow_button_label").text("Follow"))}},followButtonClicked:function(b){var c=this.model.get("currentUser");if(null==c||c.p())R(Dv,{onSuccessRedirect:hz()});else{if(!$(b.currentTarget).hasClass("cannotFollow"))if($(b.currentTarget).data("webname")?c=$(b.currentTarget).data("webname"):(c=this.model.get("currentProfileInfo"),
c=c.webName),$(b.currentTarget).hasClass("followable"))z.b(Ij,{webName:c,ui_id:b.currentTarget.id}),0<$(b.currentTarget).closest("#suggestions").length&&this.removeSuggestion(b);else if($(b.currentTarget).hasClass("following")){if(z.b(Jj,{webName:c,ui_id:b.currentTarget.id}),$(b.currentTarget).data("webname")&&"following"==jQuery.trim(""+$("#followers h2").text()).toLowerCase()){var d=$(b.currentTarget).closest(".follow_section");d.fadeOut(400,function(){d.remove()})}}else $(b.currentTarget).hasClass("blocked")?
(c=null,$(b.currentTarget).attr("data-listenerid")?c=$(b.currentTarget).attr("data-listenerid"):(c=this.model.get("currentProfileInfo"),c=c.listenerId),z.b(Lj,c)):k.error("Unhandled follow state: ",$(b.currentTarget));return!1}},followButtonMouseover:function(b){$(b.currentTarget).hasClass("cannotFollow")||$(b.currentTarget).addClass("hover");$(b.currentTarget).hasClass("followable")?$(b.currentTarget).find(".follow_button_label").text("Follow"):$(b.currentTarget).hasClass("following")?$(b.currentTarget).find(".follow_button_label").text("Unfollow"):
$(b.currentTarget).hasClass("blocked")&&$(b.currentTarget).find(".follow_button_label").text("Unblock")},followButtonMouseout:function(b){$(b.currentTarget).hasClass("cannotFollow")||$(b.currentTarget).removeClass("hover");$(b.currentTarget).hasClass("followable")?$(b.currentTarget).find(".follow_button_label").text("Follow"):$(b.currentTarget).hasClass("following")?$(b.currentTarget).find(".follow_button_label").text("Following"):$(b.currentTarget).hasClass("blocked")&&$(b.currentTarget).find(".follow_button_label").text("Blocked")},
profileImageClicked:function(){var b=this.model.get("currentProfileInfo");b&&b.is_owner&&(this.model.get("facebookAuthenticated")||z.b(pj));return!1},loadFeedUpdates:function(){this.Sm(this.xa,0);return!1},kF:function(){if($(this.el).is(":visible")&&this.da==Gu){var b=$(".section[feedIndex='1']");0<b.length&&z.b(tj,{webname:this.xa,lastFeedId:b.attr("feedId")})}},WI:function(b){0<b&&(b=b+" New Post"+(1<b?"s":""),$("#feed_updates_container",this.el).empty().append($("#feedUpdatesNoticeTmpl").tmpl({text:b})),
$("#feed_updates_container").slideDown())},OI:function(){var b=this.model.get("currentUser");if(null!=b&&this.model.get("facebookAuthenticated")){var c=this.model.get("currentProfileInfo");null!=c&&c.webName==b.Y&&(c.fbId=b.Fa,null!=b.Hd||z.b(rj))}$(this.el).is(":visible")&&(this.da==Hu?this.Uf(null,!1,0,!1):this.kd())},bioTextareaBlur:function(){0==jQuery.trim(""+$("#bio",this.el).val()).length&&($("#bio",this.el).val(tc),$("#bio",this.el).addClass("default_text"))},bioTextareaFocus:function(){$("#bio",
this.el).hasClass("default_text")&&($("#bio",this.el).val(""),$("#bio",this.el).removeClass("default_text"))},privacyMenuItemClick:function(b){$(b.target).hasClass("profile_private")?($("#privacy_menu",this.el).removeClass("profile_public"),$("#privacy_menu",this.el).addClass("profile_private"),$("#privacy_menu",this.el).text(rc),$("#privacy",this.el).val("private")):($("#privacy_menu",this.el).removeClass("profile_private"),$("#privacy_menu",this.el).addClass("profile_public"),$("#privacy_menu",
this.el).text(sc),$("#privacy",this.el).val("public"));return!1},saveProfileClick:function(){R(hx);var b=this.model.get("currentProfileInfo"),c=$("#bio",this.el).val();1024<c.length&&(c=c.substring(0,1023));b={webName:b.webName,fullName:$("#fullname",this.el).val(),isProfilePrivate:"private"==jQuery.trim(""+$("#privacy",this.el).val()).toLowerCase(),homeTown:$("#hometown",this.el).val(),school:$("#school",this.el).val(),employer:$("#employer",this.el).val(),bio:$("#bio",this.el).hasClass("default_text")?
"":c};z.b(Hj,b);return!1},editProfileClick:function(){R(hx);var b=this.model.get("currentProfileInfo");$("#user_info_container",this.el).fadeOut(400,r(this,function(){$("#user_info_form",this.el).empty().append($("#profileUserinfoFormTmpl").tmpl(b));new gz($("#privacy_menu",this.el),null,$("#privacy_menu_dd",this.el));this.bioTextareaBlur();$("#user_info_form",this.el).fadeIn()}));return!1},searchBookmarksFocus:function(){"Search Bookmarks"==$("#bookmarks_search input",this.el).val()&&$("#bookmarks_search input",
this.el).val("")},searchBookmarks:function(){clearTimeout(this.YE);this.YE=setTimeout(function(){var b=$("#bookmarks_search input",this.el).val().toLowerCase();$(".like_section:visible",this.el).each(r(this,function(c,d){var e=$(d);$(".section",e).each(r(this,function(c,d){var e=$(d),h=e.text().toLowerCase();me(b)||(0<=h.indexOf(b)?e.show():e.hide())}));if(me(b)){var h=$(".section",e);if(5<h.length)for($(".show_more",e).show(),e=0;e<h.length;e++)5>e?$(h[e]).show():$(h[e]).hide();else $(".show_more",
e).hide(),h.show()}else $(".show_more",e).hide()}))},500)},stationsShowMoreClick:function(b){"stations"==this.da&&(b=parseInt($(b.target).data("nextstartindex"),10),$("#stations .show_more").fadeOut("fast"),this.Qz(this.xa,b))},followingShowMoreClick:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$(".show_more",this.el).fadeOut("fast");this.Oz(this.xa,b)},followersShowMoreClick:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$(".show_more",this.el).fadeOut("fast");this.Nz(this.xa,
b)},trackLikesShowMore:function(b){var c=parseInt($(b.target).data("nextlikestartindex"),10);b=parseInt($(b.target).data("nextthumbstartindex"),10);$("#track_like_pages .show_more",this.el).fadeOut("fast");this.KG(this.xa,c,b)},artistLikesShowMore:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$("#artist_like_pages .show_more",this.el).fadeOut("fast");this.EG(this.xa,b)},albumLikesShowMore:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$("#album_like_pages .show_more",
this.el).fadeOut("fast");this.CG(this.xa,b)},stationLikesShowMore:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$("#station_like_pages .show_more",this.el).fadeOut("fast");this.HG(this.xa,b)},facebookFriendsShowMore:function(b){$(b.target).hide();this.Uf("",!1,parseInt($(b.target).attr("data-nextStartIndex"),10),!0);return!1},peopleSearchShowMore:function(b){$(b.target).hide();this.Uf($.trim($(".search_term",this.el).text()),!1,parseInt($(b.target).attr("data-nextStartIndex"),10),
!1);return!1},artistBookmarksShowMore:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$("#artist_bookmark_container .show_more",this.el).fadeOut("fast");this.DG(this.xa,b)},trackBookmarksShowMore:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$("#track_bookmark_container .show_more",this.el).fadeOut("fast");this.JG(this.xa,b)},likesShareClick:function(b){var c=$(b.target).data("song"),d=$(b.target).data("album");b=$(b.target).data("station");c?(c=new Fn(c,null),s("share",
{share_object:"song",source:"ProfileView",email:"false",pandora:"true",facebook:"false",twitter:"false",object_id:c.o()},this.model.get("currentUser")),R(av,{mode:"song",track:c})):d?(R(av,{mode:"album",album:d}),s("share",{share_object:"album",source:"ProfileView",email:"false",pandora:"true",facebook:"false",twitter:"false",object_id:d.musicId},this.model.get("currentUser"))):b&&(c=Cn(b),R(av,{mode:"station",station:c}),s("share",{share_object:"station",source:"ProfileView",email:"false",pandora:"true",
facebook:"false",twitter:"false",object_id:c.e()},this.model.get("currentUser")));return!1},likesCreateStationClick:function(b){var c=$(b.target).attr("data-songid");$(b.target).attr("data-albumid");var d=$(b.target).attr("data-artistid");b=$(b.target).attr("data-data-stationid");this.model.get("currentUser");c?z.b(Hi,{stationCode:"fb"+c,source:"profile_page"}):d?z.b(Hi,{stationCode:"fb"+d,source:"profile_page"}):b&&(isNaN(b)?z.b(Hi,{stationCode:b,source:"profile_page"}):R(Tu,b));return!1},likesRemoveLikeClick:function(b){var c=
""+$(b.target).attr("data-likeid"),d=c.indexOf(".");-1<d?R(dv,{isPositive:!0,stationID:c.substring(d+1),musicID:[c.substring(0,d)]}):z.b(vj,c);this.pj=b;return!1},bm:function(){if(null!=this.pj){var b=$(this.pj.target).closest(".section"),c=$(this.pj.target).parents(".like_section");b.fadeOut(400,function(){b.remove();$(".section_count",c).text("("+$(".section",c).length+")");var d=$(".count",$("#profile_tab_likes",this.el).parent()),e=parseInt(d.text(),10);d.text(e-1)});var d=$(this.pj.target).closest(".section_count"),
e=d.text();d.text(parseInt(e,10)-1);this.pj=null}},likesBuyITunes:function(b){b=$(b.target).data("itunesurl");window.open(b+"&ct=Web","_blank");return!1},likesBuyAmazonMp3:function(b){b=$(b.target).data("amazonurl");window.open(b+"&tag="+this.ii,"_blank");return!1},likesBuyAmazonCD:function(b){b=$(b.target).data("amazondigitalasin");window.open("http://www.amazon.com/dp/"+b+"/?&tag="+this.ii,"_blank");return!1},othersLinkClick:function(b){b=$(b.target).attr("webnames");this.da=Hu;$(this.el).empty().append($("#feedTmpl").tmpl({}));
$("#connect_tab",this.el).addClass("selected");this.Uf(b,!0,0,!1);V("/alsofollowing",!0,!0);return!1},likeFomFeedClick:function(b){k.debug("clicked likesFomFeedClick");var c=this.model.get("currentUser");if(null==c||c.p())return R(Dv,{onSuccessRedirect:hz()}),!1;var d=$(b.target).parents(".like_button_container"),c=d.attr("objectId"),d=d.attr("objectType");b=$(b.target).parents(".section").attr("webname");$(".like_button_container",this.el).filter('[objectId="'+c+'"]').each(r(this,function(b,c){var d=
$(c);d.attr("countLikes",parseInt(d.attr("countLikes"),10)+1);d.attr("viewerLikedObject","true");this.Pt(d)}));z.b(uj,{type:this.Hf(d),objectId:c,context:"feed_page",contextId:b,contextName:b});return!1},Hf:function(b){if("like_artist"==b)b="artist";else if("like_album"==b)b="album";else if("like_song"==b)b="song";else if("like_station"==b)b="station";else if("station_create"==b)b="station";else if("station_listen"==b)b="station";else if("station_share"==b)b="station";else if("station_comment"==b)b=
"station";else if("song_share"==b)b="song";else throw"invalid type: "+b;return b},likeUndoClick:function(b){var c=$(b.target).parents(".like_button_container");b=c.attr("objectId");c=c.attr("objectType");$(".like_button_container",this.el).filter('[objectId="'+b+'"]').each(r(this,function(b,c){var h=$(c);if("true"==h.attr("viewerIsOwner")&&0==h.attr("objectType").indexOf("like_")){var l=h.parents(".section");l.slideUp("normal",function(){l.remove()})}else h.attr("countLikes",parseInt(h.attr("countLikes"),
10)-1),h.attr("viewerLikedObject","false"),this.Pt(h)}));z.b(yj,new Bo(this.Hf(c),b));return!1},mouseOverLikeUndoButton:function(b){$(b.target).text("Undo");$(b.target).parent().removeClass("liked").addClass("undo")},mouseOutLikeUndoButton:function(b){$(b.target).text("You like this");$(b.target).parent().removeClass("undo").addClass("liked")},newsitemShareClick:function(){k.info("newsitemShareClick");return!1},connectSearchKeyup:function(b){13==b.which&&this.connectFindClick(b);return!0},connectFindClick:function(b){R(hx);
b=$("#connect_search",$(b.target).parent()).val();this.Uf(b,!1,0,!1)},clearInput:function(b){$("#connect_search",$(b.target).parent()).val("").focus()},connectFacebookLogin:function(){z.b(pj,r(this,this.kd))},playStation:function(b){var c=$(b.target).attr("data-station-id"),d=$(b.target).data("music-id");b=!0==$(b.target).data("viewer-is-owner")||"true"==$(b.target).data("viewer-is-owner");this.model.get("currentUser");me(c)?z.b(Hi,{stationCode:"mi"+d,source:"profile_page"}):(d=this.model.get("stationList").detect(function(b){return b.e()==
c}),b&&d?R(Tu,c):z.b(Hi,{stationCode:"fs"+c,source:"profile_page"}));R(Lu);return!1},playMessage:function(b){var c=$(b.target).data("artist-uid-hexed");b=$(b.target).data("artist-message-id-hexed");z.b(Hi,{stationCode:"mi"+c,artistMessageArtistUid:c,artistMessageId:b});R(Lu);return!1},UI:function(b){if(this.da!=Gu)return!1;1==parseInt(b.parents(".section").attr("feedIndex"),10)&&$("#profile_tip_spacer",this.el).slideDown()},TI:function(b){if(this.da!=Gu)return!1;1==parseInt(b.parents(".section").attr("feedIndex"),
10)&&$("#profile_tip_spacer",this.el).slideUp()},uR:function(){if(!$(this.el).is(":visible")||this.da!=Gu&&this.da!=Fu||0==$(".user_feed .section").length)return!1;if($(window).scrollTop()>$(".user_feed .section").eq(-1).offset().top-$(window).height()){var b=parseInt($(".next_newsfeed_start_index:last").text(),10);0<b&&(k.info("HEY LETS GRAB SOME MORE ACTIVITY"),this.Sm(this.xa,b))}},Nd:function(b){var c=$(".sample.playing",this.el);c.removeClass("playing");c.parent(".btn_bg").removeClass("playing");
$(".sample_text").show();$(".iTunes-badge").hide();b.isError&&(0<c.children("a").length?c.addClass("sample-inactive").find("a").attr("title","Sample Unavailable").find("span").html("Sample Unavailable"):c.addClass("sample-inactive").html("No Sample").parent(".btn_bg").addClass("disabled"));null!=this.xb&&0<this.xb.length&&b.reachedEnd&&b.url==$(this.xb[0]).attr("data-sample-url")&&(this.xb.shift(),this.Az())},sampleClick:function(b){$(b.target).blur();var c=$(b.target).parent(".sample");0===c.size()&&
(c=$(b.target));c.hasClass("sample-inactive")||(c.hasClass("playing")?0>$(b.target).attr("class").indexOf("iTunes-badge")?(z.b(Qi),c.removeClass("playing"),c.parent(".btn_bg").removeClass("playing"),b=c.data("trackname"),$(".iTunes-badge."+b).hide(),$(".sample_text."+b).show()):(b=$(b.target).attr("href"),window.open(b,"_blank")):(z.b(Pi,{url:c.data("sampleurl"),gain:null!=c.data("samplegain")?Number(c.data("samplegain")):0}),c.addClass("playing"),c.parent(".btn_bg").addClass("playing"),b=c.data("trackname"),
$(".iTunes-badge."+b).show(),$(".sample_text."+b).hide()))},RI:function(){this.da==Hu.toLowerCase()&&setTimeout(r(this,function(){this.Uf(null,!1,0,!1)}),100)},xq:function(b){this.bn=b.NEW_SITE_LIKES_LIST;this.$m=b.NEW_SITE_ACTIVITY_LIST;this.Fs()},Fs:function(){0<=hz().indexOf("/profile")&&this.model.get("profilePanelType")&&this.model.get("currentProfileInfo")&&this.render({panelType:this.model.get("profilePanelType"),webname:this.model.get("currentProfileInfo").webName,edit:!1})}});var QA="info",RA="privacy",SA="notices",TA="artistMessages",UA="upgrade",VA="billing",WA="receipts",XA="audioQuality",YA="installDesktopApp";function ZA(){}
ZA=Backbone.View.extend({initialize:function(){this.gl=!1;this.Dj=null;this.nw=!1;this.pf=null;this.On=5E3;this.yk="__USE_EXISTING__";z.c(lf,r(this,this.DK));z.c(kf,r(this,this.QH));z.c(pf,r(this,this.LI));z.c(of,r(this,this.KI));z.c(qf,r(this,this.JI));z.c(If,r(this,this.Md));z.c(Jf,r(this,this.Vx));z.c(Kf,r(this,this.gy));z.c(Lf,r(this,this.Vx));z.c(Mf,r(this,this.gy));z.c(Qf,r(this,this.zq));z.c(Ah,r(this,this.CI));z.c(yg,r(this,this.qy));z.c(ql,r(this,this.wI));z.c(rl,r(this,this.$I));S(Sv,r(this,
this.hI));this.model.bind("change:facebookAuthenticated",r(this,this.qy));this.model.bind("change:twitterAuthenticated",r(this,this.Ot));this.bind("show",r(this,this.PJ))},el:$("#mainContent .accountSettings"),currentTab:null,PJ:function(b){R(gx);b==QA?this.lE():b==RA?this.bO():b==SA?this.WL():b==TA?this.HE():b==UA?this.fR():b==VA?this.VE():b==WA?this.lO():b==XA?this.ME():b==YA&&this.eG();this.w3=b},jj:function(){$(".submit_btn",this.el).css("opacity","1.0");$(".submit_btn",this.el).css("filter",
"alpha(opacity=100)")},lE:function(){var b=this.model.get("currentUser"),c=this.model.get("monthlyListening"),d={};"EXPIRED_SUBSCRIBER"==b.u&&(window.location="/");var e=b.zr;d.usedHours=0;d.capPercent=0;c&&(c=Math.round(Number(c)/60),d.usedHours=Math.round(c/60),d.capPercent=c/(60*e)*100);d.capHours=e;d.isSubscriber=b.ab();d.isMultiDayPassSubscriber=b.tj;d.paymentMethod=b.ds;d.plan="MONTHLY"===b.Ya()?"Monthly":"Annual"+(b.S()?" (Business)":"");d.duration="MONTHLY"===b.Ya()?"month":"year";d.showAutoRenew=
!this.gl;d.autoRenew=b.of;e=parseInt(b.od,10);c=new Date((new Date).getTime()+864E5*e);d.subscriptionDaysLeft=e;d.expireDescription=0==e?"today":1==e?"within one day":"in "+e+" days";d.expirationDate=c.format("mmmm d, yyyy");d.username=b.Ka;d.birthyear=b.ri;d.zipcode=b.Eb();b.Cf==Na()?d.male="checked":d.female="checked";b.Wb?d.explicitNo="checked":d.explicitYes="checked";b.aw||(d.explicitDisable="disabled",d.explicitGrey="explicitContent");d.pwc2016=A._data.pwc2016OptInAllowed||!1;b=$("#accountSettingsTmpl").tmpl(d);
$('input[name="explicit_content"]',b).click({ne:this},this.vG);$("#emailPIN",b).click({ne:this},this.Qp);$("input,select",b).click(r(this,this.jj));$("#rescueEmail",this.el).val("");$("#pin",this.el).val("");$("#pinUnlock",this.el).val("");this.Jb("account");$(".content_main",this.el).append(b);this.MN=$("#auto-renew-explanation",this.el).html();$("#auto-renew-explanation",this.el).truncate({width:"490",after:" &hellip;",center:!1});$(this.el).show();this.nw&&this.eR();return!1},eR:function(){$(".submit_btn",
this.el).css("opacity","1.0");$(".submit_btn",this.el).css("filter","alpha(opacity=100)");if(Ix(this.pf.name))$(".usernameFieldError",this.el).text(this.pf.message).fadeIn(),$(".usernameFieldError",this.el).addClass("nag_message_color"),$("#username",this.el).addClass("nag_border");else if(Jx(this.pf.name)||Kx(this.pf.name)||Lx(this.pf.name))$(".zipCodeFieldError",this.el).text(this.pf.message).fadeIn(),$(".zipCodeFieldError",this.el).addClass("nag_message_color"),$("#zipcode",this.el).addClass("nag_border")},
bO:function(){var b=this.model.get("currentUser");"EXPIRED_SUBSCRIBER"==b.u&&(window.location="/");var c=$("#privacyTmpl").tmpl({});b.fq||$(".autoShareOptions",c).hide();var d=b.Fl,e=b.Og,h=b.Ng,l=b.Mg;this.mi=d;this.pi=e;this.oi=h;this.ni=l;b.kh?($('input[name="profile_privacy"][value="private"]',c).prop("checked",!0),this.mv(c)):($('input[name="profile_privacy"][value="public"]',c).prop("checked",!0),$('input[name="autoShareListens"]',c).prop({checked:e,disabled:!d}),$('input[name="autoShareLikes"]',
c).prop({checked:h,disabled:!d}),$('input[name="autoShareFollows"]',c).prop({checked:l,disabled:!d}),$('input[name="autoShare"]',c).prop("checked",d),$('input[name="allow_profile_notes"]',c).prop("checked",!b.Ip));this.Jb(RA);$(".content_main",this.el).append(c);$(".submit_btn",this.el).bind("click",{ne:this},r(this,this.Gz));$("input",c).click(r(this,this.jj));this.Ot();this.ym=null;$(this.el).show();return!1},mv:function(b){b=b||this.el;$('input[name="autoShareListens"]',b).prop({checked:!1,disabled:!0});
$('input[name="autoShareLikes"]',b).prop({checked:!1,disabled:!0});$('input[name="autoShareFollows"]',b).prop({checked:!1,disabled:!0});$('input[name="autoShare"]',b).prop({checked:!1,disabled:!0});$('input[name="allow_profile_notes"]',b).prop({checked:!1,disabled:!0})},qy:function(){this.model.get("facebookAuthenticated")||($('input[name="autoShare"]',this.el).prop("checked",!1),$('input[name="autoShareListens"]',this.el).prop({checked:!1,disabled:!0}),$('input[name="autoShareLikes"]',this.el).prop({checked:!1,
disabled:!0}),$('input[name="autoShareFollows"]',this.el).prop({checked:!1,disabled:!0}));this.Ot()},wI:function(){(new X({message:"error"})).render()},Ot:function(){var b=this.model.get("currentUser");this.model.get("facebookAuthenticated")?($(".facebook.connectButton",this.el).addClass("connected"),$(".facebook.connectButton",this.el).text("Connected"),$(".serviceDescription.connected img",this.el).attr("src","https://graph.facebook.com/"+b.Fa+"/picture?type=square"),$(".serviceDescription.connected span",
this.el).text(b.mc),$(".serviceDescription.connected",this.el).show(),$(".serviceDescription.disconnected",this.el).hide()):($(".facebook.connectButton",this.el).removeClass("connected"),$(".facebook.connectButton",this.el).text("Connect"),$(".serviceDescription.disconnected",this.el).show(),$(".serviceDescription.connected",this.el).hide());this.model.get("twitterAuthenticated")?($(".twitter.connectButton",this.el).addClass("connected"),$(".twitter.connectButton",this.el).text("Connected")):($(".twitter.connectButton",
this.el).removeClass("connected"),$(".twitter.connectButton",this.el).text("Connect"))},WL:function(){var b=this.model.get("currentUser");"EXPIRED_SUBSCRIBER"==b.u&&(window.location="/");var c={};c.showArtistPromoEmails=void 0!=b.zf;c=$("#noticesTmpl").tmpl(c);b.Al&&$('input[name="notices_pandora"]',c).prop("checked","checked");b.Mr&&$('input[name="notices_friends"]',c).prop("checked","checked");b.Lr&&$('input[name="notices_follow"]',c).prop("checked","checked");void 0!=b.zf&&b.zf&&$('input[name="notices_artists"]',
c).prop("checked","checked");this.Jb(SA);$(".content_main",this.el).append(c);$(".submit_btn",this.el).bind("click",{ne:this},this.XL);$("input",c).click(r(this,this.jj));$(this.el).show();return!1},HE:function(){for(var b=this.model.get("currentUser"),c=this.model.get("stationList").models,b=b.mm(),d={},e=[],h=0;h<c.length;h++){var l=c[h],p=l.mm();void 0!=p&&e.push({id:l.e(),label:l.ca(),isChecked:b?p:b})}d.stations=e;d.isGlobalEnabled=b;c=$("#artistMessagesTmpl").tmpl(d);this.Jb(TA);$(".content_main",
this.el).append(c);$(".submit_btn",this.el).bind("click",{ne:this},this.IE);$('input[name="global_artist_message"]',c).change({ne:this},this.GE);b&&$('input[name="global_artist_message"]',c).prop("checked","checked");$("input",c).click(r(this,this.jj));$(this.el).show();return!1},fR:function(){this.Jb(UA);(new $A({model:this.model,referrer:"accountUpgrade",el:$(".content_main",this.el),cancelHash:"/account/upgrade"})).render();$(this.el).show();return!1},eG:function(){this.Jb(YA);var b=this.model.get("currentUser");
(b&&b.J()?new FA({model:this.model,el:$(".content_main",this.el),cancelHash:"/account/desktopApp"}):new EA({model:this.model,el:$(".content_main",this.el),cancelHash:"/account/desktopApp"})).render();$(this.el).show();setTimeout(r(this,function(){$(".app_content_right").css("bogus","")}),100);return!1},ME:function(){this.Jb(XA);var b=this.model.get("currentUser");(b&&b.J()?new aB({model:this.model,el:$(".content_main",this.el),cancelHash:"/account/audioQuality"}):new bB({model:this.model,el:$(".content_main",
this.el),cancelHash:"/account/audioQuality"})).render();$(this.el).show();return!1},VE:function(){var b=this.model.get("currentUser");if(b&&eo(b)){var c="App Store";me(b.ck)||(c=b.ck);c=$("#subscriberVendorTmpl").tmpl({subscriberVendor:c,monthlyPrice:py(so(b)),hidePrice:b.tQ,isUserAUNZ:b.Sa});this.Jb(VA);$(".content_main",this.el).append(c);$(this.el).show()}else b&&b.ab()&&b.tj?(c=$("#multipassTmpl").tmpl({}),this.Jb(VA),$(".content_main",this.el).append(c),$(this.el).show()):b&&b.ab()&&"PAYPAL"==
b.ds?(c=b.S(),this.A=b.Ya(),c=$("#subscriberPaypalTmpl").tmpl({mode:c?"business":b.ab()?"subscriber":"payToPlay",subscriptionTitle:c?"Pandora for Business":"Pandora Plus",subscriptionTitleWithTagline:c?"Pandora for Business":"Pandora Plus - Ad Free, More Skips, and Fewer Timeouts",renewal_period:ry(this.A),renewal_amount:py(qy(b,this.A)),expirationDate:(new Date((new Date).getTime()+864E5*parseInt(b.od,10))).format("m/d/yy"),isUserAUNZ:b.Sa,annualPrice:py(b.le.toString()),monthlyPrice:py(so(b)),billingFrequency:this.A,
offerAnnualSub:b.Ce,username:b.Ka,showBusinessOffer:!c&&b.Yb}),this.Jb(VA),$(".content_main",this.el).append(c),sy(this.el,b.of),$(this.el).show()):z.b(zj,b.S()?"business":"p1");s("p1_billing_page_hit",{vendor_id:u},b);return!1},lO:function(){var b=this.model.get("currentUser");s("business_receipt_click",{vendor_id:u},b);z.b(pl,b.s)},previousReceiptDetail:function(){0!=this.Tf&&(this.Tf--,this.ft())},nextReceiptDetail:function(){this.Tf!=this.xh.length-1&&(this.Tf++,this.ft())},viewReceiptDetails:function(b){b=
b.target.id;for(var c in this.xh)if(this.xh[c].id==b){this.Tf=c;break}this.ft()},ft:function(){this.Jb(WA);var b=this.xh[this.Tf];b.moreLink=this.Tf<this.xh.length-1;b.lessLink=0<this.Tf;var c=(new cB({model:this.model})).render(b,"#receiptDetail").el;$(".content_main",this.el).append(c);c=$("."+WA+"Tab",this.el);c.hasClass("receiptClicked")||c.addClass("receiptClicked");$(this.el).show();s("business_view_receipt",{vendor_id:u,transaction_id:b.transactionId,transaction_date:b.date},this.model.get("currentUser"));
V("/account/receipts/view/"+b.id,!0,!0,!0)},exitReceiptDetails:function(){this.gt()},$I:function(b){this.xh=b;this.gt()},gt:function(){this.Jb(WA);var b=$("#receiptsTmpl").tmpl({});$("tbody",b).append($("#receiptRow").tmpl(this.xh));$(".content_main",this.el).append(b);$(this.el).show();V("/account/receipts",!0,!1,!0)},Md:function(b,c,d){if((c=hz())&&0<=c.indexOf("/account")||d)this.Jb(VA),d=this.model.get("currentUser"),this.jc=new dB({model:this.model}),b=this.jc.render(b,"#BillingTmpl","subscriber",
!1,!1,d.Ya(),null).el,$(".content_main .settings_lCol").next().empty(),$(".content_main",this.el).append(b),this.jc.dP(),$("input",this.el).click(r(this,this.jj)),$(".payment_form",this.el).show(),$(this.el).show()},zq:function(){var b=hz();if(b&&0<=b.indexOf("/account"))return this.gl=!0,this.Md({},null,!0),(new X({message:ab()})).render(),!1},gy:function(){var b=this.model.get("currentUser");this.gl=!1;this.A=b.Ya();(new X({message:db()})).render();sy(this.el,b.of);$("#amount.renewal_summary",this.el).text(py(qy(b,
this.A)));$("#period.renewal_summary",this.el).text(ry(this.A))},CI:function(b){this.K&&this.K();b=b&&b.code==m.d.Se()?ia():Rb(["Please try again later or contact customer support."]);(new X({message:b})).render()},Vx:function(b){this.gl=!1;this.jc&&this.jc.$i(b)},settingsFormSubmit:function(){R(gx);return!1},Gz:function(){function b(){z.b(Ai,{autoShareEnabled:d,autoShareTrackPlay:e,autoShareLikes:h,autoShareFollows:l,userInitiated:!0})}R(gx);var c="public"==$('input[name="profile_privacy"]:checked',
this.el).val(),d=1==$('input[name="autoShare"]:checked',this.el).length,e=1==$('input[name="autoShareListens"]:checked',this.el).length,h=1==$('input[name="autoShareLikes"]:checked',this.el).length,l=1==$('input[name="autoShareFollows"]:checked',this.el).length,p=1==$("input[name=allow_profile_notes]:checked",this.el).length,q=this.model.get("currentUser");c&&(this.model.get("facebookAuthenticated")?b():d&&z.b(pj,r(this,function(c){c&&b()})));z.b(zi,{isProfilePrivate:!c,disallowComments:!p,optOut:!q.Al,
noNotifyOnNote:!q.Mr,noNotifyOnFollow:!q.Lr,artistPromoEmailsEnabled:void 0!=q.zf?q.zf:null});this.ym=null;return!1},XL:function(b){R(gx);var c=1==$("input[name=notices_pandora]:checked",this.el).length,d=1==$("input[name=notices_friends]:checked",this.el).length,e=1==$("input[name=notices_follow]:checked",this.el).length,h=1==$("input[name=notices_artists]",this.el).length?1==$("input[name=notices_artists]:checked",this.el).length:null;b=b.data.ne.model.get("currentUser");z.b(zi,{isProfilePrivate:b.kh,
disallowComments:b.Ip,optOut:!c,noNotifyOnNote:!d,noNotifyOnFollow:!e,artistPromoEmailsEnabled:h});return!1},IE:function(b){R(gx);b.data.ne.model.get("currentUser");b=$("input[name=global_artist_message]").is(":checked");var c=[];$("input[name=artist_message]",this.el).each(function(b,e){var h=$(e).attr("data-station-id");c.push({stationId:h,enabled:e.checked})});z.b(yk,[b,c]);return!1},Jb:function(b){var c=this.model.get("currentUser");$(this.el).empty().append($("#settingsTmpl").tmpl({isSubscriber:c&&
(c.ab()||eo(c)),inPaymentBackedTrial:c&&c.gh,isGiftee:c&&c.ih,hasCreditCard:c&&(c.u==m.v.td()||c.u==m.v.Th()||c.u==m.v.Nn()||c.u==m.v.Bu()||eo(c)),supportsArtistMessages:void 0!=c.mm(),hasReceipts:c.sy()}));$("."+b+"Tab",this.el).addClass("on")},events:{"click #auto-renew-explanation-showmore":"autoRenewShowMore","click .submit_btn":"accountSubmit","click .set_pp_autorenew":"ppAutoRenewChangeClick","click .bill_freq_input":"billingFrequencyClick","click #submit_paypal_bill_freq":"ppUpdateBillingFrequency",
"click .see_details":"seeDetailsClick","click input[name=profile_privacy]":"openProfileClick","change input[name=autoShare]":"autoShareClick","change input[name=autoShareListens]":"autoShareListensClick","change input[name=autoShareLikes]":"autoShareLikesClick","change input[name=autoShareFollows]":"autoShareFollowsClick","click input[name=allow_profile_notes]":"profileNotesClick","click .connectButton":"connectButtonClick","mouseover .connectButton":"connectButtonMouseOver","mouseout .connectButton":"connectButtonMouseOut",
"submit .account_settings":"settingsFormSubmit","keyup #password":"passwordKeyup","change .subscription_selection input":"enableSubmit","click #p4b_learn_more":"p4bLearnMoreClick","click #p4b_upgrade":"p4bUpgradeClick","click .viewReceiptDetails":"viewReceiptDetails","click .exitReceiptDetails":"exitReceiptDetails","click .previousReceiptDetail":"previousReceiptDetail","click .nextReceiptDetail":"nextReceiptDetail","click .receiptClicked":"receiptClicked","click .delete_account_link":"deleteAccountLinkClick",
"click .go_to_new_site":"goToNewSiteLinkClick","click .cancelDeleteAccount":"cancelDeleteAccountClick","click .confirmDeleteAccount":"deleteAccountConfirmClick","click .deleteAccountCheck":"deleteAccountClick"},receiptClicked:function(){this.gt();$("."+WA+"Tab",this.el).removeClass("receiptClicked");return!1},enableSubmit:function(){$("#submit_paypal_bill_freq",this.el).removeAttr("disabled");return!1},seeDetailsClick:function(){$(".details",this.el).fadeIn();$(".see_details",this.el).hide();return!1},
ppAutoRenewChangeClick:function(b){var c="cancel_pp_subscription"!=b.target.id,d=new wA;d.bind("submit",r(this,function(b){this.ja&&this.ja();this.model.get("currentUser");z.b(Cj,[Boolean(c),"",b])}));d.bind("cancel",r(this,function(){(new X({message:cb()})).render()}));c?d.render():(b=new yA({model:this.model}),b.bind("submit",r(this,function(){d.render()})),b.render())},ppUpdateBillingFrequency:function(){var b=new wA;b.bind("submit",r(this,function(b){this.ja&&this.ja();this.model.get("currentUser");
z.b(Cj,[Boolean(!0),this.A,b])}));b.bind("cancel",r(this,function(){(new X({message:cb()})).render()}));b.render()},billingFrequencyClick:function(b){this.A=b.target.value},passwordKeyup:function(b){b=$(b.target);var c=b.val();-1!=c.indexOf(this.yk)&&c!=this.yk&&b.val(c.replace(this.yk,""))},openProfileClick:function(){"private"==$('input[name="profile_privacy"]:checked',this.el).val()?this.mv():(this.model.get("currentUser"),$('input[name="autoShare"]',this.el).prop({checked:this.mi,disabled:!1}),
$('input[name="autoShareListens"]',this.el).prop("checked",this.pi),$('input[name="autoShareLikes"]',this.el).prop("checked",this.oi),$('input[name="autoShareFollows"]',this.el).prop("checked",this.ni),$('input[name="allow_profile_notes"]',this.el).prop({checked:null!=this.ym?null!=this.ym:!0,disabled:!1}),$(".suboptions input",this.el).prop("disabled",!this.mi))},autoShareClick:function(b){if(this.xm(b))return!1;b=$(b.target).is(":checked");$(".suboptions input",this.el).prop("disabled",!b);b&&(this.pi||
this.oi||this.ni||(this.ni=this.oi=this.pi=!0),$('input[name="autoShareListens"]',this.el).prop("checked",this.pi),$('input[name="autoShareLikes"]',this.el).prop("checked",this.oi),$('input[name="autoShareFollows"]',this.el).prop("checked",this.ni));this.mi=b},autoShareListensClick:function(b){if(this.xm(b))return!0;this.pi=this.wq(b)},autoShareLikesClick:function(b){if(this.xm(b))return!0;this.oi=this.wq(b)},autoShareFollowsClick:function(b){if(this.xm(b))return!0;this.ni=this.wq(b)},wq:function(b){this.mi=
0<$(".suboptions input:checked").length;$('input[name="autoShare"]',this.el).prop("checked",this.mi);return $(b.target).is(":checked")},xm:function(b){return $(b.target).is(":checked")&&!this.model.get("facebookAuthenticated")?($(b.target).prop("checked",!1),z.b(pj,r(this,function(c){c&&($(b.target).trigger("click"),this.Gz())})),!0):!1},connectButtonClick:function(b){$(b.target).hasClass("facebook")?$(b.target).hasClass("connected")?z.b(qj):z.b(pj):$(b.target).hasClass("connected")?z.b(jj):R(vv)},
connectButtonMouseOver:function(b){b=$(b.target);b.addClass("hover");b.hasClass("connected")&&b.text("Disconnect")},connectButtonMouseOut:function(b){b=$(b.target);b.removeClass("hover");b.hasClass("connected")&&b.text("Connected")},profileNotesClick:function(b){this.ym=$(b.target).is(":checked")},autoRenewShowMore:function(){$("#auto-renew-explanation-showmore",this.el).hide();$("#auto-renew-explanation",this.el).html(this.MN);return!1},accountSubmit:function(){var b=this.model.get("currentUser"),
c=b.Wb,d="no"==$("input[name=explicit_content]:checked",this.el).val(),b=b.Tq;$(".formFieldError",this.el).hide();c&&!d&&b?(c=$("#pinUnlock",this.el).val(),rd(c)&&1<=c.length?this.mR(c):$(".pinUnlockFieldError",this.el).text(Za()).fadeIn()):this.Hs()},RN:function(b){this.Dj=b;this.Hs()},QN:function(){(new X({message:cb()})).render()},mR:function(b){z.b(Xi,{pin:b})},Hs:function(){var b=this.model.get("currentUser"),c=$("#username",this.el).val(),d=$("#password",this.el).val(),e=$("#birthyear",this.el).val(),
h=$("#zipcode",this.el).val(),l=$("input[name=gender]:checked",this.el).val(),p="no"==$("input[name=explicit_content]:checked",this.el).val(),q=$("#pin",this.el).val(),t=$("#pinConfirm",this.el).val(),y=$("#rescueEmail",this.el).val(),E=!0;d==this.yk&&(d=this.Dj,E=!1);$(".formFieldError",this.el).hide();this.HO();var I=!1;vx(c)||($(".usernameFieldError",this.el).text(da()).fadeIn(),$("#username",this.el).addClass("error_border"),I=!0);E&&!wx(d)&&($(".passwordFieldError",this.el).text(fa()).fadeIn(),
$("#password",this.el).addClass("error_border"),I=!0);xx(e)||($(".birthYearFieldError",this.el).text(ja()).fadeIn(),$("#birthyear",this.el).addClass("error_border"),I=!0);/^\s*$/.test(h)&&($(".zipCodeFieldError",this.el).text(na()).fadeIn(),$("#zipcode",this.el).addClass("error_border"),I=!0);Ax(l)||($(".genderFieldError",this.el).text(ra()).fadeIn(),I=!0);""!=q&&"Enter PIN"!=q&&(rd(q)&&1<=q.length||($(".pinFieldError",this.el).text(Za()).fadeIn(),I=!0),q!=t&&($(".pinFieldError",this.el).text("Pins do not match").fadeIn(),
I=!0),""==q||vx(y)||($(".pinFieldError",this.el).text(da()).fadeIn(),I=!0));if(!I){if(null==this.Dj){this.bs=new wA;this.bs.bind("submit",r(this,this.RN));this.bs.bind("cancel",r(this,this.QN));this.bs.render();return}setTimeout(r(this,function(){z.b(yi,{oldusername:b.Ka,oldpassword:this.Dj,newusername:c,newpassword:d,emailOptIn:b.Al,gender:l,birthYear:Number(e),zipCode:h,contentFilterEnabled:p});this.Dj=null}),0)}return!1},HO:function(){$(".zipCodeFieldError",this.el).removeClass("nag_message_color");
$("#zipcode",this.el).removeClass("nag_border error_border");$(".usernameFieldError",this.el).removeClass("nag_message_color");$("#username",this.el).removeClass("nag_border error_border");$(".birthYearFieldError",this.el).removeClass("nag_message_color");$("#birthyear",this.el).removeClass("nag_border error_border");$("#password",this.el).removeClass("nag_border error_border")},vG:function(b){$(".define_pin",this.el).css("display","none");$(".ask_pin",this.el).css("display","none");var c=b.data.ne.model.get("currentUser");
b=b.target.id;var d=c.Tq;c.Wb?"explicit_no"!=b&&d&&$(".ask_pin",this.el).css("display","inline-block"):"explicit_yes"!=b&&$(".define_pin",this.el).css("display","inline-block")},Qp:function(){z.b(Yi,{});return!1},QH:function(b){um(Gl,b.ldata.username);$(".submit_btn",this.el).css("opacity","0.5");$(".submit_btn",this.el).css("filter","alpha(opacity=50)");$(".ask_pin",this.el).fadeOut("slow");$(".define_pin",this.el).fadeOut("slow");b=$("#pin",this.el).val();var c=$("#rescueEmail",this.el).val();""!=
b&&"Enter PIN"!=b?z.b(Wi,{pin:b,rescueEmail:c}):($(".submit_btn",this.el).blur(),$(".saved_text",this.el).css("display","inline").delay(this.On).fadeOut(1500))},DK:function(){$(".submit_btn",this.el).blur();$(".submit_btn",this.el).css("opacity","0.5");$(".submit_btn",this.el).css("filter","alpha(opacity=50)");$(".saved_text",this.el).css("display","inline").delay(this.On).fadeOut(1500)},LI:function(b){b.explicitPINVerified?this.Hs():(new X({message:Gb()})).render()},KI:function(){ao(this.model.get("currentUser"));
$(".submit_btn",this.el).blur();$(".saved_text",this.el).css("display","inline").delay(this.On).fadeOut(1500,r(this,function(){$("#pin",this.el).val("");$("#pinConfirm",this.el).val("");$("#rescueEmail",this.el).val("");$("#pinUnlock",this.el).val("")}))},JI:function(){(new X({message:$a()})).render()},GE:function(){this.checked?$('input[name="artist_message"]',this.el).removeAttr("disabled").prop("checked",!0):$('input[name="artist_message"]',this.el).attr("disabled",!0).prop("checked",!1)},hI:function(b){this.nw=
!0;this.pf=b},goToNewSiteLinkClick:function(){Nn(v.i,!0)},deleteAccountLinkClick:function(){var b=ey("deleteAccountPopup",$("#deleteAccountConfirmHeaderTmpl").tmpl(),$("#deleteAccountConfirmContentTmpl").tmpl(),$("#deleteAccountConfirmFooterTmpl").tmpl());$(this.el).append(b);b.bind("closed",r(this,function(){$(".select",b).unbind("click");b.remove()}));this.logDeleteEvent("delete_account_tapped");return!1},cancelDeleteAccountClick:function(){fy();this.logDeleteEvent("are_you_sure_keep_account _tapped")},
removeEventListeners:function(){z.pa(this,Zg);z.pa(this,di)},deleteAccountConfirmClick:function(){fy();var b=this.model.get("currentUser"),c={},c=b.ab()||eo(b)?ey("deleteAccountPopup",$("#deleteAccountEmailHeaderTmpl").tmpl(),$("#deleteAccountEmailContentTmpl").tmpl(),$("#deleteAccountEmailFooterTmpl").tmpl()):ey("deleteAccountPopup",$("#deleteAccountPasswordHeaderTmpl").tmpl(),$("#deleteAccountPasswordContentTmpl").tmpl(),$("#deleteAccountPasswordFooterTmpl").tmpl());$(this.el).append(c);c.bind("closed",
r(this,function(){this.removeEventListeners;$(".select",c).unbind("click");c.remove()}));this.logDeleteEvent("are_you_sure_delete_account_tapped");return!1},deleteAccountClick:function(){var b=$(this.el).find(".deleteError"),c=$(this.el).find(".emailField").val();b.text("");b.hide();this.logDeleteEvent("are_you_sure_delete_account_tapped");var d=this.model.get("currentUser");z.c(Zg,r(this,function(){this.removeEventListeners;if(d.ab()||eo(d)){var b=ey("deleteAccountPopup",$("#deleteAccountEmailConfirmHeaderTmpl").tmpl(),
$("#deleteAccountEmailConfirmContentTmpl").tmpl({email:c}),$("#deleteAccountEmailConfirmFooterTmpl").tmpl());$(this.el).append(b);b.bind("closed",r(this,function(){$(".select",b).unbind("click");b.remove()}))}else{fy();z.b(ti);for(var h=document.cookie.split(";"),l=0;l<h.length;l++){var p=h[l],q=p.indexOf("=");document.cookie=(-1<q?p.substr(0,q):p)+"=;expires="+(new Date(0)).toUTCString()+"; path=/;"}$.cookie("_sl_toast",Ma());window.location.reload(!0)}}));z.c(di,r(this,function(c){b.text(c);b.show();
this.removeEventListeners}));z.b(Mj,{password:$(this.el).find(".passwordField").val(),email:$(this.el).find(".emailField").val(),accountType:d.ck});return!1},logDeleteEvent:function(b){var c=this.model.get("currentUser");b={action:b,M3:c.s||null,g4:u,x3:we,p3:z.ba,z3:"web",y3:"web",t3:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)};s("delete_account_action",b,c);return!1},p4bLearnMoreClick:function(){s("pandoraone_submit_click",{vendor_id:u,action:"business_learn"},this.model.get("currentUser"));setTimeout(function(){R(pv,
{source:"one"})},0);return!1},p4bUpgradeClick:function(){s("pandoraone_submit_click",{vendor_id:u,action:"business_upgrade"},this.model.get("currentUser"));setTimeout(function(){R(mv,{cancelCallback:function(){V("/account/billing",!0,!1)}})},0);return!1}});function bB(){}
bB=Backbone.View.extend({initialize:function(){},el:$("#mainContent .audioQuality"),render:function(){$(this.el).append($("#audioQualitySettingsTmpl").tmpl({normalQualityAudio:!0==om(bm)}));$(this.el).show()},events:{"click .submit_btn":"saveClick","click #quality_high":"enableSave","click #quality_normal":"enableSave"},enableSave:function(){$(".submit_btn").css("opacity","1.0");$(".submit_btn").css("filter","alpha(opacity=100)")},saveClick:function(){R(Xu,{low:0<$("#quality_normal:checked",this.el).length});
this.SP();return!1},SP:function(){$(".submit_btn",this.el).blur();$(".submit_btn",this.el).css("opacity","0.5");$(".submit_btn",this.el).css("filter","alpha(opacity=50)");$(".saved_text",this.el).css("display","inline").delay(4E3).fadeOut(1E3)}});function aB(){}
aB=Backbone.View.extend({initialize:function(){this.Bd=this.options.cancelHash},render:function(){var b=this.model.get("currentUser");s("account_audio_page_hit",{vendor_id:u},b);$(this.el).append($("#audioQualityUpsaleTmpl").tmpl({isUserAUNZ:b.Sa,offerAnnualSub:b.Ce,monthlyPrice:py(so(b)),annualPrice:py(b.le.toString()),showTrial:b.rh,showBusinessOffer:b.Yb})).show();return this},events:{"click #upgrade_now":"upgradeNowClick","click #start_trial":"startTrialClick"},upgradeNowClick:function(){var b=$("input[name='frequency']:checked",
this.el).val();R(hv,{billingFrequency:b,cancelCallback:r(this,function(){V(this.Bd,!0,!0)})});return!1},startTrialClick:function(){V("/one/trial/start",!0,!0)}});function eB(){}
eB=Backbone.View.extend({initialize:function(){S(uv,r(this,this.render))},el:$("#mainContent .genres"),render:function(b){var c=b.category;if(null==c||""==c)c="top";var d="/content/genre/"+c,e=b.station;if(e)d+="/"+e;else if($("#genre_stations",this.el).attr("data-category")==c){this.Dz();return}eA(d,{},r(this,function(b,c){if("success"==c)if(e){var d=$(b).filter("a").data("musicid");$(window).scrollTop(0);$("#mainContent").children().hide();$("#mainContent .station").show();R(Uu,d)}else $(this.el).empty().append(b),this.Dz()}),
function(){z.b(Mh)},!0)},Dz:function(){$(".playGenreStation",this.el).show();var b=$(".genre_station_menu li.selected",this.el).find(".genreCategory");0<b.length&&(b=b.attr("data-code"),R(ix,{gcat:b}));b="/music/"+$("#genre_stations",this.el).attr("data-category");hz()!=b&&V(b,!1,!1)},events:{"click ul > a":"genreClick","click .playGenreStation":"playGenreStationClick"},playGenreStationClick:function(b){var c=this.model.get("currentUser");if((null==c||c.p())&&mz(this.model))return R(Dv,{onSuccessRedirect:hz()}),
!1;b=$(b.target).attr("data-musicid");z.b(Hi,{stationCode:"mi"+b,source:"genre"});return!1},genreClick:function(b){var c=$(b.target).attr("data-code");c&&$(b.target).hasClass("selected")&&R(ix,{gcat:c});return!0}});function PA(b,c){this.Qh=$("img:first",b);this.Qa=$(".listenerstip_container",b).show().css("visibility","hidden");this.$b=this.Mb=null;this.qR=c.viewerIsAnon;c.viewerListenerId&&0<$(".follow_button[data-listenerid='"+c.viewerListenerId+"']",b).length||($(this.Qh).hover(r(this,this.Pf),r(this,this.Qf)),z.c(Rf,r(this,this.Bq)),z.c(Vf,r(this,this.Nq)),z.c(Sf,r(this,this.Oq)),S(Ju,r(this,this.hide)))}
function fA(b,c){null!=c&&le(c.Y)&&$(".listener[data-webname='"+c.Y+"']",b).remove();var d=$("#listeners_grid .listener",b),e=d.length;if(9>=e)$("#listeners_grid .listener",b).show();else for(;9>$("#listeners_grid .listener:visible",b).length;)$(d[parseInt(Math.random()*e,10)]).show();$("#listeners_grid .listener:visible",b).each(function(b,d){new PA($(d),{viewerIsAnon:null==c||c.p()})})}f=PA.prototype;
f.Pf=function(){this.$b?this.ui():(this.hc(),this.Mb=setTimeout(r(this,function(){this.hc();this.show()}),500));return!1};f.Qf=function(){this.hc();this.$b||(this.$b=setTimeout(r(this,function(){this.ui();this.hide()}),500));return!1};f.hc=function(){null!=this.Mb&&(clearTimeout(this.Mb),this.Mb=null)};f.ui=function(){this.$b&&(clearTimeout(this.$b),this.$b=null)};
f.show=function(){if(!this.visible){this.visible=!0;$(document.body).append(this.Qa.remove());$(this.Qa).hover(r(this,this.Pf),r(this,this.Qf));$(".follow_button",this.Qa).click(r(this,this.uM));$(".profile_name",this.Qa).click(r(this,this.hide));$(".album",this.Qa).click(r(this,this.hide));$(this.Qa).hide();$(this.Qa).css("visibility","visible");$(this.Qa).fadeIn(200);var b=this.Qh.offset(),c=b.left-17+this.Qh.outerWidth()/2,b=b.top-(this.Qa.height()+8)+this.Qh.scrollTop();0<=c&&0<=b&&$(this.Qa).offset({top:b,
left:c});$(".album_cvr a",this.Qa).each(function(b,c){if(0==$("img",c).length){var h=$(c).attr("data-img");$(c).html('<img src="'+h+'" width="50" height="50">')}});R(zv,this.Qa)}};f.hide=function(){this.visible&&(this.visible=!1,$(this.Qa).fadeOut(200,r(this,function(){if(0<$(this.Qh).length)try{$(this.Qh).append(this.Qa.remove())}catch(b){k.debug("failed to return hovercard to its original position")}})),R(Av,this.Qa))};
f.uM=function(b){if(this.qR)R(Dv);else{if(!$(b.target).hasClass("cannotFollow")){var c=$(b.target).data("webname");$(b.target).hasClass("followable")?z.b(Ij,{webName:c,ui_id:"fans"}):$(b.target).hasClass("following")?z.b(Jj,{webName:c,ui_id:"fans"}):$(b.target).hasClass("blocked")?(b=$(b.target).attr("data-listenerid"),z.b(Lj,b)):k.error("Unhandled follow state: ",$(b.target))}return!1}};
f.Bq=function(b){var c=$(".follow_button",this.Qa);b.webName==c.data("webname")&&(c.removeClass("followable"),c.addClass("following"),c.removeClass("hover"))};f.Oq=function(b){var c=$(".follow_button",this.Qa);b.webName==c.data("webname")&&(c.removeClass("following"),c.addClass("followable"),c.removeClass("hover"))};f.Nq=function(b){var c=$(".follow_button",this.Qa);b==c.attr("data-listenerid")&&(c.removeClass("blocked"),c.addClass("followable"),c.removeClass("hover"))};function OA(b,c){this.yr=b;this.BG=b.attr("feedId");this.s=b.attr("listenerId");this.ON=b.attr("ownerName");this.Y=b.attr("webName");this.Qw="true"==b.attr("deleteCompletely");this.gr=c;this.el=$("#feedHideMenuTmpl").tmpl({listenerId:this.s,ownerName:this.ON,isComment:this.Qw});$(".feed_unfollow",this.el).truncate({width:120});b.click(r(this,this.Pf));b.mouseout(r(this,this.Qf));this.el.hover(r(this,this.Pf),r(this,this.Qf));$(".feed_hide_post",this.el).click(r(this,this.MK));$(".feed_unfollow",this.el).click(r(this,
this.Mt));$(".feed_report_spam",this.el).click(r(this,this.CO));$(".block_user",this.el).click(r(this,this.XE));$("body").append($(this.el));this.el.css("visibility","hidden")}f=OA.prototype;f.Pf=function(){this.$b?this.ui():(this.hc(),this.Mb=setTimeout(r(this,function(){this.hc();this.show()}),200));return!1};f.Qf=function(){this.hc();this.$b||(this.$b=setTimeout(r(this,function(){this.ui();this.hide()}),500));return!1};f.hc=function(){null!=this.Mb&&(clearTimeout(this.Mb),this.Mb=null)};
f.ui=function(){this.$b&&(clearTimeout(this.$b),this.$b=null)};f.show=function(){$(this.el).attr("visible",!0);this.position();$(this.el).hide();$(this.el).css("visibility","visible");$(this.el).fadeIn(200)};f.hide=function(){$(this.el).attr("visible",!1);$(this.el).fadeOut(200,r(this,function(){$(this.el).css("visibility","hidden");$(this.el).show()}))};f.position=function(){var b=this.yr.offset();$(this.el).offset({top:b.top+this.yr.height()-1,left:b.left-this.el.width()+this.yr.width()})};
f.MK=function(){z.b(kj,{feedId:this.BG,isActivityDelete:this.gr,deleteCompletely:this.Qw});this.hide();return!1};f.Vq=function(){z.b(lj,this.s);this.hide();return!1};f.Mt=function(){z.b(Jj,{webName:this.Y,ui_id:null,listenerId:this.s});this.hide();return!1};f.CO=function(){window.open("/legal/community-guidelines","_blank");this.hide();return!1};f.XE=function(){z.b(Kj,this.s);this.hide();return!1};function fB(){}
fB=Backbone.View.extend({initialize:function(){var b=this.options.path;0==b.indexOf("/music/")?(b=ie(b),this.vb={type:"profile",subtype:"fansOfGenreStation",content:"true",q:b[1]+"/"+b[2]}):0==b.indexOf("/station/")?this.vb={type:"profile",subtype:"fansOfStation",content:"true",q:b.split("/")[2]}:this.vb={type:"profile",subtype:"fansOfArtist",content:"true",q:ie(b)[0]}},render:function(){R(ex);eA("/content/fansof.vm",this.vb,r(this,this.sM));return this},close:function(){$z(this)},events:{"click .listeners_menuItem":"menuItemClick",
"click .createStation":"createStationClick","click .more":"moreClick"},sM:function(b){$(this.el).append(b);b=$(".backstage",this.el).attr("data-canonical");le(b)&&-1==hz().indexOf(b)&&V(b,!1,!1)},menuItemClick:function(b){b=b.target.id;$(".listeners_content_title").text(b);$(".listeners_menuItem").toggleClass("selected",!1);$(".listeners_menuItem[id='"+b+"']").toggleClass("selected",!0);return!1},createStationClick:function(b){var c=$(b.target).attr("data-station-id");b=$(b.target).attr("data-music-id");
le(c)?z.b(Hi,{stationCode:"fs"+c}):le(b)&&z.b(Hi,{stationCode:"mi"+b});return!1},moreClick:function(b){$(b.currentTarget).fadeOut();var c=$(b.currentTarget).attr("data-currentoffset"),d=$(b.currentTarget).attr("data-nextoffset");c&&d?(this.vb.countRowsOnBrowser=c,this.vb.countRowsNeeded=d,eA("/content/fansof.vm",this.vb,r(this,function(b){$(".sections",this.el).append(b)}))):$(b.currentTarget).closest(".section_page").next().fadeIn();return!1}});function gB(){}
gB=Backbone.View.extend({initialize:function(){S(fv,r(this,this.QJ));S(gv,r(this,this.Fq))},el:$("#mainContent .capping"),QJ:function(){var b=$("#CapInfoTmpl").tmpl();$(this.el).empty().append(b);$("#mainContent").children().hide();$(this.el).show()},Fq:function(){var b={},c=this.model.get("currentUser"),d=hz();d&&(0<=d.indexOf("/payment")||0<=d.indexOf("paypal/confirm"))||(b.capHours=c.zr,b.username=c.Ka,b.nextMonth=Ay.uH(),b=$("#CapReachedTmpl").tmpl(b),$(this.el).empty().append(b),$("#mainContent").children().hide(),
$(this.el).show())},events:{"click .upgrade_now":"upgradeFromInfoClick","click .upgrade_btn":"upgradeFromCapClick","click .keep_listening":"keepListeningClick"},upgradeFromInfoClick:function(){R(hv,{billingFrequency:"ANNUAL",cancelCallback:r(this,function(){R(fv)})});return!1},upgradeFromCapClick:function(){R(hv,{billingFrequency:"ANNUAL",cancelCallback:r(this,function(){R(gv)})});return!1},keepListeningClick:function(){R(Lu);return!1}});function hB(){}hB=Backbone.View.extend({initialize:function(){this.message=this.options.message;this.bind("close",r(this,this.close))},className:"modal_please_wait",render:function(){$(this.el).append($("#modalPleaseWaitTmpl").tmpl(this.message));return this},close:function(){$(this.el).remove();this.el=null;z.pa(this)}});function iB(){}
iB=Backbone.View.extend({initialize:function(){this.A="MONTHLY";S(hv,r(this,this.XJ));S(mv,r(this,this.VJ));S(ov,r(this,this.WJ));S(nv,r(this,this.xJ));z.c(If,r(this,this.Md));z.c(Jf,r(this,this.$i));z.c(Pf,r(this,this.$i));z.c(Qf,r(this,this.zq));pz("/payment");pz("/payment/business")},el:$("#mainContent .payment"),XJ:function(b){this.vb=!1;b&&(this.vb=!0,this.Ad=b.cancelCallback);V("/payment",!0,!0)},VJ:function(b){this.vb=!1;b&&(this.vb=!0,this.Ad=b.cancelCallback);V("/payment/business",!0,!0)},
WJ:function(){this.vb||(this.Ad=function(){R(Lu)});var b=this.model.get("currentUser");b&&b.Ya()&&"END_OF_MONTH"!=b.Ya()&&(this.A=b.Ya());b&&b.Yb&&b.u==m.v.td()?setTimeout(function(){R(iv)},0):b&&b.Yb?b.Qq?(s("business_payment_page_hit",{vendor_id:u},this.model.get("currentUser")),z.b(zj,"business")):((new X({message:pd()})).render(),setTimeout(function(){R(pv,{showBusinessInfoForm:!0})},0)):setTimeout(function(){R(Lu)},0)},xJ:function(){if(!this.vb){this.Ad=function(){R(Lu)};var b=this.model.get("currentUser");
b&&b.Ya()&&"END_OF_MONTH"!=b.Ya()&&(this.A=b.Ya())}s("payment_page_hit",{vendor_id:u},this.model.get("currentUser"));z.b(zj,"p1")},Md:function(b){if(-1!=$.inArray(hz(),["/payment","/payment/business"])){var c={99:"payToPlay",p1:"subscriber",p1gift:"p1gift",business:"business"}[b.ctx];c?($("#mainContent").children().hide(),this.jc=new dB({model:this.model,showPleaseWait:r(this,this.ja),hidePleaseWait:r(this,this.K)}),b=this.jc.render(b,"#PaymentTmpl",c,!0,!0,this.A,r(this,function(){this.jc=null;this.Ad&&
this.Ad()})).el,$(this.el).empty().append(b).show(),(b=this.model.get("currentUser"))&&b.es?($("#paypal_form",this.el).hide(),$("#paypal_select_container",this.el).hide(),$("#credit_select",this.el).prop("checked",!0),$("#creditcard_form",this.el).show()):"payToPlay"==c&&($("#credit_select").prop("checked",!0),$("#paypal_form",this.el).hide(),$("#creditcard_form",this.el).show())):k.error("Unknown payment context: ",b.ctx)}},zq:function(){if(-1!=$.inArray(hz(),["/payment","/payment/business"]))return this.Md({ctx:"p1"}),
(new X({message:ab()})).render(),!1},ja:function(){this.T||($(window).scrollTop(0),this.T=new hB({model:this.model,message:id()}),$("#main").append(this.T.render().el))},K:function(){this.T&&(this.T.trigger("close"),this.T=null)},$i:function(b){if("/account/billing"!=hz()&&this.jc){this.model.set({capped:!1,blueBarMessage:null});z.b(ei);var c=null;if(b.lastGiftCode)V("/showgift/"+b.lastGiftCode+"."+b.lastGiftHash,!1,!1);else{R(Lu);var d=b.listenerState;if("PAY_TO_PLAY"==d)c=ld();else if("SUBSCRIBER"==
d){if(d=this.model.get("currentUser"))c=$.trim($("#period_amount",this.el).text()),d=vl.encrypt(d.s),Jp("https://4177752.fls.doubleclick.net/activityi;src=4177752;type=purch024;cat=purch865;qty=1;;ord=;cost="+c+";u1="+d,function(){},function(){});c=jd();z.b(ng)}else"BUSINESS"==d&&(c=kd(),z.b(og),setTimeout(function(){R(kv)},0))}this.jc.$i(b,c);$(this.jc.el).remove();this.jc=null}},events:{"click #paypal_select":"paypalSelect","click #credit_select":"creditCardSelect"},paypalSelect:function(){s("payment_paypal_select",
{vendor_id:u},this.model.get("currentUser"));$("#creditcard_form",this.el).hide();$("#paypal_form",this.el).show()},creditCardSelect:function(){s("payment_creditcard_select",{vendor_id:u},this.model.get("currentUser"));$("#paypal_form",this.el).hide();$("#creditcard_form",this.el).show()}});function jB(){}
jB=Backbone.View.extend({initialize:function(){this.cj=this.options.hashTag;z.c(xh,r(this,this.GI));pz("/norenew");this.bind("close",r(this,this.close))},className:"expired_account_container clearfix",render:function(){var b=this.model.get("currentUser"),b={payment_method:b.ds,monthlyPrice:py(so(b)),isUserAUNZ:b.Sa};$(this.el).append($("#expiration-"+this.cj+"Tmpl").tmpl(b));$(window).scrollTop(0);$("#footer .browseGenres").hide();"subscribe"==this.cj&&(b=this.model.get("currentUser"),s("subexp_viewed",
{isTrial:"true"},b));return this},close:function(){$(this.el).remove();this.el=null;$("#footer .browseGenres").show();z.pa(this)},GI:function(){},events:{"click .confirm":"confirmClick","click .nothanks":"noThanksClick","click .continue":"continueClick","click .noaction":"noactionClick"},confirmClick:function(){var b=this.model.get("currentUser"),c=r(this,function(){V("/"+this.cj,!0,!0)});uo(b)?R(mv,{cancelCallback:c}):R(hv,{billingFrequency:b.Ya(),cancelCallback:c});"subscribe"==this.cj&&s("subexp_sub_clicked",
{isTrial:"true"},b);return!1},noThanksClick:function(){this.model.set({blueBarMessage:null});$(this.el).fadeOut(200,r(this,function(){$(this.el).empty().append($("#renewalNoThanksTmpl").tmpl()).fadeIn()}));if("subscribe"==this.cj){var b=this.model.get("currentUser");s("subexp_cancel_clicked",{isTrial:"true"},b)}V("/norenew",!1,!0);return!1},continueClick:function(){var b=this.model.get("currentUser");b&&b.sb==m.sa.ho()?(z.b(el),b.sb=null,z.b(Tf,b),s("coderot_check",{coderot_id:"a6877ffc-a4a3-11e3-be40-425861b86ab6"},
b)):b&&!b.At&&z.b(Gj);return!0},noactionClick:function(){R(Lu);return!0}});function kB(){}
kB=Backbone.View.extend({initialize:function(){this.Xb=!1;this.A="MONTHLY";this.bb={};S(Lv,r(this,this.jz));S(rx,r(this,this.dh));z.c(Ie,r(this,this.Jf));z.c(He,r(this,this.$a));z.c(Sg,r(this,this.Gb));z.c(jh,r(this,this.BI));z.c(If,r(this,this.Md));z.c($f,r(this,this.aJ));z.c(wh,r(this,this.AI));z.c(Zh,r(this,this.zI));z.c(Bk,r(this,this.eK));z.c($h,r(this,this.$x))},el:$("#mainContent .redemption"),render:function(b){b&&(this.Fb=b);this.Fd()},Fd:function(){$("#mainContent").children().hide();this.model.set({modalPanel:vu});
var b=this.model.get("currentUser");if(b.p())if(this.model.get("hasStations")){var c=this.model.get("stationList").pluck("stationName");c.shift();b=$("#hasStationsTmpl").tmpl({stations:c});$("#mainContent .redemption").empty().append(b).show();$("#noBtn").click(r(this,function(){this.Q="newUser";z.b(xi)}));$("#yesBtn").bind("click",this,this.iz)}else b=$("#redeemChoicesTmpl").tmpl({stations:c}),$("#mainContent .redemption").empty().append(b).show(),$("#existingUserBtn").click(r(this,this.Wp)),$("#newUserBtn").click(r(this,
this.iz));else b=$("#redeemSignedInTmpl").tmpl({username:b.Ka}),$("#mainContent .redemption").empty().append(b).show(),$("#redeemSignedInBtn").click(r(this,this.UP)),$("#notMeLink").click(r(this,this.Kr))},dj:function(){$("#mainContent .redemption").empty()},sf:function(){this.render();return!1},ja:function(){this.T||($(window).scrollTop(0),this.T=new hB({model:this.model,message:id()}),$("#main").append(this.T.render().el))},K:function(){this.T&&(this.T.trigger("close"),this.T=null)},Jf:function(){"redeem"==
this.Q?(setTimeout(r(this,function(){z.b(Vj,this.Fb)}),500),this.Q=null,this.Er=!0):this.dj()},$a:function(){if(!this.Q)this.dj();else if("logout"==this.Q)this.Q=null,setTimeout(r(this,function(){z.b(ui,this.fi);this.fi=null;this.Q="redeem"}),300);else if("newUser"==this.Q||"existingUser"==this.Q)this.Q=null,setTimeout(r(this,function(){this.Fd()}),300)},BI:function(b){this.Q&&(k.info("reg failed: "+b),this.Q=null,(new X({message:Mb()+b})).render(),this.Fd())},UP:function(){if(this.Fb)z.b(Vj,this.Fb);
else{var b={},c=this.model.get("currentUser");if(c&&eo(c)){b.vendorBilledTmpl="#vendorBilledTmpl";var d="Third Party Vendor";c.ck&&(d=c.ck);b.vendor=d}$("#mainContent").find(".redemption").empty().append($("#redeemNowTmpl").tmpl(b));$(".redeem_field").click(this.yg);$("#redeemNowBtn").click(r(this,function(){this.Fb=$("#giftcode").val().trim();Hx(this.Fb)?z.b(Vj,this.Fb):$(".error").text(jb()).fadeIn()}));$("#goBackBtn").click(r(this,function(){this.sf()}))}return!1},Kr:function(){lB("/giftredeem");
z.b(ti);return!1},Ii:function(){var b=$("#giftcode").val().trim(),c=$("#email").val(),d=$("#password").val(),e=$("#birthyear").val(),h=$("#zipcode").val(),l=$("input[name=gender]:checked").val(),p=$("input[name=optin]").is(":checked"),q=$("input[name=terms]").is(":checked"),t=$("input[name=remember]").is(":checked"),y=!1;Hx(b)||($("#codeError").text(jb()).fadeIn(),y=!0);vx(c)||($("#emailError").text(kb()).fadeIn(),y=!0);wx(d)||($("#passwordError").text(lb()).fadeIn(),y=!0);xx(e)?yx(e)||($("#birthyearError").text(ma()).fadeIn(),
y=!0):($("#birthyearError").text(ma()).fadeIn(),y=!0);zx(mp(),h)||($("#zipcodeError").text(op()).fadeIn(),y=!0);Ax(l)||($("#genderError").text(ra()).fadeIn(),y=!0);q||($("#termsError").text(qa()).fadeIn(),y=!0);y||(this.Fb=b,b={username:c,password:d,birthYear:Number(e),zipCode:h,emailOptIn:p,gender:l,keepLoggedIn:t},"logout"==this.Q?(this.fi=b,z.b(ti)):(this.model.set({modalPanel:"REDEMPTION_PANEL"}),z.b(ui,b)));return!1},iz:function(){$("#mainContent .redemption").empty().append($("#redeemRegisterTmpl").tmpl({giftcode:this.Fb}));
$("#redeemNowBtn").click(r(this,function(){this.Q="redeem";this.Ii()}));$("#goBackBtn").click(r(this,function(){this.Q=null;this.sf()}));$(".redeem_field").click(r(this,this.yg));return!1},jz:function(){$("#mainContent .redemption").empty().append($("#redeemRegisterTmpl").tmpl({giftcode:this.Fb}));$(".redeem_field").click(this.yg);$("#redeemNowBtn").click(r(this,function(){this.Q="logout";this.Ii()}));$("#goBackBtn").click(r(this,function(){this.Q=null;this.sf()}));return!1},Wp:function(){this.Q=
"existingUser";R(Dv,{giftRedemptionMode:!0,allowWhenLoggedIn:!0,onSuccessRedirect:hz()});return!1},Md:function(b){if("/gift"==hz()){var c=this.model.get("currentUser");b=b.cdata;for(var d={years:[],months:[]},e=(new Date).getFullYear(),h=0;12>h;h++)d.years.push(e+h),9>h?d.months.push("0"+(h+1)):d.months.push(h+1);null==b?(d.zipcode="",zx(mp(),c.Eb())?d.zipcode=c.Eb():d.zipcode=""):(d.customerName=b.customerName,d.zipcode=b.zipcode,d.displayableCardNumber=b.displayableCardNumber,d[b.cardCompany.toLowerCase()]=
"checked",d.expirationMonth=b.expirationMonth,d.expirationYear=b.expirationYear);d.billingFrequency=this.A?this.A:"MONTHLY";d.offerAnnualSub=c.Ce;d.trialDuration=c.xz.toString();d.monthlyPrice=py(so(c));d.annualPrice=py(c.le.toString());d.isUserAUNZ=c.Sa;d.isV2="V2"===c.dk;b=$("#GiftPaymentTmpl").tmpl(d);$(this.el).empty().append(b);c.es&&($("#paypal_form",this.el).hide(),$("#paypal_select_container",this.el).hide());$(this.el).show()}},AI:function(b){var c=b.code;b=new X({message:Lb()+b.message});
c==m.d.GB()?z.b(zj,"PaymentBackedGift"):(this.Er?(this.Er=!1,b.render(),c!=m.d.Rn()&&c!=m.d.Sn()||this.Fd()):b.render(),this.Fb=null);return!1},aJ:function(){var b=ib(),c;c=this.model.get("currentUser").od;365<c&&(b=new Date,b.setDate(b.getDate()+c),b=hb([b.toDateString()]));this.K&&this.K();(new X({message:b})).render();this.Er?this.model.set({modalPanel:"REGISTERED_PANEL"}):(this.model.set({modalPanel:vu}),R(Lu));this.Fb=null;return!1},eK:function(b){(b=b.redirectUrl)?window.location.href=b:this.$x()},
zI:function(b){(new X({message:b})).render();this.K&&this.K()},$x:function(){var b=oc();(new X({message:b})).render();this.K&&this.K()},events:{"click .bill_freq_input":"billingFrequencySelect","click #paypal_select":"paypalSelect","click #credit_select":"creditCardSelect","click #redeem_gift_pp":"redeemGiftPP","click #redeem_gift_cc":"redeemGiftCC","focusout #zip":"zipcodeFocus","keyup #zip":"zipcodeFocus","blur #zip":"zipcodeFocus","change #zip":"zipcodeFocus","focus .payment_field_validated":"clearErrors",
"keyup .payment_field input":"inputModified","change .payment_field select":"inputModified","change .subscription_selection input":"inputModified"},billingFrequencySelect:function(b){this.A=b.target.value},paypalSelect:function(){$("#creditcard_form",this.el).hide();$("#paypal_form",this.el).show()},creditCardSelect:function(){$("#paypal_form",this.el).hide();$("#creditcard_form",this.el).show()},inputModified:function(b){if(!this.Xb)return this.Xb=!0,this.enableSubmit(b)},zipcodeFocus:function(){this.gc("ANNUAL",
"ANNUAL");this.gc("MONTHLY","MONTHLY");return!0},enableSubmit:function(b){!this.Xb||this.xe()||$(b&&b.target).hasClass("zipcode")||$(".pay_now",this.el).removeAttr("disabled");return!1},clearErrors:function(b){$(b.target).siblings(".paymentFieldError").hide();$(b.target).siblings(".formFieldError").hide()},redeemGiftPP:function(){1==$("input[name='agreePP']:checked",this.el).length!=!0?$(".agreePPFieldError",this.el).text(bd()).fadeIn():(this.ja&&this.ja(),$(window).scrollTop(0),z.b(Ak,[this.Fb,this.A,
kp()]));return!1},redeemGiftCC:function(){this.model.get("currentUser");var b=$.trim($("input[name='name']",this.el).val()),c=$("input[name='cardnumber']",this.el).val(),d=Fx(c),e=$("select[name='expirationdate_month'] option:selected",this.el).val(),h=$("select[name='expirationdate_year'] option:selected",this.el).val(),l=$("input[name='securitycode']",this.el).val(),p=$("input[name='zipcode']",this.el).val(),q=1==$("input[name='agreeCC']:checked",this.el).length,t=kp(),y=this.se(b,d,p,l,c,e,h);
!0!=q&&($(".agreeCCFieldError",this.el).text(bd()).fadeIn(),y.push(bd()));0==y.length?(this.ja&&this.ja(),z.b(zk,[this.Fb,this.A,d,b,c,Number(e),Number(h),l,p,t])):(new X({message:y.join("<br>")})).render();return!1},Dg:function(){$("#redeem_gift_cc",this.el).attr("disabled","disabled")},se:function(b,c,d,e,h,l,p){$(".paymentFieldError",this.el).hide();$(".formFieldError",this.el).hide();var q=[];if(null==b||0==b.length)$(".nameFieldError",this.el).text(gd()).fadeIn(),q.push(gd());zx(mp(),d)||($(".zipcodeFieldError",
this.el).text(op()).fadeIn(),q.push(op()));Bx(e)||($(".securitycodeFieldError",this.el).text(cd()).fadeIn(),q.push(cd()));Cx(h)&&Ex(c)||($(".cardNumberFieldError",this.el).text(ed()).fadeIn(),q.push(ed()));Gx(l,p)||($(".expriationFieldError",this.el).text(fd()).fadeIn(),q.push(fd()));return q},xe:function(){return this.bb&&0<Object.keys(this.bb).length},gc:function(b,c){if(b&&b.length){$("#salestax_amount."+c,this.el).html("");var d=$("input[name='zipcode']",this.el).val(),e=this.model.get("currentUser");
if(d&&d.length==(e.Sa?4:5)){if(c in this.bb)return;this.bb[c]=!0;R(qx,new az(d,b,c,!1))}this.Dg()}},dh:function(b){if("/gift"==hz()){var c=b.tax,d=b.token;b=b.amount;try{c&&b&&($("#salestax_amount."+d,this.el).html(py(c)),this.Nj[d]=c)}catch(e){}finally{delete this.bb[d],this.xe()||this.enableSubmit(null)}}},Gb:function(){this.K&&this.K()}});function $A(){}
$A=Backbone.View.extend({initialize:function(){this.referrer=this.options.referrer;this.Bd=this.options.cancelHash},render:function(){s("account_upgrade_page_hit",{vendor_id:u},this.model.get("currentUser"));R(jx);var b=this.model.get("currentUser");$(this.el).append($("#upgradeTmpl").tmpl({isUserAUNZ:b.Sa,monthlyPrice:py(so(b)),showTrial:b.rh,showBusinessOffer:b.Yb}))},events:{"click #start_trial":"startTrialClick","click #upgrade_now":"upgradeNowClick","click #learn":"learnMoreClick"},startTrialClick:function(){V("/one/trial/start",
!0,!0)},upgradeNowClick:function(){var b=this.model.get("currentUser");if(null==b||b.p())return R(Dv,{onSuccessRedirect:"/payment"}),!1;R(hv,{cancelCallback:r(this,function(){V(this.Bd,!0,!0)})});return!1},learnMoreClick:function(){R(Xw);return!0}});function dB(){}
dB=Backbone.View.extend({initialize:function(){this.bx=!0;this.ir=!1;this.ja=this.options.showPleaseWait;this.K=this.options.hidePleaseWait;this.bb={};this.Nj={};this.S=this.op=this.Xb=this.U3=!1;z.c(jk,r(this,this.gK));z.c(Th,r(this,this.Wi));z.c(yh,r(this,this.Aq));z.c(Dh,r(this,this.Aq));z.c(zh,r(this,this.Aq));z.c(Sg,r(this,this.Gb));S(rx,r(this,this.dh))},render:function(b,c,d,e,h,l,p){b=b.cdata;this.S="business"==d;this.bx=e;this.ir=h;this.Ad=p;var q=this.model.get("currentUser");this.A="#PaymentTmpl"===
c||"#RenewalTmpl"===c?l:q.Ya();""==this.A&&q.ih&&(this.A="ANNUAL");e={years:[],months:[]};h=(new Date).getFullYear();for(l=0;12>l;l++)e.years.push(h+l),9>l?e.months.push("0"+(l+1)):e.months.push(l+1);e.mode=d;e.payText="#RenewalTmpl"===c?"Renew Now":"Pay Now";e.showTerms="#PaymentTmpl"===c;e.showCancelButton=null!=this.Ad;e.showPayButton="#BillingTmpl"!=c;e.monthlyPrice=py(so(q));e.annualPrice=py(q.le.toString());e.businessMonthlyPrice=py(q.ll.toString());e.businessAnnualPrice=py(q.kl.toString());
e.renewal_amount=py(qy(q,this.A));e.renewal_period=ry(this.A);e.isUserAUNZ=q.Sa;e.offerAnnualSub=q.Ce||q.S();e.expirationDate=(new Date((new Date).getTime()+864E5*parseInt(q.od,10))).format("m/d/yy");e.expiredSubscriber="EXPIRED_SUBSCRIBER"==q.u;e.showPaypalOrderConfirmScreen=ap();e.username=q.Ka;e.billingFrequency=this.A;e.isV2="V2"===q.dk;e.subscriptionTitle=this.S?"Pandora for Business":"Pandora Plus";e.subscriptionTitleWithTagline=this.S?"Pandora for Business":"Pandora Plus - Ad Free, More Skips, and Fewer Timeouts";
e.showBusinessOffer=!this.S&&q.Yb;e.showBusinessLink=!this.S&&q.Yb;d=!1;(this.Sq=null!=b)?(d=b.autoRenew,e.customerName=b.customerName,e.zipcode=b.zipcode,e.displayableCardNumber=b.displayableCardNumber,e[b.cardCompany.toLowerCase()]="checked",e.expirationMonth=b.expirationMonth,e.expirationYear=b.expirationYear,b=$(c).tmpl(e),$("#delete_card",b).show(),$("#delete_card",b).click(r(this,function(){confirm("Are you sure?")&&z.b(Zj,null);return!1}))):(e.zipcode="",zx(mp(),q.Eb())?e.zipcode=q.Eb():e.zipcode=
"",b=$(c).tmpl(e));sy(b,d);"#BillingTmpl"!=c&&"END_OF_MONTH"==this.A&&$("#end_of_month_select",b).hide();this.el&&$(this.el).empty();$(this.el).append(b);$(".payment_summary",this.el).hide();$(".payment_summary."+this.A,this.el).show();this.gc(this.A,"renewal_summary");this.zipcodeFocus(null);var t=this.el,y=this.S;$(window).on("unload",function(){var b=$("input[name='cardnumber']",t).val();s(y?"business_abandon_cart":"p1_abandon_cart",{vendor_id:u,card_name_empty:!$.trim($("input[name='name']",t).val()),
card_empty:!b,cvv_empty:!$("input[name='securitycode']",t).val(),zip_empty:!$("input[name='zipcode']",t).val(),payment_type:$("#paypal_select:checked").val()?"paypal":Fx(b)},q);Ap(null)});return this},dP:function(){$(".payment_form")},gK:function(b){(b=b.redirectUrl)?window.location.href=b:(b=jc(),(new X({message:b})).render(),this.K&&this.K())},Wi:function(b){var c=jc();b&&b.code==m.d.zk()&&(c=Qb());(new X({message:c})).render();this.K&&this.K()},Gb:function(){this.K&&this.K()},Aq:function(b){this.K&&
this.K();var c=Nb();b&&(b.code==m.d.yB()?c=Ob():b.code==m.d.xB()?c=hd():b.code==m.d.mC()?c=Pb():b.code==m.d.Se()?c=ia():b.code==m.d.zk()&&(c=Qb()));(new X({message:c})).render();z.b(zj,this.S?"business":"p1")},$i:function(b,c){this.Sq=!0;this.op=this.Xb=!1;this.Dg();var d=jQuery.trim($(".settings_rCol .payment_form input[name='cardnumber']").val());if(4<d.length){for(var e="",h=0;h<d.length-8;h++)e+="*";$(".settings_rCol .payment_form input[name='cardnumber']").val(d.substring(0,4)+e+d.substring(d.length-
4))}$(".settings_rCol .payment_form input[name='securitycode']").val("");(new X({message:c?c:db()})).render();$("#delete_card",this.el).fadeIn();$("#delete_card",this.el).click(r(this,function(){confirm("Are you sure?")&&z.b(Zj,null)}));$("input[name='securitycode']",this.el).prop("disabled",!1);$("input[name='agree']",this.el).prop("disabled",!1);d=this.model.get("currentUser");sy(this.el,d&&d.of);this.A=d.Ya();$("#amount.renewal_summary",this.el).text(py(qy(d,this.A)));$("#period.renewal_summary",
this.el).text(ry(this.A));this.gc(this.A,"renewal_summary");this.zipcodeFocus("");this.K&&this.K()},qp:function(){$(".paymentFieldError",this.el).hide();$(".formFieldError",this.el).hide()},gc:function(b,c){if(b&&b.length){$("#salestax_amount."+c,this.el).html("");var d=$("input[name='zipcode']",this.el).val(),e=this.model.get("currentUser");if(d&&d.length==(e.Sa?4:5)){if(c in this.bb)return;this.bb[c]=!0;R(qx,new az(d,b,c,this.S))}this.Dg()}},dh:function(b){var c=b.tax,d=b.token;b=b.amount;try{c&&
b&&($("#salestax_amount."+d,this.el).html(py(c)),this.Nj[d]=c)}catch(e){}finally{k.info("executing finally"),delete this.bb[d],this.xe()||this.enableSubmit(null)}},xe:function(){return this.bb&&0<Object.keys(this.bb).length},Dg:function(){$(".pay_now",this.el).attr("disabled","disabled")},events:{"click #paypal_continue":"paypalContinueClick","click .p1_submit":"payP1Click","click #p99_pay_now":"pay99Click","click .cancel":"cancelClick","click #cancel_sub_btn":"cancelSubscriptionClick","click .see_details":"seeDetailsClick",
"click #paypal_agree":"clearErrors","click #cc_agree":"clearErrors","click .bill_freq_input":"billingFrequencyClick","focus .payment_field_validated input":"clearErrors","focus .payment_field_validated select":"clearErrors","focusout #pzip":"zipcodeFocus","keyup #pzip":"zipcodeFocus","blur #pzip":"zipcodeFocus","change #pzip":"zipcodeFocus","change #paypal_agree":"inputModified","keyup .payment_field input":"inputModified","change .payment_field select":"inputModified","change .subscription_selection input":"inputModified",
"click #are_you_a_business_link":"businessLinkClick"},inputModified:function(b){$(b.currentTarget).is(".subscription_selection input")||(this.op=!0);if(!this.Xb)return this.Xb=!0,this.enableSubmit(b)},enableSubmit:function(b){!this.Xb||this.xe()||$(b&&b.target).hasClass("zipcode")||$(".pay_now",this.el).removeAttr("disabled");return!1},seeDetailsClick:function(){$(".details",this.el).fadeIn();$(".see_details",this.el).hide();return!1},cancelSubscriptionClick:function(b){var c=new yA({model:this.model});
c.bind("submit",r(this,function(){this.payP1Click(b)}));c.render()},billingFrequencyClick:function(b){this.A=b.target.value;$(".payment_summary",this.el).hide();$(".payment_summary."+this.A,this.el).show()},zipcodeFocus:function(){this.gc("ANNUAL","ANNUAL");this.gc("MONTHLY","MONTHLY");this.gc("END_OF_MONTH","END_OF_MONTH");return!0},paypalContinueClick:function(){$(window).scrollTop(0);var b=this.model.get("currentUser");this.S&&s("business_payment_page_click",{vendor_id:u,action:"business_"+this.A.toLowerCase(),
payment_type:"paypal"},b);ap()||1==$("input[name='agree']:checked",this.el).length?(this.ja&&this.ja(),z.b(ik,[this.A,kp(),this.S])):($(".agreeFieldError",this.el).text(bd()).fadeIn(),(new X({message:bd()})).render());return!1},payP1Click:function(b){if($(b&&b.target).hasClass("disabled"))return!1;var c=this.model.get("currentUser");if(!c)return!1;var d=!(b&&"cancel_sub_btn"==b.target.id),e=this.Nj[this.A],h=$.trim($("input[name='name']",this.el).val()),l=$("input[name='cardnumber']",this.el).val(),
p=Fx(l),q=$("select[name='expirationdate_month'] option:selected",this.el).val(),t=$("select[name='expirationdate_year'] option:selected",this.el).val(),y=$("input[name='securitycode']",this.el).val(),E=$("input[name='zipcode']",this.el).val();b=!$("input#cc_agree",this.el).is(":visible")||$("input#cc_agree",this.el).is(":checked");var I=this.bx,N=kp(),U=this.se(this.A,h,p,E,y,l,q,t,this.op);!0!=b&&($(".agreeFieldError",this.el).text(bd()).fadeIn(),U.push(bd()));this.S&&s("business_payment_page_click",
{vendor_id:u,action:"business_"+this.A.toLowerCase(),payment_type:"creditcard"},this.model.get("currentUser"));0==U.length?this.Sq?(c=new wA,c.bind("submit",r(this,function(b){this.ja&&this.ja();this.ir?this.Lj(this.A,p,h,l,q,t,y,E,d,I,e,N,this.S,b):this.jk(this.A,p,h,l,q,t,y,E,d,I,e,N,b)})),c.bind("cancel",r(this,function(){(new X({message:cb()})).render()})),c.render()):!c.ab()&&this.ir?this.Lj(this.A,p,h,l,q,t,y,E,d,I,e,N,this.S,""):this.jk(this.A,p,h,l,q,t,y,E,d,I,e,N,""):(new X({message:U.join("<br>")})).render();
return!1},clearErrors:function(b){$(b.target).siblings(".paymentFieldError").hide();$(b.target).siblings(".formFieldError").hide()},pay99Click:function(b){if($(b.target).hasClass("disabled"))return!1;b=$("input[name='name']",this.el).val();var c=$("input[name='cardnumber']",this.el).val(),d=Fx(c),e=$("select[name='expirationdate_month']",this.el).val(),h=$("select[name='expirationdate_year']",this.el).val(),l=$("input[name='securitycode']",this.el).val(),p=$("input[name='zipcode']",this.el).val(),
q=this.Nj.END_OF_MONTH,t=kp(),y=this.se("END_OF_MONTH",b,d,p,l,c,e,h,!0);0==y.length?(this.ja&&this.ja(),this.Lj(this.A,d,b,c,e,h,l,p,!1,!1,q,t,"",!1,"")):(new X({message:y.join("<br>")})).render();return!1},businessLinkClick:function(){var b=this.model.get("currentUser");s("business_payment_form_upsell",{vendor_id:u,source:0==hz().indexOf("/payment")?"payment":"billing"},b);b.u==m.v.td()?R(iv):R(pv,{source:"payment"});return!1},se:function(b,c,d,e,h,l,p,q,t){this.qp();var y=[];if(null==c||0==c.length)$(".nameFieldError",
this.el).text(gd()).fadeIn(),y.push(gd());zx(mp(),e)||($(".zipcodeFieldError",this.el).text(op()).fadeIn(),y.push(op()));Dx(b)||($(".billingFieldError",this.el).text(dd()).fadeIn(),y.push(dd()));t&&!Bx(h)&&($(".securitycodeFieldError",this.el).text(cd()).fadeIn(),y.push(cd()));Cx(l)&&Ex(d)||($(".cardNumberFieldError",this.el).text(ed()).fadeIn(),y.push(ed()));Gx(p,q)||($(".expriationFieldError",this.el).text(fd()).fadeIn(),y.push(fd()));return y},cancelClick:function(){this.Ad&&this.Ad();return!1},
Lj:function(b,c,d,e,h,l,p,q,t,y,E,I,N,U){z.b(Fj,[b,c,d,e,Number(h),Number(l),p,q,Number(E),I,N,U])},jk:function(b,c,d,e,h,l,p,q,t,y,E,I,N){z.b(Bj,[b,c,d,e,Number(h),Number(l),p,q,Boolean(t),I,N])}});function cB(){}
cB=Backbone.View.extend({initialize:function(){this.us=null},render:function(b,c){this.us=b;-1!=b.typeOfService.indexOf("Business")?b.logo="business":-1!=b.typeOfService.indexOf("One")?b.logo="one":b.logo="";var d=$(c).tmpl(b);this.el&&$(this.el).empty();$(this.el).append(d);return this},events:{"click .print":"handlePrintClicked"},handlePrintClicked:function(){var b=window.open();s("business_view_receipt",{vendor_id:u,action:"print_save",transaction_id:this.us.transactionId,transaction_date:this.us.date},this.model.get("currentUser"));
var c=$("#print-area").clone(!0);c.find(".paging").remove();b.document.write(c.html());b.print();b.close();return!1}});function mB(){}
mB=Backbone.View.extend({initialize:function(){z.c(Xf,r(this,this.Kq));z.c(Zf,r(this,this.fy));S(zw,r(this,this.fy))},className:"still_listening_container clearfix",render:function(){var b=this.model.get("currentUser");b.J()&&z.b(Oj);var c=b.fk,d=b.Mh;if(!b.lh&&!b.S()&&b.KA&&b.Yb&&0==(om(lm)||0)%b.KA)return $(this.el).append($("#pandoraForBusinessTimeoutUpsellTmpl").tmpl({Z3:b.u==m.v.td()})),jn(),this;$(this.el).append($("#stillListeningTmpl").tmpl({isSponsoredListening:d==m.de.eo(),creditHours:c+
" hour"+(1<c?"s":""),showUpgrade:!b.ab()&&!eo(b),shouldSeeAds:b.J(),isStreamLimited:b.lh,isUserAUNZ:b.Sa,offerAnnualSub:b.Ce,isBusiness:b.S(),monthlyPrice:py(so(b))}));c=b.u;b.lh&&s("listening_session_display",{action:"display",listener_state:c,vendor_id:u,device_id:we},b);jn();return this},Kq:function(b){var c=C.za(this.model.get("currentStation"));null!=b&&!1==c?($("#still_listening_ignore").text("Return to my station"),$(".svnOffer",this.el).show(),$("#upgradeOffer").hide(),b=this.model.get("currentUser"),
s("truex_tracking",{for_action:"offer",benefit:b.Mh,benefit_amount:b.fk,detail:this.model.get("halt_id"),vendor_id:u,device_id:we},b)):($(".svnOffer",this.el).hide(),$("#still_listening_ignore").text("I'm still listening"),$("#upgradeOffer").show())},fy:function(){this.stillListeningClick()},events:{"click #still_listening_upgrade":"upgradeClick","click #p4b_upgrade":"businessUpgradeClick","click .still_listening":"stillListeningClick","click .continue_abuse":"continueAbuseClick","click .learn_more_abuse":"learnAbuseClick",
"click .eliminate_timeout":"eliminateTimeoutClick","click #learn":"learnMoreClick"},upgradeClick:function(){this.Um("upgrade");R(hv,{cancelCallback:r(this,function(){V("/account/upgrade",!0,!0)})});return!1},businessUpgradeClick:function(){this.Um("business_upsell");R(mv,{source:"timeout"});return!1},learnMoreClick:function(){this.Um("upgrade");R(Xw);return!0},eliminateTimeoutClick:function(){var b=this.model.get("halt_id"),c=this.model.get("currentUser"),d=c.u;s("listener_idle",{action:"value_exchange",
active:"true",halt_id:b,inactive_time:Math.floor((ud()-b)/1E3),listener_state:d,vendor_id:u,device_id:we},c);s("truex_tracking",{for_action:"offer_accepted",benefit:c.Mh,benefit_amount:c.fk,detail:b,vendor_id:u,device_id:we},c);this.model.set({modalPanel:"SVN_AD_PANEL"});return!1},stillListeningClick:function(){z.b(Dk,r(this,function(){this.Um("none");this.remove();this.el=null;R(Lu)}));return!1},continueAbuseClick:function(){var b=this.model.get("currentUser");s("listening_session_display",{action:"dismiss",
listener_state:b.u,vendor_id:u,device_id:we},b);this.model.set({inactive:!1});this.remove();this.el=null;R(Lu)},learnAbuseClick:function(){var b=this.model.get("currentUser");s("listening_session_display",{action:"learn",listener_state:b.u,vendor_id:u,device_id:we},b);window.open("http://help.pandora.com/customer/portal/articles/1392219?un="+b.Ka,"_blank");return!1},Um:function(b){var c=this.model.get("halt_id"),d=this.model.get("currentUser"),e=d.u;s("listener_idle",{action:b,active:"true",business_upsell:d&&
d.S()&&"upgrade"==b,halt_id:c,inactive_time:Math.floor((ud()-c)/1E3),listener_state:e,vendor_id:u,device_id:we},d);R(Mw);this.model.set({inactive:!1})}});function nB(){}
nB=Backbone.View.extend({initialize:function(){this.nb=this.options.detail_url},render:function(){eA(this.nb,{},r(this,this.QM),function(){z.b(Mh)},!0);return this},close:function(){$z(this)},events:{"click .listeners_menuItem":"menuItemClick","click .more":"moreClick"},QM:function(b){$(this.el).append(b);wy(new ty(this.model.get("currentUser")),!1)},menuItemClick:function(b){b=b.target.id;$(".listeners_content_title").text(b);$(".listeners_menuItem").toggleClass("selected",!1);$(".listeners_menuItem[id='"+b+
"']").toggleClass("selected",!0);return!1},moreClick:function(b){$(b.currentTarget).fadeOut();var c=$(b.currentTarget).attr("data-currentoffset"),d=$(b.currentTarget).attr("data-nextoffset");c&&d?eA(this.nb,{countRowsOnBrowser:c,countRowsNeeded:d},r(this,function(b){$(".sections",this.el).append(b)})):$(b.currentTarget).closest(".section_page").next().fadeIn();return!1}});function oB(){}
oB=Backbone.View.extend({initialize:function(){this.referrer=this.options.referrer;this.Bd=this.options.cancelHash},el:$("#mainContent .pandoraOneInfo"),render:function(){function b(c,d,l){setTimeout(function(){$("#icons_wrapper img.active").removeClass("active");setTimeout(function(){l=(l+1)%3;$("#icons_wrapper .icon_img").eq(l).addClass("active");b(c,d,l)},d)},c)}R(tx);var c=this.model.get("currentUser"),d={isUserAUNZ:c.Sa,offerAnnualSub:c.Ce,monthlyPrice:py(so(c)),annualPrice:py(c.le.toString()),isGrandfathered:c.Oy()};
$(this.el).empty().append($("#pandoraOneTmpl").tmpl(d)).show();d=!1;null==c||c.p()?($(".trial",this.el).hide(),$(".upgrade",this.el).hide(),$(".start",this.el).show()):(c.rh?(d=!0,$(".trial",this.el).show(),$(".upgrade",this.el).hide()):($(".trial",this.el).hide(),$(".upgrade",this.el).show()),$(".start",this.el).hide());$(".btn_placeholder",this.el).hide();c&&c.Yb?($(".p4b_stuff").show(),$(".dmx_stuff").hide()):($(".p4b_stuff").hide(),$(".dmx_stuff").show());s("pandoraone_page_hit",{vendor_id:u,
istrial:d},this.model.get("currentUser"));c?($("#p1_subhead_line1_content",this.el).show(),$("#p1_subhead_line1_placeholder",this.el).hide(),$("#p1_subhead_line2_content",this.el).show(),$("#p1_subhead_line2_placeholder",this.el).hide()):($("#p1_subhead_line1_content",this.el).hide(),$("#p1_subhead_line1_placeholder",this.el).show(),$("#p1_subhead_line2_content",this.el).hide(),$("#p1_subhead_line2_placeholder",this.el).show());$("#p1_page",this.el).show();setInterval(function(){$("#bg1").toggleClass("active")},
3E3);setInterval(function(){$("#bg2").toggleClass("active")},2800);setInterval(function(){$("#bg3").toggleClass("active")},4E3);b(1500,750,0);return this},events:{"click .trial":"startTrialClick","click .upgrade":"upgradeNowClick","click .start":"startNowClick","click #dmx_learn_more":"dmxLearnMoreClick","click #p4b_learn_more":"p4bLearnMoreClick","click #p4b_upgrade":"p4bUpgradeClick"},startTrialClick:function(){V("/one/trial/start",!0,!0);s("pandoraone_submit_click",{vendor_id:u,action:"trial"},
this.model.get("currentUser"))},upgradeNowClick:function(){R(hv,{cancelCallback:r(this,function(){V(this.Bd,!0,!0)})});s("pandoraone_submit_click",{vendor_id:u,action:"upgrade"},this.model.get("currentUser"));return!1},startNowClick:function(){R(Dv,{onSuccessRedirect:"/_upgrade"});s("pandoraone_submit_click",{vendor_id:u,action:"startnow"},this.model.get("currentUser"));return!1},dmxLearnMoreClick:function(){V("/everywhere/business",!0,!0);s("pandoraone_submit_click",{vendor_id:u,action:"business"},
this.model.get("currentUser"))},p4bLearnMoreClick:function(){s("pandoraone_submit_click",{vendor_id:u,action:"business_learn"},this.model.get("currentUser"));R(pv,{source:"upgrade"});return!1},p4bUpgradeClick:function(){var b=this.model.get("currentUser");s("pandoraone_submit_click",{vendor_id:u,action:"business_upgrade"},this.model.get("currentUser"));!b||b.p()?R(Dv,{onSuccessCallback:function(){R(mv,{cancelCallback:function(){V("/upgrade",!0,!1)}})}}):R(mv,{cancelCallback:function(){V("/upgrade",
!0,!1)}});return!1}});function pB(){}
pB=Backbone.View.extend({initialize:function(){this.fd="intro";this.Gd=[];for(var b=0;b<window.giftChoiceList.length;b++)window.giftChoiceList[b].enabled&&(this.Gd.push(window.giftChoiceList[b]),this.Gd[this.Gd.length-1].index=this.Gd.length-1);this.Js=this.Gd[0]},close:function(){$z(this)},el:$("#mainContent .giftInfo"),render:function(){var b=this.model.get("currentUser");switch(this.fd){case "intro":$(this.el).empty().append($("#giftIntroTmpl").tmpl({isUserLoggedIn:!b.p()})).show();break;case "form":$(this.el).empty().append($("#giftEnterInfoTmpl").tmpl({username:b.Ka,
fullname:b.Jl})).show();$("#theme_bg .scrollable_content",this.el).css("width",180*this.Gd.length);for(b=0;b<this.Gd.length;b++)$("#theme_bg .scrollable_content",this.el).append($("#giftThemeTmpl").tmpl(this.Gd[b]));this.rA();ay($("#theme_bg",this.el));break;case "payment":R(Jv,r(this,function(){$(".payment").empty().hide();this.cancelClick()}));break;default:throw Error("Unknown gift state: "+this.state);}return this},rA:function(){$("#currentSelection",this.el).empty().append($("#selectedThemeTmpl").tmpl(this.Js));
$("#card_choice",this.el).val(this.Js.name)},events:{"click .signOutLink":"signOutClick","click .cancel":"cancelClick","click .next":"nextClick","click .login":"loginClick","click .register":"registerClick","click .sample_buttons .example":"exampleClick","click .sample_buttons .select":"selectClick","keyup #message":"messageKeyup"},loginClick:function(){lB("/buygift");V("/account/sign-in",!0,!1);return!1},registerClick:function(){lB("/buygift");V("/account/register",!0,!1);return!1},messageKeyup:function(){if(300<=
$("#message",this.el).val().length)return $("#message",this.el).val($("#message",this.el).val().substr(0,300)),$("#messageError",this.el).fadeIn(),!1;$("#messageError",this.el).fadeOut();return!0},exampleClick:function(b){b=$(b.target).closest(".sample_container").tmplItem().data;var c=ey("giftExamplePopup",$("#giftExampleHeaderTmpl").tmpl(b),$("#giftExampleContentTmpl").tmpl(b),$("#giftExampleFooterTmpl").tmpl(b));c.bind("closed",r(this,function(){$(".select",c).unbind("click");c.remove()}));$(".select",
c).bind("click",r(this,function(b){this.eA($(b.target).tmplItem().data);c.fadeTo(400,0,function(){c.remove()})}));$(this.el).append(c);return!1},selectClick:function(b){this.eA($(b.target).closest(".sample_container").tmplItem().data);return!1},eA:function(b){this.Js=this.Gd[b.index];this.rA();return!1},cancelClick:function(){switch(this.fd){case "form":this.fd="intro";break;case "payment":this.fd="form";break;default:throw Error("don't know how to cancel state: "+this.fd);}this.render();return!1},
nextClick:function(){if("form"==this.fd&&!this.iR())return!1;switch(this.fd){case "intro":this.fd="form";break;case "form":this.fd="payment";break;default:throw Error("don't know how to go to next state: "+this.fd);}this.render();return!1},iR:function(){me($("#sender_name",this.el).val())?$("#sender_name_error",this.el).fadeIn():$("#sender_name_error",this.el).fadeOut();me($("#recipient_name",this.el).val())?$("#recipient_name_error",this.el).fadeIn():$("#recipient_name_error",this.el).fadeOut();
var b="email"==$("input[name='gift_delivery']:checked",this.el).val(),c=$("#recipient_email",this.el).val();!b&&me(c)||vx(c)?$("#recipient_email_error",this.el).fadeOut():$("#recipient_email_error",this.el).fadeIn();$("#recipient_email",this.el).val()!=$("#recipient_email2",this.el).val()?$("#recipient_email2_error",this.el).fadeIn():$("#recipient_email2_error",this.el).fadeOut();return 0==$(".giftError:visible",this.el).length},signOutClick:function(){z.b(ti);return!1}});function qB(){}
qB=Backbone.View.extend({initialize:function(){this.Vi=this.options.gift;z.c(sg,r(this,this.giftEmailed));this.GA=window.giftChoiceList[0];for(var b=0;b<window.giftChoiceList.length;b++)if(window.giftChoiceList[b].name==this.Vi.skin){this.GA=window.giftChoiceList[b];break}},el:$("#mainContent .giftInfo"),render:function(){var b=this.model.get("currentUser");$(this.el).empty().append($("#giftShowTmpl").tmpl({username:b.Ka,noads:!b.J(),gift:this.Vi,theme:this.GA})).show();return this},events:{"click .print":"printClicked",
"click .email":"emailClicked"},printClicked:function(){window.print();return!1},emailClicked:function(){$(".email",this.el).hasClass("disabled")||($(".email",this.el).addClass("disabled"),z.b(gk,[this.Vi.giftCode,this.Vi.giftHash]));return!1},giftEmailed:function(){this.Vi.type="EMAIL";this.render()},close:function(){z.pa(this)}});function rB(){}
rB=Backbone.View.extend({initialize:function(){z.c(He,r(this,this.$a));z.c(Ie,r(this,this.Jf));z.c(eh,r(this,this.nJ));z.c(jh,r(this,this.HJ))},render:function(b){this.Jh=b;this.Fd()},Fd:function(){R(ox,{sponsor:this.Jh});$("#mainContent").children().hide();this.model.set({modalPanel:vu});var b=$("#sponsoredTrial img")[0],c=this.model.get("currentUser");c.p()?this.model.get("hasStations")?(c=this.model.get("stationList").pluck("_stationName"),c.shift(),b=$("#sponsoredTrialHasStationsTmpl").tmpl({stations:c,logo:b}),
$("#mainContent").children().hide(),$("#mainContent .sponsoredTrial").empty().append(b).show(),$("#noBtn").bind("click",this,r(this,function(){this.Q="newUser";z.b(xi)})),$("#yesBtn").bind("click",this,this.hz)):(b=$("#sponsoredTrialChoicesTmpl").tmpl({sponsor:this.Jh}),$("#mainContent .sponsoredTrial").empty().append(b).show(),$("#existingUserBtn").bind("click",this,this.Wp),$("#newUserBtn").bind("click",this,this.hz)):(b=$("#sponsoredTrialSignedInTmpl").tmpl({username:c.Ka,logo:b}),$("#mainContent .sponsoredTrial").empty().append(b).show(),
$("#startNowBtn").bind("click",r(this,function(){R(px,{path:"/ignored/ignored/"+this.Jh})})),$("#notMeLink").bind("click",this,this.Kr))},dj:function(){$("#mainContent .sponsoredTrial").fadeOut(r(this,function(){$("#mainContent .sponsoredTrial").empty()}))},sf:function(){this.Fd();return!1},HJ:function(b){this.Q&&(this.debug("registration failed"),(new X({message:b})).render(),this.Fd());return!1},nJ:function(){this.debug("login failed");this.Q&&(this.Q=null,(new X({message:"Sorry, I don't recognize your email and password."})).render())},
$a:function(){this.Q?"newUser"==this.Q?(this.Q=null,setTimeout(r(this,function(){this.Fd()}),300)):"startTrial"==this.Q?(this.Q=null,R(px,{path:"/ignored/ignored/"+this.Jh})):"logout"==this.Q&&(this.Q=null,setTimeout(r(this,function(){z.b(ui,this.fi);this.fi=null;this.Q="startTrial"}),300)):this.dj()},Jf:function(){"startTrial"==this.Q&&(this.Q=null,R(px,{path:"/ignored/ignored/"+this.Jh}))},Kr:function(){lB(hz());z.b(ti);return!1},kQ:function(b){var c=$("#email",this.el).val(),d=$("#password",this.el).val(),
e=$("input[name=remember]",this.el).is(":checked"),h=!1;wx(d)||(h=!0,$("#passError",this.el).text(lb()).fadeIn());vx(c)||(h=!0,$("#emailError",this.el).text(kb()).fadeIn());h||(h=b.data.model.get("currentUser"),c==h.Ka?R(px,{path:"/ignored/ignored/"+b.data.Jh}):(b.data.Q="startTrial",z.b(si,{username:c,password:d,keepLoggedIn:e})));return!1},Ii:function(b){var c=$("#email").val(),d=$("#password").val(),e=$("#birthyear").val(),h=$("#zipcode").val(),l=$("input[name=gender]:checked").val(),p=$("input[name=optin]").is(":checked"),
q=$("input[name=terms]").is(":checked"),t=$("input[name=remember]").is(":checked"),y=!1;vx(c)||($("#emailError").text(kb()).fadeIn(),y=!0);wx(d)||($("#passwordError").text(lb()).fadeIn(),y=!0);xx(e)?yx(e)||($("#birthyearError").text(ma()).fadeIn(),y=!0):($("#birthyearError").text(ma()).fadeIn(),y=!0);zx(mp(),h)||($("#zipcodeError").text(op()).fadeIn(),y=!0);Ax(l)||($("#genderError").text(ra()).fadeIn(),y=!0);q||($("#termsError").text(qa()).fadeIn(),y=!0);y||(c={username:c,password:d,birthYear:Number(e),
zipCode:h,emailOptIn:p,gender:l,keepLoggedIn:t},"logout"==b.data.Q?(b.data.fi=c,z.b(ti)):z.b(ui,c));return!1},hz:function(b){var c=$("#sponsoredTrial img")[0];$("#mainContent .sponsoredTrial").empty().append($("#sponsoredTrialRegisterTmpl").tmpl({logo:c}));$("#startNowBtn").click(function(){b.data.Q="startTrial";b.data.Ii(b)});$("#goBackBtn").click(function(){b.data.Q=!1;b.data.sf()});$(".redeem_field").click(b.data.yg);return!1},jz:function(b){var c=$("#sponsoredTrial img")[0];$("#mainContent .sponsoredTrial").empty().append($("#sponsoredTrialRegisterTmpl").tmpl({logo:c}));
$(".redeem_field").click(b.data.yg);$("#startNowBtn").click(function(){b.data.Q="logout";b.data.Ii(b)});$("#goBackBtn").click(function(){b.data.Q=!1;b.data.sf()});return!1},Wp:function(b){var c=$("#sponsoredTrial img")[0];$("#mainContent .sponsoredTrial").empty().append($("#sponsoredTrialLoginTmpl").tmpl({logo:c}));$("#startNowBtn").bind("click",b.data,b.data.kQ);$("#goBackBtn").click(function(){b.data.sf()});$(".redeem_field").click(b.data.yg);return!1},yg:function(b){(new $(b.target)).parent().siblings(".error").empty()},
debug:function(b){k.debug("SponsoredTrialView : ",arguments)}});function sB(){}
sB=Backbone.View.extend({initialize:function(){this.referrer=this.options.referrer;this.Bd=this.options.cancelHash;this.S=this.options.isBusiness;z.c(lk,r(this,this.lI));z.c(nk,r(this,this.ZI));z.c(Vh,r(this,this.Wi));z.c(Uh,r(this,this.Wi));z.c(Sg,r(this,this.Gb))},el:$("#mainContent .paymentConfirm"),render:function(){this.dg=qp("token");this.cs=qp("PayerID");me(this.dg)||me(this.cs)?setTimeout(function(){V(this.Bd,!1,!1)},100):z.b(mk,[this.dg])},ZI:function(b){var c=b.tax,d=b.amount,e=b.paypalEmail,
h=b.description,l=b.currencyCode;me(d)||me(c)||me(l)||me(e)||me(h)?this.Wi():ap()?(h=this.iH(b),b={},b.email=e,b.p2p="99"==d,b.isBusiness=this.S,b.tax=py(c),b.amount=py(d),b.duration=h.duration,b.summary_duration=h.Bt,b.summary_period=h.gs,b.payment_total=py((parseInt(c,10)+parseInt(d,10)).toString()),c=this.model.get("currentUser"),b.username=c.Ka,$(this.el).empty().append($("#paypalConfirmTmpl").tmpl(b)).show(),null==c||c.p()?($(".upgrade_now",this.el).hide(),$(".duration_container",this.el).hide()):
$(".start_now",this.el).hide(),$("#buttons",this.el).show()):(this.vA(),z.b(kk,[this.dg,this.cs,kp(),this.S]))},iH:function(b){var c={};b=b.description;return c=-1!==b.indexOf("Monthly payment")?{gs:"Monthly",duration:"month",Bt:"Monthly Subscription"}:-1!==b.indexOf("Annual payment")?{gs:"Annual",duration:"year",Bt:"Annual Subscription"}:{gs:"",duration:"",Bt:"Price"}},lI:function(b){this.br();var c=b.listenerState;b=null;if("PAY_TO_PLAY"==c)b=new X({message:ld()});else if("SUBSCRIBER"==c){if(b=
new X({message:jd()}),z.b(ng),c=this.model.get("currentUser"))c=vl.encrypt(c.s),c="https://4177752.fls.doubleclick.net/activityi;src=4177752;type=purch024;cat=purch865;qty=1;;ord=;cost="+$.trim($("#period_amount",this.el).text())+";u1="+c,Jp(c,function(){},function(){})}else if("BUSINESS"==c){b=new X({message:kd()});z.b(og);setTimeout(function(){R(kv)},0);return}b&&b.render();R(Lu)},Wi:function(b){this.br();var c;switch(b.code){case "PAYPAL_PAYMENT_DECLINED":c=kc();break;default:c=jc()}"PAYPAL_PAYMENT_ALREADY_PAID"!=
b.code&&(new X({message:c})).render();R(hv)},Gb:function(){this.br()},vA:function(){this.T||($(window).scrollTop(0),this.T=new hB({model:this.model,message:id()}),$("#main").append(this.T.render().el))},br:function(){this.T&&(this.T.trigger("close"),this.T=null)},events:{"click #paypal_buy":"paypalCompletePurchase","click #paypal_cancel":"paypalCancelPurchase","click #paypal_agree":"clearErrors"},paypalCompletePurchase:function(){if(1==$("input[name='paypal_agree']",this.el).length&&1==$("input[name='paypal_agree']:checked",
this.el).length!=!0){$(".agreeFieldError",this.el).text(bd()).fadeIn();var b=bd()}null==b?(this.vA(),z.b(kk,[this.dg,this.cs,kp(),this.S])):(new X({message:b})).render();return!1},paypalCancelPurchase:function(){V("/payment",!0,!0);return!1},clearErrors:function(b){$(b.target).siblings(".paymentFieldError").empty()}});function tB(){}
tB=Backbone.View.extend({gg:null,ZB:"payment_landing",XB:"pandora_one",YB:"pandora_one_thankyou",tu:"sign_up",$B:"sign_in",WB:"home",initialize:function(){z.c(pg,r(this,this.uO));z.c(mg,r(this,this.xO));z.c(ng,r(this,this.yO));z.c(Dg,r(this,this.wO));z.c(He,r(this,this.Rf));z.c(Ie,r(this,this.Rf));S(rw,r(this,this.IN));S(sw,r(this,this.JM));S(tw,r(this,this.bN));S(Qv,r(this,this.fM));S(tx,r(this,this.Cm));S(nv,r(this,this.DM));S(uw,r(this,this.cN));S(ww,r(this,this.qN));z.c(pg,r(this,this.zh));z.c(mg,
r(this,this.zh));z.c(ng,r(this,this.zh));S(rw,r(this,this.zh));S(nv,r(this,this.zh));S(tx,r(this,this.zh))},zh:function(){var b=this.model.get("currentUser");null!=b&&(b=b.yL)&&((new Image).src="//beacon.krxd.net/usermatch.gif?partner=pandora&partner_uid="+b,(new Image).src="//cm.g.doubleclick.net/pixel?google_nid=pandora6316&google_hm="+b)},uO:function(){$(this.el).append(uB("existing",vB(this)));$(this.el).append(wB("existing",vB(this)));$(this.el).append(xB("existing",vB(this)));$(this.el).append("<iframe id='sem-conversion' src='/static/counters/existingListenerConversion.html' style='border:none;height:0;width:0;'></iframe>");
yB(this,this.$B)},xO:function(b){$(this.el).append(uB("new",vB(this)));$(this.el).append(wB("new",vB(this)));$(this.el).append(xB("new",vB(this)));$(this.el).append("<iframe id='sem-conversion' src='/static/counters/registrationConversion.html' style='border:none;height:0;width:0;'></iframe>");yB(this,this.tu);b.Sa&&(this.rO(),this.vO())},rO:function(){$(this.el).append('<script src="https://secure.adnxs.com/px?id=711103&t=1" type="text/javascript">\x3c/script>')},vO:function(){$(this.el).append("<iframe id='marin-tracking' src='/static/counters/marinSEM.html' style='border:none;height:0;width:0;'></iframe>")},
ys:function(){$(this.el).append("<iframe id='sem-conversion' src='/static/counters/googleSEM.html' style='border:none;height:0;width:0;'></iframe>")},zO:function(){$(this.el).append("<iframe id='survey-tracking' src='/static/counters/surveySEM.html' style='border:none;height:0;width:0;'></iframe>")},yO:function(){$(this.el).append(xB("subscribe",vB(this)));this.ys();yB(this,this.YB)},wO:function(){$(this.el).append(xB("trial_start",vB(this)))},Rf:function(b){this.gg=b},Vm:function(b){$(this.el).append(b==
tB.gu||b==tB.iu||b==tB.hu||b==tB.tk?b==tB.tk?zB(this):AB(BB(b)):"")},DM:function(){this.ys();yB(this,this.ZB)},qN:function(){this.zO()},Cm:function(){this.ys();yB(this,this.XB)},cN:function(){yB(this,this.tu)},IN:function(){this.gg&&this.gg.p()&&this.Vm(tB.gu);yB(this,this.WB)},JM:function(){this.gg&&!bo(this.gg)&&this.Vm(tB.iu)},bN:function(){this.Vm(tB.hu)},fM:function(){this.gg&&bo(this.gg)&&this.Vm(tB.tk)}});tB.gu="anon";tB.iu="unreg";tB.hu="signed_out";tB.tk="active";
function uB(b,c){return AB("https://4177752.fls.doubleclick.net/activityi;src=4177752;type="+("existing"==b?"exist425":"sign-244")+";cat="+("existing"==b?"exist769":"sign-094")+";u1="+c+";ord="+c)}function wB(b,c){return"existing"==b?AB("https://sact.atdmt.com/action/PandoraReEngage/v3/ato."+c):AB("https://sact.atdmt.com/action/PandoraSignUp/v3/ato."+c)}
function xB(b,c){var d="http://1204.xg4ken.com/media/redir.php?track=1&token=1d097f49-7c07-4166-9aa3-ce55c88dedc9&val=0.0&orderId=&valueCurrency=USD&GCID=&kw=&product=&promoCode="+c+"&type=";"new"==b?d+="newusersignup":"existing"==b?d+="reengagement":"subscribe"==b?d+="Sale":"trial_start"==b&&(d+="trial");return"<img height='1' width='1' style='display:none' src='"+d+"'></img>"}function vB(b){b=b.model.get("currentUser");return null==b?"":vl.encrypt(b.s)}
function AB(b){return"<iframe height='1' width='1' frameborder='0' style='display:none' src='"+b+"'></iframe>"}function BB(b){return"/static/counters/retarget-"+b+".html"}function CB(b,c){b+="?";for(var d in c)b+=d+"="+c[d]+"&";return b.slice(0,-1)}function zB(b){var c=b.model.get("currentUser").u;b=vB(b);c=CB(BB(tB.tk),{listener_state:c,encrypted_listener_id:b});return AB(c)}
function yB(b,c){var d=b.model.get("currentUser"),d={encrypted_listener_id:vB(b),page_name:c,listener_state:d.u};$(b.el).append(AB(CB("/static/counters/atlasTracking.html",d)))};function DB(){}
DB=Backbone.View.extend({Ku:1E3,Ob:500,mB:-1*Math.PI/180,Ww:null,Hi:null,hp:null,dx:null,yz:0,pw:null,ml:null,wy:!1,Af:null,pk:!1,initialize:function(){$("#sponsoredListeningStatus").slideUp();(this.pk=Ae())||$("#slTimer").html('<svg style="height: 100%; width: 100%"><circle cx="10" cy="10" r="8" fill-opacity="0.0"" stroke="#ffffff" stroke-width="2"/><path id="slTimerDrain" fill="#ffffff" transform="translate(10, 10)"/></svg>')},el:$("#sponsoredListeningStatus").get(0),events:{"click #slButton":"sponsorButtonClick"},ut:function(b,
c,d,e,h,l,p,q){this.hp=b;this.Ww=c;this.Hi=d;this.dx=l;this.pw=e?e:"More";this.ml=h;this.wy=q;this.yz=p;null!=this.Af&&(clearTimeout(this.Af),this.Af=null);$("#sponsoredListeningStatus").is(":visible")?this.xy(r(this,this.Uw)):(this.Uw(),$("#sponsoredListeningStatus").slideDown(this.Ku,r(this,function(){this.sx(0)})))},BF:function(){this.Af&&clearTimeout(this.Af);var b=this.Ob+this.Ob+1E4;this.Af=setTimeout(r(this,function(){$("#sponsoredListeningStatus").slideUp(this.Ku);this.Af=null}),b);$("#slText").is(":visible")&&
this.xy(r(this,function(){$("#slText").html(this.dx);$("#slText").fadeIn(this.Ob)}))},sx:function(b){this.pk||(b+=0.015,b>=this.yz||(this.St(b),setTimeout(r(this,function(){this.sx(b)}),30)))},uz:function(b){return 10>b?"0"+b:b},cR:function(b,c){if(this.pk){var d=Math.floor((b+60)/3600),e=Math.floor((b+60)%3600/60);$("#slTimerNumerical").text(this.uz(d)+":"+this.uz(e))}else this.St(b/c)},St:function(b){b*=360;var c=b*this.mB;b="M 0 0 v -8 A 8 8 1 "+(180<b?1:0)+" 0 "+8*Math.sin(c)+" "+-8*Math.cos(c)+
" z";$("#slTimerDrain").attr("d",b);$("#slTimerDrain").hide().show(0)},qA:function(){this.hp?this.ky(this.Ww+" <strong>"+this.hp+"</strong>"):this.Wq()},Wq:function(){this.ky(this.Hi)},ky:function(b){var c=$("#slText"),d=r(this,function(){c.html(b);c.fadeIn(this.Ob)});c.is(":visible")?c.fadeOut(this.Ob,d):d()},Uw:function(){this.wy?this.Wq():this.qA();this.ml?($("#slButton").text(this.pw),$("#slButton").fadeIn(this.Ob)):$("#slButton").fadeOut(this.Ob);this.pk?($("#slTimerSvg").hide(),$("#slTimerNumerical").show()):
($("#slTimerNumerical").hide(),this.St(0),$("#slTimer").fadeIn(this.Ob))},xy:function(b){$("#slButton").fadeOut(this.Ob);$("#slTimer").fadeOut(this.Ob);$("#slTimerNumerical").fadeOut(this.Ob);$("#slText").fadeOut(this.Ob,b)},sponsorButtonClick:function(){this.ml&&window.open(this.ml);var b=this.model.get("currentVxReward");b&&s("value_exchange",{action:"vx_status_bar_cta_clicked",line_id:b.Yh,creative_id:b.Ic,offer_name:b.Nk,truex_instance_id:b.To,vendor_id:u,device_id:we},this.model.get("currentUser"))}});function EB(){}
EB=Backbone.View.extend({initialize:function(){this.Xb=!1;this.A="MONTHLY";this.bb={};S(Rv,r(this,this.ZJ));S(rx,r(this,this.dh));z.c(If,r(this,this.Md));z.c(rk,r(this,this.fK));z.c(pk,r(this,this.K));S(rx,r(this,this.dh));z.c(Xh,r(this,this.ay));z.c(Wh,r(this,this.EI));z.c(Sg,r(this,this.Gb))},el:$("#mainContent .payment"),ZJ:function(){var b=this.model.get("currentUser");null!=b&&b.rh?z.b(zj,"PaymentBackedTrial"):setTimeout(function(){V("/one",!1,!1)},100)},Md:function(b){if("/one/trial/start"==hz()){s("pbwt_payment_page_hit",
{vendor_id:u},this.model.get("currentUser"));b=b.cdata;for(var c=this.model.get("currentUser"),d={years:[],months:[]},e=(new Date).getFullYear(),h=0;12>h;h++)d.years.push(e+h),9>h?d.months.push("0"+(h+1)):d.months.push(h+1);null==b?(d.zipcode="",zx(mp(),c.Eb())?d.zipcode=c.Eb():d.zipcode=""):(d.customerName=b.customerName,d.zipcode=b.zipcode,d.displayableCardNumber=b.displayableCardNumber,d[b.cardCompany.toLowerCase()]="checked",d.expirationMonth=b.expirationMonth,d.expirationYear=b.expirationYear);
d.billingFrequency=this.A;d.offerAnnualSub=c.Ce;d.trialDuration=c.xz.toString();d.monthlyPrice=py(so(c));d.annualPrice=py(c.le.toString());d.isUserAUNZ=c.Sa;d.isV2="V2"===c.dk;d.showPaypalOrderConfirmScreen=ap();$("#mainContent").children().hide();e=$("#PaymentBackedTrialTmpl").tmpl(d);b&&($("#delete_card",e).show(),$("#delete_card",e).click(r(this,function(){confirm("Are you sure?")&&z.b(Zj,null);return!1})));$(this.el).empty().append(e);$(this.el).show();c.es&&($("#paypal_form",this.el).hide(),
$("#paypal_select_container",this.el).hide());null!=d.zipcode&&0<d.zipcode.length&&this.zipcodeFocus(null)}},fK:function(b){(b=b.redirectUrl)?window.location.href=b:this.ay()},ay:function(b){var c=ic();b&&b.code==m.d.zk()&&(c=Qb());(new X({message:c})).render();this.K&&this.K()},EI:function(b){var c=Nb();b&&b.code==m.d.zk()&&(c=Qb());(new X({message:c})).render();this.K&&this.K()},Gb:function(){this.K&&this.K()},ja:function(){this.T||($(window).scrollTop(0),this.T=new hB({model:this.model,message:id()}),
$("#main").append(this.T.render().el))},K:function(){this.T&&(this.T.trigger("close"),this.T=null)},qp:function(){$(".paymentFieldError",this.el).hide();$(".formFieldError",this.el).hide()},Dg:function(){$(".save_btn",this.el).attr("disabled","disabled")},events:{"click .bill_freq_input":"billingFrequencyClick","click #start_trial_pp":"startTrialPP","click #start_trial_cc":"startTrailCC","click #paypal_select":"paypalSelect","click #credit_select":"creditCardSelect","focus .payment_field_validated":"clearErrors",
"focusout #zip":"zipcodeFocus","keyup #zip":"zipcodeFocus","blur #zip":"zipcodeFocus","change #zip":"zipcodeFocus","keyup .payment_field input":"inputModified","change .subscription_selection input":"inputModified","change .payment_field select":"inputModified"},billingFrequencyClick:function(b){this.A=b.target.value},inputModified:function(b){if(!this.Xb)return this.Xb=!0,this.enableSubmit(b)},enableSubmit:function(b){!this.Xb||this.xe()||$(b&&b.target).hasClass("zipcode")||$(".pay_now",this.el).removeAttr("disabled");
return!1},zipcodeFocus:function(){this.gc("ANNUAL","ANNUAL");this.gc("MONTHLY","MONTHLY");return!0},startTrialPP:function(){1==$("input[name='agreePP']:checked",this.el).length!=!0?$(".agreePPFieldError",this.el).text(bd()).fadeIn():($(window).scrollTop(0),this.ja(),z.b(qk,[this.A,kp()]));return!1},startTrailCC:function(){this.model.get("currentUser");var b=$.trim($("input[name='name']",this.el).val()),c=$("input[name='cardnumber']",this.el).val(),d=Fx(c),e=$("select[name='expirationdate_month'] option:selected",
this.el).val(),h=$("select[name='expirationdate_year'] option:selected",this.el).val(),l=$("input[name='securitycode']",this.el).val(),p=$("input[name='zipcode']",this.el).val(),q=1==$("input[name='agreeCC']:checked",this.el).length,t=kp(),y=this.se(b,d,p,l,c,e,h);!0!=q&&($(".agreeCCFieldError",this.el).text(bd()).fadeIn(),y.push(bd()));0==y.length?(this.ja&&this.ja(),z.b(ok,[this.A,d,b,c,Number(e),Number(h),l,p,t])):(new X({message:y.join("<br>")})).render();return!1},se:function(b,c,d,e,h,l,p){this.qp();
var q=[];if(null==b||0==b.length)$(".nameFieldError",this.el).text(gd()).fadeIn(),q.push(gd());zx(mp(),d)||($(".zipcodeFieldError",this.el).text(op()).fadeIn(),q.push(op()));Bx(e)||($(".securitycodeFieldError",this.el).text(cd()).fadeIn(),q.push(cd()));Cx(h)&&Ex(c)||($(".cardNumberFieldError",this.el).text(ed()).fadeIn(),q.push(ed()));Gx(l,p)||($(".expriationFieldError",this.el).text(fd()).fadeIn(),q.push(fd()));return q},gc:function(b,c){if(b&&b.length){$("#salestax_amount."+c,this.el).html("");
var d=$("input[name='zipcode']",this.el).val(),e=this.model.get("currentUser");if(d&&d.length==(e.Sa?4:5)){if(c in this.bb)return;this.bb[c]=!0;R(qx,new az(d,b,c,!1))}this.Dg()}},dh:function(b){var c=b.tax,d=b.token;b=b.amount;try{c&&b&&($("#salestax_amount."+d,this.el).html(py(c)),this.Nj[d]=c)}catch(e){}finally{delete this.bb[d],this.xe()||this.enableSubmit(null)}},xe:function(){return this.bb&&0<Object.keys(this.bb).length},clearErrors:function(b){$(b.target).siblings(".paymentFieldError").hide();
$(b.target).siblings(".formFieldError").hide()},paypalSelect:function(){s("payment_paypal_select",{vendor_id:u},this.model.get("currentUser"));$("#creditcard_form",this.el).hide();$("#paypal_form",this.el).show()},creditCardSelect:function(){s("payment_creditcard_select",{vendor_id:u},this.model.get("currentUser"));$("#paypal_form",this.el).hide();$("#creditcard_form",this.el).show()}});function GB(){}
GB=Backbone.View.extend({initialize:function(){S(iv,r(this,this.eJ));S(jv,r(this,this.UJ));z.c(Of,r(this,this.qJ));z.c(Ch,r(this,this.xI));z.c(Sg,r(this,this.Gb))},el:$("#mainContent .businessMigration"),events:{"click #p1_business_convert":"businessConvertClick","click #business_convert_agree":"businessConvertAgreeChanged","focus .payment_field_validated input":"clearErrors"},render:function(){var b=this.model.get("currentUser"),b={mode:"business",businessMonthlyPrice:py(b.ll.toString()),businessAnnualPrice:py(b.kl.toString()),
billingFrequency:b.Ya()};$(this.el).empty();$(this.el).append($("#BusinessMigrationTmpl").tmpl(b)).show();s("business_migration_page_hit",{vendor_id:u},this.model.get("currentUser"));return this},eJ:function(){V("/business/join",!0,!0)},UJ:function(){var b=this.model.get("currentUser");!b||"/business/join"!=hz()||b.u!=m.v.td()||b.Sa?setTimeout(function(){R(Lu)},50):b.Qq?this.render():this.Rx()},Rx:function(){(new X({message:pd()})).render();setTimeout(function(){R(pv,{showBusinessInfoForm:!0,ignoreBusinessInfoCheck:!0})},
0)},Gb:function(){this.K()},xI:function(b){this.K();var c=md();b&&(b.code==m.d.xu()?c=nd():b.code==m.d.aC()?c=od():b.code==m.d.Se()?c=ia():b.code==m.d.uB()&&(c=pd(),this.Rx()));(new X({message:c})).render()},qJ:function(){this.K();setTimeout(function(){R(kv,{isMigration:!0})},10)},businessConvertAgreeChanged:function(){this.clearErrors();$("input#business_convert_agree",this.el).is(":checked")?$(".p1_submit",this.el).removeAttr("disabled"):$(".p1_submit",this.el).attr("disabled","disabled")},businessConvertClick:function(b){if($(b&&
b.target).hasClass("disabled")||!this.model.get("currentUser"))return!1;var c=$.trim($("input[name=bill_freq_input]:checked",this.el).val());b=$("input#business_convert_agree",this.el).is(":checked");b=this.se(c,b);if(0!=b.length)return(new X({message:b.join("<br>")})).render(),!1;s("business_migration_page_click",{vendor_id:u},this.model.get("currentUser"));b=new wA;b.bind("submit",r(this,function(b){this.ja();z.b(Ej,[c,b])}));b.bind("cancel",r(this,function(){(new X({message:eb.u3()})).render()}));
b.render();return!1},clearErrors:function(b){b=b?b.target:this.el;$(b).siblings(".paymentFieldError").hide();$(b).siblings(".formFieldError").hide()},se:function(b,c){this.clearErrors();var d=[];Dx(b)||($(".billingFieldError",this.el).text(dd()).fadeIn(),d.push(dd()));!0!=c&&($(".agreeFieldError",this.el).text(bd()).fadeIn(),d.push(bd()));return d},ja:function(){this.T||($(window).scrollTop(0),this.T=new hB({model:this.model,message:id()}),$("#main").append(this.T.render().el))},K:function(){this.T&&
(this.T.trigger("close"),this.T=null)}});function HB(){}
HB=Backbone.View.extend({initialize:function(){S(kv,r(this,this.cJ));S(lv,r(this,this.SJ))},el:$("#mainContent .businessConfirmation"),events:{"click #submit_business_info":"handleStartListeningClick"},render:function(){var b=this.model.get("currentUser"),c={showReceiptLink:!this.qL};$(this.el).empty();$(this.el).append($("#BusinessConfirmationTmpl").tmpl(c)).show();s("business_confirmation_page_hit",{vendor_id:u},b);return this},cJ:function(b){this.qL=b&&b.isMigration;V("/business/welcome",!0,!1,
!1)},SJ:function(){this.model.get("currentUser").S()?this.render():setTimeout(function(){R(Lu)},50)},handleStartListeningClick:function(){z.b(ei);setTimeout(function(){R(Lu)},10)}});function IB(){}
IB=Backbone.View.extend({initialize:function(){z.c(Nf,r(this,this.AK));z.c(Bh,r(this,this.HI));z.c(Sg,r(this,this.K));S(pv,r(this,this.dJ));S(qv,r(this,this.TJ));pz("/business");this.source=null},el:$("#mainContent .p4bInfo"),dJ:function(b){this.source=b&&b.source?b.source:"unknown";this.yP=b&&!!b.showBusinessInfoForm;this.RK=b&&!!b.ignoreBusinessInfoCheck;V("/business",!0,!0,!0)},TJ:function(){var b=this.source||"url",c=this.model.get("currentUser");c&&c.Yb?(s("business_learnmore_page_hit",{vendor_id:u,
source:b},this.model.get("currentUser")),this.render(),this.source=null):(ve.set({postLoginPath:"/business"}),setTimeout(function(){R(Lu)},0))},render:function(){R(ux);var b=this.model.get("currentUser"),b={isUserAUNZ:b.Sa,monthlyPrice:py(b.ll.toString()),annualPrice:py(b.kl.toString())};$("#mainContent").children().hide();$(".contentnav").css("border-bottom","none");$(this.el).empty().append($("#pandoraForBusinessTmpl").tmpl(b)).show();this.yP&&this.p4bUpgradeClick();return this},events:{"click #p4b_upgrade":"p4bUpgradeClick",
"click #p4b_next":"p4bNextClick","click #p4b_cancel_link":"p4bCancelLinkClick"},p4bUpgradeClick:function(){var b=this.model.get("currentUser");!b||b.p()?R(Dv,{onSuccessCallback:r(this,this.p4bUpgradeClick)}):!this.RK&&b.Qq?this.Sx():($("#p4b_landing_page #p4b_upgrade").hide(),$("#p4b_information").slideDown(500),$("#p4b_information").get(0).scrollIntoView(),s("business_learnmore_page_click",{vendor_id:u,action:"switch_now"},this.model.get("currentUser")))},p4bNextClick:function(){var b=$.trim($("input[name='company_name']",
this.el).val()),c=$("select[name='industry'] option:selected",this.el).val(),d=$.trim($("textarea[name='address']",this.el).val()),e=$("select[name='state'] option:selected",this.el).val(),h=$.trim($("input[name='business_zip']",this.el).val());b&&c&&d&&e&&h?(this.zA=!0,this.ja(),z.b(Dj,[b,c,d,e,h]),s("business_learnmore_page_click",{vendor_id:u,action:"next"},this.model.get("currentUser"))):(b=$("#p4b_information_errors"),b.show(),b.stop().css({backgroundColor:"red",color:"white"}).animate({backgroundColor:"white",
color:"red"},800),s("business_learnmore_page_click",{vendor_id:u,action:"validation_error"},this.model.get("currentUser")))},p4bCancelLinkClick:function(){setTimeout(function(){R(Lu)},0)},AK:function(){this.zA&&(this.zA=!1,this.K(),this.Sx())},Sx:function(){R(mv,{cancelCallback:function(){R(pv)}})},HI:function(b){this.K();(new X({message:b.hg})).render()},ja:function(){this.T||($(window).scrollTop(0),this.T=new hB({model:this.model,message:id()}),$("#main").append(this.T.render().el))},K:function(){this.T&&
(this.T.trigger("close"),this.T=null)}});var Z;
(function(b){var c={skip:"tunervideo","return":"tunervideo",station:"tuner",shuffle:"tuner"},d=yp.SLOT_SIZE_AUTOPLAY_VIDEO,e=yp.SLOT_SIZE_USER_INITIATED_VIDEO;Z=function(b){this.model=b;this.ke=new Backbone.Model({creativeId:"",lineId:""});this.ta=new Y({model:this.model,adIdentifier:this.ke});this.Ok=_.bind(this.Ok,this);this.ta.bind(Y.ng.VIDEO_EVENT,this.Ok);this.Mk=_.bind(this.Mk,this);this.ta.bind(Y.ng.LOG_TIME_TO_PLAYER,this.Mk);this.KL="VideoAdController : ";this.mz();this.startTime=Ed();this.sm=
this.oj=this.Ae=this.wc=0;this.Fi=this.Mf=!1;this.Uk=1;Z.wp=null;Z.$j=0;Z.ex=0;Z.ZN="ooyala";Z.$N="standard";Z.kv=yp.AUDIO_AD_SIZE;z.c(Zf,r(this,function(){this.sm=Ed()}));z.c(Ee,r(this,this.mz));z.c(He,r(this,this.Rf));z.c(Jk,r(this,this.sR));z.c(Ve,r(this,this.rR));z.c(Uk,r(this,this.iB));z.c(Vk,r(this,this.iB));z.c(Wk,r(this,this.gf));z.c(Xk,r(this,this.QD));z.c(Vk,Z.Mo);z.c(Tk,Z.CN);z.c(al,r(this,this.yM));z.c(bl,r(this,this.HM));z.c(cl,r(this,this.EM));z.c($k,r(this,this.nM));z.c(Zk,r(this,this.LD));
this.Kk()&&z.c(Zk,r(this,this.ND))};Z.prototype.destroy=function(){this.ta.unbind(Y.ng.VIDEO_EVENT,this.Ok);this.ta.unbind(Y.ng.LOG_TIME_TO_PLAYER,this.Mk);this.Zl&&(clearTimeout(this.Zl),this.Zl=null);z.pa(this)};Z.prototype.ND=function(b){b.size?Z.kv=b.size:k.debug("Ignoring Audio Ad Size Change to value: "+b.size)};Z.prototype.Mk=function(){if(!(0>=Z.$j)){if(11==this.model.get("currentUser").s%100){Z.ex=Fd();var b=Z.ex-Z.$j;Z.$j=0;var c="",c=this.ta.dB?Z.ZN:Z.$N;s("time_to_player_web",{ua:navigator.userAgent,
site_version:window._pandoraVersion,browser:se(),player_type:c,time_to_player_msec:b})}Z.$j=0}};Z.prototype.qq=function(b){return c[b]||"tuner"};Z.prototype.uL=function(){return null!=dp()||"true"===gp()||"true"===A._data.videoAdTestMode};Z.prototype.mz=function(){this.debug("AppInit event - reinitializing config variables");this.enabled=!0==A._data.apvEnabled;this.uL()?(this.zu=6,this.Su=this.Pu=10,this.Ru=2):(this.zu=So(A._data.timeToStartVideoAds,180),this.Ru=So(A._data.timeBetweenDisplayAndVideoAd,
5),this.Pu=So(A._data.timeBetweenAudioAndVideoAd,60),this.Su=So(A._data.timeBetweenVideoAds,900));this.CC=120};Z.prototype.Rf=function(){this.debug("USER-CHANGE event - reinitializing time & indexes");this.startTime=Ed();this.sm=this.oj=this.Ae=this.wc=0;this.Uk=1};Z.prototype.debug=function(b){k.debug(this.KL+Ed()+" : ",arguments)};Z.prototype.sR=function(){this.oj=Ed()};Z.prototype.iB=function(b){b&&!1===b.hb()&&(this.wc=Ed())};Z.prototype.rR=function(b){b instanceof Eo&&(this.Ae=Ed())};Z.prototype.J=
function(b,c){var d=this.model.get("currentUser"),e=this.model.get("currentStation");if(d){var t=this.model.get("hasStations"),y=c?!0:my(),E=!d.p(),e=e&&C.za(e);return d.J()&&t&&y&&E&&!e}return!1};Z.prototype.ss=function(){var b=Ed(),c=!1;this.enabled&&!this.Fi&&b-this.sm>this.CC&&b-this.startTime>this.zu&&b-this.Ae>this.Pu&&b-this.wc>this.Su&&b-this.oj>this.Ru&&(c=!0);this.debug("Ready for Video ad? : enabled : "+this.enabled+" : disabled for current station : "+this.Fi+" : now : "+b+" : since start : "+
(b-this.startTime)+" : since sv : "+(b-this.sm)+" : since lv : "+(b-this.wc)+" : since la : "+(b-this.Ae)+" : since ld : "+(b-this.oj)+" : ready : "+c);return c};Z.prototype.EA=function(){var b=this.model.get("currentStation"),b=null!==b&&!C.za(b),c=this.model.get("currentUser"),c=null!==c&&!c.p();return b&&c};Z.prototype.rD=function(b,c){if(!this.Kk())return!1;if("move"===b)this.qg("move",!1,c);else if("thumbsdown"===b)this.qg("thumbsdown",!1,c);else if("tired"===b)this.qg("tired",!1,c);else return!1;
return!0};Z.prototype.QD=function(b){var c=b?b.interaction:"";b=b?b.currentTrack:null;"skip"===c?this.qg("skip",!1,b):"station"===c?this.OD(b):"return"===c?this.qg("return",!0,b):this.rD(c,b)||z.b(Tk,{})};Z.prototype.OD=function(b){this.Fi=!1;var c=this.model.get("currentStation"),d=null,d=c&&c.D()?"shuffle":"station";c&&!Bn(c)?this.qg(d,!1,b):z.b(Tk,{interaction:d})};Z.prototype.yM=function(b){this.px(b.key,b.value,!0)};Z.prototype.HM=function(b){b.callback&&(Z.Wa=b.callback);this.px(b.key,b.value,
!1)};Z.prototype.EM=function(b){this.YN(b.url,b)};Z.prototype.MD=function(b){this.Mf&&(this.debug("Got no ad in time ... bailing out"),this.Mf=!1,this.Jt=!0,z.b(Tk,{interaction:b}),z.b(ei,{userInitiated:!1}))};Z.prototype.mD=function(b,c,e,q,t){C.Vf(B.Ri(),b,c,d,!1,r(this,function(c,l){var I=this.model.get("currentUser");I.vP&&""!=t&&(this.debug("Logging video ad urls into hive table"),s("ad_urls_comparing",{server_ad_url:t,client_ad_url:l,ad_type:"video"},I));Z.$j=Fd();I=this.ps(c,l,b,d);e&&(I&&
k.info("Received a video ad while in value exchange. Suppressing the video ad."),I=null,this.wc=Ed());z.b(Tk,{ad:I,interaction:q});this.Ac(I,q)}),r(this,function(){this.Gl();z.b(Tk,{interaction:q})}))};Z.prototype.lD=function(b,c,e){var q=this;c=c.split(":");var t=(fp()||"https:"==window.location.protocol?Tn():mn())+"util/dartCreative.jsp?ad="+c[0]+"&c="+c[1];this.debug("Get test ad : "+t);Bp(t,function(c){c=q.ps(c,t,b,d);z.b(Tk,{ad:c,interaction:e});q.Ac(c,e)},function(){q.Gl();z.b(Tk,{interaction:e})})};
Z.prototype.tD=function(b,c,d){if(!C.Da()||"return"===b)return!1;if(!this.enabled||this.Fi)return this.debug("video ads are not configured for current station."),d(!1),!0;if(!c||c.My())return this.debug("There is not music track for the current Chronos flow...not attempting to get ad from service."),d(!1),!0;b=c.r().n;var e=c.k.So,t=this.model.get("stationList").models,y=io(this.model.get("currentUser")),y={segment:y.charAt(y.length-1)};this.EA()&&(y.index=C.Zk);C.fg(y,b,t);C.Oe(y);t=this.qq(null);
d=_.bind(function(b,c){if(_.isString(c))return b(!1),!0;c=c||[];var d=_.filter(c,function(b){return"VIDEO_AD"===b.response.adType});this.debug("Number of Ads fetched :"+c.length);this.debug("Number of Video Ads fetched :"+d.length);d.length!==c.length&&this.debug("We got mixed types of ads!");b(0<d.length?d:!1);return 0<d.length},this,d);d=ge(d,8E3,"REQUESTFAILED");var E=Z.kv,I=E===yp.AUDIO_IN_STATION_AD_SIZE;k.debug("Sending chronos (video) ad request");C.Yz({currentStationData:b,options:y,adToken:"none",
callback:d,forcedAudioAd:cp()||!1,lastDisplayAdTime:this.oj,requestType:B.Ri(),subZone:t,currentSize:E,isInStationAd:I,currentStationTrack:c,currentStationTrackType:e,isUserInitiated:!0,handlerType:"VIDEO"});return!0};Z.prototype.ZD=function(b,c,d,e){this.Mf?e(!1):this.J(!1,c)?this.tD(b,d,e)||e(this.ss(b)):e(!1)};Z.prototype.oD=function(){var b={};this.EA()&&(b.index=this.Uk);var c=this.model.get("currentStation"),d=this.model.get("stationList").models;C.fg(b,c,d);C.Oe(b);b.vx=this.model.get("currentVxReward")?
"1":"";b[B.mg]=!0;return b};Z.prototype.$D=function(){var b=this.model.get("currentVxReward");return b&&b.Zm()};Z.prototype.kD=function(b,c){this.Mf=!0;var d=this.qq(b);this.debug("Ready to fetch Video Ad for "+b+" : from zone : "+d);this.Jt=!1;var e=this.oD(),t=this.$D(),y=dp();!_.isNull(y)&&!_.isUndefined(y)&&0<y.length?this.lD(d,y,b):this.mD(d,e,t,b,c);this.Zl=_.delay(r(this,this.MD),1E4,b)};Z.prototype.qg=function(b,c,d){z.b(Sk,b);this.ZD(b,c,d,_.bind(function(c){var d="";"boolean"!==typeof c||
c?("undefined"!=typeof c&&null!=c&&0<c.length&&(this.debug("Parsing server generated video ad url from response"),"VIDEO_AD"==c[0].response.adType&&(c=c[0].response.content,null!=c&&"undefined"!=typeof c&&(d=c))),this.kD(b,d)):z.b(Tk,{interaction:b})},this))};Z.prototype.Ac=function(b){this.debug("Ready to show the current video ad : "+JSON.stringify(b)+" : tooLate? : "+this.Jt);!this.Jt&&b&&(clearTimeout(this.Zl),this.ta.render(b))};Z.prototype.Gl=function(){this.Mf=!1};Z.prototype.ps=function(b,
c,e,q){var t,y=null;t=null;null!==b?(t=this.cO(b),b=$.trim(b),y=new Sy(C.Cj(b,e,q)),null!==t&&2==t.length?(y.Ic=t[1],y.Ho=t[0],this.ke.set({lineId:t[0],creativeId:t[1]})):this.ke.set({lineId:"",creativeId:""}),c=y.C(),this.debug("Got video ad for : subZone - "+e+" : slotSize - "+q+" : type - "+y.C()),"VIDEOAD"==c||"HOUSE"==c?this.debug("Got valid video ad! path = "+Zy(y)):"ANIMATEDOVERLAY"==c?this.debug("Got Animated overlay",y):(t="Invalid ad type ? "+c+" : for subzone : "+e,this.debug(t),zp(b,d,
t,e,this.model.get("currentUser")),y=null)):(t="Empty ad for subzone : "+e,this.debug(t),zp(c,q,t,e,this.model.get("currentUser")));this.Gl();return y};Z.prototype.px=function(b,c,d){this.debug("Ready to fetch user initiated Video Ad for key : "+b+" : val : "+c);if(b&&c){this.Mf=!0;var q=this.qq(null),t={};t[B.mg]=!0;var y={};y[b]=c;b=this.model.get("currentStation");c=this.model.get("stationList").models;C.fg(t,b,c);C.Oe(t);var E=this,I=A._data.useTestAds;C.DO(q,t,y,e,function(b,c){!0===I&&(b="<methodResponse><params><param><value><struct><member><name>type</name><value><string>VIDEOAD</string></value></member><member><name>uif</name><value><string>vasttag</string></value></member><member><name>impression</name><value><string>https://www.pandora.com/impression</string></value></member><member><name>logoimage</name><value><string>/static/ads/video_overlay_logos/http://test.logo.url</string></value></member><member><name>clickthrough_logo</name><value><string><![CDATA[http://www.not/]]\x3e</string></value></member><member><name>clickthrough_videoPlayer</name><value><string><![CDATA[http://www.not/]]\x3e</string></value></member><member><name>image</name><value><string>/radio/static/ads/in_tuner_tile/http://test.tile.url</string></value></member><member><name>dimmed</name><value><string>/radio/static/ads/in_tuner_tile/http://test.tile.url</string></value></member><member><name>clickthrough_songSlide</name><value><string><![CDATA[http://www.not/]]\x3e</string></value></member><member><name>companion</name><value><string>companionValue</string></value></member></struct></value></param></params></methodResponse>");
var h=E.ps(b,c,q,e);h.Sj(d);h.Rs(!1);E.Ac(h,"userInitiated")},function(){E.Gl()})}};Z.prototype.YN=function(b,c){this.debug("Ready to play movie: "+b+", skip at: "+c.skipDelaySeconds+", show scrubber: "+c.showScrubber);this.Mf=!0;var d=this.model.get("currentStation");c.type="VIDEOAD";c.movie=b;c.onAdvertiserStation=d&&C.za(d);d=new Sy(c);d.Rs(!1);d.Sj(!1);d.mj=!0;c.creativeId&&(d.Ic=c.creativeId);c.adId&&(d.Ho=c.adId);this.Ac(d,"playMovie")};Z.prototype.gf=function(c){c&&(clearTimeout(Z.wp),Z.wp=
setTimeout(function(){k.info("Pinging Comscore for video ad playback");b.COMSCORE&&b.COMSCORE.beacon({c1:1,c2:"6036333",c3:"",c4:"",c5:"09",c6:"",c10:""})},3E3),c.hb()||void 0!=c.mj&&!0==c.mj||(this.Uk++,this.model.set({currentTrack:c})),this.Kk()&&"HOUSE"==c.C()&&(k.info("Chronos - we've got a HOUSE video start event - time to register the impression"),c=c.Ic,Z.FA&&(Z.ig||(Z.ig=0),Z.ig+=1),C.Rm(c,0,0,!0,function(){k.info("Chronos - HOUSE VideoAdImpression registered successfully")},function(){k.info("Chronos - ERROR REGISTERING HOUSE VIDEO AD IMPRESSION")})))};
Z.prototype.cO=function(b){var c=/\x3c!-- *([0-9]+) *: *([0-9]+) *--\x3e/.exec(JSON.stringify(b));b=null;return c&&3==c.length&&(b=[c[1],c[2]],c=b[1],"undefined"!==typeof c&&"%ecid!"!==c)?b:null};Z.prototype.nM=function(){this.Fi=!0};Z.Wa=null;Z.CN=function(b){b&&b.ad||!Z.Wa||(Z.Wa(),Z.Wa=null)};Z.Mo=function(){clearTimeout(Z.wp);Z.Wa&&(Z.Wa(),Z.Wa=null)};Z.DL=function(b,c){z.b(al,{key:b,value:c,isUserInitiated:!0})};Z.prototype.Kk=function(){var b=this.model.get("currentUser");return b&&b.Rq};Z.prototype.Ok=
function(b){if(this.Kk())switch(b.event_type){case "start":k.info("Chronos - we've got a video start event - time to register the impression");var c=b.creative_id,d=Number(Math.round(b.duration));b=!!b.is_pandora_link;Z.FA&&(Z.ig||(Z.ig=0),Z.ig+=1);C.Rm(c,-1,d,b,function(){k.info("Chronos - VideoAdImpression registered successfully")},function(){k.info("Chronos - ERROR REGISTERING VIDEO AD IMPRESSION")})}};Z.prototype.LD=function(b){b.adIdentifiers&&b.adIdentifiers.creativeId&&b.adIdentifiers.lineId&&
this.ke.set({lineId:b.adIdentifiers.lineId,creativeId:b.adIdentifiers.creativeId})};b.launchVideoAd=Z.DL;b.VideoAdController=Z})(this);function JB(b){this.model=b;this.ta=new lA({model:this.model});$.address.bind("change",r(this,this.Pr));W("/land",!0,!0,!0,r(this,this.zL));S(Jw,r(this,this.YM));S(Kw,r(this,this.XM));S(Lw,r(this,this.Em));S(Iv,r(this,this.gM));S(av,r(this,this.TM));S(nx,r(this,this.SM));S(Mw,r(this,this.pN));S(Nw,r(this,this.CM));S(Qw,r(this,this.wj));S(Pw,r(this,this.wM));S(Sw,r(this,this.PM));S(Tw,r(this,this.MM));S(Uw,r(this,this.NM));S(Vw,r(this,this.OM));S(Ow,r(this,this.wj));S(Rw,r(this,this.wj));S(Xw,r(this,
this.wj));S(Ww,r(this,this.LM));S(Yw,r(this,this.$L));S(Zw,r(this,this.ZL));S(kx,r(this,this.De));S(ax,r(this,this.oN));S(bx,r(this,this.kN));S(cx,r(this,this.lN));S(gx,r(this,this.RM));S(lx,r(this,this.mN));S(ex,r(this,this.rM));S(fx,r(this,this.BM));S(Yu,r(this,this.lz));S(Zu,r(this,this.lz));S(hx,r(this,this.De));S(jx,r(this,this.De));S(tx,r(this,this.Cm));S(ux,r(this,this.Cm));S(Dw,r(this,this.WM));S(Ew,r(this,this.PN));S(ix,r(this,this.$M));S(pw,r(this,this.De));S(qw,r(this,this.De));S(ox,r(this,
this.hN));S(Mv,r(this,this.VM));S(Nv,r(this,this.UM));S(Ov,r(this,this.ZM));z.c($i,r(this,this.JN));z.c(Zi,r(this,this.tN));z.c(gi,r(this,this.vN));z.c(ei,r(this,this.wN));z.c(ii,r(this,this.sN));z.c(ji,r(this,this.rN));z.c(ki,r(this,this.lM));z.c(li,r(this,this.kM));z.c(uj,r(this,this.zM));z.c(vj,r(this,this.zN));z.c(pi,r(this,this.aN));z.c(Pi,r(this,this.FM));z.c(Ij,r(this,this.tM));z.c(Jj,r(this,this.AN));z.c(cf,r(this,this.qz));z.c(oh,r(this,this.nz));z.c(nh,r(this,this.nz));z.c(Je,r(this,this.IM));
z.c(kj,r(this,this.De));z.c(Kj,r(this,this.De));z.c(Lj,r(this,this.De));z.c(Ie,r(this,this.Rf));z.c(Re,r(this,this.iN));z.ib(Se,r(this,this.nN));z.c(Ee,r(this,this.init));z.c(ol,r(this,this.jM));this.model.bind("change:modalPanel",r(this,this.nF));this.model.bind("change:currentUser",r(this,this.Rf));this.model.bind("change:currentStation",r(this,this.jN));this.model.bind("change:currentTrack",r(this,this.Bi));this.model.bind("change:stationSortOrderAlpha",r(this,this.gN));this.model.bind("change:displayingCompanion",
r(this,this.kG));this.model.bind("change:currentVxReward",r(this,this.HN));z.yh(Ve,r(this,this.uN));z.c(Vk,r(this,this.Mo));z.c(Uk,r(this,this.RD));z.c(Wk,r(this,this.gf));$("#ad_controls .skipLink").click(r(this,this.qz));this.BC=So(A._data.timeBetweenAudioAndDisplayAd,5);this.DC=So(A._data.timeBetweenVideoAndDisplayAd,5);this.Qu=So(A._data.timeBetweenDisplayAds,5);this.vB="2000x2";this.CB="2000x2,300x250,300x600";this.fe="radio";this.kg="backstage";this.Bk="themedstation";this.uk="createstation";
this.cu="addvariety";this.Ju="share";this.fo="trial";this.uC=[this.uk,this.Bk,this.cu,this.Ju,this.fo];this.HC="play|share|buy|lyrics|volume|likeUp|likeDown|rateUp|rateDown|pause|skip|playSample";this.jo="/radioAdEmbedGPT.html";this.io="/radioAdEmbedAsyncGPT.html";this.Zu="/radioAdEmbedVx.html";this.Hm=this.te=this.ze=0;this.Il=Vo();this.ul=this.Rd=this.vc=!1;this.Uv=null;this.Xa=this.fe;this.wc=this.Ae=0;this.Sg=A._data.displayAd;KB=null;this.Yt=LB=!1;this.vl=this.Gp=0;this.xx=this.Fp=!1;this.Nu=
"246976901:44334262 215333213:33803897 246976901:44334262 210400547:43579993 246976901:44334262 246983691:44307832 215333213:33803897 246983691:44307832 210400547:43579993 246983691:44307832 246976901:44334262 215333213:33803897 210400547:43579993 215333213:33803897".split(" ");MB=this}var KB,LB,MB,NB,OB;f=JB.prototype;f.init=function(){this.Uv="2000x2,300x250";this.model.get("hasStations")||(this.Il=!0)};
f.Ac=function(b){var c=this.model.get("currentVxReward");c&&c.Zm()?(Bp(C.Wg(),function(){},function(){}),C.Cx()):this.ta.render(b)};f.Rf=function(){var b=this.model.get("currentUser");(this.i=b)&&(b.J()||this.ta.jb(!0))};f.Xc=function(){var b=this.model.get("currentUser");return b&&b.ve()&&!this.xx?this.io:this.jo};f.Cm=function(){this.ta.jb(!0,!0)};f.nN=function(){this.model.get("hasStations")||this.ta.yl()};
f.jM=function(b){if(!this.Fp){var c=parseInt(b.delaySeconds,10);this.vl=isNaN(c)||c>ep()?ep():c;this.Gp=Ed();this.Fp=!0;var c=this.model.get("currentUser"),d=null,e=null;null!=b.currentLineIdCreativeId&&(b=b.currentLineIdCreativeId.split(":"),2==b.length&&(d=b[0],e=b[1]));s("delay_ad_refresh",{line_id:d,creative_id:e,delay_duration:this.vl,listener_id:c.s,vendor_id:u,device_id:we,accessory_id:null,device_os:se(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},c)}};
f.Bi=function(){var b=this.model.get("currentTrack");this.model.set({audioAdPlaying:b&&(b instanceof Eo||b.Jc||b.Hk&&!(b instanceof Ho))});b&&b instanceof Eo&&(this.Hm=1);if(b instanceof Hn){var c=b.vf,d=b.ol;if(!c&&!d){var c="defaultaudiocompanion",e=this.model.get("currentStation");if(e&&e.La()||!(b instanceof Eo))c=null}if(c||d)d?-1==d.indexOf("{{startvastcompanion}}")&&(this.model.set({displayingCompanion:!0}),PB(this,{adContent:d}),this.Ac(this.Xc())):(this.debug("requesting companion"),c={companion:c},
b instanceof Eo&&(c.mad="audio"),this.model.set({displayingCompanion:!0}),QB(this,c),RB(this,this.fe),this.Vf(c,!0))}else null!=b&&(this.model.set({displayingCompanion:!1}),this.Xa==this.fe&&this.Rd&&RB(this,this.kg))};f.WM=function(b){var c=b.companion;c&&(this.xx=void 0!=b.forceSyncGPT&&!0==b.forceSyncGPT?!0:!1,this.Vf({companion:c},!0),b.isCompanionAd&&this.model.set({displayingCompanion:!0}))};
f.PN=function(b){var c=null,d=b.width,e=b.height,h=b.creativeType,l=b.resourceType,p=b.url,q=b.htmlCode,t=b.clickThroughUrl;b=b.pandoraContainer;if(d&&e){var y=this.ta.WN(d,e);l?"HTML"==l?(b=b.split("{{startvastcompanion}}")[0]+q,b=b.replace("{{format}}",y)):"static"==l?(b=b.replace("{{startvastcompanion}}"," "),b=b.replace("{{format}}",y),b=b.replace("{{imageurl}}",p),b=b.replace("{{clickthrough}}",t),-1<h.indexOf("swf")||-1<h.indexOf("flash")?b='<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js">\x3c/script>'+
b+"<script>swfobject.embedSWF('"+p+"', 'vcPayload',"+d+","+e+", '8', null, {'allowscriptaccess': 'always'}, {'wmode': 'opaque'}, {'id':'vastCompanionSWF'});\x3c/script>":-1<h.indexOf("jpg")||-1<h.indexOf("jpeg")||-1<h.indexOf("png")||-1<h.indexOf("gif")||(c="resource type is static, but creativeType isn't flash or static image")):c="unrecognized type; must be html / flash / or gif:png:jpg image":c="resourceType is required"}else c="width and height are required attributes";c?zp("Ooyala VAST Companion",
"2000x2","AdController.parseVastCompanion - "+c,"radio",v.i):(this.model.set({displayingCompanion:!0}),PB(this,{adContent:b}),this.Ac(this.Xc()))};f.J=function(){var b=this.model.get("currentUser"),c=hz();return c&&c.match("^/(payment|one|business)")?!1:b?(c=(c=this.model.get("modalPanel"))&&c!=vu?!1:!0,b.J()&&c):!1};f.wM=function(){this.Rd&&(this.vc=!0);SB(this,"",!0)};f.wj=function(b){this.Rd&&(this.vc=!0,b&&b.target&&(b=$(b.target),b.attr("href")&&!b.attr("target")&&(this.vc=!1)));SB(this,"",!1)};
f.gN=function(){TB(this,"sort",!1)};f.aN=function(){this.model.get("currentStationViewIsShuffle")&&TB(this,"shuffle",!1)};f.CM=function(){TB(this,"nowPlaying",!0)};
f.jN=function(){var b=this.model.get("currentStation"),c=null,d=this.model.get("currentVxReward");d&&(!this.J()||b&&C.za(b)?this.ta.im():d.Xg()?(this.Yt||(C.hA(d.Xg()),this.ta.render(this.Zu),this.Yt=!0),this.ta.TP()):this.ta.im());if(this.$s){this.$s=!1;if(KB){var e=KB;KB=null}RB(this,this.fe);d=zn(b);if(this.J()&&!C.za(b)&&d&&("artist"==d.type||"song"==d.type)){b={csfo:1};e&&(b.companion=e);QB(this,b);this.Vf(b,!0);this.ze=Ed();return}}my()&&RB(this,this.fe);this.ze=Ed();de(this,function(){var b=
this.model.get("currentStation");C.za(b)?(SB(this,null,!0),this.ul=!1):this.ul?this.ul=!1:this.Xa==this.Bk||this.vc&&VB(this,this.kg)||VB(this,this.fe)||(c=b&&b.D()?"shuffle":"station",TB(this,c,!0))},300)};f.$L=function(){var b=this.model.get("currentUser");null==b||b.p()?TB(this,"addVariety",!0):WB(this,"addVariety",this.cu,function(b){return[B.Bc(b,{tile:2,sz:"2000x23"}),B.Bc(b,{tile:3,sz:"155x60"})]},{})};
window.setAddVarietyLogo=function(b,c){$("#addVarietySponsorship a").attr("href",c).html('<img border="0" src="'+b+'">');$("#addVarietySponsorship").show()};f=JB.prototype;f.ZL=function(){TB(this,"",!1)};f.oN=function(){TB(this,"rename",!0)};f.kN=function(){TB(this,"delete",!0)};f.lN=function(){2==this.model.get("stationList").length&&TB(this,"",!0)};f.FM=function(){XB(this,"playSample")};f.tM=function(){XB(this,"follow")};f.AN=function(){XB(this,"unfollow")};
f.IM=function(){var b=hz();(!b||"/feed"!==b.substring(0,5)&&"/connect"!==b.substring(0,8))&&XB(this,"profile",!0)};f.rM=function(){XB(this,"others",!0)};f.RM=function(){XB(this,"",!0)};f.De=function(){XB(this,"")};f.lz=function(){this.Rd&&(this.vc=!0);XB(this,"")};
f.mN=function(b){var c=this.model.get("stationList"),d=b.e(),c=c.detect(function(b){return b.Qi()==d});if(C.za(c||b))this.model.set({shareFirstImp:!1}),XB(this,"stationDetails",!0);else if(this.Il||0<this.te)VB(this,this.kg)||XB(this,"stationDetails",!0)};f.qz=function(b){b instanceof Eo||YB(this,"skip");return!1};f.nz=function(){YB(this,"outOfSkips")};f.vN=function(b){void 0!=b&&!0!=b||YB(this,"pause")};f.tN=function(){YB(this,"tired")};f.JN=function(){YB(this,"whyTrack",!0)};
f.sN=function(){YB(this,"rateUp")};f.rN=function(){YB(this,"rateDown")};f.lM=function(){YB(this,"rateDown")};f.kM=function(){YB(this,"rateUp")};f.zM=function(){YB(this,"likeUp")};f.zN=function(){YB(this,"likeDown")};f.Em=function(){YB(this,"volume")};f.YM=function(){SB(this,"lyrics",!0)};f.XM=function(){SB(this,"lyrics",!0)};f.gM=function(){YB(this,"buy",!0)};f.wN=function(b){!0==(b?b.userInitiated:!1)&&YB(this,"play")};f.BM=function(){YB(this,"moveTrack",!0)};
f.LM=function(b){var c="";"station_list"==b&&(c="stationScroll");YB(this,c)};function YB(b,c,d){setTimeout(r(b,function(){SB(this,c,d)}),10)}f.pN=function(){setTimeout(r(this,function(){this.ze=0;this.Xa="radio";SB(this,"return",!1)}),500)};f.kG=function(){this.model.get("displayingCompanion")&&(null!=this.Td&&(this.Xa=this.Td,this.Td=null),ZB(this))};
function ZB(b){b.debug("hiding sponsorships");$("#addVarietySponsorship a").attr("href","#").empty();$("#addVarietySponsorship").hide();$("#themeSponsorship a").attr("href","#").empty();$("#themeSponsorship").hide();$("#shareSponsorship a").attr("href","#").empty();$("#ShareSponsorship").hide();$(".createStationSponsorship a").attr("href","#").empty();$(".createStationSponsorship").hide();b.$s=!1;NB=KB=null;$("#sponsoredTrial a").attr("href","#").empty();$("#sponsoredTrial").hide()}
function TB(b,c,d){!b.vc||"station"!=c&&"shuffle"!=c?RB(b,b.fe):RB(b,b.kg);SB(b,c,d)}function XB(b,c,d){RB(b,b.kg);SB(b,c,d)}f.iN=function(b){var c=this.model.get("currentStation");c&&c.e()==b.e()&&(VB(this,this.fe)||TB(this,"",!0))};f.zL=function(b){(b=b.queryString)&&-1<b.indexOf("shareImp")&&this.model.set({shareFirstImp:!0})};f.VM=function(){$B(this,"artist")};f.UM=function(){$B(this,"")};f.ZM=function(){this.Rd||(this.vc=!0);$B(this,"song")};
function $B(b,c){(0<b.te||b.Il)&&!VB(b,b.kg)&&XB(b,c,!1)}function VB(b,c){var d=!1;b.model.get("shareFirstImp")&&aC(b)&&(d={shareimp:"1"},RB(b,c),QB(b,d),PB(b,d),b.Ac(b.Xc()),b.Il=!0,d=b.ul=!0);b.model.set({shareFirstImp:!1});return d}function aC(b){var c=b.model.get("currentStation");return c&&C.za(c)?!1:(c=b.model.get("currentUser"))&&c.p()||b.model.get("displayingCompanion")?!1:b.J()}
f.Pr=function(b){b=b.path;var c=null,d=this.model.get("currentUser");d&&d.p()&&b.match("/account/|/payment")?this.ta.jb():0==this.te&&(b.match("^/music/song")||b.match("^/land/song"))?this.vc=!0:(b.match("^/feed|^/connect")?c="feed":b.match("/payment|/go/")&&(c=""),null!=c&&(b.match("/volume/*|/stations/share/|/inactive|/song/(move|sleep)")||(b.match("^/{1}$|/stations/(play|rename|variety|delete)/*")?RB(this,"radio"):RB(this,"backstage")),SB(this,c,!0)))};
f.nF=function(){if($("#mainContentContainer").is(":visible"))return!0;this.ta.jb();return!1};function QB(b,c){var d=b.model.get("currentStation"),e=b.model.get("stationList").models;C.fg(c,d,e);C.Oe(c)}
f.ss=function(){var b=Ed(),c=!1;b-this.Ae>this.BC&&b-this.wc>this.DC&&b-this.ze>this.Qu&&b-this.Gp>this.vl&&(c=!0);this.debug(+b+" : since last audio ad: "+(b-this.Ae)+" : since last video ad: "+(b-this.wc)+" : since last display ad: "+(b-this.ze)+" : interval : "+this.Qu+" : delay ad refresh timestamp: "+this.Gp+" : delay ad refresh duration: "+this.vl+" : ready?: "+c);return c};
function WB(b,c,d,e,h){b.J()?b.model.get("displayingCompanion")||C.za(b.model.get("currentStation"))||b.model.get("currentVxReward")||(b.Td=b.Xa,RB(b,d),bC(),b.te++,h.index=b.te,h.tile=1,c&&""!=c&&(h.interaction=c),QB(b,h),b.debug("Requesting Sponsorship Ad for Interaction: "+c),PB(b,h),null!=e&&C.Wg()&&C.ZO(e(C.Wg())),b.Ac(b.Xc())):b.ta.jb()}
function SB(b,c,d){if(null!=b.Uv)if(b.J()){if(!(!d&&!1==b.ss()&&"skipAd"!=c||b.model.get("displayingCompanion")||"pause"==c&&window.ignorePauseInteractions))if(bC(),b.Xa==b.Bk&&b.jq)cC(b,c);else if(b.Xa!=b.uk&&b.Xa!=b.fo){var e={tile:1},h=!0;C.za(b.model.get("currentStation"))&&(h=!1);h&&(b.te++,e.index=b.te,0<b.Hm&&(e.p1n=b.Hm++));if((h=hz())&&"/profile"===h.substring(0,8))(h=b.model.get("currentProfileInfo"))&&h.isAdvertiser&&(e.webname=h.webName);else if("stationDetails"===c){var l=$(".stationCreator a"),
h=l.attr("data-advertiser"),l=l.attr("data-webname");"true"==h&&l&&(e.webname=l)}c&&""!=c&&(e.interaction=c);QB(b,e);b.debug("Requesting Ad for Interaction: "+c);b.Vf(e,d)}}else b.ta.jb()}
f.Vf=function(b,c){!c&&1>=Ed()-this.ze?this.debug("Within one second"):(PB(this,b),pe(A._data.testAdSequence)&&(A._data.companionAd="246977428:44308599",this.Sg=this.Nu[(this.te-1)%this.Nu.length]),this.Sg?(2!=this.Sg.split(":",2).length?this.debug("displayAd tunerVar form is: ?displayAd=AdId:CreativeId"):this.Ac(this.Xc()+"?displayAd="+this.Sg),-1!=document.location.search.indexOf("onlyFirstForced")&&(this.Sg=null)):this.Ac(this.Xc()))};
function PB(b,c){b.ze=Ed();b.Fp=!1;c.vx=b.model.get("currentVxReward")?"1":"";b.model.get("displayingCompanion")?c.sz=b.vB:c.sz=b.CB;if(b.vc||b.Rd&&c.interaction&&"undefined"!=c.interaction&&-1<b.HC.indexOf(c.interaction)){b.Rd=!0;var d=b.model.get("currentStation");d&&C.za(d)||$.extend(c,{pg:"song"})}else b.model.get("displayingCompanion")||(b.Rd=!1);b.vc=!1;b.Sg||((d=c.adContent)?C.Os(d):(C.Os(null),C.bA(b.Xa,c,c.sz)))}
function RB(b,c){c!=b.Xa?(b.debug("subZone changing from: "+b.Xa+" to "+c),_.contains(b.uC,b.Xa)?ZB(b):b.ze=0,b.Xa=c):b.debug("subZone is:"+b.Xa)}f.debug=function(b){k.debug("AdController : ",b)};f.uN=function(b){b instanceof Eo&&(this.Ae=Ed())};f.RD=function(b){b&&!1==b.hb()&&(this.wc=Ed());this.model.set({videoAdPlaying:b})};f.gf=function(b){b&&!1==b.hb()&&(this.wc=Ed())};f.Mo=function(b){b&&!1==b.hb()&&(this.wc=Ed());this.model.set({videoAdPlaying:null});this.Hm=1};
function bC(){window.ignorePauseInteractions=!1}window.setIgnorePauseInteractions=function(b){window.ignorePauseInteractions=b};JB.prototype.$M=function(b){var c=this.model.get("currentUser");null==c||c.p()?XB(this,""):(this.jq=b.gcat)&&cC(this,"")};function cC(b,c){var d=b.model.get("currentUser");null==d||d.p()?XB(b,c):WB(b,c,b.Bk,function(b){return[B.Bc(b,{tile:2,sz:"2000x23"}),B.Bc(b,{tile:3,sz:"155x60"})]},{gcat:b.jq})}
window.setThemedStationLogo=function(b,c){$("#themeSponsorship a").attr("href",c).html('<img border="0" src="'+b+'">');$("#themeSponsorship").show()};JB.prototype.PM=function(){ZB(this);var b=this.model.get("currentUser");null==b||b.p()?this.wj(null):(this.Rd&&(this.vc=!0),WB(this,"",this.uk,r(this,function(b){return[B.Bc(b,{tile:2,sz:"2000x23"}),B.Bc(b,{tile:3,sz:"155x60"})]}),{}))};JB.prototype.MM=function(){null!=this.Td&&(this.Xa=this.Td,this.Td=null)};
JB.prototype.NM=function(){NB?(this.Xa=this.uk,$(".createStationSponsorship a").attr("href",OB).html('<img border="0" height="100%" src="'+NB+'">'),$(".createStationSponsorship").show()):SB(this,"",!0)};JB.prototype.OM=function(){this.$s=!0};window.setStationCreationLogo=function(b,c){NB=b;OB=c;$(".createStationSponsorship a").attr("href",c).html('<img border="0" height="100%" src="'+b+'">');$(".createStationSponsorship").show()};window.setStationCreationFollowOnURL=function(b){KB=b};
JB.prototype.TM=function(){ZB(this);this.model.get("currentUser");aC(this)?WB(this,"",this.Ju,r(this,function(b){return[B.Bc(b,{tile:2,sz:"2000x23"}),B.Bc(b,{tile:3,sz:"155x60"})]}),{interaction:"share"}):YB(this,"share")};JB.prototype.SM=function(){null!=this.Td&&(this.Xa=this.Td,this.Td=null)};
JB.prototype.HN=function(){var b=this.model.get("currentVxReward");if(b){LB=b.Zm();var c=this.model.get("currentUser"),d=this.model.get("currentStation");c.J()&&d&&!C.za(d)?(b.Xg()?(C.hA(b.Xg()),this.ta.render(this.Zu)):this.ta.im(),this.Yt=!0):this.ta.im()}else LB=!1};window.setShareLogo=function(b,c){$("#shareSponsorship a").attr("href",c).html('<img border="0" height="100%" src="'+b+'">');$("#shareSponsorship").show()};
JB.prototype.hN=function(b){ZB(this);WB(this,"",this.fo,r(this,function(b){return[B.Bc(b,{tile:2,sz:"2000x23"}),B.Bc(b,{tile:3,sz:"155x60"})]}),b)};window.setSponsoredTrialLogo=function(b,c){$("#sponsoredTrial a").attr("href",c).html('<img border="0" height="100%" src="'+b+'">');$("#sponsoredTrial").show()};
window.showGoogleAdWords=function(){LB||($("#google_adwords").show().css("visibility","visible"),$("#google_adwords_frame").attr("src","/static/ads/google-adwords/google.html?r="+(new Date).getTime()),dC())};window.loadBottomAd=function(){if(!LB){var b=$("#advertisement_bottom");b.show().css({visibility:"visible",opacity:1});var c={};C.Oe(c);C.bA("radio",c,"2000x19");var c="ad"+(new Date).getTime(),d=MB.Xc()+"?cb="+je();b.html('<IFRAME id="'+c+'" src="'+d+'" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" allowtransparency="true" width="100%" height="100%"></IFRAME>')}};
window.showAdControls=function(){LB||$("#ad_controls").show().css("visibility","visible")};function dC(){LB||$("#ad_your_ad_here").show().css("visibility","visible")}window.showYourAdHere=dC;window.loadAdBriteTicker=function(){};var ve,hz,V,oz,pz,W,vz,lB,eC,fC,gC,hC,iC,jC,kC,lC,mC,nC,oC,pC,qC,rC,sC,tC,uC,vC;eC=[];fC=[];iC=hC=gC=!1;lC=kC=jC=null;mC=!1;
nC=function(b){ve=b;$.address.tracker(null);$.address.change(oC);z.c(Tg,function(){if(pC()||Jo())iC=!0});z.c(Ug,function(){iC&&(iC=!1,setTimeout(function(){var b=pC();if(b){qC();var d;d=b||"";var e=$.address.queryString();if(e&&_.isString(e)&&!_.isEmpty(e)){var h=d.split("#"),l=h.slice(1,h.length).join("#"),p=h[0],q=d.split("?"),t=q.slice(1,q.length).join("?");d=1==h.length&&1==q.length?d+"?"+e:1<q.length?[p,"?",t,"&",e,_.isEmpty(l)?"":"#",l].join(""):[p,"?",e,_.isEmpty(l)?"":"#",l].join("")}else d=
d||"";V(d,!1,!1)}else Oo();d=ve.get("modalPanel");$("#mainContentContainer").is(":visible")||null!=d&&d!=vu||"/account/reset-password"==b||R(Lu)},1))});z.c(Ee,function(){$.cookie("_query",null);hC=!0;if(jC){if(mz(ve)){var b=jC.path;if(0==b.indexOf("/station/play")||0==b.indexOf("/land/station")||0==b.indexOf("/station/start"))return}oC(jC);jC=null}})};rC=function(){return null!=pC()};
oC=function(b){var c=b.path,d="";1<c.split("/").length&&(d=c.split("/")[1]);var e=_.contains(wC,d);if("/_=_"!=c&&(!iC||e))if(hC)if(ve.get("siteLocked")&&0!=c.indexOf("/account/")&&0!=c.indexOf("/payment")&&0!=c.indexOf("/upgrade")&&"inactive"!=d&&!e)k.info("site is locked, ignoring hash update for "+c);else if(e=ve.get("currentUser"),Jo()||null!=e&&!e.p()||0!=c.indexOf("/payment")&&0!=c.indexOf("/account/info")&&0!=c.indexOf("/account/privacy")&&0!=c.indexOf("/account/notices")&&0!=c.indexOf("/account/upgrade")&&
0!=c.indexOf("/account/billing")&&0!=c.indexOf("/account/receipts")&&0!=c.indexOf("/account/audioQuality")&&0!=c.indexOf("/account/desktopApp")&&0!=c.indexOf("/account/startTrial")&&0!=c.indexOf("/subscriptionInfo"))if(e&&(e.ab()&&e.tj||eo(e))&&(0==c.indexOf("/payment")||0==c.indexOf("/account/upgrade")||0==c.indexOf("/account/startTrial")||0==c.indexOf("/pandoraOneInfo")||0==c.indexOf("/one")||0==c.indexOf("/_one")||0==c.indexOf("/upgrade")||0==c.indexOf("/business")||0==c.indexOf("/payment/99")))setTimeout(function(){R(Lu)},
50);else{if(e&&(e.ab()||e.S())&&(0==c.indexOf("/payment")||0==c.indexOf("/subscriptionInfo"))){var h=!0;e.u!=m.v.lg()&&e.u!=m.v.td()||0!=c.indexOf("/payment/business")||(h=!1);if(h){V("/account/billing",!0,!0);return}}if(e&&e.S()){if("payment"==d&&-1==c.indexOf("/payment/business")){setTimeout(function(){R(mv)},0);return}if(0==c.indexOf("/account/upgrade")||0==c.indexOf("/account/startTrial")||0==c.indexOf("/pandoraOneInfo")||0==c.indexOf("/one")||0==c.indexOf("/_one")||0==c.indexOf("/upgrade")||
0==c.indexOf("/_upgrade")){setTimeout(function(){R(Lu)},0);return}}oz();if(!gC){gC=!0;for(var d=h=!1,l=0;l<eC.length;l++){var p=eC[l];if(p.wv?c==p.$h||0==c.indexOf(p.$h+"/"):p.$h==c)if(d=!0,!p.Hw(c)||h||xC(c)||(h=!0,nz()),p=p.ZC){var q=!1;sC&&(q=sC.hb());p(b,q)}}tC(e);null==yC&&(xC(c)||nz());if(!d)for(b=0;b<fC.length;b++)if(0==c.indexOf(fC[b])){d=!0;break}b=gC=!1;d||(d=!0,e=ie(c),1==e.length?(R(Mv,c),Up(["artist_page_hit","music_page_hit","backstage_page_hit"]),b=!0):2==e.length?"fans"==e[1]?R(Pv,
c):(R(Nv,c),Up(["album_page_hit","music_page_hit","backstage_page_hit"]),b=!0):3==e.length?(R(Ov,c),Up(["song_page_hit","music_page_hit","backstage_page_hit"]),b=!0):(z.b(Mh,c),d=!1),d&&nz());b||uC(c);0==c.indexOf("/everywhere")&&R(Rw)}}else ve.set({modalPanel:vu},{silent:!0}),ve.set({modalPanel:yu}),"/account/billing"==c?ve.set({postLoginPath:"/account/billing"}):0==c.indexOf("/payment")&&ve.set({postLoginPath:c});else(null==jC||"/"==jC.path&&"/"!=b.path)&&"/inactive"!=b.path&&(k.info("AddressController: saving initial event: ",
b),jC=b)};tC=function(b){b&&!b.J()?document.title=aa():null==yC&&window.history.pushState||(document.title=ba())};
oz=function(b){setTimeout(function(){var c=hz();null!=b&&(c+=(-1==c.indexOf("#")?"#":"")+b);if(null==kC)kC=c;else if(c!=kC){kC=c;var d;if(bq(c))d=bq(c);else if(cq(["/fans"],c))d="fans";else if(0<=c.indexOf("/station/play"))d="now-playing";else{d=c;var e=["/search"];d.match(/^\/music/)||cq(e,d)?d="backstage":(d=["/feed"],"/connect"===c||cq(d,c)?d="feed":(d=c,e=["/profile"],d=d.match(/\/station\/[0-9]+/)||cq(e,d)?"profile":dq(c)?dq(c):0<=c.indexOf("/everywhere/")?"everywhere":cq(["/gift","gift%"],c)?
"gift":cq("/about /contact /privacy /legal /advertising /newpandora /roku /u/ /new/ content/connect survey att/download iphone/register ipad/register squid-health radio-health sony_iptv restricted".split(" "),c)?"misc":"other"))}"/"!=d.charAt(0)&&(d="/"+d);k.debug("sending google analytics event: "+d);"/other"===d?window.ga("send","pageview",{page:d,title:c}):window.ga("send","pageview",d)}},1)};W=function(b,c,d,e,h,l){b=new Qy(b,c,d,e,h,!0===l);eC.push(b);return b};pz=function(b){fC.push(b)};
V=function(b,c,d,e){c&&(jC=null);sC=b=new Qy(b,!1,c,d,null,!0===e);b.update();sC=null};vz=function(){$.address.history(!1);$.address.value("");$.address.history(!0)};hz=function(){return $.address.path()};
uC=function(b){null!=b&&(k.debug("path: "+b),0===b.indexOf("/profile")?Up(["profile_page_hit","backstage_page_hit"]):0==b.indexOf("/station")&&0!=b.indexOf("/station/play")&&0!=b.indexOf("/stations")?Up(["station_page_hit","backstage_page_hit"]):0===b.indexOf("/")&&1==b.length?s("home_page_hit",null,null):s("backstage_page_hit",null,null))};lB=function(b){lC=b};qC=function(){lC=null};pC=function(){if(null!=lC)return lC;vC();return lC};
vC=function(){if(!mC){mC=!0;var b=$.cookie("ini");ze("ini");if(le(b))k.info("found startHash in cookie: "+b),lB(b);else{b=window.LANDING_PATH;null!=b&&(-1!=b.indexOf("#")?b=b.substring(b.indexOf("#")+1):-1!=b.indexOf("?")&&(b=b.substring(0,b.indexOf("?"))));if(me(b)||"/"==b)b=hz(),"/"==b&&(b=window.location.pathname);"/"!=b&&(k.info("found startHash in URL: "+b),lB(b))}}};var yC=null;function xC(b){return 0==b.indexOf("/music/artist")||0==b.indexOf("/music/composer")||0==b.indexOf("/music/album")||0==b.indexOf("/music/song")}
function nz(b){setTimeout(function(){var c=document.location.href;null!=b&&(c+=(-1==c.indexOf("#")?"#":"")+b);if(c!=yC){yC=c;k.info("fireComscoreNeilsenBeacons",c);var d=ve?ve.get("currentUser"):null;window.COMSCORE&&window.COMSCORE.beacon({c1:2,c2:"6036333",c3:"",c4:escape(c),c5:"",c6:"",c15:"",cs_xi:zC(d),cs_wn:AC(d)});BC();window.fireNeilsenBeacon(b)}},1)}
function AC(b){var c=null;if(null!==b&&!b.p()){var c=parseInt(b.ri,10)+1999,d=null;switch(jo(b)){case "M":d=1;break;case "F":d=2;break;case "":d=0}c="u"+c+"z"+d}return c}function zC(b){var c=null;null===b||b.p()||(c=CryptoJS.SHA1(b.s).toString(CryptoJS.enc.Base64));return c}
function BC(){s("comscore",{event:document.location.href,is_error:!1,vendor_id:"100",device_code:"1880",app_version:z.ba,device_os:se(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},ve?ve.get("currentUser"):null)}window.logComscore=BC;function CC(b){this.model=b;this.Mw=this.hj=null;z.c(He,r(this,this.$a));z.c(Tf,r(this,this.Jf));z.ib(Tf,r(this,this.zK));z.c(Ie,r(this,this.Jf));z.c(qh,r(this,this.YH));z.c(yf,r(this,this.rJ));z.c(Bi,r(this,this.GJ));z.c(ti,r(this,this.mJ));S(Ju,r(this,this.En));S(Kv,r(this,this.$J));this.model.bind("change:keyPressed",r(this,this.En));this.model.bind("change:currentUser",r(this,this.rI))}f=CC.prototype;
f.$a=function(b){if(null!=b&&(z.b(Si),!b.ab()))try{Xt(function(c){s("listener_adblock",{adblock:c,vendor_id:u,device_id:we},b)})}catch(c){}this.Jf(b)};
f.Jf=function(b){trackJs.configure({userId:b.Ef()});fy(".facebookConnectedPopup");var c=$.cookie("v3ad"),c=c?c[0]:"0",d=$("#splash .logo img");0<d.length&&b&&b.jf&&c!=b.jf[0]&&d.attr("src",d.attr("src").replace(/\?cachebuster=\d*/,"")+"?cachebuster="+(new Date).getTime());d=this.model.get("currentUser");c=!d||!b||d.s!=b.s;d=d&&b&&d.lh!=b.lh;this.model.set({currentUser:b});d&&this.En();c&&this.model.set({twitterAuthenticated:!1,facebookAuthenticated:!1});null==b?this.model.set({stationToAutoPlay:null,
expired:!1}):(c=b.u,vo(b)||c==m.v.ku()||c==m.v.Mu()||b.sb==m.sa.ho()||b.sb==m.sa.Uu()?b.sb==m.sa.ho()?(V("/"+DC,!0,!0),this.model.set({expired:!0})):b.sb==m.sa.Uu()?(V("/"+EC,!0,!0),this.model.set({expired:!0})):b.p()&&!yo(b)?this.model.set({forceRegistration:!0}):vo(b)?(vo(b)&&b.sb==m.sa.KB()?V("/"+FC,!0,!0):vo(b)&&b.sb==m.sa.ao()?V("/"+GC,!0,!0):vo(b)&&b.sb==m.sa.wB()?V("/"+HC,!0,!0):vo(b)&&b.sb==m.sa.tC()?V("/"+IC,!0,!0):vo(b)&&b.sb==m.sa.iC()?V("/"+JC,!0,!0):uo(b)?V("/"+KC,!0,!0):V("/"+GC,!0,
!0),this.model.set({expired:!0})):z.b(ti):this.model.set({expired:!1}),this.model.get("booting")&&!this.model.get("expired")&&(c=b.XO||0,d=om(mm)||0||0,d=!!A._data.sessionStartDialogTestMode||Date.now()-d>864E5*c,c&&b.Yb&&b.wQ&&d&&(new xA({model:this.model})).render()));c=this.model.get("modalPanel");this.model.get("booting")||c==vu||"WELCOME_SEARCH"==c||null!=b&&!b.p()||vz()};
f.mJ=function(){var b=$("#splash .logo img");0<b.length&&($.cookie("v3ad",null,{path:"/"}),b.attr("src",b.attr("src").replace(/\?cachebuster=\d*/,"")+"?cachebuster="+(new Date).getTime()))};f.zK=function(){var b=this.model.get("modalPanel"),c=this.model.get("currentUser");b!=vu||this.model.get("hasStations")||null==c||c.p()||this.model.set({modalPanel:"WELCOME_SEARCH"});R(Lu)};f.YH=function(){this.model.set({anonymousTrialExpired:!0});this.model.set({forceRegistration:!0})};f.rJ=function(b){this.model.set({monthlyListening:b})};
f.$J=function(){new Zz};f.rI=function(){var b=this.model.get("currentUser");b&&(b=b.s,b!=this.Mw&&(this.Mw=b,this.En()))};f.En=function(){this.hj&&(clearTimeout(this.hj),this.hj=null);this.model.set({idle:!1});this.model.get("currentUser")&&LC(this)};
function LC(b){clearTimeout(b.hj);b.hj=de(b,function(){var b=this.model.get("currentUser");k.info("timed out for inactivity.  Listener has "+b.hk+" timeout credit(s)");var d=this.model.get("currentVxReward");d&&d.nA()?(k.info("Ignoring activity timeout since listener is in value exchange."),d=this.model.get("halt_id"),s("listener_idle",{action:"vx_suppressed",active:"true",halt_id:d,vendor_id:u,device_id:we},b),LC(this)):0<b.hk?(k.info("ignoring activity timeout as listener has "+b.hk+" timeout credit(s).  Will now cash in a timeout credit."),
z.b(Pj),LC(this)):this.model.set({idle:!0})},go(b.model.get("currentUser")))}f.GJ=function(){var b=this.model.get("currentUser");b&&le(To())&&(Jp("http://fbads.adparlor.com/conversion.php?adid=586"),Jp("https://shareasale.com/sale.cfm?amount=0.00&tracking="+b.s+"&transtype=lead&merchantID=34903"))};function MC(b){this.model=b;this.ln=this.bk=this.ak=null;S(Lu,r(this,this.Va));S(Bv,r(this,this.mQ));S(Cv,r(this,this.lQ));S(iw,r(this,this.Kd));S(jw,r(this,this.Ld));S(hv,r(this,this.OP));S(Mv,r(this,this.pA));S(Nv,r(this,this.pA));S(Ov,r(this,this.NP));S(Pv,r(this,this.sA));z.ib(Jg,r(this,this.uq));z.c(Hi,r(this,this.Yx));z.c(Ng,r(this,this.Yx));z.c(kg,r(this,this.it));z.c(ck,r(this,this.tA));z.c(dk,r(this,this.QP));z.c(fh,r(this,this.tA));z.c(gh,r(this,this.VG));z.c(vh,r(this,this.Va));z.c(mg,
r(this,this.IP));z.c(qg,r(this,this.oJ));z.c(bh,r(this,this.JJ));z.c(Lh,r(this,this.CK));this.model.bind("change:modalPanel",r(this,this.ia));this.model.bind("change:hasStations",r(this,this.Va));this.model.bind("change:readonly",r(this,this.Va));this.model.bind("change:expired",r(this,function(){this.model.get("expired")||this.Va()}));this.model.bind("change:resettingPassword",r(this,function(){this.model.get("resettingPassword")||this.model.get("modalPanel")!=wu&&this.model.get("modalPanel")!=zu&&
this.model.get("modalPanel")!=Cu&&de(this,function(){this.Va()},1)}));this.nE=(new ZA({model:this.model})).render();W("/",!1,!0,!0,r(this,function(b){var d=this.model.get("currentStation");null!=d?(b=b.parameters,null!=b&&null!=b.sc?z.b(Hi,{stationCode:b.sc}):V("/station/play/"+d.e(),!1,!1)):this.Va()}));W("/station/play",!0,!1,!0,r(this,function(b,d){var e=b.pathNames[2],h=b.pathNames[3];null==e||!0===d||z.b(mi,{stationId:e,trackToken:h});this.Va()}));W("/station/start",!0,!1,!0,r(this,function(){var b=
$("#stationStartMusicId").attr("data-musicid");null!=b&&z.b(Hi,{stationCode:"mi"+b});this.Va()}));W("/browse/preview",!0,!1,!0,r(this,function(b,d){var e=b.pathNames[2],h=b.pathNames[3];null==e||!0===d||z.b(mi,{stationId:e,trackToken:h});this.Va()}));W("/browse/details",!0,!1,!0,r(this,function(b,d){var e=b.pathNames[2],h=b.pathNames[3];null==e||!0===d||z.b(mi,{stationId:e,trackToken:h});this.Va()}));W("/music/artist",!0,!1,!1,r(this,function(b){var d=b.path.substring(13).replace("+","-");setTimeout(function(){V(d,
!1,!0)},1)}));W("/music/composer",!0,!0,!1,r(this,function(b){var d=b.path.substring(15).replace("+","-");setTimeout(function(){V(d,!1,!0)},1)}));W("/music/album",!0,!0,!1,r(this,function(b){var d=b.path.substring(12);3==b.pathNames.length&&(d="/-/"+b.pathNames[2]);d=d.replace("+","-");setTimeout(function(){V(d,!1,!0)},1)}));W("/music/song",!0,!0,!1,r(this,function(b){var d=b.path.substring(11);3==b.pathNames.length?d="/-/-/"+b.pathNames[2]:4==b.pathNames.length&&(d="/"+b.pathNames[2]+"/-/"+b.pathNames[3]);
d=d.replace("+","-");setTimeout(function(){V(d,!1,!0)},1)}));W("/account/info",!1,!0,!0,r(this,function(){NC(this,QA)}));W("/account/privacy",!1,!0,!0,r(this,function(){NC(this,RA)}));W("/account/notices",!1,!0,!0,r(this,function(){NC(this,SA)}));W("/account/artistMessages",!1,!0,!0,r(this,function(){NC(this,TA)}));W("/account/upgrade",!1,!0,!0,r(this,function(){NC(this,UA)}));W("/account/billing",!1,!0,!0,r(this,function(){var b=this.model.get("currentUser");!b||!b.J()&&fo(b)?NC(this,VA):NC(this,
UA)}));W("/account/receipts",!0,!0,!0,r(this,function(b,d){var e=this.model.get("currentUser");hz().match(/^\/account\/receipts\/?$/)?e.sy()?NC(this,WA):V("/account/info",!1,!1,!1):d||setTimeout(function(){V("/account/receipts",!1,!1,!1)},0)}));W("/account/audioQuality",!1,!0,!0,r(this,function(){NC(this,XA)}));W("/account/desktopApp",!1,!0,!0,r(this,function(){NC(this,YA)}));W("/content/profileSearch",!0,!0,!0,r(this,function(b){b=b.path;OC();this.model.set({modalPanel:vu});$("#mainContent").children().hide();
this.qs&&this.qs.close();this.qs=new nB({model:this.model,detail_url:b});$("#mainContent").append(this.qs.render().el);V(b,!0,!0)}));W("/subscriptionInfo",!1,!0,!0,r(this,function(){PC(this)}));W("/one/trial/start",!1,!1,!1,r(this,function(){var b=this.model.get("currentUser");null==b||b.p()?this.model.set({postLoginPath:"/one/trial/start"}):bo(b)&&(OC(),this.model.set({modalPanel:vu}),$("#mainContent").children().hide(),R(Rv))}));W("/subscriptionInfo/payment",!1,!1,!1,r(this,function(){R(hv)}));
W("/payment",!1,!1,!1,r(this,function(){var b=this.model.get("currentUser");null==b||b.p()?this.model.set({postLoginPath:"/payment"}):QC(this)}));W("/payment/business",!1,!1,!1,r(this,function(){var b=this.model.get("currentUser");null==b||b.p()?this.model.set({postLoginPath:"/payment/business"}):QC(this,!0)}));W("/pandoraOneInfo",!1,!0,!0,r(this,function(){RC(this)}));W("/_one",!1,!1,!1,r(this,function(){RC(this)}));W("/one",!1,!0,!0,r(this,function(){RC(this)}));W("/upgrade",!1,!0,!0,r(this,function(){RC(this)}));
W("/one/paypal/confirm",!1,!0,!0,r(this,function(){SC(this,!1)}));W("/business/paypal/confirm",!1,!0,!0,r(this,function(){SC(this,!0)}));W("/business",!1,!0,!0,r(this,function(){OC();this.model.set({modalPanel:vu});$("#mainContent").children().hide();R(qv)}));W("/business/welcome",!1,!1,!1,r(this,function(){$(window).scrollTop(0);this.model.set({modalPanel:vu});$("#mainContent").children().hide();R(lv)}));W("/business/join",!1,!0,!0,r(this,function(){OC();this.model.set({modalPanel:vu});$("#mainContent").children().hide();
R(jv)}));W("/buygift",!1,!0,!0,r(this,function(){OC();this.model.set({modalPanel:vu});$("#mainContent").children().hide();(new pB({model:this.model})).render()}));z.c(rg,r(this,function(b){OC();this.model.set({modalPanel:vu});$("#mainContent").children().hide();this.bt&&this.bt.close();this.bt=new qB({model:this.model,gift:b});this.bt.render()}));W("/showgift",!0,!0,!0,r(this,function(b){z.b(fk,b.pathNames[1].split("."))}));W("/search",!0,!0,!0,r(this,function(b){2==b.pathNames.length?TC(this,b.pathNames[1]):
2<b.pathNames.length&&TC(this,b.pathNames[1],b.pathNames[2])}));W("/station",!0,!0,!0,r(this,this.ly));W("/stations",!0,!0,!0,r(this,this.ly));W("/music",!0,!0,!0,r(this,function(b){if(1<b.pathNames.length){var d=b.pathNames[1];if("artist"==d||"composer"==d||"album"==d||"song"==d)return}this.by(b)}));W("/genres",!0,!0,!1,r(this,this.by));W("/inactive",!1,!0,!0,r(this,function(){this.model.set({inactive:!0});OC();this.model.set({modalPanel:vu});$("#mainContent").children().hide();var b=new mB({model:this.model});
$("#mainContent").append(b.render().el)}));W("/go",!0,!0,!0,r(this,function(b){UC(this,b.path)}));W("/everywhere",!0,!0,!0,r(this,function(b){UC(this,b.path)}));W("/survey",!0,!0,!0,r(this,function(b){b=b.path;OC();$("#mainContent").children().hide();this.model.set({modalPanel:vu});V(b,!0,!1);b="";var d=this.model.get("currentUser");d&&d.u!=m.v.Kn()&&(b=d.s);b=$("#surveyTmpl").tmpl(b);$("#mainContent .survey").html(b);$("#mainContent .survey").show();R(ww)}));W("/content/fansof",!0,!1,!1,r(this,function(b){2<
b.pathNames.length&&setTimeout(function(){V("/"+b.pathNames[2]+"/fans",!1,!1)},1)}));W("/content/fansofStation",!0,!1,!1,r(this,function(b){2<b.pathNames.length&&setTimeout(function(){V("/station/"+b.pathNames[2]+"/fans",!1,!1)},1)}));W("/song",!0,!1,!1,r(this,this.Va));W("/volume",!0,!1,!1,r(this,this.Va));W("/paused",!1,!1,!1,r(this,this.Va));W("/browse",!1,!1,!1,r(this,this.Va));z.c(Mh,r(this,this.AP));b=$("#mainContent .artist_detail");0<b.length&&(this.Sb=new CA({model:this.model,el:b}));b=$("#mainContent .song_detail");
0<b.length&&(this.Ih=new DA({model:this.model,el:b,fullLyrics:Zo(),focusTraits:$o()}))}f=MC.prototype;f.by=function(b){var c="",d=null;if(1<b.pathNames.length&&(c=b.pathNames[1],2<b.pathNames.length&&(d=b.pathNames[2],3<b.pathNames.length&&"fans"==b.pathNames[3]))){R(Pv,b.path);return}b=c;OC();$("#mainContent").children().hide();$("#mainContent .genres").show();this.model.set({modalPanel:vu});c="/music/"+b;d&&(c+="/"+d);V(c,!0,!0);R(uv,{category:b,station:d})};
f.ly=function(b){if(1<b.pathNames.length){var c=b.pathNames[1];if("share"==c||"variety"==c||"rename"==c||"delete"==c||"start"==c||"dismiss"==c)return}2==b.pathNames.length&&"stations"==b.pathNames[0]?VC(this,b.pathNames[1]):2<b.pathNames.length&&"stations"==b.pathNames[0]?VC(this,b.pathNames[2]):1<b.pathNames.length&&"station"==b.pathNames[0]?(c=b.pathNames[1],"play"!=c&&(2<b.pathNames.length&&"fans"==b.pathNames[2]?this.sA(b.path):VC(this,c))):(b=this.model.get("menuStation"),null==b&&(b=this.model.get("currentStation")),
b&&(b=b.e(),le(b)&&(V("/station/"+b,!1,!0),VC(this,b))))};f.ia=function(){"REDEMPTION_PANEL"!=this.model.get("modalPanel")&&(this.model.get("modalPanel")==vu?($("#mainContentContainer").stop(!0,!0).fadeIn(),$("#footer").removeClass("center-window")):($("#mainContentContainer").stop(!0,!0).fadeOut(),$("#footer").addClass("center-window")),fy(".session_start_dialog"),$(window).scrollTop(0))};
f.Va=function(){if(!this.model.get("booting")&&"REDEMPTION_PANEL"!=this.model.get("modalPanel")&&!this.model.get("siteLocked")&&!rC()){A._data.dc=null;A._data.autoplay=null;var b=hz();0!=b.indexOf("/stations/play")&&0!=b.indexOf("/station/play")&&vz();this.model.get("hasStations")?(R(Qv),this.model.set({modalPanel:vu}),OC(),$("#mainContent").children().hide(),$("#mainContent .home").show()):mz(this.model)||this.model.get("readonly")?(this.model.set({modalPanel:vu},{silent:!0}),this.model.set({modalPanel:yu})):
(k.debug("-is it happening here at hasStations?-"),this.model.set({modalPanel:"WELCOME_SEARCH"}))}};f.IP=function(){this.model.set({modalPanel:"POSTREG_AD_PANEL"});$(".navFooter").show();$(".legal").show();(new X({message:"Your Pandora account has been created. Enjoy the music!"})).render();this.model.get("hasStations")?ue("registration_success","from_anonymous_listening"):ue("registration_success","create_first_station");xe("registration","registration_success","registration_successful")};
f.oJ=function(){k.info("*** LOW BANDWIDTH DETECTED ***");var b=dc(),c=this.model.get("currentUser");c&&"mp3-hifi"==to(c)&&(um(bm,!0),z.b(fi,{noSkip:!0}),b=cc());c=new Date;this.model.get("lastLowBandwidthNotification")&&6E4>c.getTime()-this.model.get("lastLowBandwidthNotification")||((new X({message:b})).render(),this.model.set({lastLowBandwidthNotification:c.getTime()}))};
function VC(b,c){OC();b.model.set({modalPanel:vu});$("#mainContent").children().hide();$("#mainContent .station").show();R(Uu,c);V("/station/"+c,!1,!1)}function NC(b,c){b.model.set({modalPanel:vu});$("#mainContent").children().hide();c||(c=QA);b.nE.trigger("show",c)}
f.pA=function(b){var c=ie(b);this.model.set({modalPanel:vu});$("#mainContent").children().hide();2==c.length&&this.Sb&&this.Sb.showAlbumDetail(b)?this.Sb.show():(OC(),this.Sb&&this.Sb.getArtistHashPath()==b?(this.Sb.processQueryParams(),this.Sb.show(),this.Sb.albumClose()):(this.Sb&&this.Sb.close(),this.Sb=new CA({model:this.model,detail_url:b}),$("#mainContent").append(this.Sb.render().el)),-1==hz().indexOf(b)&&V(b,!1,!1))};
f.NP=function(b){OC();this.model.set({modalPanel:vu});$("#mainContent").children().hide();if(this.Ih){if($(".backstage",this.Ih.el).data("url")==b){$(this.Ih.el).show();return}this.Ih.close()}this.Ih=new DA({model:this.model,detail_url:b,fullLyrics:Zo(),focusTraits:$o()});$("#mainContent").append(this.Ih.render().el);-1==hz().indexOf(b)&&V(b,!1,!1)};
f.sA=function(b){OC();this.model.set({modalPanel:vu});$("#mainContent").children().hide();this.dq&&this.dq.close();this.dq=new fB({model:this.model,path:b});$("#mainContent").append(this.dq.render().el)};
function PC(b){var c=b.model.get("currentUser");null!=c&&c.ab()?((new X({message:"Thank you, you are already upgraded to Pandora Plus."})).render(),de(b,function(){this.Va()},1)):(OC(),b.model.set({modalPanel:vu}),$("#mainContent").children().hide(),b=new $A({model:b.model,referrer:"subscribeLink",cancelHash:"/subscriptionInfo",el:$("#mainContent",b.el)}),$("#mainContent").append(b.render()))}
function RC(b){V("/upgrade",!0,!0);OC();b.model.set({modalPanel:vu});$("#mainContent").children().hide();(new oB({model:b.model,referrer:"learnMoreLink",cancelHash:"/upgrade"})).render()}function SC(b,c){b.model.get("paypalConfirmView")||(b.model.set({paypalConfirmView:!0}),OC(),b.model.set({modalPanel:vu}),$("#mainContent").children().hide(),(new sB({model:b.model,referrer:"learnMoreLink",cancelHash:"/payment"+(c?"/business":""),isBusiness:c})).render())}
function QC(b,c){OC();b.model.set({modalPanel:vu});$("#mainContent").children().hide();R(c?ov:nv)}function OC(){$(window).scrollTop(0)}function TC(b,c,d){OC();$("#mainContent").children().hide();$("#mainContent .search").show();b.model.set({modalPanel:vu});c=unescape(c);V("/search/"+escape(c)+(d?"/"+escape(d):""),!0,!0);0==c.indexOf("ee:")&&(c=Sd().decrypt(c.substring(3)));var e=!1;b.model.get("currentUser")&&!b.model.get("currentUser").Wb&&(e=!0);R(tv,new Ry(c,d,e))}
f.mQ=function(b){var c=b.musicId;b=b.isPositive?ii:ji;null!=c&&z.b(b,c)};f.lQ=function(b){var c=b.musicID;b=b.isPositive?ki:li;null!=c&&z.b(b,c)};f.it=function(b){this.ak=b.stationId;this.bk=b.event;this.ln=b.musicId;new hA({title:Cc,subtitle:Dc,message:Ec,yesButtonText:Gc,noButtonText:Hc})};f.Kd=function(){this.ak&&z.b(ak,{stationId:this.ak,context:"station_feedback"})};f.uq=function(){this.bk&&(z.b(this.bk,this.ln),this.ln=this.bk=this.ak=null)};
f.Yx=function(){this.model.get("modalPanel")==vu&&this.model.get("hasStations")&&R(Lu)};f.Ld=function(){this.ln=this.bk=this.ak=null};
function UC(b,c){OC();$("#mainContent").children().hide();$("#mainContent .bizdev").show();b.model.set({modalPanel:vu});var d=c.match(/\/[^/]+\/(.+)/);if(d&&1<d.length){d=d[1];0<d.length&&"/"==d.charAt(d.length-1)&&(d=d.substring(0,d.length-1));V("/everywhere/"+d,!0,!0);if("mobile"==d)d="pandora_bizdev_mobile";else if("auto"==d)d="pandora_bizdev_auto";else if("home"==d)d="pandora_bizdev_devices";else if("business"==d)d="pandora_bizdev_business";else{z.b(Mh,c);return}eA("/static/bizdev/"+d+"/"+d+".html",
{},function(b){$("#mainContent .bizdev").empty().append(b)},function(){z.b(Mh)},!0)}else z.b(Mh,c)}f.JJ=function(){var b=new X({message:xb(),reload:!0,persist:!0});b.bind("reload",r(this,function(){window.location.reload()}));b.render()};f.tA=function(){var b=new X({message:Pc(),reload:!0,persist:!0});b.bind("reload",r(this,function(){window.location.reload()}));b.render()};
f.QP=function(){var b=new X({message:Qc(),reload:!0,persist:!0});b.bind("reload",r(this,function(){window.location.reload()}));b.render()};f.VG=function(){null==$.cookie("fr")?($.cookie("fr","true"),window.location.reload(!0)):(z.b(Fe),z.b(ck))};f.AP=function(){OC();this.model.set({modalPanel:vu});$("#mainContent").children().hide();$("#mainContent .error_page").show().empty().append($("#errorPageTmpl").tmpl({}))};
f.OP=function(){this.model.get("modalPanel")!=vu&&(this.model.set({modalPanel:vu}),$("#mainContent").children().hide())};f.CK=function(b){var c=null,d=null;b.code==m.d.Qn()?c=".genderFieldError":b.code==m.d.Ln()?(c=".birthYearFieldError",d="#birthyear"):b.code==m.d.Mn()?(c=".birthYearFieldError",d="#birthyear"):b.code==m.d.ko()&&(c=".zipCodeFieldError",d="#zipcode");c&&($(c,this.el).text(b.message).fadeIn(),$(d,this.el).addClass("error_border"))};function WC(b,c){this.model=b;this.Qj=null;this.Ch=c;this.model.bind("change:searchText",r(this,this.Ke));this.model.get("searchResults").bind("refresh",r(this,this.TO));this.Ch.bind("createStationRequest",r(this,this.ql));this.Ch.bind("openProfilePageRequest",r(this,this.KN));this.Ch.bind("extendedSearchRequest",r(this,this.Yp));this.model.set({searchSequenceNum:0});this.model.set({clientSearchResults:""});this.model.set({serverSearchResults:""});this.Nh=this.Oh=0;S(Ju,r(this,this.Ha));S(Ku,r(this,
this.RO));z.c(jf,r(this,this.NJ));z.c(Le,r(this,this.CJ));z.c(ff,r(this,this.MI));z.c(Re,r(this,this.eh))}f=WC.prototype;
f.NJ=function(b){k.info("Got search suggestions:",b);var c=[],d=[],e="";$.each(b,function(b,h){$.each(h,function(b,h){0<e.length&&(e+=",");e+=h.musicId;var l=h.musicId.substr(0,1);"R"==l?c.push(new Qx({artistName:h.artistName,musicId:h.musicId,index:c.length,value:h.artistName})):"C"==l?c.push(new Rx({composerName:h.composerName,musicId:h.musicId,index:c.length,value:h.composerName})):"G"==l?d.push(new Sx({genreName:h.stationName,musicId:h.musicId,index:d.length,value:h.stationName})):k.error("Unknown autocomplete music id type (SearchController)",
h)})});this.model.set({serverSearchResults:e});this.model.set({searchSuggestions:{similar_artists:c,similar_genres:d,facebook_favorites:[]}});var h="";$.each(c,function(b,c){0<h.length&&(h+=",");h+=c.get("musicId")});$.each(d,function(b,c){0<h.length&&(h+=",");h+=c.get("musicId")});this.model.set({clientSearchResults:h})};
f.eh=function(b){if(b.initialSeed){var c=b.initialSeed.musicId;if(le(c)){var d=this.model.get("searchSuggestions");_.each(["similar_artists","similar_genres"],function(b){for(var h=0;h<d[b].length;h++)d[b][h].get("musicId")==c?(d[b].splice(h,1),h--):d[b][h].attributes.index=h});this.model.set({searchSuggestions:d})}}};
f.Ke=function(){function b(b,d){c.model.set({searchLastProfileRequestMillis:d});var e=c.model.get("searchLastProfileRequestTimeout");e&&clearTimeout(e);c.model.set({searchLastProfileRequestTimeout:null});z.b(Gi,b)}var c=this,d=this.model.get("searchText");if(d&&0<d.length)if(this.Oh=Date.now(),$x(d)){var e=this.model.get("searchLastProfileRequestMillis"),h=new Date;if(e&&500>h.getTime()-e){var e=setTimeout(function(){b(d,h.getTime())},1E3),l=this.model.get("searchLastProfileRequestTimeout");l&&clearTimeout(l);
this.model.set({searchLastProfileRequestTimeout:e});return}b(d,h.getTime())}else if(Zx(d))this.model.set({searchItemSelectedIndex:-1});else{var e={adv:"yes",sendquery:"no",q:d},l=this.model.get("currentUser"),p=this.model.get("modalPanel");null!=l&&null!=p&&l.p()&&"WELCOME_SEARCH"==p&&(e.excludesongs="yes");$.get("/autocomplete",e).success(r(this,function(b){XC(this,b)}))}this.model.set({searchSequenceNum:this.model.get("searchSequenceNum")+1})};
f.TO=function(b){var c=void 0===this.model.get("searchResults")?-1:0<this.model.get("searchResults").length?0:-1;this.model.set({searchItemSelectedIndex:c});if(0<b.models.length){var d="",e=0;$.each(b.models,function(b,c){e+=1;c instanceof Xx?(d=c.attributes.Y,$.each(c.attributes.sQ,function(b,c){"false"==c.rL&&(d=d+","+c.musicId)})):c.attributes&&(d=d&&0<d.length?d+","+c.attributes.musicId:c.attributes.musicId)});this.model.set({clientSearchResults:d});b=void 0===this.model.get("serverSearchResults")?
0:this.model.get("serverSearchResults").split(",").length;this.Nh=Date.now();b={action:"autocomplete",listener_id:v.i.s,vendor_id:u,device_id:we,device_os:se(),app_version:z.ba,sequence_number:this.model.get("searchSequenceNum"),page_view:"search",view_mode:"search_autocomplete_results",client_timestamp_ms:Date.now(),query:this.model.get("searchText"),num_results_shown:e,num_results_returned:b,server_result_list:this.model.get("clientSearchResults"),client_result_list:this.model.get("serverSearchResults"),
time_to_display_ms:this.Nh-this.Oh};s("search_action",b,null)}};f.ql=function(b,c,d,e){var h=this.model.get("searchText"),l;null==b||2>b.length?l=!1:(l=b.charAt(0)+b.charAt(1),l="TT"==l?!0:/^[a-z]+$/.test(l));l=l?b:"mc"+b;this.model.set({searchDetails:{isRedirect:d,isComedy:e,query:c}});this.model.set({showingSearchResults:!1});this.model.set({searchText:""});(c=this.model.get("currentStation"))&&(c=zn(c))&&c.key!=b&&R(Vw);z.b(Ki,{stationCode:l,searchText:h})};
f.KN=function(b){this.model.set({showingSearchResults:!1});this.model.set({searchText:""});V("/profile/"+b,!0,!0);var c=-1,d=void 0===this.model.get("clientSearchResults")?[]:this.model.get("clientSearchResults").split(","),e=d.length,h=(void 0===this.model.get("serverSearchResults")?[]:this.model.get("serverSearchResults").split(",")).length;$.each(d,function(d,e){e==b&&(c=d)});d={action:"select",listener_id:v.i.s,vendor_id:u,device_id:we,device_os:se(),app_version:z.ba,sequence_number:this.model.get("searchSequenceNum"),
page_view:"search",view_mode:"search_autocomplete",source:"station_list_top",URL:hz(),client_timestamp_ms:Date.now(),selected_result_id:null,selected_result_unique_id:null,selected_index:c,select_result_type:null,client_result_list:this.model.get("clientSearchResults"),server_result_list:this.model.get("serverSearchResults"),num_results_shown:e,num_results_returned:h,selected_result_action:"view"};s("search_action",d,null)};
f.Yp=function(){var b=this.model.get("searchText");null!=b&&0<b.length&&(this.model.set({showingSearchResults:!1}),this.model.set({searchText:""}),$x(b)?(b=Sd().encrypt(b),V("/search/ee:"+b,!0,!0)):V("/search/"+b,!0,!0))};function XC(b,c){var d=Nx(c),e="";$.each(d,function(b,c){0<b&&(e+=",");e+=c.attributes.musicId});b.model.set({serverSearchResults:e});b.model.get("searchResults").refresh(d)}
f.CJ=function(b){b=Wx(b);var c="";if(0<b.length){var d=b[0],c=d.attributes.Y;$.each(d.attributes.sQ,function(b,d){d.rL||(c=c+","+d.musicId)});this.W3=c}this.model.get("searchResults").refresh(b)};f.Ha=function(b){$(b.target).hasClass("searchInput")||0<$(b.target).parents(".searchPopupContainer").length||this.model.set({showingSearchResults:!1})};
f.MI=function(b){if(this.Qj){var c=!1,d=!1,e=b.searchText;if(b&&b.stations)for(var h=0;h<b.stations.length;h++){var l=b.stations[h];if(l.musicId==this.Qj){c=l.isRedirect;d=l.isComedy;break}}this.ql(this.Qj,e,c,d);this.Qj=null}};
f.RO=function(b){this.model.set({searchText:b.target.value});var c=this.model.get("searchItemSelectedIndex");if(40==b.which)0<=c?c++:c=0,this.model.set({searchItemSelectedIndex:c});else if(38==b.which)0<=c&&(c--,this.model.set({searchItemSelectedIndex:c}));else if(27==b.which)this.model.set({showingSearchResults:!1});else if(13==b.which)if(0<=c){if(b=this.model.get("searchItemSelectedIndex"),0<=b)if(b=$(".item",this.Ch.el).eq(b),b.data("search"))this.model.set({searchSequenceNum:this.model.get("searchSequenceNum")+
1}),this.Yp();else if(b.data("genres"))this.model.set({showingSearchResults:!1}),this.model.set({searchText:""}),V("/music",!0,!0);else{var d=$.tmplItem(b).data,c=d.get("musicId"),d=d.get("searchableStationId");null!=d?this.ql(d):null!=c&&(jQuery.trim(b.text())==this.model.get("searchText")||"G"!=c[0]?this.ql(c):(this.Qj=c,z.b(Ni,{searchText:this.model.get("searchText")})))}}else this.Yp();else 8==b.which&&0==b.target.value.length&&(this.model.set({searchSequenceNum:this.model.get("searchSequenceNum")+
1}),b={action:"clear",listener_id:v.i.s,vendor_id:u,device_id:we,device_os:se(),app_version:z.ba,sequence_number:this.model.get("searchSequenceNum"),page_view:"search",view_mode:"search_autocomplete_results",client_timestamp_ms:Date.now()},s("search_action",b,null))};function YC(b){this.model=b;this.LA=new Cz({model:this.model});this.LA.bind("getFullLyrics",r(this,this.Ql));S(Vv,r(this,this.Tr));S(Wv,r(this,this.Rr));this.model.bind("change:selectedTrack",r(this,this.Ls))}YC.prototype.Ls=function(){var b=this.model.get("selectedTrack");if(!(null==b||b instanceof Hn||b instanceof In||b.je)){var c=Ou,d=new Fy;d.hf=b.Ye;d.Co=b.QC;d.lv=b.Vg();d.Ko=b.W();Hy(d);R(c,d)}};
YC.prototype.Rr=function(b){var c=this.model.get("selectedTrack");Iy(b,c)&&(this.model.set({selectedArtist:null},{silent:!0}),this.model.set({selectedArtist:b}))};YC.prototype.Ql=function(b){R(Nu,b)};YC.prototype.Tr=function(b){var c=this.model.get("selectedTrack");null!=c&&c.o()==b.o()&&$("#mainContent .home").is(":visible")&&this.LA.showFullLyrics(b)};function ZC(b){this.model=b;this.model.bind("change:modalPanel",r(this,this.ia));this.model.bind("change:forceRegistration",r(this,this.iq));z.c(jh,r(this,function(b){this.Ie&&this.Ie.serverError(b)}));S(Ev,r(this,this.XH));this.hash=W("/account/register",!1,!0,!0,r(this,function(){this.model.get("poisoned")||$C(this)||this.model.set({modalPanel:wu});pp()&&0<pp().length&&this.model.set({returnTarget:pp()})}))}
function $C(b){if(b.model.get("tooYoung")){if($.cookie("ty")&&"1"==$.cookie("ty"))return setTimeout(function(){V("/account/noregister",!1,!0)},2),!0;b.model.set({tooYoung:!1})}return!1}f=ZC.prototype;f.XH=function(){this.model.get("currentUser").p()&&!$C(this)&&$("body").append(aD(this,!0))};
f.ia=function(){var b=this.model.get("modalPanel");b==wu?(b=this.model.get("currentUser"),null==b||b.p()?($("#main").prepend(aD(this,!1)),this.hash.update()):((new X({message:"Thank you.  You have already registered with Pandora."})).render(),b=this.model.previous("modalPanel"),null!=b?this.model.set({modalPanel:b}):setTimeout(function(){R(Lu)},1))):"POSTREG_AD_PANEL"!=b&&this.hide()};
function aD(b,c){b.hide();b.Ie=new Iz({model:b.model,useLightbox:c});b.Ie.bind("submit",r(b,b.submit));b.Ie.bind("cancel",r(b,b.cancel));b.Ie.bind("tooyoung",r(b,b.FQ));return b.Ie.render().el}f.submit=function(b){z.b(ui,b)};f.cancel=function(){this.hide();this.model.get("modalPanel")==wu&&(pp()&&0<pp().length?window.location=pp():vz())};f.FQ=function(){var b=new Date;b.setTime(b.getTime()+288E5);$.cookie("ty","1",{expires:b});this.model.set({tooYoung:!0});V("/account/noregister",!1,!0)};
f.hide=function(){null!=this.Ie&&this.Ie.hideAndRemove()};f.iq=function(){this.model.get("forceRegistration")&&this.model.set({modalPanel:wu})};function bD(b){this.model=b;this.model.bind("change:modalPanel",r(this,this.ia));this.hash=W("/account/noregister",!1,!1,!0,r(this,function(){this.model.set({modalPanel:xu})}))}bD.prototype.ia=function(){this.model.get("modalPanel")==xu?(this.view=new Kz,$("#main").prepend(this.view.render().el),$(".legal").hide(),this.hash.update()):this.hide()};bD.prototype.hide=function(){null!=this.view&&this.view.hideAndRemove()};function cD(b){this.model=b;this.model.bind("change:modalPanel",r(this,this.ia));this.model.bind("change:currentUser",r(this,this.lF));this.Im=null;this.bh=!1;z.c(eh,r(this,function(){xe("login","login_failed","login_failed",m.d.Se());this.Vd&&this.Vd.serverError()}));z.c(Qh,r(this,function(){xe("login","login_failed","login_failed",m.d.yu());this.Vd&&this.Vd.suspendedAccountError()}));z.c(Tg,r(this,function(){this.Im?(lB(this.Im),this.Im=null):this.model.get("postLoginPath")&&(lB(this.model.get("postLoginPath")),
this.model.set({postLoginPath:null}))}));z.c(Ug,r(this,function(){this.fs&&(this.fs(),this.fs=null)}));z.c(pg,r(this,function(){xe("login","login_successful","login_successful");$(".onboarding__login").hide()}));S(Dv,r(this,this.WH));this.hash=W("/account/sign-in",!1,!0,!0,r(this,function(){this.model.set({modalPanel:yu})}))}f=cD.prototype;
f.WH=function(b){var c=this.model.get("currentUser");if(null==c||c.p()||b.allowWhenLoggedIn)b&&b.onSuccessRedirect&&(this.Im=b.onSuccessRedirect),b&&b.onSuccessCallback&&(this.fs=b.onSuccessCallback),b&&b.giftRedemptionMode&&(this.bh=b.giftRedemptionMode),$("body").append(dD(this,!0))};f.lF=function(){var b=this.model.get("currentUser");b&&!b.p()&&this.model.get("modalPanel")==yu&&de(this,function(){this.model.get("hasStations")||vz()},500)};
f.ia=function(){if(this.model.get("modalPanel")==yu){var b=this.model.get("currentUser");null==b||b.p()?(b=dD(this,!1),$("#welcomeSearch .signinContainer").empty().append(b),"WELCOME_SEARCH"==this.model.previous("modalPanel")?($(".signinForm",b).slideDown(),$("#welcomeSearch .searchBox").slideUp(),$(".onboarding__login").fadeOut(),$(".onboarding__register").fadeIn()):($(".signinForm",b).show(),$("#welcomeSearch .searchBox").hide(),$(".onboarding__login").hide(),$(".onboarding__register").show()),
this.hash.update()):((new X({message:"You are already logged in!"})).render(),b=this.model.previous("modalPanel"),this.model.set({modalPanel:b}))}else this.hide()};function dD(b,c){b.hide();b.Vd=new Lz({model:b.model,useLightbox:c,giftRedemptionMode:b.bh});b.Vd.bind("submit",r(b,b.submit));b.Vd.bind("cancel",r(b,b.cancel));return b.Vd.render().el}f.submit=function(b){z.b(si,b)};f.cancel=function(){this.hide();this.model.get("modalPanel")==yu&&vz()};f.hide=function(){null!=this.Vd&&this.Vd.hideAndRemove()};function eD(b){this.model=b;this.model.bind("change:modalPanel",r(this,this.ia));this.cx=null;z.c(lh,r(this,function(b){xe("forgot_pw","forgot_password_failed","forgot_password_failed",b.code);this.nc&&this.nc.serverError(b)}));z.c(Ne,r(this,function(b){this.model.set({loginEmail:b});ue("forgot_pwd_confirmation","check_your_email");xe("forgot_pwd_confirmation","check_your_email","forgot_password_successful");this.model.set({modalPanel:Eu})}));S(Fv,r(this,this.VH));this.hash=W("/account/help",!1,!0,
!1,r(this,function(){this.model.set({modalPanel:zu})}))}f=eD.prototype;f.VH=function(b){var c=this.model.get("currentUser");b&&b.emailRedirect&&(this.cx=b.emailRedirect);(c.p()||b&&b.allowWhenLoggedIn)&&$("body").append(fD(this,!0))};f.ia=function(){var b=this.model.get("modalPanel");b==zu?($("#main").prepend(fD(this,!1)),this.hash.update()):b==Eu?$("#main").prepend(gD(this)):this.hide()};
function fD(b,c){b.hide();b.nc=new Mz({model:b.model,useLightbox:c});b.nc.bind("submit",r(b,b.submit));b.nc.bind("cancel",r(b,b.cancel));return b.nc.render().el}function gD(b){b.hide();b.nc=new Rz({model:b.model,useLightbox:!1});b.nc.bind("login",r(b,b.login));b.nc.bind("requestHelp",r(b,b.Ds));return b.nc.render().el}f.submit=function(b){z.b(Ei,{username:b,redirect:this.cx})};
f.cancel=function(){this.hide();this.model.get("modalPanel")==zu&&(pp()&&0<pp().length?window.location=pp():this.model.get("modalPanel")!=Cu&&this.model.set({modalPanel:yu}))};f.hide=function(){null!=this.nc&&this.nc.hideAndRemove()};f.Ds=function(){this.hide();this.model.set({pageSource:"forgot_password_confirmation",modalPanel:Cu})};f.login=function(){this.hide();this.model.set({modalPanel:yu})};for(M=pq[39];-1!=M;)switch(M){case 34:G[425]=-8030400;M=pq[52];break;case 41:G[908]=442434660;M=pq[26];break;case 15:M=pq[17];break;case 24:G[538]=-1079629092;M=pq[44];break;case 26:G[761]=2463961;M=pq[7];break;case 23:G[562]=-1784875763;M=pq[11];break;case 11:M=pq[21];break;case 52:G[902]=-533886984;M=pq[31];break;case 49:G[932]=1717615367;M=pq[30];break;case 17:G[821]=-229007394;M=pq[22];break;case 50:G[909]=-1522302597;M=pq[54];break;case 8:M=pq[37];break;case 32:G[966]=895732307;M=pq[42];break;
case 7:G[68]=1715789566;M=pq[12];break;case 4:M=pq[23];break;case 54:G[53]=1748523019;M=pq[15];break;case 36:G[818]=312626637;M=pq[35];break;case 0:M=pq[41];break;case 33:G[668]=-1295449290;M=pq[55];break;case 47:G[873]=319393263;M=pq[32];break;case 1:G[1004]=-102979203;M=pq[38];break;case 12:G[1022]=1583039740;M=pq[2];break;case 55:G[675]=1410768666;M=pq[53];break;case 39:G[517]=2087390907;M=pq[29];break;case 13:G[240]=-1380201253;M=pq[51];break;case 21:G[451]=919569214;M=pq[8];break;case 6:G[566]=
-1945724092;M=pq[59];break;case 53:M=pq[57];break;case 42:G[754]=-225762753;M=pq[16];break;case 59:G[367]=1270264145;M=pq[0];break;case 30:G[125]=1003839844;M=pq[60];break;case 48:G[1024]=832950629;M=pq[13];break;case 45:G[158]=-1708097896;M=pq[43];break;case 56:M=pq[45];break;case 58:G[637]=1120511626;M=pq[49];break;case 29:G[993]=555352614;M=pq[33];break;case 27:G[897]=309530649;M=pq[47];break;case 31:G[268]=1677729289;M=pq[4];break;case 44:G[118]=1422945689;M=pq[10];break;case 22:G[211]=794022528;
M=pq[46];break;case 51:G[159]=1942996444;M=pq[24];break;case 43:M=pq[6];break;case 25:M=pq[27];break;case 38:G[297]=284769645;M=pq[34];break;case 5:M=pq[40];break;case 18:M=pq[9];break;case 57:G[808]=-551998351;M=pq[25];break;case 14:G[100]=1647498396;M=pq[14];break;case 3:M=pq[48];break;case 35:G[558]=-2140401621;M=pq[5];break;case 37:G[899]=626380291;M=pq[3];break;case 46:G[623]=1015496740;M=pq[28];break;case 40:M=pq[18];break;case 2:G[301]=284611983;M=pq[58];break;case 9:G[567]=172488474;M=pq[1];
break;case 20:G[703]=-1984853539;M=pq[20];break;case 28:M=pq[36];break;case 19:G[915]=265110506;M=pq[56];break;case 10:M=pq[50];break;case 16:G[764]=1814599874,M=pq[19]};function hD(b){this.model=b;this.cB=null;this.model.bind("change:modalPanel",r(this,this.ia));z.yh(Ee,r(this,function(){}));z.c(mh,r(this,function(b){this.Cc&&b?this.Cc.serverError(b):this.model.set({modalPanel:Bu})}));z.c(Oe,r(this,function(){xe("pwd_reset","pwd_reset_successful","pwd_reset_successful");(new X({message:Fa()})).render();this.cancel()}));this.hash=W("/account/reset-password",!1,!0,!1,r(this,function(b){(b=this.model.get("currentUser"))&&!b.p()?(setTimeout(function(){R(Lu)},1),z.c(Vg,
r(this,this.wP)),S(iw,r(this,this.Kd)),S(jw,r(this,this.Ld))):(b=A._data.pt,le(b)?(b={resetToken:b,successCallback:r(this,function(b){this.cB=b.username;this.model.set({modalPanel:Au,resettingPassword:!0})}),errorCallback:r(this,function(){this.model.set({modalPanel:Bu,resettingPassword:!0})})},z.b(wi,b)):this.model.set({modalPanel:Bu,resettingPassword:!0}))}))}f=hD.prototype;f.wP=function(){new hA({event:"sign_out",title:Ga,subtitle:Ha,message:Ja,yesButtonText:Ka,noButtonText:La})};
f.Kd=function(b){"sign_out"==b&&z.b(ti)};f.Ld=function(){};
f.ia=function(){var b=this.model.get("modalPanel");b==Au?(this.model.set({usernameFromResetToken:this.cB}),this.Cc=new Nz({model:this.model}),this.Cc.bind("submit",r(this,this.submit)),this.Cc.bind("cancel",r(this,this.cancel)),$("#main").prepend(this.Cc.render().el)):b==Bu?(xe("pwd_reset","pwd_reset_failed","pwd_reset_failed",m.d.su()),this.Cc=new Oz({model:this.model}),this.Cc.bind("requestHelp",r(this,this.Ds)),this.Cc.bind("cancel",r(this,this.cancel)),$("#main").prepend(this.Cc.render().el)):
b==Cu&&b==Eu||this.cancel()};f.submit=function(b){z.b(vi,b)};f.cancel=function(){this.hide();this.model.set({resettingPassword:!1})};f.Ds=function(){this.hide();this.model.set({modalPanel:Cu})};f.hide=function(){null!=this.Cc&&this.Cc.hideAndRemove()};function iD(b){this.model=b;this.model.bind("change:modalPanel",r(this,this.ia));z.c(Hk,r(this,function(b){this.ld&&b&&this.ld.serverError(b)}));z.c(Gk,r(this,function(b){this.model.set({requestPasswordHelpSuccessEmail:b[1]});this.hide();this.model.set({modalPanel:Du})}));this.hash=null}f=iD.prototype;
f.ia=function(){var b=this.model.get("modalPanel"),c=this.model.previous("modalPanel");c==zu&&this.model.set({pageSource:"forgot_password"});c==Eu&&this.model.set({pageSource:"forgot_password_confirmation"});b==Cu?(this.ld=new Pz({model:this.model}),this.ld.bind("submit",r(this,this.submit)),this.ld.bind("cancel",r(this,this.cancel)),$("#main").prepend(this.ld.render().el),this.hash.update()):b==Du?$("#main").prepend(jD(this)):this.cancel()};
function jD(b){b.hide();b.ld=new Qz({model:b.model});b.ld.bind("login",r(b,b.login));return b.ld.render().el}f.submit=function(b){k.info(b);z.b(Fk,b)};f.cancel=function(){this.hide();var b=this.model.previous("modalPanel");b!=Cu?this.model.set({modalPanel:b}):this.model.set({modalPanel:zu})};f.hide=function(){null!=this.ld&&this.ld.hideAndRemove()};f.login=function(){this.hide();this.model.set({modalPanel:yu})};function kD(b){this.model=b;this.model.bind("change:currentUser",r(this,this.Cp));this.model.bind("change:currentTrack",r(this,this.Bi));this.model.bind("change:currentStation",r(this,this.zp));this.model.bind("change:forceRegistration",r(this,this.iq));S(Ju,r(this,this.Ha))}f=kD.prototype;
f.Cp=function(){if(this.model.get("anonymousTrialExpired")||this.model.get("forceRegistration"))this.model.set({anonymousTrialExpired:!1}),this.model.set({forceRegistration:!1}),null!=this.model.get("currentTrack")&&z.b(ei)};f.Bi=function(){this.model.get("forceRegistration")&&z.b(gi)};f.zp=function(){this.model.get("forceRegistration")&&setTimeout(function(){z.b(gi)},1)};f.iq=function(){this.model.get("forceRegistration")&&z.b(gi)};f.Ha=function(){this.model.get("anonymousTrialExpired")&&this.model.set({forceRegistration:!0})};function lD(b,c){this.model=b;this.Cz={};this.Ap=this.ya=null;this.model.bind("change:currentStation",r(this,this.zp));this.model.bind("change:currentTrack",r(this,this.Bi));this.model.bind("change:songNarrative",r(this,this.qt));c.bind("close",r(this,this.pc));z.c(wf,r(this,this.EK));z.c(ug,r(this,this.wJ));z.c(tg,r(this,this.vJ))}f=lD.prototype;
f.zp=function(){null!=this.Ap&&(this.Cz[this.Ap]=!0);var b=this.model.get("currentStation");this.Ap=null!=b?b.e():null;this.model.set({narrative:null});this.tf()};f.EK=function(b){null==b.getContext()&&(this.model.get("currentStation"),this.model.set({narrative:{narrative:b.Pl(),narrativeSeedDescription:"",type:"addVariety",stationName:b.r().ca(),stationId:b.r().e(),musicid:b.o(),isFirstTrack:!1}}),this.ya=setTimeout(r(this,function(){this.pc()}),3E4))};
f.Bi=function(){this.tf();var b=this.model.get("currentStation"),c=this.model.get("currentTrack");if(null!=b&&!(c instanceof Hn)){var d=b.e();if(!this.Cz[d]&&null!=c){var e=!1,h=this.model.get("searchDetails");null!=c.Dv?(this.model.set({narrative:{narrative:c.Dv,narrativeSeedDescription:c.Ev,isFirstTrack:0==c.ie,stationName:b.ca(),stationId:d}}),e=!0):null!=h&&h.isComedy&&h.isRedirect&&(this.model.set({narrative:{narrative:"Unfortunately we don't have content from \""+h.query+"\". We're working on it! Instead we're playing a track that has similar qualities to \""+
h.query+'".',narrativeSeedDescription:null,isFirstTrack:0==c.ie,stationName:b.ca(),stationId:d}}),e=!0,this.model.set({searchDetails:null}));if(e){this.ya=setTimeout(r(this,function(){this.pc()}),3E4);return}}}this.model.set({narrative:null})};
f.wJ=function(){this.tf();var b=this.model.get("currentStation");b&&this.model.set({narrative:{narrative:"The tracks on this station were included as part of a special advertising campaign, and are no longer available for on-demand listening. Please choose another station, or try creating a new one.",hideClose:!0,type:"expiredOnDemand",stationName:b.ca()}})};
f.vJ=function(){this.tf();var b=this.model.get("currentStation");b&&(this.model.set({narrative:{narrative:"For a limited time only, the tracks on this exclusive station are available as part of special promotion.  You may select to play this station again or select another station.",type:"endOnDemand",stationName:b.ca()}}),this.ya=setTimeout(r(this,function(){this.pc()}),3E4))};f.qt=function(){null!=this.model.get("songNarrative")&&this.pc()};f.pc=function(){this.model.set({narrative:null});this.tf()};
f.tf=function(){null!=this.ya&&(clearTimeout(this.ya),this.ya=null)};function mD(b,c){this.model=b;this.ya=null;z.c(sf,r(this,this.aK));this.model.bind("change:currentStation",r(this,this.pc));this.model.bind("change:currentTrack",r(this,this.pc));this.model.bind("change:narrative",r(this,this.wm));c.bind("close",r(this,this.pc))}mD.prototype.aK=function(b){this.model.set({songNarrative:b});null!=b&&(this.ya=setTimeout(r(this,function(){this.pc()}),3E4))};mD.prototype.wm=function(){null!=this.model.get("narrative")&&this.pc()};
mD.prototype.pc=function(){this.model.set({songNarrative:null});this.tf()};mD.prototype.tf=function(){null!=this.ya&&(clearTimeout(this.ya),this.ya=null)};function nD(b){this.model=b;S(Tv,r(this,this.VP));z.c(ti,r(this,this.AM));z.c(Pe,r(this,this.$a))}nD.prototype.$a=function(){var b=this.model.get("currentUser");b&&b.Ci&&""!=b.Ci?b=b.Ci:wl?(b=om(Zl),b=null==b||me(""+b)||"null"==b?null:""+b):b=null;oD(this,b,!1)};nD.prototype.AM=function(){oD(this,null,!1)};nD.prototype.VP=function(b){oD(this,b,!0)};
function oD(b,c,d){var e=b.model.get("currentUser");null!=e&&e.J()?(b.model.set({currentSkinPath:null}),vm(Zl)):(d&&e.Ci!=c&&z.b(hk,c),b.model.set({currentSkinPath:c}),c&&(null==c?vm(Zl):um(Zl,c)))};function pD(b){this.model=b;this.Ft=this.gk=-1;this.xp=this.yp=0;b=[];for(var c=0;c<qD.length;c++){var d=qD[c];null!=d.Lf&&(b=_.union(b,d.Lf));null!=d.Gi&&(b=_.union(b,d.Gi))}for(c=0;c<b.length;c++)z.c(b[c],r(this,this.jJ));z.c(Ve,r(this,this.Lq));z.c(He,r(this,this.$a));z.c(Mi,r(this,this.VI));z.c(Ee,function(){0<ho(A._data.tipTestMode)&&(rD=2E3,sD=1E3*ho(A._data.tipTestMode),tD=uD=1E3)});W("/tip",!0,!0,!0,r(this,function(b){(b=qD[parseInt(b.pathNames[1],10)])&&vD(this,b)}));S(Ju,r(this,this.bJ));
S(Vu,r(this,this.fJ));S(bw,r(this,this.Yc));S(Zv,r(this,this.Yc));S(nw,r(this,this.dK));S(ow,r(this,this.RH));S(Yw,r(this,this.Yc));z.c(Uk,r(this,function(){this.Zo=!0;this.Yc()}));z.c(Vk,r(this,function(){this.Zo=!1}));$(window).resize(r(this,this.Yc));$(window).scroll(r(this,this.Yc))}
var wD,rD=6E4,sD=18E5,uD=2,tD=4,xD=0,qD=[new yD("thumbs","Thumbs","Remember to rate tracks you hear in order to customize your station.",' Clicking "thumbs-up" tells Pandora "you like this track" and helps to bring in more tracks like it to your station. Clicking "thumbs down" tells us not to play this track.',".thumbUpButton:first",null,null,null,[ii,ji],function(b){b=b.get("currentStation");return!(b&&b.re()==m.Gc.Ve())}),new yD("shuffle","Shuffle","You can mix your stations together for greater variety.",
"Click the Shuffle button to shuffle through all your stations. Click the menu arrow on the right of the button to specify which stations to include in the shuffle. You can check and uncheck stations to customize your station shuffle","#shuffleIcon",null,null,null,[pi],function(b){return 2<b.get("stationList").select(function(b){return!b.get("isQuickMix")}).length}),new yD("album_art_resize","Album Art","You can adjust the size of the album art in the Pandora Player.","Drag this button (click and hold down your mouse and drag) to adjust the size of the album art in the player. Another way to customize your pandora experience!",
".slideDragContainer",null,null,null,[],null),new yD("tired_song","Tired of this Track","Tired of a track? Put it to sleep!",'You can click "I\'m tired of this track" and we will stop playing this track for a while.',"#track_menu_dd .tiredOfSong",[hi],1,1,[Zi],null),new yD("buy","Buy","You can buy this track or album.","Click the buy button. Select Amazon or iTunes",".buyButton",[ii],2,null,[],null),new yD("thumb_up","Create Station","You can create a new station from any artist or track you hear.",
'Select "New Station" and then click "from Song" or "from Artist" to create the new station.',".newStationFromArtist:last",[ii],3,3,[],function(b){return 10>b.get("stationList").select(function(b){return!b.get("isQuickMix")})}),new yD("share","Share","You can share any of your stations with your friends.","Click the share button. You can facebook post, twitter tweet, or email stations or tracks to your friends",".shareButton",[ii],4,null,[oj,nj],null),new yD("add_variety","Add Variety","Learn how to add more variety to your stations.",
"Click on add variety. In the next panel, enter an artist or track, and we'll add music like that to your station",".addVariety",[hi,ji],6,null,[dj],function(b){if(b.get("currentStationViewIsShuffle")&&this.Ta==xD)return!1}),new yD("like","My Profile","See a complete list of all your likes on your profile",'Click "my profile" to edit your profile information, look at all your Pandora activity, see a list of all your likes, and more.',".myprofile_icon",[uj],1,null,null,null,!0)];f=pD.prototype;
f.VI=function(b){this.Ht=b};f.jJ=function(b,c){clearTimeout(wD);setTimeout(r(this,function(){var b=Tm(),e=tl(c);null==b[e]?b[e]=1:b[e]++;um(Xl,b);if(zD(this)){b=[];for(e=0;e<qD.length;e++){var h=qD[e];if(null!=h.Lf&&ke(h.Lf,c)&&h.sw(this.model)){for(var l=0,p=0;p<h.Lf.length;p++)l+=Um(h.Lf[p]);l>=h.hL&&b.push(h)}}0<b.length&&vD(this,b[0])}}),2E3)};
f.bJ=function(){this.Yc();clearTimeout(wD);wD=setTimeout(r(this,function(){if(zD(this)&&!((new Date).getTime()-this.Ft<sD)){for(var b={},c=Wm(),d=0;d<c.length;d++){var e=c[d];null==b[e]&&(b[e]=0);b[e]++}b=[];for(c=0;c<qD.length;c++)d=qD[c],null==d.Lf&&d.sw(this.model)&&b.push(d);0<b.length&&vD(this,b[0])}}),2250)};
function vD(b,c){clearTimeout(wD);b.Ft=(new Date).getTime();b.yp++;Vm(c.id);2==c.Ta?R(ew):c.Ta==xD?R(fw):1==c.Ta?R(dw):3==c.Ta&&R(gw);setTimeout(r(b,function(){this.model.set({currentContextualTip:{initialText:c.dL,title:c.title,moreText:c.TL,anchorElementPath:c.BE}})}),250)}f.fJ=function(){this.xp++;this.Yc()};f.RH=function(){this.Tv=!1;this.Yc()};f.dK=function(){this.Tv=!0;this.Yc()};f.Yc=function(){clearTimeout(wD);this.model.set({currentContextualTip:null})};
function zD(b){var c=b.model.get("currentUser");return null==c||c.p()||0!=$(document.body).scrollLeft()||0!=$(document.body).scrollTop()||0!=$(".lightbox:visible").length||b.Tv||b.Zo||0>b.gk||null!=b.model.get("currentContextualTip")||(new Date).getTime()-b.gk<rD||b.yp>=tD||b.xp>=uD?!1:!0}f.$a=function(){this.xp=this.yp=0;this.Ft=this.gk=-1};
f.Lq=function(b){this.Zo=b&&b instanceof Hn;0>this.gk&&(this.gk=(new Date).getTime());if(!(0>this.Ht)){var c=qD[this.Ht];c&&setTimeout(r(this,function(){vD(this,c)}),2E3);this.Ht=-1}};
function yD(b,c,d,e,h,l,p,q,t,y,E){this.id=b;this.title=c;this.dL=d;this.TL=e;this.BE=h;this.Ta=q;this.hL=p;this.Lf=l;this.Gi=t;this.AE=E;null==y&&(y=function(){return!0});this.sw=r(this,function(b){if(ke(Wm(),this.id)||b.get("currentStationViewIsShuffle")&&this.Ta==xD)return!1;if(null!=this.Gi)for(var c=0;c<this.Gi.length;c++)if(0<Um(this.Gi[c]))return!1;return 0<$(".backstage:visible").length&&!this.AE?!1:y(b)})};function AD(b){this.model=b;S(Xu,r(this,this.eI))}AD.prototype.eI=function(b){b=b.low;Rn(wl,b);um(bm,b);z.b(fi,{noSkip:!0})};function BD(b){this.model=b;this.tm=null;S(Tu,r(this,this.DJ));z.c(Je,r(this,this.AJ));z.c(Ke,r(this,this.BJ));W("/profile",!0,!0,!0,r(this,function(b){var d=b.pathNames;if(2==d.length&&!_.contains(_.values(Iu),d[1])||3==d.length&&"id"==d[1])this.Pp=!1,this.model.set({profilePanelType:Fu}),CD(this,d[d.length-1],1==d.indexOf("id")?"listenerIdToken":"webname");else{var e=this.model.get("currentUser");(b=d[2])||null==e||(b=e.Y);me(b)&&(null==e||e.p())?(vz(),R(Dv)):(this.Pp=!1,d=d[1],"edit"==d&&(d=null,
this.Pp=!0),this.vz=!1,d&&d!=Gu&&d!=Hu||(d=Fu,this.vz=!0),this.model.set({profilePanelType:d}),CD(this,b))}})).Hw=function(b){return"/profile"!=b&&"/profile/activity"!=b&&-1==b.indexOf("/profile/feed")};W("/feed",!0,!0,!0,r(this,function(){var b=this.model.get("currentUser");null==b||b.p()?(vz(),R(Dv)):(this.model.set({profilePanelType:Gu}),CD(this,b.Y))}));W("/connect",!0,!0,!0,r(this,function(){var b=this.model.get("currentUser");null==b||b.p()?(vz(),R(Dv)):(this.model.set({profilePanelType:Hu}),
CD(this,b.Y))}))}function CD(b,c,d){"webname"==d&&(b.tm=c);z.b(Fi,{query:c,queryType:d})}BD.prototype.AJ=function(b){if(!this.tm||this.tm==b.webName){this.tm=null;DD(this,b);b=this.model.get("currentProfileInfo").webName;var c=this.model.get("profilePanelType"),d;d=c==Gu?"/feed":c==Hu?"/connect":c!=Fu?"/profile/"+c+"/"+b:"/profile/"+b;hz()!=d&&V(d,!this.vz,!0);R(Mu,{panelType:c,webname:b,edit:this.Pp})}};
BD.prototype.BJ=function(b){var c=this.model.get("currentProfileInfo");if(null!=c&&c.webName==b.webName){DD(this,b);if(c=this.model.get("currentUser"))b.privateProfile!=c.kh&&(c.kh=b.privateProfile),c.Jl=b.fullNameRaw;R(rv)}};function DD(b,c){var d=b.model.get("currentUser");if(null!=d){var e={},h=c.webName==d.Y;(e.is_owner=h)&&(e.fbId=d.Fa);e.hasExplicitContentFilterEnabled=d.Wb;e.allowExplicitContentManagement=d.aw;b.model.set({currentProfileInfo:$.extend(e,c)},{silent:!0})}}
BD.prototype.DJ=function(b){var c=this.model.get("currentProfileInfo").webName,d=this.model.get("currentUser");c==d.Y?"G"==b[0]?z.b(Hi,{stationCode:b}):z.b(ni,{stationId:b,userInitiated:!0}):z.b(Hi,{stationCode:"fs"+b})};function ED(b){this.model=b;z.c(Sh,r(this,this.handleError));z.c(nh,r(this,this.kK));z.c(Jh,r(this,this.kI));z.c(Kh,r(this,this.jI));z.c(oh,r(this,this.sI));z.c(ph,r(this,this.oK));z.c(dh,r(this,this.iI));z.c(Eh,r(this,this.yI));z.c(vh,r(this,this.mI));z.c(Lh,r(this,this.BK));z.c(th,r(this,this.QI));z.c(Nh,r(this,this.yJ));z.c(Oh,r(this,this.zJ));z.c(Ph,r(this,this.Mq));z.c(il,r(this,this.hK));z.c(bi,r(this,this.UH));z.c(ci,r(this,this.uJ))}f=ED.prototype;
f.handleError=function(b){var c;if(b.error instanceof Bd&&b.er)c=new X({message:b.message,persist:!0,retry:!0}),c.bind("retry",r(this,function(){z.b(b.er,b.gL)})),c.bind("close",r(this,function(){b.Bl&&z.b(b.Bl,b.Jg?b.Jg:b.error.message)}));else{if(b.Bl){b.Jg&&(b.Jg.intentEvent=b.er);z.b(b.Bl,b.Jg?b.Jg:b.error.message);return}c=le(b.message)?new X({message:b.message}):new X({message:Zb()})}c.render()};
f.kK=function(){var b=this.model.get("currentUser"),c=new X({message:yb()});b&&b.S()&&(c=new X({message:zb()}));c.render()};f.kI=function(){(new X({message:Xb()})).render()};f.jI=function(){(new X({message:Yb()})).render()};f.sI=function(){var b=this.model.get("currentUser"),c=new X({message:Ab()});b&&b.S()&&(c=new X({message:Db()}));c.render()};f.oK=function(){(new X({message:Eb()})).render()};f.iI=function(){(new X({message:Fb()})).render()};f.yI=function(){(new X({message:Kb()})).render()};
f.zJ=function(){(new X({message:gc()})).render()};f.yJ=function(b){if(b.isOnDemand)if(b.stationStart){var c=new X({message:ac()});z.b(ug,b)}else c=new X({message:bc(),play:!0,persist:!0}),c.bind("play",r(this,function(){z.b(vg,b.stationId)})),z.b(tg,b);else c=new X({message:$b()});c.render()};
f.QI=function(b){this.model.get("currentUser").Id=!0;var c=Zb();b.code==m.d.RB()&&(c=b.message,z.b(qj));le(c)&&"This facebook account is bound to a different Pandora account"==c?(new X({message:hc})).render():(new X({message:c})).render()};f.BK=function(b){var c=ca();if(b.code==m.d.vu())c=ea();else if(b.code==m.d.wu())c=da();else if(b.code==m.d.Zn())c=ha();else{if(b.code==m.d.Qn()||b.code==m.d.Ln()||b.code==m.d.ko()||b.code==m.d.Mn())return;b.code==m.d.$n()?c=fa():b.code==m.d.Se()&&(c=ia())}(new X({message:c})).render()};
f.mI=function(b){var c=this.model.get("currentUser");if(b instanceof Dd)switch(b.code){case m.d.wC():case m.d.yC():k.error("Cannot create station: Invalid station code");break;case m.d.zC():(new X({message:Vb})).render();break;case m.d.fu():(new X({message:ac()})).render();break;case m.d.wk():if(-1<b.message.indexOf("station limit")){null==c||c.p()?(new X({message:Tb()})).render():(new X({message:Ub()})).render();break}default:(new X({message:Wb()})).render(),s("create_station_unhandled_error",{B3:b.code,
C3:b.message},c)}else this.model.get("readonly")?(new X({message:ec()})).render():mz(this.model)?null!=b&&null!=b.retry_method?z.c(Ug,r(this,function(){z.pa(this,Ug);b.retry_method(b)})):(new X({message:fc()})).render():k.error("Cannot create station: unhandled error",b)};f.Mq=function(){(new X({message:lc()})).render()};f.hK=function(){(new X({message:nc()})).render()};f.UH=function(){(new X({message:pc()})).render()};f.uJ=function(){(new X({message:qc()})).render()};function FD(b,c){this.model=b;this.dr=!1;z.c(Te,r(this,this.jy));z.c(vf,r(this,this.MJ));z.ib(Ee,r(this,this.$l));z.c(Bf,r(this,this.IJ));z.ib(Jg,r(this,this.uq));z.c(Sg,r(this,this.Gb));z.ib(Re,r(this,this.my));z.ib(Se,r(this,this.my));z.c(Ph,r(this,this.Mq));S(av,r(this,this.OJ));S(cv,r(this,this.Ux));S(Qv,r(this,this.fl));S(lw,r(this,this.TH));S(ev,r(this,this.pJ));S(iw,r(this,this.Kd));S(jw,r(this,this.Ld));c.bind("addvariety",r(this,this.Ux));this.model.bind("change:currentShuffleType",r(this,
this.MF));this.model.bind("change:currentStation",r(this,this.OF));this.model.bind("change:currentTrack",r(this,this.PF));this.model.bind("change:safeToAutoPlayStation",r(this,this.fl));this.model.bind("change:expired",r(this,this.uG));this.model.bind("change:siteLocked",r(this,this.Iq));this.Zv=W("/stations/variety",!0,!1,!0,r(this,function(b){(b=b.pathNames[2])?GD(this,b):GD(this)}));this.qO=W("/stations/rename",!0,!1,!0,r(this,function(b){b=b.pathNames[2];null==b&&null!=this.model.get("menuStation")&&
(b=this.model.get("menuStation").e());b?HD(this,b):HD(this)}));W("/stations/play",!0,!1,!0,r(this,function(b){var c=b.pathNames[2];null!=c&&setTimeout(function(){V("/station/play/"+c,!1,!0)},1)}));this.kA=W("/stations/share",!0,!1,!0,r(this,this.Yr));this.sP=W("/albums/share",!0,!1,!0,r(this,this.Yr));this.uP=W("/songs/share",!0,!1,!0,r(this,this.Yr));ID();$(window).bind("beforeunload",this,function(b){if(JD()){var c=[];b=b.data.model.get("stationList");for(var h=0;h<b.length&&20>c.length;h++){var l=
b.models[h];c.push({stationId:l.e(),stationName:l.ca()})}try{var p=window.external;p.msSiteModeCreateJumpList("Pandora Stations");for(h=0;h<c.length;h++)l=c[h],p.msSiteModeAddJumpListItem(l.stationName,"http://"+window.location.host+"/#/station/play/"+l.stationId,"http://"+window.location.host+"/radio/ie_app/pinned.ico");p.msSiteModeShowJumplist();window.setTimeout(function(){ID()},1E3)}catch(q){trackJs.track(q)}}})}function JD(){try{window.external.msIsSiteMode()}catch(b){return!1}return!0}
function ID(){JD()&&(window.external.msSiteModeCreateJumpList("Pandora Stations"),window.external.msSiteModeClearJumpList())}f=FD.prototype;f.$l=function(){this.dr=!0;this.fl()};f.it=function(){new hA({event:"station_rename",title:Cc,subtitle:Dc,message:Fc,yesButtonText:Gc,noButtonText:Hc})};f.Kd=function(b){"station_rename"==b&&z.b(ak,{stationId:this.vn.e(),context:"station_rename"})};f.Ld=function(){};f.uq=function(b){"station_rename"==b.context&&new iA({station:this.vn})};
f.Yr=function(){var b=this.qb;this.qb=null;R(bv,b)};f.fl=function(){if(!this.model.get("siteLocked")&&this.model.get("safeToAutoPlayStation")&&null==this.model.get("currentStation")){var b=this.model.get("stationToAutoPlay");b&&!Vo()&&z.b(ni,{stationId:b,userInitiated:!1})}};f.Iq=function(){this.model.get("siteLocked")||this.fl()};f.uG=function(){var b=this.model.get("expired");this.model.set({safeToAutoPlayStation:!b})};
f.my=function(){if(!this.model.get("booting")&&"all"==this.model.get("currentShuffleType")){for(var b=[],c=this.model.get("stationList").models,d=0;d<c.length;d++){var e=c[d];e.Z()&&e.D()||e.Ra()||e.Db()||e.Ub()||e.rc()||!An(e)||b.push(c[d].e())}0<b.length&&z.b(pi,{stationIdArray:b,isExplicitSave:!1,shuffleType:this.model.get("currentShuffleType")})}};
f.jy=function(b){var c=this.model.get("stationList").select(function(b){return b.D()&&b.Z()})[0];c.Xm(b.quickMixStationIds);c._quickMixType=b.quickMixType;R(Wu);KD(this,!0)};f.Ux=function(b){(b=b?this.model.get("stationList").Rc(b):this.model.get("currentStation"))&&this.Zv.update(b.e())};function GD(b,c){var d=b.r(c);null!=d&&(b.hi=new Xz({model:b.model,station:d}),b.Zv.update(d.e()))}f.TH=function(b){null==b.getContext()&&z.b(dj,b)};f.PF=function(){KD(this,!1)};
function KD(b,c){var d=b.model.get("currentStation"),e=b.model.get("currentTrack");e instanceof Hn||null!=d&&d.D()&&d.Z()&&null!=e&&(ke(d.qe(),e.e())||z.b(hi,{appSkip:!c}))}f.MJ=function(b){this.hi&&this.hi.handleSearchResults(b)};
f.OF=function(b,c,d){d=d||{};this.hi&&(this.hi.cancelClick(),this.hi=null);this.model.set({relatedArtists:null,selectedArtist:null,selectedTrack:null});b=this.model.get("currentStation");null!=b&&(c=this.model.get("modalPanel"),rC()||c==vu&&!my()&&!Bn(b)||V("/station/play/"+b.e(),!1,!0,!0===d.userInitiated))};
f.IJ=function(b){var c=_.map(b,function(b){return b.artistName}).join(", ")+"...",d=this.model.get("currentStation");this.qb&&this.qb.station&&b.stationId==this.qb.station.e()?(this.qb=$.extend({relatedArtists:c},this.qb),this.kA.update(this.qb.station.e())):b.stationId==d.e()&&this.model.set({relatedArtists:c})};f.MF=function(){var b=this.model.get("currentShuffleType");null!=b&&"all"!=b&&(b="my");um(cm,b)};
f.OJ=function(b){var c=hz();c&&c.indexOf&&-1<c.indexOf("/stations/variety")&&(c="");this.qb=$.extend({returnHash:c},b);this.qb.station?(b=this.qb.station,b.Cb()||!b.wa()?(b=b.e(),c=this.model.get("currentStation"),null!=c&&c.e()==b&&(this.qb.returnHash="/station/play/"+b),this.kA.update(b)):z.b(gj,b.e())):this.qb.album?this.sP.update(this.qb.album.musicId):this.qb.track&&this.uP.update(this.qb.track.o())};
function HD(b,c){var d=b.r(c);null!=d&&(d.Z()?(new iA({station:d}),b.qO.update(d.e())):(b.vn=d,b.it()),R(ax))}f.Gb=function(){if(this.nj){for(var b=this.model.get("stationList"),c=0;c<this.nj.length;c++)b.add(this.nj[c],{silent:!0});b.trigger("refresh");this.nj=null}};f.r=function(b){var c=this.model.get("currentStation");b&&0<b.length&&(c=this.model.get("stationList").detect(function(c){return c.e()==b}));return c};
f.pJ=function(b){var c=this.model.get("currentStation"),d=b==c.e();R(bx);if((c=this.model.get("currentUser"))&&c.iL)z.b(bi,b);else{var e=this.model.get("stationList"),c=e.Rc(b);b=e.indexOf(c);var h=[c];e.remove(c,{silent:!0});if(1==e.length){var l=e.at(0);h.push(l);e.remove(l,{silent:!0})}e.trigger("refresh");this.nj=h;var p=new X({message:zc([c.ca()]),undo:!0,context:h});p.bind("undo",r(this,function(){for(var b=p.getContext(),c=0;c<b.length;c++)e.add(b[c],{silent:!0});e.trigger("refresh");R(cx);
this.nj=null;this.model.get("videoAdPlaying")?z.c(Vk,r(this,function(){z.pa(this,Vk);d&&z.b(ni,{stationId:b[0].e()})})):d&&z.b(ni,{stationId:b[0].e()})}));p.bind("close",r(this,function(){var b=p.getContext();z.b(Li,b[0].e())}));p.render();d&&(0<e.length?(c=b,b>=e.length&&(c=e.length-1),b=e.at(c),z.b(ni,{stationId:b.e()})):z.b(bk,null))}};f.Mq=function(b){V("/station/play/"+b,!1,!1)};function LD(b,c){this.model=b;this.Lt=!1;this.wg=c;this.Qy=0;z.c(zf,r(this,this.sJ));z.c(Wj,r(this,this.Wr));this.model.bind("change:currentUser",r(this,this.yq))}LD.prototype.Wr=function(){this.Lt=!0};
LD.prototype.yq=function(){var b=this.model.get("currentUser");null==b&&(this.Lt=!1);if(b&&b.ab()&&!b.of){if(b.tj)return;if(!b.of)if(8>=b.od){if(!0!=om(am)){if(b.gh){var c=b.od;1!=c&&!0==om(am)==!0||this.model.set({blueBarMessage:new Oy(5,"",c,!1,"","")})}else c=b.od,b=b.ih,null==this.model.get("blueBarMessage")&&(1!=c&&!0==om(am)==!0||this.model.set({blueBarMessage:new Oy(0,"",c,b,"","")}));return}}else um(am,!1)}else if(b&&b.u==m.v.lg()&&5>=b.od&&!this.Lt&&!b.gh){c=b.od;null==this.model.get("blueBarMessage")&&
this.model.set({blueBarMessage:new Oy(4,"",c,!1,"","")});return}b&&null!=b.Uo&&""!=b.Uo?this.Xs(b.Uo):this.model.set({blueBarMessage:null})};LD.prototype.sJ=function(b){b>this.Qy&&(this.model.set({blueBarMessage:new Oy(3,"",b,!1,"","")}),this.Qy=b)};LD.prototype.Xs=function(b){null==this.model.get("blueBarMessage")&&this.model.set({blueBarMessage:new Oy(2,b,-1,!1,"","")})};function MD(b,c){this.bC=3E4;this.In="2000x15";this.Jn="tuner";this.model=b;this.wh=c;this.model.bind("change:modalPanel",r(this,this.Eq));z.ib(Bi,r(this,this.vj));z.ib(Ci,r(this,this.aM));z.ib(Di,r(this,this.oM));z.c(ti,r(this,this.abort));W("/forcepostreg",!0,!1,!1,r(this,this.WG));ND=this}var ND;function OD(){var b=ND;clearTimeout(b.aO);C.wb(b.Ge,function(b){k.info("postreg "+b+" ping success")},function(b,d){k.info("postreg "+d+" ping failure: "+b)})}
function PD(b){zp(b.CL,b.In,"failed to load postreg ad",b.Jn,b.model.get("currentUser"));ND.Gq()}f=MD.prototype;f.Eq=function(){var b=this.model.get("modalPanel");"REGISTERED_PANEL"==b?QD(this,null):"POSTREG_AD_PANEL"==b&&(b=this.model.get("currentUser"),null==this.Ge||null==this.Ge.cpa_swf_url||null!=b&&!b.J()?this.vj():(this.aO=setTimeout(r(this,function(){PD(this)}),this.bC),this.wh.render(this.Ge.cpa_swf_url)))};
function QD(b,c){b.Ge=null;var d={pandoraAdType:"postreg"},e=b.model.get("currentStation"),h=b.model.get("stationList").models;C.fg(d,e,h);C.Oe(d);C.Vf(B.Ri(),b.Jn,d,b.In,!1,r(b,function(b){this.CL=b;A._data.useTestAds&&(b="<methodResponse><params><param><value><struct><member><name>type</name><value><string>CPA_PROVIDER</string></value></member><member><name>cpa_swf_url</name><value><string>/postregAdProxy/testswf/webreg.swf</string></value></member><member><name>tracker</name><value><string></string></value></member><member><name>clickthrough</name><value><string></string></value></member><member><name>impression</name><value><string></string></value></member></struct></value></param></params></methodResponse>");
try{this.Ge=C.Cj(b,this.Jn,this.In)}catch(d){trackJs.track(d),this.Ge=null}c&&c()}),r(b,r(b,function(){this.Ge=null})))}f.WG=function(){QD(this,r(this,function(){this.model.set({modalPanel:"POSTREG_AD_PANEL"})}))};f.Gq=function(){this.wh.closeWindow()};f.abort=function(){this.wh.abort()};f.vj=function(){this.Ge=null;z.b(Ug);rC()||setTimeout(function(){R(Lu)},500)};
function RD(b,c,d){k.info("PostregAdController.onPostregAdPrompt: "+[b,c,d].join(", "));var e=d.split(",");d=ND;me(b)&&(b="This advertiser");for(var h=d.model.get("currentUser"),l="",p="",q=0;q<e.length;q++){var t=e[q];0<p.length&&(2<e.length&&(p+=","),p+=" ",q==e.length-1&&(p+="and "));0<l.length&&(l+=",");var p="dma"==t?p+"city":p+t,y;"email"==t?y=h.Ka:"zip"==t?y=h.jf.split(":")[3]:"age"==t?y=String.valueOf(h.jf.split(":")[1]):"gender"==t?y=h.jf.split(":")[2]:"dma"==t&&(y=h.jf.split(":")[9]);l+=
y}y=""+b+" would like to use your";y=y+" "+p;y=y+" "+c;y+=".";y+="  Is this OK?";d.zz=l;d.wh.DF(y)}f.oM=function(){this.tapToRegCallback&&this.tapToRegCallback(!1,null)};f.aM=function(){this.tapToRegCallback?this.tapToRegCallback(!0,this.zz):0<$("#postregProxy").length&&$("#postregProxy")[0].postregAdPrompt_callback(this.zz);setTimeout(r(this,this.Gq),1500)};window.onPostregAdComplete=function(){k.info("PostregAdController.onPostregAdComplete");ND.Gq()};window.onPostregAdPrompt=RD;
window.askListenerForInfo=function(b,c,d,e){k.info("PostregAdController.askListenerForInfo: "+[b,c,d].join(", "));ND.tapToRegCallback=e;RD(b,c,d)};window.onPostregAdLoad=function(){k.info("PostregAdController.onPostregAdLoad");OD()};window.onPostregAdError=function(){k.info("PostregAdController.onPostregAdError");PD(ND)};function SD(b,c){this.model=b;this.pn=c;this.model.bind("change:modalPanel",r(this,this.Eq));z.c(Xf,r(this,this.Kq));z.c(Zf,r(this,this.LJ));z.c(Yf,r(this,this.pK));S(zw,r(this,this.mK));S(Aw,r(this,this.KJ));z.c(He,function(){})}var TD={brandName:"",lineId:"",creativeId:"",offerButtonLabel:"",offerButtonUrl:"",leadInBannerUrl:"",signature:"",vxOffer:""};f=SD.prototype;
f.Kq=function(b){this.yb=b;(b=this.model.get("currentUser").Mh)&&b!=m.de.Ou()&&this.yb&&this.yb.svnActivityUrl&&(this.yb.svnActivityUrl+=(-1==this.yb.svnActivityUrl.indexOf("?")?"?":"&")+"disable_audio_cue=true")};
f.Eq=function(){var b=this.model.get("modalPanel"),c=this.model.get("currentUser");"SVN_AD_PANEL"==b&&(this.yb?(R(Iw),z.b(gi),this.pn.render(this.yb.svnActivityUrl,this.yb.svnWindowHeight,this.yb.svnWindowWidth),s("svn_activity_start",{listener_id:c.s,activity:this.yb.svnName,instance_id:this.model.get("halt_id"),source:"stillListening"},this.model.get("currentUser"))):R(zw))};function UD(b){b.yb=null;R(Hw);z.b(ei);b.pn.tF()}f.mK=function(b){null!=this.yb&&(VD(this,!1,b),UD(this))};
f.KJ=function(b){null!=this.yb&&(VD(this,!0,b),UD(this))};function VD(b,c,d){var e=b.model.get("currentUser"),h=e.fk,e=e.Mh;z.b(Qj,{svnName:b.yb.svnName,activityBenefit:e,hoursEarned:e==m.de.Ou()?h-1:h,probablyCompleted:c,context:d})}f.pK=function(b){k.info("awarding "+b+" for completing SVN activity");this.model.get("currentUser").hk=b};
f.LJ=function(b){var c=b.success;k.info("Server reported that the listener "+(c?" did ":" did not ")+" complete svn activity");var d=this.model.get("currentUser");if(c)WD(this,b.activity.activityBenefit,b.activity.hoursEarned,d),s("svn_activity_completed",{listener_id:d.s,instance_id:this.model.get("halt_id")},d);else{var e=c=null,h=!1,l=b.activity.context;l&&(l.source&&(c=l.source),l.elapsedTime&&(e=l.elapsedTime),l.didReachThreshold&&(h=l.didReachThreshold));h&&WD(this,b.activity.activityBenefit,
b.activity.hoursEarned,d);s("svn_activity_cancelled",{listener_id:d.s,instance_id:this.model.get("halt_id"),activity:b.activity.svnName,probablycompleted:b.activity.probablyCompleted,source:c,interaction_time:e,threshold_reached:h},d)}};
function WD(b,c,d,e){c==m.de.eo()?(TD.offerName=4==d?"uninterrupted4":"uninterrupted1",TD.leadInAudioUrl=4==d?"http://pandora.com/static/creatives/valueExchange/intro-4hr.mp3":"http://pandora.com/static/creatives/valueExchange/intro-1hr.mp3",TD.truexInstanceId=b.model.get("halt_id"),z.b(hl,TD)):e.hk=d};function XD(b){this.model=b;new gB({model:this.model});this.model.bind("change:currentUser",r(this,this.Cp));z.c(Af,r(this,this.Fq))}XD.prototype.Fq=function(){this.model.set({capped:!0});this.model.set({blueBarMessage:null});R(gv);setTimeout(r(this,function(){z.b(gi)}),800)};XD.prototype.Cp=function(){this.model.set({capped:!1})};function YD(b){this.model=b;this.model.bind("change:modalPanel",r(this,this.ia));this.Kz=new kB({model:this.model});this.hash=W("/gift",!0,!0,!0,r(this,this.cy));W("/giftredeem",!0,!1,!1,r(this,this.cy))}YD.prototype.cy=function(b){this.model.get("hasStations")||this.model.set({modalPanel:"REDEMPTION_PANEL"});b=b.parameters.code;null==b&&(b=A._data.code,A._data.code=null);this.Kz.render(b);this.hash.update()};YD.prototype.ia=function(){"REDEMPTION_PANEL"!=this.model.get("modalPanel")&&this.Kz.dj()};function ZD(b){function c(b){var c={};_.isString(b)&&_.each(b.split("&"),function(b){b=b.split("=");c[decodeURIComponent(b[0])]=decodeURIComponent(b[1]||"")});return c}this.model=b;this.ty=!1;W("/land",!0,!0,!0,r(this,function(b){if(!this.ty){this.ty=!0;var e=this.model.get("smartLaunchPath");if(null==e||0==b.path.indexOf("/land/song"))e=b.path;this.model.set({smartLaunchPath:null});if(null!=e)if(0==e.indexOf("/land/")){var h=e.substring(6).split("/");if(1<h.length)if("station"==h[0]){var l="fs";
"TT0"===h[1]?l="":null!=h[2]&&(l=h[2]);b=c(b.queryString);z.b(Hi,{stationCode:l+h[1],stationName:b.X3||"",source:b.mt||""})}else if("artist"==h[0])setTimeout(function(){V(h[1],!1,!1)},300);else if("song"==h[0]){var p;2==h.length?p="/-/-/"+h[1]:3==h.length?p="/"+h[1]+"/-/"+h[2]:4==h.length&&(p="/"+h[1]+"/"+h[2]+"/"+h[3]);setTimeout(function(){V(p,!1,!1)},300)}}else 0==e.indexOf("/search/")&&setTimeout(function(){V(e,!1,!1)},300)}}))};var DC="expired-phone",EC="subscribe-phone",FC="subscription",HC="subscribe",GC="expired",IC="sponsorshipExpired",JC="subscribe-mdp",KC="expired-business",wC={BT:DC,I0:EC,J0:FC,m0:"renewal",z_:"notneeded",G0:HC,zT:GC,A0:IC,H0:JC,AT:KC};function $D(b){this.model=b;z.c(Tf,r(this,this.yK));for(var c in wC)(function(b,c){W("/"+c,!1,!0,!0,r(b,function(){aE(this,c)}))})(this,wC[c])}
function aE(b,c){var d=b.model.get("currentUser");if(null==d||d.p())b.model.set({postLoginPath:"/"+c});else{d&&d.At&&z.b(dl);b.model.set({modalPanel:vu});$("#mainContent").children().hide();if("renewal"==c){if(d&&d.ab()&&d.tj){setTimeout(function(){R(Lu)},100);return}if(d&&!co(d))c="notneeded";else{if(d&&(bo(d)||d.u==m.v.lg())){setTimeout(function(){V("/subscriptionInfo",!1,!1)},100);return}if(d&&d.sb!=m.sa.ao()){R(hv);return}}}b.Cl=new jB({model:b.model,hashTag:c});$("#mainContent").append(b.Cl.render().el)}}
$D.prototype.yK=function(){this.Cl&&(this.Cl.trigger("close"),this.Cl=null)};function bE(b){this.model=b;this.id=(new Date).getTime();this.ur=[];this.Ag=null;z.c(lg,r(this,this.NI));z.c(Kk,r(this,this.tI));this.model.bind("change:currentTrack",r(this,this.qI));this.model.bind("change:currentStation",r(this,this.oI));this.model.bind("change:musicPlaying",r(this,this.tJ))}f=bE.prototype;
f.NI=function(b){if(null!=b&&0!=b.length)if(this.model&&this.model.get("siteLocked")&&"ext_sv_panel_close"!=b[0]&&"ext_saaos"!=b[0]&&"ext_saaof"!=b[0]&&"ext_sv_min_activity_completed"!=b[0])k.info("cannot exceute "+b[0]+" while site is locked");else{var c=b[0];this[c]&&this[c].apply(this,b.slice(1))}};f.tI=function(b){(b=$(b))&&0!=b.length&&(b=Be()?b[0].contentDocument:b[0].contentWindow.document)&&(b=b.getElementById("adContainer"))&&(this.Ag=(b=/\d+:\d+/g.exec(b.innerHTML))&&0<b.length?b[0]:null)};
f.qI=function(){null!=this.Or&&(cE(this,"songEnded",this.Or),this.Or=null);var b=this.model.get("currentTrack");null!=b&&(b=dE(this,b),cE(this,"songPlayed",b),this.Or=b)};f.oI=function(){var b=this.model.get("currentStation");null!=this.Nr&&(cE(this,"stationEnded",this.Nr),this.Nr=null);null!=b&&(b=eE(b),cE(this,"stationPlayed",b),this.Nr=b)};
f.tJ=function(){var b=this.model.get("currentTrack");if(null!=b){var c=this.model.get("musicPlaying"),b=dE(this,b);c?cE(this,"songPlayed",b):cE(this,"songPaused",b)}};function dE(b,c){var d=null;if(null!=c&&(d={songName:c.Ca,artistName:c.W(),albumName:c.eb,albumArtUrl:c.ub(),musicToken:c.Za()?c.Za():c.Cv+":"+c.MC,stationToken:c.e(),songURL:mn()+c.$g(),artURL:c.ub()},null!=d)){var e=b.model.get("currentUser");$.extend(d,{allowExplicit:e?!e.Wb:!0})}return d}
function cE(b,c,d){for(var e=0;e<b.ur.length;e++)vp(b.ur[e],c,d)}function eE(b){return{stationName:b.ca(),stationId:b.e(),isShared:!b.Z(),isQuickMix:b.D()}}bE.prototype.ext_ping=function(b){vp(b,"pong",this.id)};bE.prototype.ext_registerEventListener=function(b){this.ur.push(b);vp(b,"tunerId",this.id);var c=this.model.get("currentStation");null!=c&&vp(b,"stationPlayed",eE(c));c=this.model.get("currentTrack");null!=c&&vp(b,"songPlayed",dE(this,c))};bE.prototype.ext_play=function(){z.b(ei)};
bE.prototype.ext_pause=function(){z.b(gi)};bE.prototype.ext_pause_for_ad=function(){window.setIgnorePauseInteractions(!0);z.b(gi)};bE.prototype.ext_lsfi=function(b){isNaN(parseInt(b.substr(0,2),10))||(b="sh"+b);z.b(Ji,{stationCode:b,source:this.Ag})};bE.prototype.ext_lsfmi=function(b){"TT0"!==b&&0!=b.indexOf("m")&&(b="mi"+b);z.b(Hi,{stationCode:b})};bE.prototype.ext_lcswti=function(b){var c;c=b.split("|");2==c.length&&(b=c[0],c=c[1],z.b(mi,{stationId:b,trackToken:c,source:this.Ag}))};
bE.prototype.ext_lsfst=function(b){le(b)&&V("/search/"+escape(b),!0,!0)};bE.prototype.ext_lqmfi=function(b){var c=this.model.get("currentUser");if(null!=c&&c.s==b){var c=this.model.get("stationList"),d=c.detect(function(c){return c.get("isQuickMix")&&c.get("originalCreatorId")==b});if(null!=d){c.trigger("select",d);return}}z.b(Hi,{stationCode:"qm"+b})};bE.prototype.ext_reg=function(){V("/account/register",!0,!0)};bE.prototype.ext_sub=function(){V("/subscriptionInfo",!0,!0)};
bE.prototype.ext_renew=function(){V("/renewal",!0,!0)};bE.prototype.ext_no_renew=function(){z.b(Gj)};bE.prototype.ext_acct_msg=function(b){this.model.set({blueBarMessage:null});z.b(Xj,b)};bE.prototype.ext_saaos=function(){R(Fw)};bE.prototype.ext_saaof=function(){R(Gw)};bE.prototype.ext_demog_ad=function(){var b=this.model.get("currentUser");null!=b&&window.ad_demog_callback(b.Y,b.Eb())};bE.prototype.ext_sub_state=function(){var b=this.model.get("currentUser");null!=b&&(window.listener_state=b.u)};
bE.prototype.ext_vid=function(b){b=b.split("=");z.b(al,{key:b[0],value:b[1],isUserInitiated:!0})};bE.prototype.ext_fvid=function(){k.info("Not yet implemented: ext_fvid")};
bE.prototype.ext_movie=function(b,c){var d=Fd(),e=null,h={url:b,skipDelaySeconds:15,showScrubber:!1},l=b.match("&?skipDelaySeconds=([0-9]+)");if(l){h.url=b.replace(l[0],"");try{h.skipDelaySeconds=Math.max(0,parseInt(l[1],10))}catch(p){trackJs.track(p)}}if(l=b.match("&?showScrubber=(true|false)"))h.url=b.replace(l[0],""),h.showScrubber="true"==l[1];for(var l=["startUrl","firstQuartileUrl","secondQuartileUrl","thirdQuartileUrl","completeUrl"],q=0;q<l.length;q++){var t=l[q],y=b.match("&?"+t+"=([^&]+)");
y?(h.url=b.replace(y[0],""),h[t]=decodeURIComponent(y[1])):h[t]=null}if(q=h.startUrl)l=q.match("cid::([0-9]+)"),q=q.match("aid::([0-9]+)"),l&&q?(q=q[1],h.creativeId=l[1],h.adId=q):(h.creativeId=null,h.adId=null);z.c(Vk,r(this,function(){e=Fd();"function"==typeof c&&c({epochAtLaunch:d.toString(),epochAtDismiss:e.toString(),viewingDuration:(e-d).toString()});z.pa(this,Vk)}));d=Fd().toString();h.url="file="+h.url;z.b(cl,h)};bE.prototype.ext_dis_video_ads=function(){z.b($k)};
bE.prototype.ext_lss=function(){setTimeout(r(this,function(){R(av,{mode:"station_and_song",station:this.model.get("currentStation"),track:this.model.get("currentTrack")})}),1)};bE.prototype.ext_nss=function(){z.b(ei)};bE.prototype.ext_add_vrty=function(b){setTimeout(function(){R(cv,b)},1)};bE.prototype.ext_share=function(){setTimeout(r(this,function(){R(av,{mode:"station_and_song",station:this.model.get("currentStation"),track:this.model.get("currentTrack")})}),1)};
bE.prototype.ext_share_station=function(b){setTimeout(r(this,function(){var c=this.model.get("currentStation"),d=this.model.get("currentTrack");if(b)for(var e=this.model.get("stationList").models,h=0;h<e.length;h++)e[h].e()==b&&(c=e[h]);R(av,{station:c,track:d})}),1)};
bE.prototype.ext_share_track=function(b){setTimeout(r(this,function(){var c=this.model.get("currentStation"),d=this.model.get("currentTrack");if(b)for(var e=this.model.get("stationList").models,h=0;h<e.length;h++)if(e[h].Cb())for(var l=e[h].n._tracks,p=0;p<l.length;p++)l[p].o()==b&&(d=l[p]);R(av,{station:c,track:d})}),1)};bE.prototype.ext_rst=function(){k.info("Not yet implemented: ext_rst")};bE.prototype.ext_friends=function(){V("/feed",!0,!0)};
bE.prototype.ext_genre=function(b,c){var d="/music";le(b)&&(d+="/"+encodeURI(b.toLowerCase()));le(c)&&(d+="/"+encodeURI(c.toLowerCase()));V(d,!0,!0)};bE.prototype.ext_play_sample=function(b){function c(){z.b(Pi,{url:b[d].url,gain:b[d].gain});d++;d<b.length&&z.pa(this,hf)}var d=0;z.c(hf,r(this,function(b){b.reachedEnd&&setTimeout(r(this,c),100)}));c()};bE.prototype.ext_stop_sample=function(){z.b(Qi)};bE.prototype.ext_sh_sc=function(){k.info("Not yet implemented: ext_sh_sc")};
bE.prototype.ext_sv_panel_close=function(){R(Cw)};bE.prototype.ext_sv_min_activity_completed=function(){R(Bw)};bE.prototype.ext_sv_panel_cancel=function(){R(zw,{source:"truex_creative_cancel"})};bE.prototype.ext_event=function(b){var c;if("string"===typeof b||b instanceof String)try{c=JSON.parse(""+b)}catch(d){trackJs.track(d);k.error('error parsing json from sendEvent: "'+b+'"',d);return}else if("object"===typeof b)c=b;else{k.error('invalid sendEvent parameter: "'+b+'"');return}z.b(Zk,c)};
bE.prototype.ext_log_tap=function(b,c){var d={station_id:this.model.get("currentStation").e(),event:b,metadata:c};s("tap_ad_template",d,this.model.get("currentUser"))};
bE.prototype.ext_vx=function(b,c){var d=b.offerName;if(d){var e=b.rewardProperties;if(e){var h=e.lineId,l=e.creativeId;if((null==h||null==l)&&this.Ag){var p=this.Ag.split(":");2==p.length&&(h=p[0],l=p[1])}z.c(il,r(this,function(){setTimeout(function(){try{c&&"function"==typeof c&&c({success:"false"})}catch(b){trackJs.track(b)}},1);z.pa(this,il);z.pa(this,jl)}));z.c(jl,r(this,function(){setTimeout(function(){try{c&&"function"==typeof c&&c({success:"true"})}catch(b){trackJs.track(b)}},1);z.pa(this,
il);z.pa(this,jl)}));z.b(hl,{offerName:d,brandName:e.brandName,lineId:h,creativeId:l,offerButtonLabel:e.offerButtonLabel,offerButtonUrl:e.offerButtonUrl,leadInBannerUrl:e.leadInBannerUrl,leadInAudioUrl:e.leadInAudioUrl,signature:e.signature,vxOffer:e.vxOffer})}else c&&"function"==typeof c&&c({success:"false",reason:"Reward properties not specified."})}else c&&"function"==typeof c&&c({success:"false",reason:"Offer name not specified."})};
bE.prototype.ext_delay_ad_refresh=function(b){z.b(ol,{delaySeconds:b,currentLineIdCreativeId:this.Ag})};function fE(b){this.model=b;this.model.bind("change:capped",r(this,this.Yi));this.model.bind("change:expired",r(this,this.Yi));this.model.bind("change:inactive",r(this,this.hJ));this.model.bind("change:forceRegistration",r(this,this.Yi));this.model.bind("change:resettingPassword",r(this,this.Yi));this.model.bind("change:siteLocked",r(this,this.Iq));z.c(Ze,r(this,this.EJ));this.aB=!0}fE.prototype.hJ=function(){z.b(Ik,!this.model.get("inactive"));this.Yi()};
fE.prototype.Yi=function(){var b=this.model.get("capped")||this.model.get("expired")||this.model.get("inactive")||this.model.get("forceRegistration")||this.model.get("resettingPassword");this.model.set({siteLocked:b})};fE.prototype.Iq=function(){this.model.get("siteLocked")||!this.UL&&!this.aB||setTimeout(function(){z.b(ei)},500);this.model.get("siteLocked")&&(this.UL=this.model.get("musicPlaying")||this.model.get("resettingPassword"),setTimeout(function(){z.b(gi)},1E3))};
fE.prototype.EJ=function(b){var c=!1;if(this.model.get("idle")&&b&&!1==b.userInitiated){c=!0;this.aB=!1;this.model.set({inactive:!0});z.b(gi);V("/inactive",!0,!0);this.model.set({halt_id:ud()});b=this.model.get("currentUser");var d=b.u;s("listener_idle",{active:"false",halt_id:ud(),listener_state:d,vendor_id:u,device_id:we},b)}z.b($e,{siteLocked:c})};function gE(b){this.model=b;this.Ec=null;this.sj=new rA({model:this.model});W("/account/startTrial",!0,!1,!1,r(this,this.rz));S(px,r(this,this.rz));z.c(ag,r(this,this.Wr));z.c(He,r(this,this.$a));W("/"+IC,!1,!1,!1,r(this,this.yN));S(Uv,r(this,this.dN))}f=gE.prototype;f.debug=function(b){k.debug("ComplimentaryTrialController : ",arguments)};
f.rz=function(b){this.debug("Start trial request",b);var c=(b.path?b.path.split("/"):null)[3];this.debug("Complimentary trial for ",c);c&&(setTimeout(r(this,function(){C.rx(c,!0,r(this,function(b){this.Ec=b}),r(this,function(){}))}),1),z.b(Wj,{sponsor:c,referrer:this.referrer}))};f.$a=function(b){this.debug("Listener data : ",b);if(b){b=b.pl;var c=this.model.get("expired");b&&!0!==c&&hE(this,b,!1)}};f.Wr=function(b){if(b=b.sponsor)R(Lu),hE(this,b,!0)};
function hE(b,c,d){0==c.toLowerCase().indexOf("pandora")?(b.debug("Looks like a pandora trial",c),iE(b,{},d)):b.Ec&&b.Ec.sponsor==c?iE(b,b.Ec,d):C.rx(c,d,r(b,function(b){iE(this,b,d)}),r(b,function(){}))}
function iE(b,c,d){function e(b){void 0==b.initialSkin&&R(Kv)}b.Ec=c;b.debug("Got trial data",b.Ec);var h=1;d&&(b.Ec.prerollValue?(z.b(bl,{key:"advertiser",value:b.Ec.prerollValue,isUserInitiated:!1,callback:function(){e(c)}}),h=200):e(c));var l=c.skinClickThroughUrl;l?(b.debug("Loading click through url "+l),b.sj.render(l)):b.sj.jb();z.b(bg,b.Ec);l=b.model.get("currentUser");!d&&(null!=b.model.get("currentSkinPath")||l&&l.Ci)||setTimeout(function(){R(Tv,"/skins/"+c.initialSkin)},h)}
f.dN=function(b){b&&(!0===b.sponsored?this.sj.lc():this.sj.jb())};f.yN=function(){C.$O();this.sj.jb();z.b(cg,this.Ec)};function jE(b){this.model=b;this.Ec=null;this.KQ=new rB({model:this.model});this.hash=W("/trial",!0,!0,!1,r(this,this.Vr))}jE.prototype.Vr=function(b){this.debug("Start trial request",b);b=(b.path?b.path.split("/"):null)[2];this.debug("Sponsored trial for ",b);b&&(this.KQ.render(b),this.hash.update(b))};jE.prototype.debug=function(b){k.debug("SponsoredTrialController : ",arguments)};function kE(b){this.model=b;this.view=new DB({model:this.model});this.FL=this.ac=null;z.c(ml,r(this,this.cK));z.c(nl,r(this,this.bK));this.model.bind("change:currentStation",r(this,this.Jq));this.model.bind("change:currentTrack",r(this,this.Lq))}f=kE.prototype;f.cK=function(b){b instanceof $p?this.ut(b):k.info("Can't start sponsored listening mode with an invalid reward:",b)};f.bK=function(){lE(this)};
f.Jq=function(){if(null!=this.ac){var b=this.model.get("currentUser"),c=this.model.get("currentStation");!b.J()||c&&C.za(c)?this.view.Wq():this.view.qA()}};f.Lq=function(){null!=this.ac&&this.model.get("audioAdPlaying")&&z.b(hi,{appSkip:!0})};
f.ut=function(b){this.model.get("audioAdPlaying")&&z.b(hi,{appSkip:!0});this.ac&&(clearInterval(this.ac),this.ac=null);this.FL=b.Xg();var c=b.VD,d=b.WD,e=this.model.get("currentUser"),h=this.model.get("currentStation"),l=h&&C.za(h);this.view.ut(b.XC,b.hD,b.gD,b.JD,b.KD,aq(b),c/d,!e.J()||!h||l);this.ed("vx_status_bar_shown",b,e);var p=Math.max(1,d/360),h=1E3*p,q=c;this.ac=setInterval(r(this,function(){q-=p;this.view.cR(q,d);0>=q&&(lE(this),clearInterval(this.ac),this.ac=null,z.b(nl),this.ed("value_exchange_end",
b,e))}),h)};function lE(b){null!=b.ac&&(b.view.BF(),null!=b.ac&&(clearInterval(b.ac),b.ac=null))}f.ed=function(b,c,d){s("value_exchange",{action:b,line_id:c.Yh,creative_id:c.Ic,offer_name:c.Nk,truex_instance_id:c.To,vendor_id:u,device_id:we},d)};function mE(b){this.model=b;z.c(tk,r(this,this.vj));z.c(pk,r(this,this.vj));z.c(Yh,r(this,this.iM));z.c(Wh,r(this,this.hM));this.hash=W("/one/paypal/trial",!0,!0,!1,r(this,this.Vr))}f=mE.prototype;f.Vr=function(){this.dg=qp("token");if(this.or||me(this.dg))setTimeout(function(){V("/",!1,!1)},100);else{var b=this.model.get("currentUser");b&&(this.Oj=b.u,b.u="COMPLIMENTARY");this.or=!0;z.b(sk,[this.dg,kp()])}};f.vj=function(){var b=mb();(new X({message:b})).render();z.b(Dg);R(Lu)};f.iM=function(){this.Bm()};
f.hM=function(){this.Bm()};f.Bm=function(){var b=this.model.get("currentUser");b&&this.Oj&&(b.u=this.Oj);R(Lu)};function nE(b){this.model=b;z.c(ai,r(this,this.qM));this.hash=W("/one/paypal/gift",!0,!0,!1,r(this,this.vM))}nE.prototype.vM=function(){var b=qp("token"),c=qp("code");if(this.or||me(b))setTimeout(function(){V("/",!1,!1)},100);else{var d=this.model.get("currentUser");d&&(this.Oj=d.u,d.u="COMPLIMENTARY");this.or=!0;z.b(Ck,[b,c])}};nE.prototype.qM=function(){(new X({message:oc()})).render();var b=this.model.get("currentUser");b&&this.Oj&&(b.u=this.Oj);R(Lu)};function oE(b){this.model=b;S(dv,r(this,this.bG));S(Yu,r(this,this.sE));S(Zu,r(this,this.XF));S($u,r(this,this.AO));S(wv,r(this,this.VF));S(xv,r(this,this.aG))}f=oE.prototype;f.bG=function(b){var c=b.musicID,d=b.stationID;b=b.isPositive;null!=c&&0!=c.length&&null!=d&&null!=b&&this.execute({method:"bookmark.deleteFeedback",isPositive:b,musicID:c,stationID:d},r(this,function(){R(kw,null)}),"Could not delete feedbacks",!0)};
f.sE=function(b){null!=b.Ro&&""!=b.Ro&&this.execute({method:"comment.addComment",commentMode:"add",commentTargetID:b.Lv,commentType:b.C(),commentText:b.Ro,isprivate:b.BD},r(this,function(c){c=c.result;c.targetId=b.Lv;var d=this.model.get("currentUser");null!=d&&(c.webName=d.Y,d.Fa&&(b.fbid=d.Fa),c.clientCommentType=b.C());R(hw,c)}),"Could not add comment",!0)};f.XF=function(b){this.execute({method:"comment.deleteComment",commentID:b},r(this,function(){}),"Could not delete comment",!0)};
f.AO=function(b){this.execute({method:"comment.reportComment",commentID:b},r(this,function(){var c=$(".notes .comment_box[data-noteid="+b+"]");c.addClass("reported_comment");c.wrapInner('<div class="reported_comment_content"></div>');c.append('<div class="reported_comment_overlay"><div class="reported_comment_message"><div class="thanks">Thank you</div> <div>This comment has been marked as inappropriate.</div></div></div>');setTimeout(function(){c.slideUp()},2E3)}),"Could not report comment",!0)};
f.VF=function(b){var c=b.section;this.execute({method:"bookmark.deleteArtistBookmark",bookmarkID:b.bookmarkId},r(this,function(){R(pw,c)}),"Could not delete bookmark",!0)};f.aG=function(b){var c=b.section;this.execute({method:"bookmark.deleteSongBookmark",bookmarkID:b.bookmarkId},r(this,function(){R(qw,c)}),"Could not delete bookmark",!0)};
f.execute=function(b,c,d,e){z.b(dg,b);var h=this.model.get("currentUser");return null!=h?(b.at=h.jg,$.ajax({url:"/services/ajax/",dataType:"json",traditional:!0,data:b,success:r(this,function(h){z.b(eg,b);"ok"==h.stat?c(h):1013==h.code?z.b(Sg):1010<=h.code&&1012>=h.code?z.b(Jh):1020==h.code?z.b(Kh):pE("Bad response: "+h.stat,r(this,function(){this.execute(b,c,d,e)}),function(){k.error(d)})}),error:function(h,p,q){pE(q,r(this,function(){this.execute(b,c,d,e)}),function(){k.error(d)})}})):null};
function NA(b,c,d,e){z.b(dg,b);var h=(new Date).getTime();oE.latestCallId=h;$.post(b,c).success(function(l,p){z.b(eg,b);if(oE.latestCallId!=h)k.info("cancelling ajax call: "+b+" ["+h+"]");else if("success"==p)d(l,p);else{var q="Bad status="+p;pE(q,function(){NA(b,c,d,e)},function(){qE(p,q,d,e)})}}).error(function(l,p,q){if(oE.latestCallId!=h)k.info("cancelling ajax call: "+b+" ["+h+"]"),z.b(eg,b);else{var t=q.replace(/\+/g," ");pE(t,function(){NA(b,c,d,e)},function(){qE(p,t,d,e)})}})}
function eA(b,c,d,e,h){z.b(dg,b);var l=(new Date).getTime();oE.latestCallId=l;$.get(b,c).success(function(p,q){z.b(eg,b);if(oE.latestCallId!=l)k.info("cancelling ajax call: "+b+" ["+l+"]");else if("success"==q)d(p,q);else{var t="Bad status="+q;h?(z.b(eg,b),qE(q,t,d,e)):pE(t,function(){eA(b,c,d,e)},function(){qE(q,t,d,e)})}}).error(function(p,q,t){var y=String(t).replace(/\+/g," ");h?(z.b(eg,b),qE(q,y,d,e)):pE(y,function(){oE.latestCallId!=l?(k.info("cancelling ajax call: "+b+" ["+l+"]"),z.b(eg,b)):
eA(b,c,d,e)},function(){qE(q,y,d,e)})})}function qE(b,c,d,e){e?e(b,c):d('<div class="ajax_error_message">'+c+"</div>","success")}function pE(b,c,d){z.b(eg,"error handler");b=new X({message:Rb([b]),persist:!0,retry:!0});b.bind("retry",function(){c()});b.bind("close",function(){d()});b.render()};function rE(b){this.model=b;this.Ab={};S(Nu,r(this,this.Ql));S(Vv,r(this,this.Cq));z.c(He,r(this,this.$a))}
rE.prototype.Ql=function(b){var c=this.Ab[b.o()];if(null!=c)R(Vv,c);else{var d=(c=this.model.get("currentUser"))&&c.Wb,d={url:"/services/ajax/",dataType:"text",context:b.o(),data:{method:"lyrics.getLyrics",trackUid:b.o(),lyricId:d?b.Av:b.Zh,check:d?b.gv:b.lq(),nonExplicit:d},success:this.Tr,error:function(c,d,l){pE(l,r(this,function(){this.Ql(b)}),function(){k.info("error",c,d,l)})}};c&&c.jg&&$.extend(d.data,{at:c.jg});$.ajax(d)}};
rE.prototype.Tr=function(b){b=eval("var tmp = "+b+"; tmp;");"ok"==b.stat&&function(b,d){var e=window.a;window.a=String.fromCharCode;var h=b.x(b.lyrics);R(Vv,new My(h,b.credits,d));window.a=e}(b,this)};rE.prototype.Cq=function(b){this.Ab[b.o()]=b};rE.prototype.$a=function(){this.Ab={}};function sE(b){this.model=b;this.Ab={};S(Ou,r(this,this.bH))}sE.prototype.bH=function(b){var c=this.Ab[b.hf];if(c)R(Wv,c);else{var c=b.Co,d=this.model.get("currentUser");d&&d.Wb&&c.indexOf("explicit=");$.get(b.Co,{},r(this,this.dM))}};sE.prototype.dM=function(b){b=b.artistExplorer||b.composerExplorer;null!=b&&(b=Gy(b),this.Ab[b.hf]=b,R(Wv,b))};Un.Gm=g([G.slice(0,18),G.slice(18,274),G.slice(274,530),G.slice(530,786),G.slice(786,1042)]);function tE(b){this.model=b;z.c(fj,r(this,this.lG))}
tE.prototype.lG=function(b){var c=null,d=!1,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState)if(clearTimeout(c),200!=e.status)z.b(uh,"bad url shortener response status: "+e.status);else if(!d){var b=e.responseText;me(b)||0!=b.indexOf("http")?z.b(uh,"weird url shortener response text: "+b):z.b(Gg,b)}};var c=setTimeout(function(){z.b(uh,"bitly call has timed out");d=!0},1E4),h=b.songToken,l=b.stationToken,p=b.shareName,q=b.webname;b=b.shareServiceName||null;var t=Kd(),y="//"+
A._data.proxyHost;443!=t&&(y+=":"+t);y+="/short";y=(null!=h?y+"/song":y+"/station")+("?webname="+encodeURIComponent(q));y+="&station="+encodeURIComponent(l);null!=p&&""!=p&&(y+="&shareName="+encodeURIComponent(p));y+="&song="+encodeURIComponent(h);b&&(y+="&site="+encodeURIComponent(b));k.info("bit.ly request: "+y);e.open("GET",y,!0);e.send(null)};function uE(b){this.model=b;z.c(He,r(this,this.$c));z.c(nj,r(this,this.Tj));z.c(oj,r(this,this.Tj));z.c(Gg,r(this,this.py));z.c(uh,r(this,this.II));z.c(Eg,r(this,this.vK));z.c(Fg,r(this,this.wK));z.c(sh,r(this,this.FI));S(vv,r(this,this.xK))}f=uE.prototype;f.$c=function(b){this.model.set({twitterAuthenticated:null!=b&&!me(b.$d)})};f.xK=function(){this.Io=!0;vE(this)};
f.Tj=function(b){b.doTwitter&&!this.LQ&&(this.gq=0,this.Pk=b,b.shortenedUrl?this.py(b.shortenedUrl):z.b(fj,{songToken:b.isSongShare?b.songDetailToken:null,stationToken:b.stationToken,webname:b.webname,shareServiceName:"twitter",shareName:b.shareName}))};f.py=function(b){this.YD=b;b=this.model.get("currentUser");me(b.$d)?vE(this):wE(this)};f.II=function(b){z.b(rh,"failed to shorten url. "+b)};
function vE(b){b.gq++;if(3<b.gq)z.b(rh,"unable to authenticate with twitter.  failed authentication "+b.gq+" times"),b.LQ=!0;else{var c=b.model.get("currentUser"),c=xE(b).sign({path:"https://api.twitter.com/oauth/request_token",parameters:{oauth_callback:kn()+"twitter/oauthAuthorizationCallback.jsp"},signatures:{consumer_key:c.wn,shared_secret:c.xn}}),d=window.open("about:blank","oauth");yE(b,"/oauth/"+c.signed_url.substring(c.signed_url.indexOf("request_token")),function(b){null==b||0!=b.indexOf("oauth_token")?
z.b(rh,"unable to authenticate with twitter"):null==d?z.b(rh,"twitter authentication blocked by popup blocker"):(d.location.href="https://api.twitter.com/oauth/authorize?"+b,d.focus())})}}
function yE(b,c,d,e){var h=!1,l=setTimeout(function(){h=!0;z.b(rh,"twitter communication timed out")},1E4);$.ajax({type:"POST",url:"/twitter"+c,data:e?e:null,success:r(b,function(b){clearTimeout(l);h||d(b)}),error:r(b,function(b){clearTimeout(l);z.b(ij,{});z.b(rh,"twitter responded with error: "+b)}),dataType:"html"})}
f.vK=function(b){var c=b.token;b=b.verifier;if(me(c))z.b(rh,"Unable to authenticate with twitter - twitter failed to return a request token");else if(me(b))z.b(rh,"Unable to authenticate with twitter - twitter failed to return a verifier");else{var d=this.model.get("currentUser"),c=xE(this).sign({path:"https://api.twitter.com/oauth/access_token",parameters:{oauth_token:c},signatures:{consumer_key:d.wn,shared_secret:d.xn}});yE(this,"/oauth/"+c.signed_url.substring(c.signed_url.indexOf("access_token")),
function(b){if(me(b))z.b(rh,"Unable to authenticate with twitter - unable to fetch access tokens ["+b+"]");else{var c=b.split("&");b=(""+c[0]).split("=")[1];c=(""+c[1]).split("=")[1];me(b)||me(c)?(z.b(ij,{}),z.b(rh,"Unable to authenticate with twitter - authorization denied")):z.b(ij,{twitterShareUserKey:b,twitterShareUserSecret:c})}},{oauth_verifier:b})}};
function wE(b){var c=b.model.get("currentUser"),d=xE(b),e=0==b.Pk.userMessage.length?b.Pk.defaultTwitterMessage:b.Pk.userMessage,h=" "+b.YD+(e.match(/#pandora/i)?"":" #Pandora");140<(e+h).length&&(h="..."+h,e=e.substr(0,140-h.length));c=d.sign({path:"https://api.twitter.com/1.1/statuses/update.json",parameters:{status:e+h},signatures:{consumer_key:c.wn,shared_secret:c.xn,oauth_token:c.$d,oauth_secret:c.Rh}});yE(b,"/statuses/"+c.signed_url.substring(c.signed_url.indexOf("update")),r(b,function(b){me(b)?
z.b(rh,"Unable to post to twitter - twitter failed to respond"):(b=eval("("+b+")"),null!=b.error?-1!=b.error.toLowerCase().indexOf("authenticate")?(z.b(ij,{}),vE(this)):z.b(rh,"Unable to post to twitter: "+b.error):z.b(Hg,{twitter:!0,twitterHandle:b.user&&b.user.screen_name?b.user.screen_name:""}))}))}
f.wK=function(b){var c=this.model.get("currentUser");null==b?(c.$d=null,c.Rh=null,this.Io=!1,this.model.set({twitterAuthenticated:!1})):(c.$d=b.twitterShareUserKey,c.Rh=b.twitterShareUserSecret,this.Io?(this.Io=!1,this.model.set({twitterAuthenticated:!0})):null==this.Pk?z.b(rh,"Unable to post to twitter - no tweet text"):me(b.twitterShareUserKey)?z.b(rh,"Unable to post to twitter"):(this.model.set({twitterAuthenticated:!0}),wE(this)))};
f.FI=function(b){z.b(rh,"Unable to save twitter credentials: "+b)};function xE(b){b=b.model.get("currentUser");b=new OAuthSimple(b.wn,b.xn);b.setAction("POST");return b}window.onOAuthCallBack=function(b,c){z.b(Eg,{token:b,verifier:c})};function zE(b){this.model=b;AE=A._data.facebookConnectPermissions.split(",");this.model.bind("change:currentUser",r(this,this.Pm));this.model.bind("change:facebookAuthenticated",r(this,this.rp));z.c(He,r(this,this.$c));z.c(pj,r(this,this.Gw));z.c(nj,r(this,this.Us));z.c(oj,r(this,this.Ts));z.c(rj,r(this,this.FG));z.c(sj,r(this,this.fI));z.c(Bg,r(this,this.disconnect));z.c(Ag,r(this,this.SI));z.c(mg,r(this,this.FJ));z.c(Cg,r(this,this.$K));S(sv,r(this,this.GG));this.zw()}
var BE,CE,DE,EE,AE=[],FE=["publish_actions"],GE=[];function HE(b){k.info("FacebookService.authResponseChange",b);BE=b;CE||(CE=!0,FB.api("/me/permissions",function(b){k.info("FacebookService.authResponseChange got permissions",b);DE=b;CE=!1}))}window.fbAsyncInit=function(){FB.Event.subscribe("auth.authResponseChange",HE);FB.Event.subscribe("auth.statusChange",HE);FB.init({appId:Wo(),version:"v2.2",status:!0,cookie:!0,xfbml:!1,channelUrl:mn()+"fb_channel.html"});EE=!0;if(GE)for(;0<GE.length;)GE.shift()()};
f=zE.prototype;f.$K=function(b){var c=this.model.get("currentUser");null!=c&&(Yn(c,b),this.Pm(),this.$c())};
f.$c=function(){var b=this.model.get("currentUser");k.info("FacebookService.initUser: ",b);if(null!=b&&!b.p())if(EE)if(b.nx)k.info("initUser: server needs access token re-auth"),b.nx=!1,IE(this,r(this,function(c){k.info("initUser: re-auth - logged in and connected");var d=c.authResponse.accessToken,l=c.authResponse.userID,p=b.Fa;if(null==p||p==l)k.info("initUser: user matches connected, updating short-lived access token"),lo(b,l),mo(b,d,c.authResponse.expiresIn);this.$c()}),r(this,function(){k.info("initUser: re-auth - not logged in and/or not connected");
this.$c()}));else{var c=b.Qc;if(!c&&null==b.Fa){var d=this.model.get("facebookLoginInfo");d&&(c=d.access_token,mo(b,c,d.expires_in),lo(b,d.id),oo(b,d.name),ko(b,!1))}c&&0<c.length?(k.info("User already has an access token, validate that it's good: ",c),FB.api("/me/permissions",{access_token:c},r(this,function(c){k.info("initUser permissions response: ",c);(c=c.data)&&0<c.length?(k.info("Access token is valid"),JE(this,c[0])):(k.info("Access token is not valid"),mo(b,null),KE(this))}))):KE(this)}else k.info("FacebookService.initialized == false, setting FacebookService.postInitCallback"),
GE.push(r(this,this.$c))};
function KE(b){k.info("FacebookService.initUserNoAccessToken");IE(b,r(b,function(b){k.info("initUserNoAccessToken: Logged in and connected");var d=this.model.get("currentUser"),e=b.authResponse.accessToken;d.Fa!=b.authResponse.userID||d.Pg?(k.info("initUserNoAccessToken: different user!"),ko(d,!0),this.model.set({facebookAuthenticated:!1})):(k.info("initUserNoAccessToken: Same user, updating access token"),mo(d,e,b.authResponse.expiresIn));FB.api("/me/permissions",r(this,function(b){k.info("initUserNoAccessToken permissions response: ",
b);(b=b.data)&&0<b.length&&JE(this,b[0])}))}),r(b,function(){k.info("initUserNoAccessToken: Not logged in and/or not connected");this.model.set({facebookAuthenticated:!1});this.rp()}))}function JE(b,c){var d=b.model.get("currentUser");null!=d&&(no(d,c),d.Pg?(k.info("initUserPermissionsCallback: isFbDisconnected = true"),b.model.set({facebookAuthenticated:!1}),b.rp()):(k.info("initUserPermissionsCallback: isFbDisconnected = false"),LE(b)))}
function IE(b,c,d){EE&&FB.getLoginStatus(r(b,function(b){b.authResponse&&"connected"==b.status?c&&c(b):d&&d(b)}))}
function LE(b,c){var d=b.model.get("currentUser");if(null!=d){var e=r(b,function(){this.model.set({facebookAuthenticated:!d.Pg});c&&c()}),h=r(b,function(){k.info("saveFbInfo: doesFacebookNeedSave() = ",d.Id);if(d.Id){d.Id=!1;var b={id:d.Fa,name:d.mc||"",accessToken:d.Qc,accessTokenExpiration:d.AG||"",callback:e};k.info("saveFbInfo: saving",b);z.b(Yj,b)}else e()}),l=d.mc;null==l||""==l?(k.info("Don't have a full name for the listener, get it from Facebook"),b.mq(r(b,function(b){b&&oo(d,b);h()}))):
(k.info("We already have their Facebook name"),h())}}f.mq=function(b){var c=this.model.get("currentUser");if(null!=c&&null!=c.Fa){var d={fields:"name"};c.Qc&&(d.access_token=c.Qc);FB.api("/"+c.Fa,d,function(c){b(c.name)})}else b(null)};
function ME(b,c,d,e){k.info("doAction");var h=b.model.get("currentUser");if(null!=h)if(h.p())R(Dv,{onSuccessCallback:r(b,function(){ME(this,c,d,e)})});else if(null!=h.Fa&&NE(b,c))k.info("doAction: User already has permissions, execute callback immediately"),ko(h,!1),LE(b,d);else{k.info("doAction: User does not have permissions yet");if(b.model.get("facebookAuthenticated"))k.info("doAction: Already connected, we just need to ask for extra permissions");else if(k.info("doAction: Not connected in the Pandora backend, possibly still connected in Facebook API"),
EE&&BE&&BE.authResponse&&"connected"==BE.status){k.info("doAction: Logged in and connected in Facebook API, using cached permissions",DE);lo(h,BE.authResponse.userID);mo(h,BE.authResponse.accessToken,BE.authResponse.expiresIn);var l=DE?DE.data:null;if(l&&0<l.length&&(no(h,l[0]),NE(b,c))){ko(h,!1);LE(b,d);return}}else k.info("doAction: Not logged in and/or not connected in Facebook API");b.login(d,e)}}
function NE(b,c){k.info("hasRequiredPermissions: requiredPermissions=",c);var d=b.model.get("currentUser");if(null!=d&&(d=d.Qg,k.info("hasRequiredPermissions: fbPermissions = ",d),null!=d)){for(var e=0;e<c.length;e++){var h=c[e];k.info("hasRequiredPermissions: checking for ",h);if(!d[h])return k.info("hasRequiredPermissions: don't have permission, returning false",h),!1}k.info("hasRequiredPermissions: has ALL permissions, returning true");return!0}k.info("hasRequiredPermissions: returning false");
return!1}
f.login=function(b,c){k.info("FacebookService.login");var d=this.model.get("currentUser");null!=d&&FB.login(r(this,function(e){k.info("FacebookService.login returned: ",e);if("connected"==e.status){var h=e.authResponse;FB.api("/me/permissions",r(this,function(e){k.info("FacebookService.login permissions response: ",e);if((e=e.data)&&0<e.length){var p={};if(e&&e.length)for(var q=0;q<e.length;q++){var t=e[q];"granted"===t.status&&(p[t.permission]=1)}no(d,p);if(NE(this,AE)){k.info("FacebookService.login user has required permissions, saving");lo(d,
h.userID);mo(d,h.accessToken,h.expiresIn);ko(d,!1);LE(this,b);return}}k.info("FacebookService.login user does NOT have required permissions, fail");lo(d,null);z.b(yg);c()}))}else lo(d,null),z.b(yg),this.model.set({facebookAuthenticated:!1}),c()}),{scope:AE.join(",")})};f.Gw=function(b){ME(this,AE,r(this,function(){k.info("FacebookService.connect: success");b&&b(!0)}),r(this,function(){k.info("FacebookService.connect: failure");b&&b(!1)}))};
f.FG=function(){if(this.model.get("facebookAuthenticated")){var b=this.model.get("currentUser");qo(b,[]);k.info("FacebookService.fetchFriends: calling /friends");FB.api("/me/friends",{access_token:b.Qc},function(c){k.info("friends callback: ",c);qo(b,c.data);z.b(Cf,c.data)})}};f.GG=function(b){var c=b.fbCallback;b="SELECT id,name FROM profile WHERE id in ("+b.fbids.join(",")+")";k.info("FacebookService.fetchNames: executing FQL: ",b);EE&&FB.api({method:"fql.query",query:b},c)};
f.disconnect=function(){var b=this.model.get("currentUser");b&&lo(b,null);this.model.set({facebookAuthenticated:!1})};
f.Ts=function(b){if(b.doFacebook){var c=this.model.get("currentUser"),d=b.artUrl,e;e=-1!=d.indexOf("no_album_art.png")?mn()+"static/images/share_facebook/generic_cover_art_preview.gif":d;e=0!=e.indexOf("http://")?"https://www.pandora.com/art/"+e:e;d=-1==d.indexOf("no_album_art")?d:mn()+d;c=Xo()+"static/fb-share.swf?Song="+encodeURIComponent(b.songName)+"&Artist="+encodeURIComponent(b.artistName)+"&Station="+encodeURIComponent(b.stationName||"")+"&AlbumArt="+encodeURIComponent(d)+"&SampleTrack="+encodeURIComponent(Xo()+
"favorites/getSample.jsp?token="+b.songToken+"&allowExplicit="+!c.Wb)+"&StationLink="+encodeURIComponent(b.stationLandingUrl||b.landingUrl);(d=b.facebookCaption)||(d=" by "+b.artistName);var h=b.facebookDescription;h||(h=" on "+b.albumName);this.Tj(b.userMessage,b.songName,d,h,b.directUrl,b.landingUrl,e,c)}};
f.Us=function(b){if(b.doFacebook){var c=b.stationName,d=b.facebookDescription,e=b.artUrl;-1<c.indexOf("Thumbprint Radio")&&(c="Check out "+c+" on Pandora",d="Inspired by thumbs across all of my stations.",e=b.fbShareArt);this.Tj(b.userMessage,c,"Listen at Pandora",d,b.directUrl,b.landingUrl,e,null)}};
f.Tj=function(b,c,d,e,h,l,p,q){var t={message:b,name:c,caption:d,description:e,actions:[{name:"Listen at Pandora",link:h}],link:l,picture:p,source:q};b=this.model.get("currentUser");null!=b&&null!=b.Qc&&(t.access_token=b.Qc);ME(this,FE,r(this,function(){k.info("FacebookService.share: success");FB.api("/me/feed","post",t,r(this,function(b){k.info("FacebookService.share: post response = ",b);!b||b.error?"OAuthException"==b.error.type?(z.b(rh,"Could not share to Facebook, you may need to try again."),
lo(this.model.get("currentUser"),null),this.$c()):z.b(rh,null!=b.error?"facebook responded with an error: "+b.error.message:"unknown error posting to facebook"):z.b(Hg,{facebook:!0})}))}),r(this,function(){k.info("FacebookService.share: failure")}))};
f.fI=function(){var b=this.model.get("currentUser");b&&!b.kh?ME(this,FE,r(this,function(){var c=b.Og||b.Ng||b.Mg;z.b(Ai,{autoShareEnabled:!0,autoShareTrackPlay:c?b.Og:!0,autoShareLikes:c?b.Ng:!0,autoShareFollows:c?b.Mg:!0,userInitiated:!0})}),r(this,function(){})):(new X({message:"You cannot enable auto-share when your profile is set to 'private'"})).render()};
f.SI=function(b){var c=this.model.get("currentUser");c.ox=b.facebookSettingChecksum;c.Fl=b.autoShareEnabled;c.Og=b.autoShareTrackPlay;c.Ng=b.autoShareLikes;c.Mg=b.autoShareFollows;this.Pm()};f.rp=function(){if(!this.model.get("facebookAuthenticated")){um(gm,!1);var b=this.model.get("currentUser");b.Fl=!1;b.Og=!1;b.Ng=!1;b.Mg=!1;this.Pm()}};
f.Pm=function(){var b=this.model.get("currentUser"),c=this.model.get("autoShare"),b=b&&b.Fl&&!b.kh;this.model.set({autoShare:b});k.info("FacebookService.refreshAutoShareModel",c,b,!0===om(gm));!1===c&&b&&!0!==om(gm)&&(new zA,um(gm,!0))};
f.zw=function(){var b=$.cookie("_fbat");k.info("checkAccessTokenCookie: fbat=",b);if(b)if(EE){$.cookie("_fbat",null);var c=/access_token=([^&]+)/,c=b.match(c);k.info("checkAccessTokenCookie: match=",c);if(c&&1<c.length){var d=c[1],e=null,c=/expires_in=([^&]+)/;(c=b.match(c))&&1<c.length&&(e=c[1],k.info("expires_in: ",e));FB.api("/me",{access_token:d},r(this,function(b){k.info("checkAccessTokenCookie: response=",b);null==b.error&&null!=b.id&&(b.access_token=d,b.expires_in=e,this.model.set({facebookLoginInfo:b}))}))}}else GE.unshift(r(this,
this.zw))};
f.FJ=function(){k.info("FacebookService.handleRegistrationComplete");var b=this.model.get("currentUser"),c=A._data.fb_ref;if(c&&0<c.length){var d={listener_id:b.s,social_network_id:"facebook"},e=c.split("_");3<=e.length&&(d.shared_listener_token=e[2]);0==c.indexOf("trackplay__")&&4==e.length&&(d.shared_station_id=e[3]);s("social_autoshare_new_registration",d,b)}(c=this.model.get("facebookLoginInfo"))&&b&&(lo(b,c.id),mo(b,c.access_token,c.expires_in),oo(b,c.name),k.info("FacebookService.handleRegistrationComplete: attempting to auto-connect"),this.Gw())};function OE(b){this.model=b;z.c(Ee,r(this,this.$l));z.c(Bi,r(this,this.$l))}function BA(){var b=1==parseInt($.cookie("_sl_ssc"),10);ze("_sl_ssc");return b}OE.prototype.$l=function(){var b=$.cookie("_sl_toast"),c=$.cookie("_sl_share_imp"),d=$.cookie("_sl_path");ze("_sl_toast");ze("_sl_share_imp");ze("_sl_path");(A._data.shareImp||"true"==c)&&this.model.set({shareFirstImp:!0});le(b)&&(new X({message:b})).render();le(d)&&this.model.set({smartLaunchPath:d})};function PE(b){this.model=b;this.Ab={};S(Hv,r(this,this.nq));z.c(Hf,r(this,this.YI));z.c(Df,r(this,this.lJ));z.c(Ff,r(this,this.bm));z.c(Ef,r(this,this.bm));z.c(He,r(this,this.$a))}f=PE.prototype;f.nq=function(b){var c=this.Ab[b.ff+":"+b.Kc];null!=c?R(Xv,c):z.b(wj,b)};f.YI=function(b){this.Ab[b.ff+":"+b.Kc]=b;R(Xv,b)};f.lJ=function(b){b=Do(b);this.Ab[b.ff+":"+b.Kc]=b;R(Xv,b)};f.bm=function(b){b=Do(b);b.df=null;this.Ab[b.ff+":"+b.Kc]=b;R(Xv,b)};f.$a=function(){this.Ab={}};function yz(){QE()}var zz={};function QE(){$.ajax({url:"/static/videohub/manifest.xml?cb="+je(),dataType:"xml",success:function(b){zz={};$.each($("video_page",b),function(b,d){var e=new $y(d),h=e.UC;null!=h&&""!=h&&(zz[h]=e)});setTimeout(QE,9E5)},error:function(b,c){k.error("Could not load videohub manifest",c);setTimeout(QE,9E5)}})};function RE(b){this.model=b;z.c(Re,r(this,this.eh));z.c(ti,r(this,this.iJ));W("/genre_hint",!0,!0,!1,r(this,this.XI));this.Hb=""}RE.prototype.eh=function(b){var c=b.Gf();if(null!=c&&""!=this.Hb){for(var d=0;d<c.length;d++)if(null!=c[d]&&c[d].toLowerCase()==this.Hb.toLowerCase()){s("create_station_from_hint",{hint_genre:this.Hb,station_id:b.e()},this.model.get("currentUser"));break}this.Hb=""}};RE.prototype.iJ=function(){this.Hb=""};
RE.prototype.XI=function(b){de(this,function(){var c=b.pathNames;this.Hb=c[1];V("/music/"+c[1],!0,!0);s("hint_genre_clicked",{hint_genre:this.Hb},this.model.get("currentUser"))},100)};function SE(b){this.model=b;z.c(We,r(this,this.rK));z.c(Xe,r(this,this.sK));z.c(Ye,r(this,this.qK));z.c(Rh,r(this,this.tK))}SE.prototype.rK=function(b){this.model.get("currentUser")&&zo(this.model.get("currentUser"))&&s("track_end",{reason:b.reason,elapsed_seconds:b.elapsed_seconds,remaining_seconds:b.remaining_seconds,audio_token:b.audio_token,vendor_id:u,device_code:we,device_id:cn()},this.model.get("currentUser"))};
SE.prototype.sK=function(b){this.model.get("currentUser")&&zo(this.model.get("currentUser"))&&s("track_fetch",{is_prefetch:b.is_prefetch,audio_token:b.audio_token,vendor_id:u,device_code:we,device_id:cn()},this.model.get("currentUser"))};SE.prototype.qK=function(b){this.model.get("currentUser")&&zo(this.model.get("currentUser"))&&s("track_buffered",{audio_token:b.audio_token,vendor_id:u,device_code:we,device_id:cn()},this.model.get("currentUser"))};
SE.prototype.tK=function(b){try{if(!b.url||""==b.url)throw Error("TrackMonitoringService.handleTrackNotPlayed called with a blank audio receipt URL");$.ajax({type:"GET",crossDomain:!0,dataType:"jsonp",url:b.url,success:function(){},error:function(b,c,h){k.info("Error sending audio receipt url: "+c+": "+h)}})}catch(c){trackJs.track(c),k.info("Exception on ajax call for audio receipt url: ",c)}};function TE(b){this.model=b;this.Ab={};S(qx,r(this,this.EH))}TE.prototype.EH=function(b){var c=this.model.get("currentUser");b={url:"/services/ajax/",dataType:"text",data:{method:"commerce.getSalesTax",zipcode:b.Eb(),billing_frequency:b.Ya(),is_business:b.S(),token:b.bE},success:this.KM,error:function(b,c,h){k.info("error",b,c,h);R(rx,0)}};c&&c.jg&&$.extend(b.data,{at:c.jg});$.ajax(b)};TE.prototype.KM=function(b){b=eval("var tmp = "+b+"; tmp;");R(rx,{tax:b.sales_tax,amount:b.amount,token:b.token})};function sn(){this.init();nC(this.data)}var Yz=1E3;
sn.prototype.init=function(){k.info("UserInterface initializing");pn("ui-start");UE(this);this.data=new Backbone.Model({booting:!0,readonly:!1,stationList:new cz,hasStations:!1,currentStation:null,menuStation:null,currentStationViewIsShuffle:!1,stationSortOrderAlpha:!0,stationToAutoPlay:null,safeToAutoPlayStation:!0,currentTrack:null,selectedTrack:null,trackProgress:null,musicPlaying:!1,playerBarEnabled:!0,currentUser:null,autoShare:!1,currentProfileInfo:null,facebookLoginInfo:null,currentContextualTip:null,
currentShuffleType:Ym(),anonymousTrialExpired:!1,facebookAuthenticated:!1,twitterAuthenticated:!1,relatedArtists:null,monthlyListening:"0",idle:!1,keyPressed:null,poisoned:!1,sequenceNumber:1,siteLocked:!1,capped:!1,expired:!1,inactive:!1,forceRegistration:!1,resettingPassword:!1,usernameFromResetToken:null,audioAdPlaying:!1,videoAdPlaying:null,displayingCompanion:!1,shareFirstImp:!1,currentVxReward:null,searchText:"",searchItemSelectedIndex:-1,showingSearchResults:!1,searchResults:new dz,modalPanel:null,
profilePanelType:null,lastLowBandwidthNotification:null,blueBarMessage:null,pageShifting:!1,currentSkinPath:null,smartLaunchPath:null,postLoginPath:null,narrative:null,songNarrative:null,selectedArtist:null,searchDetails:null,searchSuggestions:{similar_artists:[],similar_genres:[],facebook_favorites:[]}});pn("ui-views");this.Ch=new rz({model:this.data});new ez({model:this.data});new fz({model:this.data});new iz({model:this.data});new qz({model:this.data});new sz({model:this.data});this.xA=new Wz(this.data);
this.nQ=new tz({model:this.data,station_menu:this.xA});new wz({model:this.data});new xz({model:this.data});new Az({model:this.data});new Dz({model:this.data});this.VL=new Sz({model:this.data});this.bQ=new Tz({model:this.data});this.wg=new bA({model:this.data});new iB({model:this.data});new IA({model:this.data});new JA({model:this.data});new KA({model:this.data});new jA({model:this.data});new MA({model:this.data});new cA({model:this.data});new dA({model:this.data});new AA({model:this.data});new aA({model:this.data});
new eB({model:this.data});new kA({model:this.data});new sA({model:this.data});new tA({model:this.data});this.pn=new vA({model:this.data});this.wh=new uA({model:this.data});new tB({model:this.data,el:$("body")});new EB({model:this.data});new GB({model:this.data});new HB({model:this.data});new IB({model:this.data});pn("ui-controllers");new CC(this.data);new MC(this.data);new bE(this.data);new fE(this.data);new WC(this.data,this.Ch);new YC(this.data);new ZC(this.data);new bD(this.data);new cD(this.data);
new eD(this.data);new hD(this.data);new kD(this.data);new lD(this.data,this.VL);new mD(this.data,this.bQ);new ED(this.data);new FD(this.data,this.nQ);new LD(this.data,this.wg);new MD(this.data,this.wh);new SD(this.data,this.pn);new nD(this.data);new AD(this.data);new pD(this.data);new BD(this.data);new XD(this.data);new YD(this.data);new ZD(this.data);new $D(this.data);new Z(this.data);new JB(this.data);new gE(this.data);new jE(this.data);new kE(this.data);new mE(this.data);new nE(this.data);new iD(this.data);
pn("ui-services");new oE(this.data);new rE(this.data);new TE(this.data);new zE(this.data);new uE(this.data);new tE(this.data);new sE(this.data);new PE(this.data);new OE(this.data);new RE(this.data);new SE(this.data);var b=this;"US"==kp()&&$("body").addClass("is-us");pn("ui-events");this.data.get("stationList").bind("select",function(c,d){d=!0===d;var l=c.D()&&c.Z(),p=b.data.get("currentStation");null!=p&&p.e()==c.e()||b.data.set({currentStation:c,currentStationViewIsShuffle:l},{userInitiated:d})});
this.data.get("stationList").bind("remove",function(c){var d=b.data.get("currentStation");null!=d&&d.e()==c.e()&&(b.data.set({currentStation:null}),c=b.data.get("stationList").at(0),null!=c&&(c.D()&&c.Z()||z.b(ni,{stationId:c.e()})))});this.data.get("stationList").bind("all",function(){"REGISTERED_PANEL"!=b.data.get("modalPanel")&&z.b(Ug);b.data.set({hasStations:0<this.length})});this.data.bind("change:stationSortOrderAlpha",function(){var c=b.data.get("stationSortOrderAlpha");um(Pl,c);b.data.get("stationList").sort()});
this.data.bind("change:currentUser",r(this,function(){this.data.get("currentUser")?this.data.set({currentShuffleType:Ym()}):this.data.set({searchSuggestions:{similar_artists:[],similar_genres:[],facebook_favorites:[]}})}));z.c(Tg,r(this,function(){this.data.set({booting:!0})}));z.c(Ug,r(this,function(){this.data.set({booting:!1});this.data.set({tooYoung:$.cookie("ty")&&"1"==$.cookie("ty")})}));z.c(Qg,r(this,function(b){var c=this.data.get("stationList");(b=c.Rc(b.stationId))&&wn(b.n)&&(c.remove(b,
{silent:!0}),c.trigger("refresh"))}));z.c(Rg,r(this,function(){var b=this.data.get("stationList");b.each(function(c){c.Ub()&&b.remove(c,{silent:!0})});b.trigger("refresh")}));z.c(Mg,r(this,function(b){var c=this.data.get("stationList");if(0!=c.models.length){var d={silent:!0};c.each(function(b){(b.Db()||b.Ub())&&c.remove(b,{silent:!0})});$.each(b,function(){c._add(this.n,d)});c.trigger("refresh")}}));z.c(Pe,r(this,function(b){var c=this.data.get("currentUser");if(b&&c)for(var d=0;d<b.length;d++){var p=
b[d].n;if(p.D()&&p.Z()){var q=c.mc;if(null==q||0==q.length)q=c.Jl;null!=q&&0<q.length&&p.Ym(q+"'s Shuffle")}}if(Ae()&&b&&0<b.length){var t=this.data.get("stationList"),y={silent:!0};t._reset(y);for(var E=0,d=0;d<b.length;d++)setTimeout(r(this,function(){var c=b[E++];t._add(c.n,y);E>=b.length&&t.trigger("refresh")}),1);setTimeout(r(this,function(){var c=this.data.get("currentStation");null==c||_.any(b,function(b){return b.e()==c.e()})||this.data.set({currentStation:null});z.b(Qe,b)}),1E3)}else{t=this.data.get("stationList");
y={silent:!0};t._reset(y);$.each(b,function(){t._add(this.n,y)});t.trigger("refresh");var I=this.data.get("currentStation");null==I||_.any(b,function(b){return b.e()==I.e()})||this.data.set({currentStation:null})}}));z.c(Re,r(this,function(b){var c=this.data.get("stationList");null!=c.detect(function(c){return c.e()==b.e()})?z.b(ni,{stationId:b.e()}):c.add(b)}));z.c(Ue,r(this,function(b){var c=this.data.get("stationList"),d=b.stationId,c=c.detect(function(b){return b.e()==d});null!=c&&(c.Ym(_.escape(b.stationName)),
c.attributes._stationName=b.stationName,R(mw,c))}));z.c(Xg,r(this,function(b){var c=this.data.get("stationList");b=b.stationList;for(var d=0;d<b.length;d++){var p=b[d],q=c.detect(function(b){return b.e()==p.stationId});null!=q&&void 0!=p.enableArtistAudioMessages&&(q._enableArtistAudioMessages=p.enableArtistAudioMessages)}}));z.c(Jg,r(this,function(b){var c=b.station;b=b.oldStationId;for(var d=this.data.get("stationList").models,p=0;p<d.length;p++)if(d[p].e()==b){_.map(c,function(b,c){d[p]["_"+c]=
b});d[p].set(new un(c));break}this.data.get("stationList").refresh(d)}));z.c(Kg,r(this,function(b){for(var c=b.e(),d=this.data.get("stationList").models,p=0;p<d.length;p++)if(d[p].e()==c){d[p]=b;break}this.data.get("stationList").refresh(d);(d=this.data.get("currentStation"))&&d.e()==c&&this.data.set({currentStation:b},{silent:!0})}));var c=r(this,function(b){var c=!0===b.userInitiated,d=b.stationId;b=this.data.get("stationList");var p=b.detect(function(b){return b.e()==d});null!=p&&b.trigger("select",
p,c);this.data.set({safeToAutoPlayStation:!0})}),d=r(this,function(b){c(b)});z.c(ni,c);z.c(oi,d);z.c(Ji,r(this,function(){this.data.set({safeToAutoPlayStation:!1})}));z.c(vh,r(this,function(){this.data.set({safeToAutoPlayStation:!0})}));z.c(Ge,r(this,function(b){this.data.set({stationToAutoPlay:b})}));z.c(bk,r(this,function(){this.data.set({currentTrack:null,musicPlaying:!1,currentStation:null})}));z.c(ti,r(this,function(){this.data.set({currentTrack:null,musicPlaying:!1,currentStation:null,hasStations:!1,
selectedTrack:null})}));z.c(Ve,r(this,function(b){this.data.set({currentTrack:b,musicPlaying:!0});window.currentTrackMusicId=b.o();"function"==typeof window.handleTrackChanged&&window.handleTrackChanged(b.o())}));z.c(ef,r(this,function(b){this.data.set({trackProgress:b})}));z.c(ei,r(this,function(){this.data.set({musicPlaying:!0})}));z.c(gi,r(this,function(){this.data.set({musicPlaying:!1})}));z.c(ji,r(this,function(b){b="/song/thumbs-down/"+b;nz(b);oz(b)}));z.c(Wf,r(this,function(b){this.data.set({poisoned:b})}));
z.c(Sg,r(this,function(){this.data.set({readonly:!0})}));z.c(ml,r(this,function(b){this.data.set({currentVxReward:b})}));z.c(nl,r(this,function(){this.data.set({currentVxReward:null})}));pz("/song/move/");pz("/browse");S(fw,r(this,function(){this.xA.open()}));$(document).keydown(function(c){var d=b.data.get("keyPressed"),l=-1!=navigator.userAgent.indexOf("Firefox");if(!("INPUT"==c.target.tagName||"TEXTAREA"==c.target.tagName||null!=d&&d.which==c.which||(b.data.set({keyPressed:c}),b.data.get("siteLocked")||
c.ctrlKey||c.metaKey)))if("32"==c.keyCode){if(c.preventDefault(),b.data.get("playerBarEnabled")||b.data.get("audioAdPlaying"))b.data.get("musicPlaying")?z.b(gi):z.b(ei)}else if("39"==c.keyCode){if(c.preventDefault(),c=b.data.get("currentTrack"),null!=c&&b.data.get("playerBarEnabled"))return z.b(hi),!1}else!c.shiftKey||"187"!=c.keyCode&&"61"!=c.keyCode?"189"==c.keyCode||l&&"173"==c.keyCode?(c.preventDefault(),c=b.data.get("currentTrack"),null!=c&&b.data.get("playerBarEnabled")&&($(".thumbDownButton.indicator").length?
z.b(li,c.o()):z.b(ji,c.o()))):c.shiftKey&&"38"==c.keyCode?(c.preventDefault(),b.data.get("musicPlaying")&&b.data.get("playerBarEnabled")&&z.b(qi,100)):c.shiftKey&&"40"==c.keyCode?(c.preventDefault(),b.data.get("musicPlaying")&&b.data.get("playerBarEnabled")&&z.b(qi,0)):c.altKey&&"38"==c.keyCode?(c.preventDefault(),b.data.get("musicPlaying")&&b.data.get("playerBarEnabled")&&(c=Km()?0:Jm(),z.b(qi,c+10))):c.altKey&&"40"==c.keyCode&&(c.preventDefault(),b.data.get("musicPlaying")&&b.data.get("playerBarEnabled")&&
(c=Km()?0:Jm(),z.b(qi,c-10))):(c.preventDefault(),c=b.data.get("currentTrack"),null!=c&&b.data.get("playerBarEnabled")&&($(".thumbUpButton.indicator").length?z.b(ki,c.o()):z.b(ii,c.o())))});$(document).keyup(function(){b.data.set({keyPressed:null})});pn("ui-done")};
function UE(b){var c=/^(\w+)\s*(.*)$/,d=Backbone.View.prototype.delegateEvents;Backbone.View.prototype.delegateEvents=function(b){d.apply(this,arguments);b=b||this.events;for(var h in b){var l=h.match(c),p=l[1],l=l[2];"click"==p&&$(this.el).delegate(l,p,function(b){sn.globalClickPaused||R(Ju,b)})}};$(document).click(r(b,function(b){sn.globalClickPaused||R(Ju,b)}))}var VE={};
function S(b,c){var d=VE[b]||[];d.push(c);VE[b]=d;d=c._caller;if(null!=d){var e=d._eventTypes||[];e.push(b);d._eventTypes=e}}function $z(b,c){if(void 0!==c){var d=VE[c];if(d)for(var e=0;e<d.length;e++)d[e]._caller==b&&d.splice(e--,1)}else for(d=b._eventTypes,e=0;d&&e<d.length;e++)$z(b,d[e])}function R(b,c){var d=_.clone(VE[b]);if(d)for(var e=0;e<d.length;e++)try{d[e](c,b)}catch(h){trackJs.track(h),qe(h)}}
function LA(){sn.globalClickPaused=!0;clearTimeout(sn.globalClickPauseTimeout);sn.globalClickPauseTimeout=setTimeout(function(){sn.globalClickPaused=!1},1E3)}function mz(b){b=b.get("currentUser");return!0===om(Dl)&&(!b||b.p())}; })();
